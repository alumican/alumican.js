{"version":3,"sources":["../src/alumican/cmd/Parallel.ts","../src/alumican/scn/core/Waypoint.ts","../src/alumican/include.ts","../src/alumican/alm/util/Logger.ts","../src/alumican/alm/browser/QueryString.ts","../src/alumican/alm/util/Easing.ts","../src/alumican/alm/event/Event.ts","../src/alumican/alm/event/EventDispatcher.ts","../src/alumican/cmd/CommandState.ts","../src/alumican/cmd/CommandEvent.ts","../src/alumican/cmd/Command.ts","../src/alumican/cmd/CommandList.ts","../src/alumican/cmd/Break.ts","../src/alumican/cmd/Return.ts","../src/alumican/cmd/Log.ts","../src/alumican/cmd/Wait.ts","../src/alumican/cmd/Func.ts","../src/alumican/cmd/Listen.ts","../src/alumican/cmd/Tween.ts","../src/alumican/cmd/Serial.ts","../src/alumican/alm/geom/Vector2.ts","../src/alumican/alm/geom/Vector3.ts","../src/alumican/alm/geom/Rectangle.ts","../src/alumican/alm/util/Obj.ts","../src/alumican/alm/util/Arr.ts","../src/alumican/alm/util/Num.ts","../src/alumican/alm/util/Str.ts","../src/alumican/alm/util/Boxer.ts","../src/alumican/alm/util/Raffle.ts","../src/alumican/alm/util/Rotator.ts","../src/alumican/alm/util/Pager.ts","../src/alumican/alm/util/PagerEvent.ts","../src/alumican/alm/util/Timer.ts","../src/alumican/alm/util/TimerEvent.ts","../src/alumican/alm/util/ObjectPool.ts","../src/alumican/alm/util/CommandUtil.ts","../src/alumican/alm/value/EasingValue.ts","../src/alumican/alm/value/SpringValue.ts","../src/alumican/alm/value/SimpleAverage.ts","../src/alumican/alm/value/SimpleMovingAverage.ts","../src/alumican/alm/loader/AssetLoader.ts","../src/alumican/alm/loader/AssetLoaderEvent.ts","../src/alumican/alm/loader/FileQuery.ts","../src/alumican/alm/view/View.ts","../src/alumican/alm/view/ButtonBehavior.ts","../src/alumican/alm/view/SelectionBehavior.ts","../src/alumican/alm/browser/DeviceInfo.ts","../src/alumican/alm/browser/LocalStorage.ts","../src/alumican/alm/browser/KeyWatcher.ts","../src/alumican/alm/browser/KeyWatcherEvent.ts","../src/alumican/alm/browser/WindowWatcher.ts","../src/alumican/alm/browser/WindowWatcherEvent.ts","../src/alumican/scn/Scene.ts","../src/alumican/scn/SceneEvent.ts","../src/alumican/scn/SceneManager.ts","../src/alumican/scn/SceneManagerEvent.ts","../src/alumican/scn/SceneTransferInfo.ts","../src/alumican/scn/SceneState.ts","../src/alumican/scn/core/Direction.ts","../src/alumican/scn/core/RootScene.ts"],"names":["cmd","scn","alm","trace","messages","_i","arguments","length","util","Logger","info","apply","caller","throwWarn","target","message","condition","warnIf","throwError","errorIf","QueryString","url","this","set","prototype","search","index","indexOf","substring","location","hash","pair","pairs","split","i","getString","key","defaultValue","value","undefined","getInt","parseInt","isNaN","getFloat","parseFloat","getBool","getHash","LoggerLevel","NullLogging","verbose","prefix","warn","error","ConsoleLogging","console","debug","Array","slice","call","concat","log","DOMLogging","dom","html","print","line","join","innerHTML","innerText","ParallelLogging","loggers","n","setLevelByQuery","level","Silent","setNamespace","namespace","Verbose","logger","Info","Warn","Error","Easing","linear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","Math","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","createEaseInElastic","s","p","a","abs","asin","createEaseOutElastic","createEaseInOutElastic","easeInElastic","defaultEaseInElastic","easeOutElastic","defaultEaseOutElastic","easeInOutElastic","defaultEaseInOutElastic","createEaseInBack","createEaseOutBack","createEaseInOutBack","easeInBack","easeOutBack","defaultEaseOutBack","easeInOutBack","defaultEaseInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","defaultEaseInBack","event","Event","type","data","getType","getTarget","getData","setData","event_1","EventDispatcher","listeners","addEventListener","eventType","listener","numListeners","push","removeEventListener","splice","removeAllEventListener","hasEventListener","dispatchEvent","dispatchEventType","CommandState","CommandEvent","_super","eventTarget","__extends","clone","toString","COMPLETE","Command","executeFunction","interruptFunction","destroyFunction","_this","setExecuteFunction","setInterruptFunction","setDestroyFunction","state","Sleeping","self","parent","execute","Executing","getExecuteFunction","interrupt","Interrupting","getInterruptFunction","destroy","getDestroyFunction","notifyComplete","implExecuteFunction","command","implInterruptFunction","implDestroyFunction","func","getState","getParent","setParent","getSelf","CommandList","commands","addCommand","preProcess","getCommands","insertCommand","insertCommandAt","addCommandArray","insertCommandArray","insertCommandArrayAt","getLength","getCommandByIndex","numCommands","Func","Break","Return","Log","getMessages","setMessages","Wait","time","completeHandler","timerId","window","setTimeout","cancel","clearTimeout","getTime","setTime","args","eventDispatcher","getFunction","setFunction","getArguments","setArguments","getEventDispatcher","setEventDispatcher","getEventType","setEventType","Listen","Tween","to","from","duration","easing","onStart","onUpdate","onComplete","intervalHandler","elapsedTime","Date","startTime","progressTime","progressValue","tweenTarget","internalFrom","setInterval","updateInterval","clearInterval","timeRatio","value0","setTarget","getDuration","setDuration","getTo","setTo","getFrom","setFrom","getEasing","setEasing","getOnStart","setOnStart","getOnUpdate","setOnUpdate","getOnComplete","setOnComplete","getProgressTime","getProgressValue","getUpdateInterval","setUpdateInterval","milliseconds","Serial","currentCommand","position","next","isPaused","isCompleteOnPaused","implNotifyBreak","implNotifyReturn","getPosition","Parallel","completeCount","command_1","command_2","command_3","getCompleteCount","geom","Vector2","x","y","copyTo","point","getClone","zero","normalize","l","getSquareDistance","dx","dy","getDistance","Vector3","z","dz","Rectangle","width","height","rect","getTop","getBottom","getLeft","getRight","getTopLeft","getTopRight","getBottomLeft","getBottomRight","Obj","each","Object","keys","forEach","Arr","sequence","count","init","step","result","v","unique","list","filter","duplicated","lastIndexOf","roundRobin","list1","list2","callback","j","m","Num","map","srcMin","srcMax","dstMin","dstMax","clamp","random","min","max","randomInt","floor","dist","x1","y1","x2","y2","squared","radToDeg","radian","RAD2DEG","degToRad","degree","DEG2RAD","turn","PI3","PI2","PI4","PI5","PI6","PI_2","PI_3","PI_4","PI_6","Str","toTimeString","hours","minutes","seconds","h","substr","Align","ScaleMode","Boxer","resize","bounds","scaleMode","align","ShowAll","Middle_Center","tx","ty","tw","th","bx","by","bw","bh","NoBorder","ratioW","ratioH","ratio","ExactFit","Top_Left","Middle_Left","Bottom_Left","Top_Right","Middle_Right","Bottom_Right","Top_Center","Bottom_Center","Raffle","values","initValues","restValues","restCount","isEmpty","onCheck","isAutoResetEnabled","reset","get","add","getRestCount","getIsEmply","getIsAutoResetEnabled","setIsAutoResetEnabled","enabled","createIndices","Rotator","angle","velocity","setAngle","setVelocity","getAngle","getVelocity","update","getSin","getCos","getTan","tan","getMagnitude","getVector","xy","Pager","isLoopEnabled","itemCount","itemIds","itemIndexById","onChange","onPrev","onNext","setupById","ids","setup","setupByCount","newItemIndex","oldItemIndex","newItemId","oldItemId","gotoByIndex","itemIndex","useTransition","dispatchPagerEvent","PagerEvent","CHANGE","gotoById","itemId","hasOwnProperty","prev","PREV","NEXT","getIsLoopEnabled","setIsLoopEnabled","getNewItemIndex","getOldItemIndex","getItemCount","getNewItemId","getOldItemId","getItemIds","Timer","interval","repeatCount","timerHandler","tStartTime","getCurrentTime","elapsedCount","isCompleted","stop","tInterval","startInterval","dispatch","TimerEvent","TICK","isRunning","tId","start","tRestTime","stopInterval","restart","valueOf","getIsRunning","getInterval","getElapsedTime","getRestTime","getElapsedCount","getRepeatCount","setRepeatCount","ObjectPool","onRequireItem","onDestroyItem","initCount","growthCount","items","getItem","unshift","returnItem","item","reduce","shift","CommandUtil","single","EasingValue","initValue","tolerance","SpringValue","spring","friction","acceleration","SimpleAverage","_value","_count","SimpleMovingAverage","maxCount","_maxCount","oldest","latest","loader","AssetLoader","fileLoadCompleteHandler","query","content","isLoading","isLoadComplete","param","onLoad","fileLoadErrorHandler","onError","isLoading_","currentCount","totalCount","loadingQueries","loadingQueryIndex","queriesByQueryId","queriesByUrl","handlersByType","require","id","addQuery","FileQuery","String","load","AssetLoaderEvent","PROGRESS","query_1","handler","addHandler","addLoadUpdateListener","removeLoadUpdateListener","addLoadCompleteListener","removeLoadCompleteListener","getQueryByQueryId","queryId","getQueryByUrl","getCurrentCount","getTotalCount","getContentByUrl","getContentByQueryId","textureId","progress","loadedCount","ERROR","view_1","View","view","viewCount","name","autoHideWithInit","isInitializing","isInitialized","isReadying","isReadied","isShowing","isShown","isHiding","viewsById","initialize","implInitialize","hide","ready","implReady","finalize","implFinalize","show","getShowCommand","getHideCommand","showCommand","hideCommand","implShow","implHide","getIsInitializing","getIsInitialized","getIsReadying","getIsReadied","getIsShowing","getIsShown","getIsHiding","getIsHidden","getId","getView","getName","setName","getAutoHideWithInit","setAutoHideWithInit","getViewById","ButtonBehavior","hitArea","isHoverCursorEnabled","isPreventDefaultEnabled","isStopPropagationEnabled","mouseOverHandler","preventDefault","stopPropagation","over","applyMouseCursor","mouseOutHandler","out","mouseDownHandler","down","mouseUpHandler","up","clickHandler","click","touchStartHandler","touchEndHandler","touchCancelHandler","isEnabled","isOver","isDown","isOverInternal","isDownInternal","defaultMouseCursor","setHitArea","implButtonOver","_out","checkEnabled","implButtonOut","implButtonDown","_up","implButtonUp","implButtonClick","on","off","getIsEnabled","setIsEnabled","implButtonChangeEnabled","getIsOver","getIsDown","getHitArea","clearHitArea","getIsPreventDefaultEnabled","setIsPreventDefaultEnabled","getIsStopPropagationEnabled","setIsStopPropagationEnabled","getIsHoverCursorEnabled","setIsHoverCursorEnabled","style","cursor","SelectionBehavior","select","isSelected","implSelectionChanged","deselect","getIsSelected","browser","DeviceInfo","u","navigator","userAgent","toLowerCase","isTablet","isMobile","isDesktop","isIOS","isAndroid","isIE","isEdge","isChrome","isSafari","isFireFox","isOpera","isUnknownBrowser","isTouchEnabled","ontouchstart","isDownloadEnabled","devicePixelRatio","isRetina","getIsDesktop","getIsTablet","getIsMobile","getIsIOS","getIsAndroid","getIsIE","getIsEdge","getIsChrome","getIsSafari","getIsFireFox","getIsOpera","getIsUnknownBrowser","getIsTouchEnabled","getIsDownloadEnabled","getIsRetina","getDevicePixelRatio","getDpi","dpi","div","document","createElement","setAttribute","body","appendChild","offsetHeight","removeChild","LocalStorage","save","expiredAt","isAvailable","record","JSON","stringify","localStorage","setItem","saveWithTerm","parse","removeItem","remove","isAvailable_","toMilliseconds","dates","KeyCode","KeyWatcher","windowKeyDownHandler","windowKeyUpHandler","getIsAnyKeyPressed","pressedKeyCount","getIsKeyPressed","keyCode","isKeyPressedByKeyCode","getIsContinuousPressEnabled","isContinuousPressEnabled","setIsContinuousPressEnabled","KeyWatcherEvent","KEY_DOWN","KEY_UP","isLongPressed","originalEvent","altKey","ctrlKey","shiftKey","WindowWatcher","windowResizeHandler","windowScrollHandler","windowWidth","innerWidth","windowHeight","innerHeight","scrollTop","pageYOffset","documentElement","scrollBottom","calcScrolledPosition","calcScrolledPositionRatio","WindowWatcherEvent","RESIZE","getWindow","getScrollTop","getScrollBottom","getWindowWidth","getWindowHeight","getIsMobileOrientationResize","isMobileOrientationResize","setIsMobileOrientationResize","windowOrientationChangeHandler","SCROLL","Scene","SceneState","Idling","childrenByName","numChildren","isEntered","onUnload","onArrive","onLeave","onAscend","onDescend","addChild","child","childName","addChildren","children","addedChildren","removeChildren","removedChildren","removeAllChildren","name_1","contains","getLastState","lastState","getChildByName","getNumChildren","getManager","getPath","manager","names","scene","getScenePathByNames","gotoScene","path","goto","_load","transferInfo","Loading","SceneEvent","LOAD","implOnLoad","LOAD_COMPLETE","_unload","Unloading","UNLOAD","implOnUnload","UNLOAD_COMPLETE","_arrive","Arriving","ARRIVE","implOnArrive","ARRIVE_COMPLETE","_leave","Leaving","LEAVE","implOnLeave","LEAVE_COMPLETE","_ascend","Ascending","ASCEND","implOnAscend","ASCEND_COMPLETE","_descend","Descending","DESCEND","implOnDescend","DESCEND_COMPLETE","SceneManager","sceneLoadCompleteHandler","currentScene","eventIndex","checkState","sceneUnloadCompleteHandler","sceneArriveCompleteHandler","sceneLeaveCompleteHandler","sceneAscendCompleteHandler","sceneDescendCompleteHandler","root","core","RootScene","waypoints","waypointIndex","transferId","resolvePath","getDestinationPath","newWaypoints","createWaypoints","Waypoint","isDestinationChanged","setDirection","printWaypoint","SceneTransferInfo","SceneManagerEvent","TRANSFER_START","normalized","name_2","pop","addSceneAt","createScene","success","getSceneNamesByPath","name_3","getRoot","getSceneByPath","getSceneLevelByNames","departurePath","destinationPath","departureNames","destinationNames","turningPath","turningLevel","turningNames","prevPath","getLevel","Direction","Sibling","Ascend","name_4","_setFrom","Descend","_setTo","getSceneStateString","tmpTransferId","getTransferId","TRANSFER_COMPLETE","currentWaypoint","relay","getDeparturePath","getDirectionString","direction","Static","getVersion"],"mappings":"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","file":"alumican.min.js","sourcesContent":["/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class Parallel extends CommandList {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper(...commands);\n\t\t\tthis.completeCount = 0;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tif (++this.completeCount >= this.getLength()) {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t};\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.completeCount = 0;\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.addEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.execute();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.interrupt();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsuper.implInterruptFunction(command);\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsuper.implDestroyFunction(command);\n\t\t}\n\n\t\tprotected implNotifyBreak():void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tif (command.getState() == CommandState.Executing) {\n\t\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\t\tcommand.interrupt();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implNotifyReturn():void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tif (command.getState() == CommandState.Executing) {\n\t\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\t\tcommand.interrupt();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.destroy();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected getCompleteCount():number { return this.completeCount; }\n\t\tprivate completeCount:number;\n\n\t\tprivate currentCommand:Command;\n\t\tprivate isPaused:boolean;\n\t\tprivate isCompleteOnPaused:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport class Waypoint {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(path:string, level:number) {\n\t\t\tthis.path = path;\n\t\t\tthis.level = level;\n\t\t\tthis.from = Direction.Static;\n\t\t\tthis.to = Direction.Static;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getPath():string {\n\t\t\treturn this.path;\n\t\t}\n\n\t\tpublic getLevel():number {\n\t\t\treturn this.level;\n\t\t}\n\n\t\tpublic getFrom():Direction {\n\t\t\treturn this.from;\n\t\t}\n\n\t\tpublic getTo():Direction {\n\t\t\treturn this.to;\n\t\t}\n\n\t\tpublic _setFrom(from:Direction):void {\n\t\t\tthis.from = from;\n\t\t}\n\n\t\tpublic _setTo(to:Direction):void {\n\t\t\tthis.to = to;\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[Waypoint] path = \\'' + this.path + '\\', level = ' + this.level + ', from = ' + getDirectionString(this.from) + ', to = ' + getDirectionString(this.to);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate path:string;\n\t\tprivate level:number;\n\t\tprivate from:Direction;\n\t\tprivate to:Direction;\n\t}\n}","/* ---------- dependency ---------- */\n\n/* ---------- project ---------- */\n/// <reference path='alm/browser/QueryString.ts' />\n/// <reference path='alm/util/Logger.ts' />\n/// <reference path='alm/util/Easing.ts' />\n\n/// <reference path='alm/event/Event.ts' />\n/// <reference path='alm/event/EventDispatcher.ts' />\n\n/// <reference path='cmd/CommandState.ts' />\n/// <reference path='cmd/CommandEvent.ts' />\n/// <reference path='cmd/Command.ts' />\n/// <reference path='cmd/CommandList.ts' />\n/// <reference path='cmd/Break.ts' />\n/// <reference path='cmd/Return.ts' />\n/// <reference path='cmd/Log.ts' />\n/// <reference path='cmd/Wait.ts' />\n/// <reference path='cmd/Func.ts' />\n/// <reference path='cmd/Listen.ts' />\n/// <reference path='cmd/Tween.ts' />\n/// <reference path='cmd/Serial.ts' />\n/// <reference path='cmd/Parallel.ts' />\n\n/// <reference path='alm/geom/Vector2.ts' />\n/// <reference path='alm/geom/Vector3.ts' />\n/// <reference path='alm/geom/Rectangle.ts' />\n/// <reference path='alm/util/Hash.ts' />\n/// <reference path='alm/util/Obj.ts' />\n/// <reference path='alm/util/Arr.ts' />\n/// <reference path='alm/util/Num.ts' />\n/// <reference path='alm/util/Str.ts' />\n/// <reference path='alm/util/Boxer.ts' />\n/// <reference path='alm/util/Raffle.ts' />\n/// <reference path='alm/util/Rotator.ts' />\n/// <reference path='alm/util/Pager.ts' />\n/// <reference path='alm/util/PagerEvent.ts' />\n/// <reference path='alm/util/Timer.ts' />\n/// <reference path='alm/util/TimerEvent.ts' />\n/// <reference path='alm/util/ObjectPool.ts' />\n/// <reference path='alm/util/CommandUtil.ts' />\n/// <reference path='alm/value/EasingValue.ts' />\n/// <reference path='alm/value/SpringValue.ts' />\n/// <reference path='alm/value/SimpleAverage.ts' />\n/// <reference path='alm/value/SimpleMovingAverage.ts' />\n/// <reference path='alm/loader/AssetLoader.ts' />\n/// <reference path='alm/loader/AssetLoaderEvent.ts' />\n/// <reference path='alm/loader/FileQuery.ts' />\n/// <reference path='alm/loader/IFileHandler.ts' />\n/// <reference path='alm/view/View.ts' />\n/// <reference path='alm/view/ButtonBehavior.ts' />\n/// <reference path='alm/view/IButton.ts' />\n/// <reference path='alm/view/SelectionBehavior.ts' />\n/// <reference path='alm/view/ISelection.ts' />\n/// <reference path='alm/browser/DeviceInfo.ts' />\n/// <reference path='alm/browser/LocalStorage.ts' />\n/// <reference path='alm/browser/KeyWatcher.ts' />\n/// <reference path='alm/browser/KeyWatcherEvent.ts' />\n/// <reference path='alm/browser/WindowWatcher.ts' />\n/// <reference path='alm/browser/WindowWatcherEvent.ts' />\n\n/// <reference path='scn/Scene.ts' />\n/// <reference path='scn/SceneEvent.ts' />\n/// <reference path='scn/SceneManager.ts' />\n/// <reference path='scn/SceneManagerEvent.ts' />\n/// <reference path='scn/SceneTransferInfo.ts' />\n/// <reference path='scn/SceneState.ts' />\n/// <reference path='scn/core/Direction.ts' />\n/// <reference path='scn/core/RootScene.ts' />\n/// <reference path='scn/core/Waypoint.ts' />\n\nnamespace alm {\n\n\t// Library version info\n\texport function getVersion():string {\n\t\treturn '0.0.1';\n\t}\n\n\t// Credit info\n\tconst style:string = 'color:#999;';\n\tconst print:Function = console.debug;\n\tprint('%c+ + + + + + + + + + + + + + + + + + + + + + + + + +', style);\n\tprint('%c+ alumican.js', style);\n\tprint('%c+ version ' + getVersion(), style);\n\tprint('%c+ http://alumican.net', style);\n\tprint('%c+ https://github.com/alumican/alumican.js', style);\n\tprint('%c+ + + + + + + + + + + + + + + + + + + + + + + + + +', style);\n\tprint('');\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport enum LoggerLevel {\n\t\tVerbose = 0,\n\t\tInfo = 1,\n\t\tWarn = 2,\n\t\tError = 3,\n\t\tSilent = 4,\n\t}\n\n\n\n\n\n\texport interface ILogging {\n\n\t\tverbose(prefix:string, messages:any[]):void;\n\t\tinfo(prefix:string, messages:any[]):void;\n\t\twarn(prefix:string, messages:any[]):void;\n\t\terror(prefix:string, messages:any[]):void;\n\t}\n\n\n\n\n\n\texport class NullLogging implements ILogging {\n\n\t\tpublic verbose(prefix:string, messages:any[]):void {\n\t\t}\n\n\t\tpublic info(prefix:string, messages:any[]):void {\n\t\t}\n\n\t\tpublic warn(prefix:string, messages:any[]):void {\n\t\t}\n\n\t\tpublic error(prefix:string, messages:any[]):void {\n\t\t}\n\t}\n\n\n\n\n\n\texport class ConsoleLogging implements ILogging {\n\n\t\tpublic verbose(prefix:string, messages:any[]):void {\n\t\t\tconsole.debug.apply(console, Array.prototype.slice.call([prefix].concat(messages)));\n\t\t}\n\n\t\tpublic info(prefix:string, messages:any[]):void {\n\t\t\tconsole.log.apply(console, Array.prototype.slice.call([prefix].concat(messages)));\n\t\t}\n\n\t\tpublic warn(prefix:string, messages:any[]):void {\n\t\t\tconsole.warn.apply(console, Array.prototype.slice.call([prefix].concat(messages)));\n\t\t}\n\n\t\tpublic error(prefix:string, messages:any[]):void {\n\t\t\tconsole.error.apply(console, Array.prototype.slice.call([prefix].concat(messages)));\n\t\t}\n\t}\n\n\n\n\n\n\texport class DOMLogging implements ILogging {\n\n\t\tconstructor(dom:HTMLElement, html:boolean) {\n\t\t\tthis.dom = dom;\n\t\t\tthis.html = html;\n\t\t}\n\n\t\tpublic verbose(prefix:string, messages:any[]):void {\n\t\t\tthis.print(prefix, messages);\n\t\t}\n\n\t\tpublic info(prefix:string, messages:any[]):void {\n\t\t\tthis.print(prefix, messages);\n\t\t}\n\n\t\tpublic warn(prefix:string, messages:any[]):void {\n\t\t\tthis.print(prefix, messages);\n\t\t}\n\n\t\tpublic error(prefix:string, messages:any[]):void {\n\t\t\tthis.print(prefix, messages);\n\t\t}\n\n\t\tprivate print(prefix:string, messages:any[]):void {\n\t\t\tconst line:string = prefix + messages.join(', ');\n\t\t\tif (this.html) {\n\t\t\t\tthis.dom.innerHTML = line + '<br>\\n' + this.dom.innerHTML;\n\t\t\t} else {\n\t\t\t\tthis.dom.innerText = line + '\\n' + this.dom.innerText;\n\t\t\t}\n\t\t}\n\n\t\tprivate dom:HTMLElement;\n\t\tprivate html:boolean;\n\t}\n\n\n\n\n\n\texport class ParallelLogging implements ILogging {\n\n\t\tconstructor(loggers:ILogging[]) {\n\t\t\tthis.loggers = loggers;\n\t\t}\n\n\t\tpublic verbose(prefix:string, messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].verbose(prefix, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic info(prefix:string, messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].info(prefix, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic warn(prefix:string, messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].warn(prefix, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic error(prefix:string, messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].error(prefix, messages);\n\t\t\t}\n\t\t}\n\n\t\tprivate loggers:ILogging[];\n\t}\n\n\n\n\n\n\texport class Logger {\n\n\t\tpublic static level:number = LoggerLevel.Verbose;\n\t\tpublic static logger:ILogging = new ConsoleLogging();\n\t\tprivate static namespace:string = '';\n\n\t\tpublic static setLevelByQuery(key:string):void {\n\t\t\tconst level:number = new QueryString().getInt(key, LoggerLevel.Silent);\n\t\t\tLogger.level = isNaN(level) ? LoggerLevel.Silent : level;\n\t\t}\n\n\t\tpublic static setNamespace(namespace:string):void {\n\t\t\tLogger.namespace = namespace != '' ? (namespace + '#') : '';\n\t\t}\n\n\t\tpublic static verbose(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Verbose) Logger.logger.verbose('[' + Logger.namespace + 'Verbose] ', messages);\n\t\t}\n\n\t\tpublic static info(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Info) Logger.logger.info('[' + Logger.namespace + 'Info   ] ', messages);\n\t\t}\n\n\t\tpublic static warn(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Warn) Logger.logger.warn('[' + Logger.namespace + 'Warn   ] ', messages);\n\t\t}\n\n\t\tpublic static error(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Error) Logger.logger.error('[' + Logger.namespace + 'Error  ] ', messages);\n\t\t}\n\n\t\tpublic static warnIf(target:any, message:string, condition:boolean = true):void {\n\t\t\tif (Logger.level <= LoggerLevel.Warn && condition) Logger.logger.warn('[' + Logger.namespace + 'Warn   ] ', [message + ' : ' + target]);\n\t\t}\n\n\t\tpublic static errorIf(target:any, message: string, condition:boolean = true):void {\n\t\t\tif (Logger.level <= LoggerLevel.Error && condition) Logger.logger.error('[' + Logger.namespace + 'Error  ] ', [message + ' : ' + target]);\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}\n\nfunction trace(...messages:any[]):void {\n\talm.util.Logger.info.apply(trace.caller, arguments);\n}\n\nfunction throwWarn(target:any, message:string, condition:boolean = true):void {\n\talm.util.Logger.warnIf.apply(null, arguments);\n}\n\nfunction throwError(target:any, message:string, condition:boolean = true):void {\n\talm.util.Logger.errorIf.apply(null, arguments);\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class QueryString {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(url:string = '') {\n\t\t\tthis.set(url);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(url:string = ''):void {\n\t\t\t// normalize url\n\t\t\tlet search:string = '';\n\t\t\tif (url != '') {\n\t\t\t\tconst index:number = url.indexOf('?');\n\t\t\t\tif (index != -1) {\n\t\t\t\t\tsearch = url.substring(index);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsearch = location.search;\n\t\t\t}\n\t\t\t// parse query\n\t\t\tthis.hash = {};\n\t\t\tconst pairs:string[] = search.substring(1).split('&');\n\t\t\tlet pair:string[];\n\t\t\tfor(let i:number = 0; pairs[i]; ++i) {\n\t\t\t\tpair = pairs[i].split('=');\n\t\t\t\tthis.hash[pair[0]] = pair[1];\n\t\t\t}\n\t\t}\n\n\t\t// 'abc' -> 'abc'\n\t\tpublic getString(key:string, defaultValue:string):string {\n\t\t\tconst value:string = this.hash[key];\n\t\t\treturn value === undefined ? defaultValue : value;\n\t\t}\n\n\t\t// '123' -> 123\n\t\tpublic getInt(key:string, defaultValue:number):number {\n\t\t\tconst value:number = parseInt(this.hash[key]);\n\t\t\treturn isNaN(value) ? defaultValue : value;\n\t\t}\n\n\t\t// '1.23' -> 1.23\n\t\tpublic getFloat(key:string, defaultValue:number):number {\n\t\t\tconst value:number = parseFloat(this.hash[key]);\n\t\t\treturn isNaN(value) ? defaultValue : value;\n\t\t}\n\n\t\t// '0' -> false, otherwise true\n\t\tpublic getBool(key:string, defaultValue:boolean):boolean {\n\t\t\tconst value:string = this.hash[key];\n\t\t\treturn value === undefined ? defaultValue : (<any>value == true);\n\t\t}\n\n\t\tpublic getHash():Hash<string> {\n\t\t\treturn this.hash;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate hash:Hash<string>;\n\t}\n}","namespace alm.util {\n\n\texport type EasingFunction = (t:number, b:number, c:number, d:number)=>number;\n\n\texport class Easing {\n\n\t\tpublic static linear(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * t / d + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuad(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuad(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * (t /= d) * (t - 2) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuad(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t + b;\n\t\t\treturn (-c) / 2 * ((--t) * (t - 2) - 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInCubic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutCubic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * ((t = t / d - 1) * t * t + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutCubic(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t + b;\n\t\t\treturn c / 2 * ((t -= 2) * t * t + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuart(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuart(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * ((t = t / d - 1) * t * t * t - 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuart(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\n\t\t\treturn (-c) / 2 * ((t -= 2) * t * t * t - 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuint(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuint(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuint(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;\n\t\t\treturn c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * Math.cos(t / d * (Math.PI / 2)) + c + b;\n\t\t}\n\n\t\tpublic static easeOutSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * Math.sin(t / d * (Math.PI / 2)) + b;\n\t\t}\n\n\t\tpublic static easeInOutSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == 0) return b;\n\t\t\treturn c * Math.pow(2, 10 * (t / d - 1)) + b;\n\t\t}\n\n\t\tpublic static easeOutExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == d) return b + c;\n\t\t\treturn c * (-Math.pow(2, -10 * t / d) + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == 0) return b;\n\t\t\tif (t == d) return b + c;\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n\t\t\treturn c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInCirc(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n\t\t}\n\n\t\tpublic static easeOutCirc(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n\t\t}\n\n\t\tpublic static easeInOutCirc(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return (-c) / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n\t\t\treturn c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static createEaseInElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d) == 1) return b + c;\n\t\t\t\tif (p == 0) p = d * 0.3;\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\treturn (-a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p )) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseOutElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d) == 1) return b + c;\n\t\t\t\tif (p == 0) p = d * 0.3;\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseInOutElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d / 2) == 2) return b + c;\n\t\t\t\tif (p == 0) p = d * (0.3 * 1.5);\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\tif (t < 1) return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n\t\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeOutElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseOutElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeInOutElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInOutElastic(t, b, c, d);\n\t\t}\n\n\t\tprivate static defaultEaseInElastic:EasingFunction = Easing.createEaseInElastic();\n\t\tprivate static defaultEaseOutElastic:EasingFunction = Easing.createEaseOutElastic();\n\t\tprivate static defaultEaseInOutElastic:EasingFunction = Easing.createEaseInOutElastic();\n\n\n\n\n\n\t\tpublic static createEaseInBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\treturn c * (t /= d) * t * ((s + 1) * t - s) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseOutBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\treturn c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseInOutBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tif ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n\t\t\t\treturn c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeOutBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseOutBack(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeInOutBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInOutBack(t, b, c, d);\n\t\t}\n\n\t\tprivate static defaultEaseInBack:EasingFunction = Easing.createEaseInBack();\n\t\tprivate static defaultEaseOutBack:EasingFunction = Easing.createEaseOutBack();\n\t\tprivate static defaultEaseInOutBack:EasingFunction = Easing.createEaseInOutBack();\n\n\n\n\n\n\t\tpublic static easeInBounce(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c - Easing.easeOutBounce(d - t, 0, c, d) + b;\n\t\t}\n\n\t\tpublic static easeOutBounce(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d) < (1 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * t * t) + b;\n\t\t\t} else if (t < (2 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\n\t\t\t} else if (t < (2.5 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\n\t\t\t} else {\n\t\t\t\treturn c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInOutBounce(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t < d / 2) return Easing.easeInBounce(t * 2, 0, c, d) * 0.5 + b;\n\t\t\treturn Easing.easeOutBounce(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n\t\t}\n\t}\n}","/// <reference path='../../include.ts' />\r\n\r\nnamespace alm.event {\r\n\r\n\texport class Event {\r\n\r\n\t\t// --------------------------------------------------\r\n\t\t//\r\n\t\t// CONSTRUCTOR\r\n\t\t//\r\n\t\t// --------------------------------------------------\r\n\r\n\t\tconstructor(type:string, target:Object, data:any = null) {\r\n\t\t\tthis.type = type;\r\n\t\t\tthis.target = target;\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\r\n\t\tpublic getType():string {\r\n\t\t\treturn this.type;\r\n\t\t}\r\n\r\n\t\tpublic getTarget():Object {\r\n\t\t\treturn this.target;\r\n\t\t}\r\n\r\n\t\tpublic getData():any {\r\n\t\t\treturn this.data;\r\n\t\t}\r\n\r\n\t\tpublic setData(data:any):void {\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\t\t// --------------------------------------------------\r\n\t\t//\r\n\t\t// MEMBER\r\n\t\t//\r\n\t\t// --------------------------------------------------\r\n\r\n\t\tprivate type:string;\r\n\t\tprivate target:Object;\r\n\t\tprivate data:any;\r\n\t}\r\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.event {\n\n\timport Logger = alm.util.Logger;\n\texport type EventListener = (event:Event) => void;\n\n\texport class EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:any = null) {\n\t\t\tthis.target = target || this;\n\t\t\tthis.listeners = {};\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addEventListener(eventType:string, listener:EventListener):void {\n\t\t\tif (typeof(listener) != 'function') {\n\t\t\t\tLogger.warn('[EventDispatcher] addEventListener : listener is not function, eventType = \\'' + eventType + '\\', listener = ' + listener);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet listeners:EventListener[] = this.listeners[eventType];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tif (listener == listeners[i]) return;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.listeners[eventType] = listeners = [];\n\t\t\t}\n\t\t\tlisteners.push(listener);\n\t\t}\n\n\t\tpublic removeEventListener(eventType:string, listener:EventListener):void {\n\t\t\tif (typeof(listener) != 'function') {\n\t\t\t\tLogger.warn('[EventDispatcher] removeEventListener : listener is not function, eventType = \\'' + eventType + '\\', listener = ' + listener);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet listeners:EventListener[] = this.listeners[eventType];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tif (listener == listeners[i]) {\n\t\t\t\t\t\tlisteners.splice(i,  1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (listeners.length == 0) {\n\t\t\t\t\tdelete this.listeners[eventType];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic removeAllEventListener(eventType:string = null):void {\n\t\t\tif (eventType) {\n\t\t\t\tdelete this.listeners[eventType];\n\t\t\t} else {\n\t\t\t\tthis.listeners = {};\n\t\t\t}\n\t\t}\n\n\t\tpublic hasEventListener(eventType:string):boolean {\n\t\t\treturn this.listeners[eventType] != null;\n\t\t}\n\n\t\tpublic dispatchEvent(event:Event):void {\n\t\t\tlet listeners:EventListener[] = this.listeners[event.getType()];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tlisteners[i].call(this.target, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic dispatchEventType(eventType:string, target:Object = null, data:any = null):void {\n\t\t\tthis.dispatchEvent(new Event(eventType, target, data));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:any;\n\t\tprivate listeners:util.Hash<EventListener[]>;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport enum CommandState {\n\t\tSleeping     = 0,\n\t\tExecuting    = 1,\n\t\tInterrupting = 2,\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class CommandEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static COMPLETE:string = 'complete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():CommandEvent {\n\t\t\treturn new CommandEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[CommandEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Command extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(executeFunction:Function = null, interruptFunction:Function = null, destroyFunction:Function = null) {\n\t\t\tsuper();\n\n\t\t\tthis.setExecuteFunction(executeFunction);\n\t\t\tthis.setInterruptFunction(interruptFunction);\n\t\t\tthis.setDestroyFunction(destroyFunction);\n\n\t\t\tthis.state = CommandState.Sleeping;\n\t\t\tthis.self = this;\n\t\t\tthis.parent = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic execute():void {\n\t\t\tif (this.state > CommandState.Sleeping) {\n\t\t\t\tthrow new Error('[Command.execute] + Command is already executing.');\n\t\t\t}\n\t\t\tthis.state = CommandState.Executing;\n\t\t\tthis.getExecuteFunction().call(this, this);\n\t\t}\n\n\t\tpublic interrupt():void {\n\t\t\tif (this.state == CommandState.Executing) {\n\t\t\t\tthis.state = CommandState.Interrupting;\n\t\t\t\tthis.getInterruptFunction().call(this, this);\n\t\t\t}\n\t\t}\n\n\t\tpublic destroy():void {\n\t\t\tthis.state = CommandState.Sleeping;\n\t\t\tthis.getDestroyFunction().call(this, this);\n\t\t\tthis.parent = null;\n\t\t\tthis.executeFunction = null;\n\t\t\tthis.interruptFunction = null;\n\t\t\tthis.destroyFunction = null;\n\t\t}\n\n\t\tprotected notifyComplete():void {\n\t\t\tswitch (this.state) {\n\t\t\t\tcase CommandState.Sleeping:\n\t\t\t\t\tbreak;\n\t\t\t\tcase CommandState.Executing:\n\t\t\t\t\tthis.dispatchEvent(new CommandEvent(CommandEvent.COMPLETE, this));\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tbreak;\n\t\t\t\tcase CommandState.Interrupting:\n\t\t\t\t\tthis.dispatchEvent(new CommandEvent(CommandEvent.COMPLETE, this));\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.notifyComplete();\n\t\t}\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getExecuteFunction():Function { return this.executeFunction || this.implExecuteFunction };\n\t\tpublic setExecuteFunction(func:Function):void { this.executeFunction = func; }\n\t\tprivate executeFunction:Function;\n\n\t\tpublic getInterruptFunction():Function { return this.interruptFunction || this.implInterruptFunction };\n\t\tpublic setInterruptFunction(func:Function):void { this.interruptFunction = func; }\n\t\tprivate interruptFunction:Function;\n\n\t\tpublic getDestroyFunction():Function { return this.destroyFunction || this.implDestroyFunction };\n\t\tpublic setDestroyFunction(func:Function):void { this.destroyFunction = func; }\n\t\tprivate destroyFunction:Function;\n\n\t\tpublic getState():CommandState { return this.state; }\n\t\tprivate state:CommandState;\n\n\t\tpublic getParent():Command { return this.parent; }\n\t\tpublic setParent(parent:Command):void { this.parent = parent; }\n\t\tprivate parent:Command;\n\n\t\tpublic getSelf():Command { return this.self; }\n\t\tprivate self:Command;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport abstract class CommandList extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper();\n\t\t\tthis.commands = [];\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tif (commands.length > 0) {\n\t\t\t\tthis.preProcess(commands);\n\t\t\t\tthis.commands = this.getCommands().concat(<Command[]>commands);\n\t\t\t}\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommandAt(0, ...commands);\n\t\t}\n\n\t\tprotected insertCommandAt(index:number, ...commands:(Command|Function)[]):void {\n\t\t\tif (commands.length > 0) {\n\t\t\t\tthis.preProcess(commands);\n\t\t\t\tArray.prototype.splice.apply(this.getCommands(), (<any[]>[index, 0]).concat(commands));\n\t\t\t}\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommand(...commands);\n\t\t}\n\n\t\tprotected insertCommandArrayAt(index:number, commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommandAt(index, ...commands);\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn this.commands.length;\n\t\t}\n\n\t\tpublic getCommandByIndex(index:number):Command { return this.commands[index]; }\n\t\tpublic getCommands():Command[] { return this.commands; }\n\n\t\tprivate preProcess(commands:(Command|Function)[]):void {\n\t\t\tconst numCommands:number = commands.length;\n\t\t\tlet command:Command|Function;\n\t\t\tfor (let i:number = 0; i < numCommands; ++i) {\n\t\t\t\tcommand = commands[i];\n\t\t\t\tif (typeof(command) == 'function') commands[i] = command = new Func(command);\n\t\t\t\tcommand.setParent(this);\n\t\t\t}\n\t\t}\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\t\tprotected abstract implNotifyBreak():void;\n\t\tprotected abstract implNotifyReturn():void;\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate commands:Command[];\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Break extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconst func:Function = this.getParent()['notifyBreak'];\n\t\t\tif (func) func();\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Return extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Log extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...messages:any[]) {\n\t\t\tsuper();\n\t\t\tthis.messages = messages;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconsole.log.apply(console, Array.prototype.slice.call(this.messages));\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.messages = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getMessages():any[] { return this.messages; }\n\t\tpublic setMessages(messages:any[]):void { this.messages = messages; }\n\t\tprivate messages:any[];\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Wait extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(time:number = 1000) {\n\t\t\tsuper();\n\t\t\tthis.time = time;\n\t\t\tthis.timerId = -1;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.timerId = window.setTimeout(this.completeHandler, this.time);\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprivate cancel():void {\n\t\t\tif (this.timerId != -1) {\n\t\t\t\tclearTimeout(this.timerId);\n\t\t\t\tthis.timerId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTime():number { return this.time; }\n\t\tpublic setTime(time:number):void { this.time = time; }\n\t\tprivate time:number;\n\n\t\tprivate timerId:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Func extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(func:Function = null, args:any[] = [], eventDispatcher:EventDispatcher = null, eventType:string = null) {\n\t\t\tsuper();\n\t\t\tthis.func = func;\n\t\t\tthis.args = args;\n\t\t\tthis.eventDispatcher = eventDispatcher;\n\t\t\tthis.eventType = eventType;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.addEventListener(this.eventType, this.completeHandler);\n\t\t\t\tthis.func(...this.args);\n\t\t\t} else {\n\t\t\t\tthis.func(...this.args);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\n\t\t\tthis.func = null;\n\t\t\tthis.args = null;\n\t\t\tthis.eventDispatcher = null;\n\t\t\tthis.eventType = null;\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getFunction():Function { return this.func; }\n\t\tpublic setFunction(func:Function):void { this.func = func; }\n\t\tprivate func:Function;\n\n\t\tpublic getArguments():any[] { return this.args; }\n\t\tpublic setArguments(args:any[]):void { this.args = args; }\n\t\tprivate args:any[];\n\n\t\tpublic getEventDispatcher():EventDispatcher { return this.eventDispatcher; }\n\t\tpublic setEventDispatcher(eventDispatcher:EventDispatcher):void { this.eventDispatcher = eventDispatcher; }\n\t\tprivate eventDispatcher:EventDispatcher;\n\n\t\tpublic getEventType():string { return this.eventType; }\n\t\tpublic setEventType(eventType:string):void { this.eventType = eventType; }\n\t\tprivate eventType:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Listen extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventDispatcher:EventDispatcher = null, eventType:string = null) {\n\t\t\tsuper();\n\t\t\tthis.eventDispatcher = eventDispatcher;\n\t\t\tthis.eventType = eventType;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.addEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\n\t\t\tthis.eventType = null;\n\t\t\tthis.eventDispatcher = null;\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getEventDispatcher():EventDispatcher { return this.eventDispatcher; }\n\t\tpublic setEventDispatcher(eventDispatcher:EventDispatcher):void { this.eventDispatcher = eventDispatcher; }\n\t\tprivate eventDispatcher:EventDispatcher;\n\n\t\tpublic getEventType():string { return this.eventType; }\n\t\tpublic setEventType(eventType:string):void { this.eventType = eventType; }\n\t\tprivate eventType:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Easing = alm.util.Easing;\n\timport EasingFunction = alm.util.EasingFunction;\n\n\texport type TweenCallbackFunction = (progressTime:number, progressValue:number) => void;\n\n\texport class Tween extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:Object, to:Object, from:Object = null, duration:number = 1000, easing:EasingFunction = Easing.linear, onStart:TweenCallbackFunction = null, onUpdate:TweenCallbackFunction = null, onComplete:TweenCallbackFunction = null) {\n\t\t\tsuper();\n\t\t\tthis.tweenTarget = target;\n\t\t\tthis.to = to;\n\t\t\tthis.from = from;\n\t\t\tthis.duration = duration;\n\t\t\tthis.easing = easing;\n\t\t\tthis.onStart = onStart;\n\t\t\tthis.onUpdate = onUpdate;\n\t\t\tthis.onComplete = onComplete;\n\t\t\tthis.progressTime = 0;\n\t\t\tthis.progressValue = 0;\n\t\t\tthis.startTime = 0;\n\t\t\tthis.timerId = -1;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.internalFrom = {};\n\t\t\tlet value0:number;\n\t\t\tlet value1:number;\n\t\t\tfor (let key in this.to) {\n\t\t\t\tvalue1 = this.to[key];\n\t\t\t\tif (this.from && this.from[key] != null) {\n\t\t\t\t\tthis.internalFrom[key] = this.from[key];\n\t\t\t\t} else {\n\t\t\t\t\tthis.internalFrom[key] = this.tweenTarget[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.duration > 0) {\n\t\t\t\tthis.timerId = window.setInterval(this.intervalHandler, Tween.updateInterval);\n\t\t\t\tthis.startTime = new Date().getTime();\n\t\t\t\tthis.apply(0);\n\t\t\t\tif (this.onStart) this.onStart(this.progressTime, this.progressValue);\n\t\t\t} else {\n\t\t\t\tthis.apply(0);\n\t\t\t\tif (this.onStart) this.onStart(this.progressTime, this.progressValue);\n\t\t\t\tthis.apply(1);\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t\tif (this.onComplete) this.onComplete(this.progressTime, this.progressValue);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.cancel();\n\n\t\t\tthis.tweenTarget = null;\n\t\t\tthis.to = null;\n\t\t\tthis.from = null;\n\t\t\tthis.easing = null;\n\t\t\tthis.onStart = null;\n\t\t\tthis.onUpdate = null;\n\t\t\tthis.onComplete = null;\n\t\t\tthis.internalFrom = null;\n\t\t}\n\n\t\tprivate cancel():void {\n\t\t\tif (this.timerId != -1) {\n\t\t\t\tclearInterval(this.timerId);\n\t\t\t\tthis.timerId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate apply(timeRatio:number):void {\n\t\t\tthis.progressTime = timeRatio;\n\t\t\tthis.progressValue = this.easing(this.progressTime, 0, 1, 1);\n\t\t\tlet value0:number;\n\t\t\tfor (let key in this.to) {\n\t\t\t\tvalue0 = this.internalFrom[key];\n\t\t\t\tthis.tweenTarget[key] = value0 + (this.to[key] - value0) * this.progressValue;\n\t\t\t}\n\t\t}\n\n\t\tprivate intervalHandler = ():void => {\n\t\t\tconst elapsedTime:number = new Date().getTime() - this.startTime;\n\t\t\tif (elapsedTime < this.duration) {\n\t\t\t\tthis.apply(elapsedTime / this.duration);\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t} else {\n\t\t\t\tthis.apply(1);\n\t\t\t\tthis.cancel();\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t\tif (this.onComplete) this.onComplete(this.progressTime, this.progressValue);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTarget():Object { return this.tweenTarget; }\n\t\tpublic setTarget(target:Object):void { this.tweenTarget = target; }\n\t\tprivate tweenTarget:Object;\n\n\t\tpublic getDuration():number { return this.duration; }\n\t\tpublic setDuration(duration:number):void { this.duration = duration; }\n\t\tprivate duration:number;\n\n\t\tpublic getTo():Object { return this.to; }\n\t\tpublic setTo(to:Object):void { this.to = to; }\n\t\tprivate to:Object;\n\n\t\tpublic getFrom():Object { return this.from; }\n\t\tpublic setFrom(from:Object):void { this.from = from; }\n\t\tprivate from:Object;\n\n\t\tpublic getEasing():EasingFunction { return this.easing; }\n\t\tpublic setEasing(easing:EasingFunction):void { this.easing = easing; }\n\t\tprivate easing:EasingFunction;\n\n\t\tpublic getOnStart():TweenCallbackFunction { return this.onStart; }\n\t\tpublic setOnStart(func:TweenCallbackFunction):void { this.onStart = func; }\n\t\tprivate onStart:TweenCallbackFunction;\n\n\t\tpublic getOnUpdate():TweenCallbackFunction { return this.onUpdate; }\n\t\tpublic setOnUpdate(func:TweenCallbackFunction):void { this.onUpdate = func; }\n\t\tprivate onUpdate:TweenCallbackFunction;\n\n\t\tpublic getOnComplete():TweenCallbackFunction { return this.onComplete; }\n\t\tpublic setOnComplete(func:TweenCallbackFunction):void { this.onComplete = func; }\n\t\tprivate onComplete:TweenCallbackFunction;\n\n\t\tpublic getProgressTime():number { return this.progressTime; }\n\t\tprivate progressTime:number;\n\n\t\tpublic getProgressValue():number { return this.progressValue; }\n\t\tprivate progressValue:number;\n\n\t\tprivate startTime:number;\n\t\tprivate timerId:number;\n\t\tprivate internalFrom:Object;\n\n\t\tpublic getUpdateInterval():number { return Tween.updateInterval; }\n\t\tpublic setUpdateInterval(milliseconds:number):void { Tween.updateInterval = milliseconds; }\n\t\tprivate static updateInterval:number = 1000 / 60;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class Serial extends CommandList {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper(...commands);\n\t\t\tthis.currentCommand = null;\n\t\t\tthis.position = -1;\n\t\t\tthis.isPaused = false;\n\t\t\tthis.isCompleteOnPaused = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.insertCommandAt(this.position + 1, ...commands);\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommand(...commands);\n\t\t}\n\n\t\tprivate next():void {\n\t\t\tthis.currentCommand = this.getCommandByIndex(this.position);\n\t\t\tthis.currentCommand.addEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\tthis.currentCommand.execute();\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\tthis.currentCommand = null;\n\t\t\tif (++this.position >= this.getLength()) {\n\t\t\t\tthis.notifyComplete();\n\t\t\t} else {\n\t\t\t\tthis.next();\n\t\t\t}\n\t\t};\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.position = 0;\n\t\t\tif (this.getLength() > 0) {\n\t\t\t\tthis.next();\n\t\t\t} else {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.currentCommand) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t\tthis.currentCommand = null;\n\t\t\t}\n\t\t\tthis.position = -1;\n\t\t\tsuper.implInterruptFunction(command);\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.currentCommand) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.destroy();\n\t\t\t\tthis.currentCommand = null;\n\t\t\t}\n\t\t\tthis.position = -1;\n\t\t\tthis.isPaused = false;\n\t\t\tthis.isCompleteOnPaused = false;\n\t\t\tsuper.implDestroyFunction(command);\n\t\t}\n\n\t\tprotected implNotifyBreak():void {\n\t\t\tif (this.currentCommand.getState() == CommandState.Executing) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t}\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implNotifyReturn():void {\n\t\t\tif (this.currentCommand.getState() == CommandState.Executing) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t}\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.destroy();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected getPosition():number { return this.position; }\n\t\tprivate position:number;\n\n\t\tprivate currentCommand:Command;\n\t\tprivate isPaused:boolean;\n\t\tprivate isCompleteOnPaused:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Vector2 {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0) {\n\t\t\tthis.set(x, y);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t}\n\n\t\tpublic copyTo(point:Vector2):void {\n\t\t\tpoint.set(this.x, this.y);\n\t\t}\n\n\t\tpublic getClone():Vector2 {\n\t\t\treturn new Vector2(this.x, this.y);\n\t\t}\n\n\t\tpublic zero():void {\n\t\t\tthis.set(0, 0);\n\t\t}\n\n\t\tpublic normalize():void {\n\t\t\tconst l:number = this.getLength();\n\t\t\tthis.x /= l;\n\t\t\tthis.y /= l;\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t\t}\n\n\t\tpublic getSquareDistance(point:Vector2):number {\n\t\t\tconst dx:number = point.x - this.x;\n\t\t\tconst dy:number = point.y - this.y;\n\t\t\treturn dx * dx + dy * dy;\n\t\t}\n\n\t\tpublic getDistance(point:Vector2):number {\n\t\t\treturn Math.sqrt(this.getSquareDistance(point));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Vector3 {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0, z:number = 0) {\n\t\t\tthis.set(x, y, z);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number, z:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t}\n\n\t\tpublic copyTo(point:Vector3):void {\n\t\t\tpoint.set(this.x, this.y, this.z);\n\t\t}\n\n\t\tpublic getClone():Vector3 {\n\t\t\treturn new Vector3(this.x, this.y, this.z);\n\t\t}\n\n\t\tpublic zero():void {\n\t\t\tthis.set(0, 0, 0);\n\t\t}\n\n\t\tpublic normalize():void {\n\t\t\tconst l:number = this.getLength();\n\t\t\tthis.x /= l;\n\t\t\tthis.y /= l;\n\t\t\tthis.z /= l;\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\t\t}\n\n\t\tpublic getSquareDistance(point:Vector3):number {\n\t\t\tconst dx:number = point.x - this.x;\n\t\t\tconst dy:number = point.y - this.y;\n\t\t\tconst dz:number = point.z - this.z;\n\t\t\treturn dx * dx + dy * dy + dz * dz;\n\t\t}\n\n\t\tpublic getDistance(point:Vector3):number {\n\t\t\treturn Math.sqrt(this.getSquareDistance(point));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t\tpublic z:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Rectangle {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0, width:number = 0, height:number = 0) {\n\t\t\tthis.set(x, y, width, height);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number, width:number, height:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\tpublic copyTo(rect:Rectangle):void {\n\t\t\trect.set(this.x, this.y, this.width, this.height);\n\t\t}\n\n\t\tpublic getClone():Rectangle {\n\t\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t\t}\n\n\t\tpublic getTop():number {\n\t\t\treturn this.y;\n\t\t}\n\n\t\tpublic getBottom():number {\n\t\t\treturn this.y + this.height;\n\t\t}\n\n\t\tpublic getLeft():number {\n\t\t\treturn this.x;\n\t\t}\n\n\t\tpublic getRight():number {\n\t\t\treturn this.x + this.width;\n\t\t}\n\n\t\tpublic getTopLeft():Vector2 {\n\t\t\treturn new Vector2(this.getLeft(), this.getTop());\n\t\t}\n\n\t\tpublic getTopRight():Vector2 {\n\t\t\treturn new Vector2(this.getRight(), this.getTop());\n\t\t}\n\n\t\tpublic getBottomLeft():Vector2 {\n\t\t\treturn new Vector2(this.getLeft(), this.getBottom());\n\t\t}\n\n\t\tpublic getBottomRight():Vector2 {\n\t\t\treturn new Vector2(this.getRight(), this.getBottom());\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t\tpublic width:number;\n\t\tpublic height:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Obj {\n\n\t\tpublic static each(target:any, func:(key:string, value:any) => void):void {\n\t\t\tif (target == null) return;\n\t\t\tObject.keys(target).forEach((key:string):void => {\n\t\t\t\tfunc(key, target[key]);\n\t\t\t});\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Arr {\n\n\t\t/**\n\t\t * \n\t\t * @param {number} count \n\t\t * @param {number} init \n\t\t * @param {number} step \n\t\t * @returns {number[]} \n\t\t */\n\t\tpublic static sequence(count:number, init:number = 0, step:number = 1):number[] {\n\t\t\tconst result:number[] = new Array(count);\n\t\t\tlet v:number = init;\n\t\t\tfor (let i:number = 0; i < count; ++i) {\n\t\t\t\tresult[i] = v;\n\t\t\t\tv += step;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param list \n\t\t * @returns {T[]} \n\t\t */\n\t\tpublic static unique<T>(list:T[]):T[] {\n\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\treturn self.indexOf(x) === i;\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param list \n\t\t * @param unique true\n\t\t * @returns {T[]} \n\t\t */\n\t\tpublic static duplicated<T>(list:T[], unique:boolean = false):T[] {\n\n\t\t\tif (unique) {\n\t\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\t\treturn self.indexOf(x) !== self.lastIndexOf(x);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\t\treturn (self.indexOf(x) === i) && (self.lastIndexOf(x) !== i);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * 2\n\t\t * @param {T[]} list1 1\n\t\t * @param {T[]} list2 2\n\t\t * @param {(count: number, index1: number, index2: number, element1: T, element2: T) => void} callback \n\t\t * @param callback.count \n\t\t * @param callback.index1 1\n\t\t * @param callback.index2 2\n\t\t * @param callback.element1 1\n\t\t * @param callback.element2 2\n\t\t */\n\t\tpublic static roundRobin<T>(list1:T[], list2:T[], callback:(count:number, index1:number, index2:number, element1:T, element2:T) => void):void {\n\t\t\tlet i:number, j:number, p:number = 1;\n\t\t\tconst m:number = list1.length;\n\t\t\tconst n:number = list2.length;\n\t\t\tfor (i = 0; i < m; ++i) {\n\t\t\t\tfor (j = i + 1; j < n; ++j) {\n\t\t\t\t\tcallback(p++, i, j, list1[i], list2[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Num {\n\n\t\t/**\n\t\t * \n\t\t * @param {number} value \n\t\t * @param {number} srcMin \n\t\t * @param {number} srcMax \n\t\t * @param {number} dstMin \n\t\t * @param {number} dstMax \n\t\t * @param {boolean} clamp truesrcMin, srcMax\n\t\t * @returns {number} \n\t\t */\n\t\tpublic static map(value:number, srcMin:number, srcMax:number, dstMin:number, dstMax:number, clamp:boolean = true):number {\n\t\t\tif (srcMin == srcMax) return dstMin;\n\t\t\tif (clamp) {\n\t\t\t\tif (srcMin < srcMax) {\n\t\t\t\t\tif (value < srcMin) value = srcMin;\n\t\t\t\t\telse if (value > srcMax) value = srcMax;\n\t\t\t\t} else {\n\t\t\t\t\tif (value < srcMax) value = srcMax;\n\t\t\t\t\telse if (value > srcMin) value = srcMin;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn (value - srcMin) * (dstMax - dstMin) / (srcMax - srcMin) + dstMin;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} min \n\t\t * @param {number} max \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static random(min:number = 0, max:number = 1):number {\n\t\t\treturn min + (max - min) * Math.random();\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} min \n\t\t * @param {number} max \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static randomInt(min:number = 0, max:number = 1):number {\n\t\t\treturn Math.floor(Num.random(min, max));\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} value \n\t\t * @param {number} min \n\t\t * @param {number} max \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static clamp(value:number, min:number, max:number):number {\n\t\t\treturn value < min ? min : (value > max ? max : value);\n\t\t}\n\n\t\t/**\n\t\t * 2\n\t\t * @param {number} x1 1x\n\t\t * @param {number} y1 1y\n\t\t * @param {number} x2 2x\n\t\t * @param {number} y2 2y\n\t\t * @param {boolean} squared true2\n\t\t * @returns {number} \n\t\t */\n\t\tpublic static dist(x1:number, y1:number, x2:number, y2:number, squared:boolean = false):number {\n\t\t\tconst dx:number = x2 - x1;\n\t\t\tconst dy:number = y2 - y1;\n\t\t\treturn squared ? (dx * dx + dy * dy) : Math.sqrt(dx * dx + dy * dy);\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} radian \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static radToDeg(radian:number):number {\n\t\t\treturn radian * Num.RAD2DEG;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} radian \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static degToRad(degree:number):number {\n\t\t\treturn degree * Num.DEG2RAD;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} from \n\t\t * @param {number} to \n\t\t * @param {boolean} radian true\n\t\t * @returns {number} \n\t\t */\n\t\tpublic static turn(from:number, to:number, radian:boolean = true):number {\n\t\t\treturn radian ? ((to - from + Num.PI3) % Num.PI2 - Math.PI) : ((to - from + 540) % 360 - 180);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONST\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static PI2:number = Math.PI * 2;\n\t\tpublic static PI3:number = Math.PI * 3;\n\t\tpublic static PI4:number = Math.PI * 4;\n\t\tpublic static PI5:number = Math.PI * 5;\n\t\tpublic static PI6:number = Math.PI * 6;\n\t\tpublic static PI_2:number = Math.PI / 2;\n\t\tpublic static PI_3:number = Math.PI / 3;\n\t\tpublic static PI_4:number = Math.PI / 4;\n\t\tpublic static PI_6:number = Math.PI / 6;\n\n\t\tprivate static RAD2DEG:number = 180 / Math.PI;\n\t\tprivate static DEG2RAD:number = Math.PI / 180;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Str {\n\n\t\t/**\n\t\t *  h:mm:ss \n\t\t * @param {number} hours \n\t\t * @param {number} minutes \n\t\t * @param {number} seconds \n\t\t * @returns {string} h:mm:ss \n\t\t */\n\t\tpublic static toTimeString(hours:number = 0, minutes:number = 0, seconds:number = 0):string {\n\t\t\tseconds += minutes * 60 + hours * 3600;\n\t\t\tlet h:string = Math.floor(seconds / 3600).toString();\n\t\t\tlet m:string = Math.floor((seconds / 60) % 60).toString();\n\t\t\tlet s:string = ('0' + Math.floor(seconds % 60)).substr(-2, 2);\n\t\t\tif (h != '0') {\n\t\t\t\treturn h + ':' + ('0' + m).substr(-2, 2) + ':' + s;\n\t\t\t} else {\n\t\t\t\treturn m + ':' + s;\n\t\t\t}\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport enum Align {\n\t\tTop_Left,\n\t\tTop_Center,\n\t\tTop_Right,\n\t\tMiddle_Left,\n\t\tMiddle_Center,\n\t\tMiddle_Right,\n\t\tBottom_Left,\n\t\tBottom_Center,\n\t\tBottom_Right\n\t}\n\n\texport enum ScaleMode {\n\t\tExactFit,\n\t\tShowAll,\n\t\tNoBorder,\n\t\tNoScale,\n\t}\n\n\texport class Boxer {\n\n\t\tpublic static resize(target:geom.Rectangle, bounds:geom.Rectangle, scaleMode:ScaleMode = ScaleMode.ShowAll, align:Align = Align.Middle_Center):geom.Rectangle {\n\t\t\tlet tx:number = target.x;\n\t\t\tlet ty:number = target.y;\n\t\t\tlet tw:number = target.width;\n\t\t\tlet th:number = target.height;\n\n\t\t\tconst bx:number = bounds.x;\n\t\t\tconst by:number = bounds.y;\n\t\t\tconst bw:number = bounds.width;\n\t\t\tconst bh:number = bounds.height;\n\n\t\t\tswitch (scaleMode) {\n\t\t\t\tcase ScaleMode.ShowAll:\n\t\t\t\tcase ScaleMode.NoBorder:\n\t\t\t\t\tconst ratioW:number = bw / tw;\n\t\t\t\t\tconst ratioH:number = bh / th;\n\t\t\t\t\tconst ratio:number = scaleMode == ScaleMode.ShowAll ? (ratioW < ratioH ? ratioW : ratioH) : (ratioW > ratioH ? ratioW : ratioH);\n\t\t\t\t\ttw *= ratio;\n\t\t\t\t\tth *= ratio;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ScaleMode.ExactFit:\n\t\t\t\t\treturn new geom.Rectangle(bx, by, bw, bh);\n\t\t\t}\n\n\t\t\ttx = bx + ((align == Align.Top_Left || align == Align.Middle_Left || align == Align.Bottom_Left) ? 0 :\n\t\t\t\t(align == Align.Top_Right || align == Align.Middle_Right || align == Align.Bottom_Right) ? (bw - tw) : (bw - tw) / 2);\n\t\t\tty = by + ((align == Align.Top_Left || align == Align.Top_Center || align == Align.Top_Right) ? 0 :\n\t\t\t\t(align == Align.Bottom_Left || align == Align.Bottom_Center || align == Align.Bottom_Right) ? (bh - th) : (bh - th) / 2);\n\n\t\t\treturn new geom.Rectangle(tx, ty, tw, th);\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Raffle<T = any> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(values:T[] = null) {\n\t\t\tif (values) {\n\t\t\t\tthis.set(values);\n\t\t\t} else {\n\t\t\t\tthis.initValues = this.restValues = null;\n\t\t\t\tthis.restCount = this.restValues.length;\n\t\t\t\tthis.isEmpty = true;\n\t\t\t}\n\t\t\tthis.onCheck = null;\n\t\t\tthis.isAutoResetEnabled = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(values:T[]):void {\n\t\t\tthis.initValues = values.concat();\n\t\t\tthis.reset();\n\t\t}\n\n\t\tpublic get():T {\n\t\t\tif (this.isEmpty && this.isAutoResetEnabled) {\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t\tconst index:number = Math.floor(Math.random() * this.restCount);\n\t\t\tconst value:T = this.restValues[index];\n\t\t\tlet result:boolean = true;\n\t\t\tif (this.onCheck) result = this.onCheck(value);\n\t\t\tif (result) {\n\t\t\t\tthis.restValues.splice(index, 1);\n\t\t\t\tthis.restCount = this.restValues.length;\n\t\t\t\tthis.isEmpty = this.restCount == 0;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tpublic add(value:T, reset:boolean = false):void {\n\t\t\tthis.initValues.push(value);\n\t\t\tthis.restValues.push(value);\n\t\t\tthis.restCount = this.restValues.length;\n\t\t\tthis.isEmpty = this.restCount == 0;\n\t\t\tif (reset) {\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}\n\n\t\tpublic reset():void {\n\t\t\tthis.restValues = this.initValues.concat();\n\t\t\tthis.restCount = this.restValues.length;\n\t\t\tthis.isEmpty = this.restCount == 0;\n\t\t}\n\n\t\tpublic getRestCount():number {\n\t\t\treturn this.restCount;\n\t\t}\n\n\t\tpublic getIsEmply():boolean {\n\t\t\treturn this.isEmpty;\n\t\t}\n\n\t\tpublic getIsAutoResetEnabled():boolean {\n\t\t\treturn this.isAutoResetEnabled;\n\t\t}\n\n\t\tpublic setIsAutoResetEnabled(enabled:boolean):void {\n\t\t\tthis.isAutoResetEnabled = enabled;\n\t\t}\n\n\t\tpublic static createIndices(count:number):Raffle<number> {\n\t\t\tconst values:number[] = new Array(count);\n\t\t\tfor (let i:number = 0; i < count; ++i) values[i] = i;\n\t\t\treturn new Raffle<number>(values);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic onCheck:(value:T) => boolean;\n\n\t\tprivate isAutoResetEnabled:boolean;\n\t\tprivate isEmpty:boolean;\n\t\tprivate restCount:number;\n\t\tprivate restValues:T[];\n\t\tprivate initValues:T[];\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Rotator {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(angle:number = 0, velocity:number = 0, radian:boolean = true) {\n\t\t\tthis.setAngle(angle, radian);\n\t\t\tthis.setVelocity(velocity, radian);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getAngle(radian:boolean = true):number {\n\t\t\treturn radian ? this.angle : (this.angle * 180 / Math.PI);\n\t\t}\n\n\t\tpublic setAngle(angle:number, radian:boolean = true):void {\n\t\t\tthis.angle = radian ? angle : (angle * Math.PI / 180);\n\t\t}\n\n\t\tpublic getVelocity(radian:boolean = true):number {\n\t\t\treturn radian ? this.velocity : (this.velocity * 180 / Math.PI);\n\t\t}\n\n\t\tpublic setVelocity(velocity:number, radian:boolean = true):void {\n\t\t\tthis.velocity = radian ? velocity : (velocity * Math.PI / 180);\n\t\t}\n\n\t\tpublic update():void {\n\t\t\tthis.angle += this.velocity;\n\t\t}\n\n\t\tpublic getSin(length:number = 1):number {\n\t\t\treturn length * Math.sin(this.angle);\n\t\t}\n\n\t\tpublic getCos(length:number = 1):number {\n\t\t\treturn length * Math.cos(this.angle);\n\t\t}\n\n\t\tpublic getTan(length:number = 1):number {\n\t\t\treturn length * Math.tan(this.angle);\n\t\t}\n\n\t\tpublic getMagnitude(length:number = 1):number {\n\t\t\treturn length * (1 + Math.sin(this.angle)) / 2;\n\t\t}\n\n\t\tpublic getVector(length:number = 1, xy:{ x:number, y:number } = null):{ x:number, y:number } {\n\t\t\tif (xy != null) {\n\t\t\t\txy.x = this.getCos(length);\n\t\t\t\txy.y = this.getSin(length);\n\t\t\t} else {\n\t\t\t\treturn { x: this.getCos(length), y: this.getSin(length) };\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate angle:number;\n\t\tprivate velocity:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Pager<T = string> extends alm.event.EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\n\t\t\tthis.isLoopEnabled = true;\n\n\t\t\tthis.itemCount = 0;\n\t\t\tthis.itemIds = null;\n\t\t\tthis.itemIndexById = null;\n\n\t\t\tthis.onChange = null;\n\t\t\tthis.onPrev = null;\n\t\t\tthis.onNext = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic setupById(ids:T[]):void {\n\t\t\tthis.itemCount = ids.length;\n\t\t\tthis.itemIds = ids;\n\n\t\t\tthis.itemIndexById = {};\n\t\t\tfor (let i:number = 0; i < this.itemCount; ++i) {\n\t\t\t\tthis.itemIndexById[this.itemIds[i] as unknown as string] = i;\n\t\t\t}\n\n\t\t\tthis.setup();\n\t\t}\n\n\t\tpublic setupByCount(itemCount:number):void {\n\t\t\tthis.itemCount = itemCount;\n\n\t\t\tthis.itemIds = null;\n\t\t\tthis.itemIndexById = null;\n\n\t\t\tthis.setup();\n\t\t}\n\n\t\tprivate setup():void {\n\t\t\tthis.newItemIndex = -1;\n\t\t\tthis.oldItemIndex = -1;\n\n\t\t\tthis.newItemId = null;\n\t\t\tthis.oldItemId = null;\n\t\t}\n\n\t\tpublic gotoByIndex(itemIndex:number, useTransition:boolean = true):boolean {\n\t\t\tif (itemIndex < 0 || itemIndex >= this.itemCount) itemIndex = -1;\n\t\t\tif (itemIndex == this.newItemIndex) return false;\n\n\t\t\tthis.oldItemIndex = this.newItemIndex;\n\t\t\tthis.newItemIndex = itemIndex;\n\n\t\t\tif (this.itemIds) {\n\t\t\t\tthis.oldItemId = this.oldItemIndex != -1 ? this.itemIds[this.oldItemIndex] : null;\n\t\t\t\tthis.newItemId = this.newItemIndex != -1 ? this.itemIds[this.newItemIndex] : null;\n\t\t\t}\n\n\t\t\tthis.dispatchPagerEvent(PagerEvent.CHANGE, this.onChange, useTransition);\n\n\t\t\treturn true;\n\t\t}\n\n\t\tpublic gotoById(itemId:string, useTransition:boolean = true):boolean {\n\t\t\tconst itemIndex:number = this.itemIndexById.hasOwnProperty(itemId) ? this.itemIndexById[itemId] : -1;\n\t\t\treturn this.gotoByIndex(itemIndex, useTransition);\n\t\t}\n\n\t\tpublic prev(useTransition:boolean = true):boolean {\n\t\t\tlet itemIndex = this.newItemIndex - 1;\n\t\t\tif (this.isLoopEnabled && itemIndex < 0) itemIndex = this.itemCount - 1;\n\n\t\t\tconst result:boolean = this.gotoByIndex(itemIndex, useTransition);\n\t\t\tif (result) {\n\t\t\t\tthis.dispatchPagerEvent(PagerEvent.PREV, this.onPrev, useTransition);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tpublic next(useTransition:boolean = true):boolean {\n\t\t\tlet itemIndex = this.newItemIndex + 1;\n\t\t\tif (this.isLoopEnabled && itemIndex >= this.itemCount) itemIndex = 0;\n\n\t\t\tconst result:boolean = this.gotoByIndex(itemIndex, useTransition);\n\t\t\tif (result) {\n\t\t\t\tthis.dispatchPagerEvent(PagerEvent.NEXT, this.onNext, useTransition);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tprivate dispatchPagerEvent(eventType:string, callback:(event:PagerEvent<T>) => void, useTransition:boolean):void {\n\t\t\tconst oldItemId:T = (this.itemIds && this.oldItemIndex != -1) ? this.itemIds[this.oldItemIndex] : null;\n\t\t\tconst newItemId:T = (this.itemIds && this.newItemIndex != -1) ? this.itemIds[this.newItemIndex] : null;\n\n\t\t\tconst event:PagerEvent<T> = new PagerEvent<T>(eventType, this, this.newItemIndex, this.oldItemIndex, this.newItemId, this.oldItemId, useTransition);\n\t\t\tif (callback) {\n\t\t\t\tcallback(event);\n\t\t\t}\n\t\t\tthis.dispatchEvent(event);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsLoopEnabled():boolean { return this.isLoopEnabled; }\n\t\tpublic setIsLoopEnabled(value:boolean):void { this.isLoopEnabled = value; }\n\t\tprivate isLoopEnabled:boolean;\n\n\t\tpublic getNewItemIndex():number { return this.newItemIndex; }\n\t\tprivate newItemIndex:number;\n\n\t\tpublic getOldItemIndex():number { return this.oldItemIndex; }\n\t\tprivate oldItemIndex:number;\n\n\t\tpublic getItemCount():number { return this.itemCount; }\n\t\tprivate itemCount:number;\n\n\t\tpublic getNewItemId():T { return this.newItemId; }\n\t\tprivate newItemId:T;\n\n\t\tpublic getOldItemId():T { return this.oldItemId; }\n\t\tprivate oldItemId:T;\n\n\t\tpublic getItemIds():T[] { return this.itemIds; }\n\t\tprivate itemIds:T[];\n\n\t\tprivate itemIndexById:Hash<number>;\n\n\t\tpublic onChange:(event:PagerEvent<T>) => void;\n\t\tpublic onPrev:(event:PagerEvent<T>) => void;\n\t\tpublic onNext:(event:PagerEvent<T>) => void;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class PagerEvent<T = string> extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static CHANGE:string = 'change';\n\t\tpublic static PREV:string = 'prev';\n\t\tpublic static NEXT:string = 'next';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any, newItemIndex:number, oldItemIndex:number, newItemId:T, oldItemId:T, useTransition:boolean) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.newItemIndex = newItemIndex;\n\t\t\tthis.oldItemIndex = oldItemIndex;\n\t\t\tthis.newItemId = newItemId;\n\t\t\tthis.oldItemId = oldItemId;\n\t\t\tthis.useTransition = useTransition;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():PagerEvent<T> {\n\t\t\treturn new PagerEvent<T>(this.getType(), this.getTarget(), this.newItemIndex, this.oldItemIndex, this.newItemId, this.oldItemId, this.useTransition);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[PagerEvent] type = ' + this.getType() + ', ' + this.oldItemIndex + ' -> ' + this.newItemIndex + ', transition = ' + this.useTransition;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic newItemIndex:number;\n\t\tpublic oldItemIndex:number;\n\t\tpublic newItemId:T;\n\t\tpublic oldItemId:T;\n\t\tpublic useTransition:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Timer extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(interval:number = 1000, repeatCount:number = 0) {\n\t\t\tsuper();\n\t\t\tthis.interval = interval;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tId = -1;\n\t\t\tthis.reset();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\tthis.startInterval(this.tRestTime != -1 ? this.tRestTime : this.interval);\n\t\t}\n\n\t\tpublic stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tRestTime = this.getCurrentTime() - this.tStartTime;\n\t\t\tthis.stopInterval();\n\t\t}\n\n\t\tpublic reset():void {\n\t\t\tthis.stop();\n\t\t\tthis.elapsedCount = 0;\n\t\t\tthis.tRestTime = -1;\n\t\t}\n\n\t\tpublic restart():void {\n\t\t\tthis.reset();\n\t\t\tthis.start();\n\t\t}\n\n\n\n\n\n\t\tprivate getCurrentTime():number {\n\t\t\treturn new Date().valueOf();\n\t\t}\n\n\t\tprivate startInterval(interval:number):void {\n\t\t\tthis.stopInterval();\n\t\t\tthis.tInterval = interval;\n\t\t\tthis.tId = window.setInterval(this.timerHandler, this.tInterval);\n\t\t}\n\n\t\tprivate stopInterval():void {\n\t\t\tif (this.tId != -1) {\n\t\t\t\tclearInterval(this.tId);\n\t\t\t\tthis.tId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate dispatch(eventType:string):void {\n\t\t\tthis.dispatchEvent(new TimerEvent(eventType, this, this.elapsedCount, this.repeatCount, this.getRestCount()));\n\t\t}\n\n\t\tprivate timerHandler = ():void => {\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\t++this.elapsedCount;\n\t\t\tlet isCompleted:boolean = false;\n\t\t\tif (this.repeatCount > 0 && this.elapsedCount >= this.repeatCount) {\n\t\t\t\tisCompleted = true;\n\t\t\t\tthis.stop();\n\t\t\t} else if (this.tInterval != this.interval) {\n\t\t\t\tthis.startInterval(this.interval);\n\t\t\t}\n\t\t\tthis.dispatch(TimerEvent.TICK);\n\t\t\tif (isCompleted) {\n\t\t\t\tthis.dispatch(TimerEvent.COMPLETE);\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsRunning():boolean { return this.isRunning; }\n\t\tprivate isRunning:boolean;\n\n\t\tpublic getInterval():number { return this.interval; }\n\t\tpublic setInterval(interval:number):void { this.interval = interval; }\n\t\tprivate interval:number;\n\n\t\tpublic getElapsedTime():number { return this.getCurrentTime() - this.tStartTime; }\n\n\t\tpublic getRestTime():number { return this.interval - this.getElapsedTime(); }\n\n\t\tpublic getElapsedCount():number { return this.elapsedCount; }\n\t\tprivate elapsedCount:number;\n\n\t\tpublic getRepeatCount():number { return this.repeatCount; }\n\t\tpublic setRepeatCount(count:number):void { this.repeatCount = count; }\n\t\tprivate repeatCount:number;\n\n\t\tpublic getRestCount():number { return this.repeatCount - this.elapsedCount; }\n\n\t\tprivate tStartTime:number;\n\t\tprivate tRestTime:number;\n\t\tprivate tInterval:number;\n\t\tprivate tId:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\timport Event = alm.event.Event;\n\n\texport class TimerEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static TICK:string = 'tick';\n\t\tpublic static COMPLETE:string = 'complete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, elapsedCount:number = 0, repeatCount:number = 0, restCount:number = 0) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.elapsedCount = elapsedCount;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.restCount = restCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():TimerEvent {\n\t\t\treturn new TimerEvent(this.getType(), this.getTarget(), this.elapsedCount, this.repeatCount, this.restCount);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[TimerEvent] type = ' + this.getType() + ', elapsedCount = ' + this.elapsedCount + ', repeatCount=' + this.repeatCount + ', restCount=' + this.restCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic elapsedCount:number;\n\t\tpublic repeatCount:number;\n\t\tpublic restCount:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class ObjectPool<T> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * ObjectPool class.\n\t\t * @class\n\t\t * @param {function} onRequireItem This callback function is called when new item is required.\n\t\t * @param {function} onDestroyItem This callback function is called when item is disposed.\n\t\t * @param {number} initCount Init item count.\n\t\t * @param {number} growthCount Growth item count.\n\t\t *\n\t\t * @property {number} initCount Init item count.\n\t\t * @property {number} growthCount Growth item count.\n\t\t * @property {function} onRequireItem This callback function is called when new item is required.\n\t\t * @property {function} onDestroyItem This callback function is called when item is disposed.\n\t\t * @property {Array} items Array of items.\n\t\t * @property {number} index Current index of items.\n\t\t *\n\t\t * @return void\n\t\t */\n\t\tconstructor(onRequireItem:() => T, onDestroyItem:(item:T) => void, initCount:number = 100, growthCount:number = 50) {\n\t\t\tthis.onRequireItem = onRequireItem;\n\t\t\tthis.onDestroyItem = onDestroyItem;\n\t\t\tthis.growthCount = growthCount;\n\t\t\tthis.items = new Array(initCount);\n\t\t\tfor (let i = 0; i < initCount; ++i) {\n\t\t\t\tthis.items[i] = this.onRequireItem();\n\t\t\t}\n\t\t\tthis.index = initCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * Get item from object pool.\n\t\t * @return {T} Item\n\t\t */\n\t\tpublic getItem():T {\n\t\t\tif (this.index > 0) {\n\t\t\t\treturn this.items[--this.index];\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.growthCount; ++i) {\n\t\t\t\tthis.items.unshift(this.onRequireItem());\n\t\t\t}\n\t\t\tthis.index = this.growthCount;\n\t\t\treturn this.getItem();\n\t\t}\n\n\t\t/**\n\t\t * Return item to object pool.\n\t\t * @param {T} Item.\n\t\t * @return void\n\t\t */\n\t\tpublic returnItem(item:T):void {\n\t\t\tthis.items[this.index++] = item;\n\t\t}\n\n\t\t/**\n\t\t * Optimize object pool size.\n\t\t * @return void\n\t\t */\n\t\tpublic reduce():void {\n\t\t\tconst n = this.index;\n\t\t\tfor (let i = 0; i < n; ++i) {\n\t\t\t\tthis.onDestroyItem(this.items.shift());\n\t\t\t}\n\t\t\tthis.index = 0;\n\t\t}\n\n\t\t/**\n\t\t * Destroy object pool.\n\t\t * @return void\n\t\t */\n\t\tpublic destroy():void {\n\t\t\tconst n = this.items.length;\n\t\t\tfor (let i = 0; i < n; ++i) {\n\t\t\t\tthis.onDestroyItem(this.items[i]);\n\t\t\t}\n\t\t\tthis.index = 0;\n\t\t\tthis.items = null;\n\t\t\tthis.onRequireItem = null;\n\t\t\tthis.onDestroyItem = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate items:T[];\n\t\tprivate index:number;\n\t\tprivate growthCount:number;\n\n\t\tpublic onRequireItem:() => T;\n\t\tpublic onDestroyItem:(item:T) => void;\n\t}\n}\n","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class CommandUtil {\n\n\t\tpublic static stop(command:cmd.Command):any {\n\t\t\tif (command) command.interrupt();\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic static sequence(execute:boolean, ...commands:(cmd.Command|Function)[]):cmd.Serial {\n\t\t\tconst c:cmd.Serial = new cmd.Serial();\n\t\t\tc.addCommand(...commands);\n\t\t\tif (execute) c.execute();\n\t\t\treturn c;\n\t\t}\n\n\t\tpublic static single(execute:boolean, command:cmd.Command):cmd.Command {\n\t\t\tif (execute && command) command.execute();\n\t\t\treturn command;\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.value {\n\n\texport class EasingValue {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(initValue:number, easing:number = 0.1, tolerance:number = 0) {\n\t\t\tthis.value = this.target = initValue;\n\t\t\tthis.easing = easing;\n\t\t\tthis.tolerance = tolerance;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic update(useTransition:boolean = true):number {\n\t\t\tif (useTransition) {\n\t\t\t\tconst d:number = this.target - this.value;\n\t\t\t\tif (this.tolerance > 0 && Math.abs(d) <= this.tolerance) {\n\t\t\t\t\tthis.value = this.target;\n\t\t\t\t} else {\n\t\t\t\t\tthis.value += d * this.easing;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.value = this.target;\n\t\t\t}\n\n\t\t\treturn this.value;\n\t\t}\n\n\t\tpublic clone():EasingValue {\n\t\t\tconst v:EasingValue = new EasingValue(this.value, this.easing, this.tolerance);\n\t\t\tv.target = this.target;\n\t\t\treturn v;\n\t\t}\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic value:number;\n\t\tpublic target:number;\n\t\tpublic easing:number;\n\t\tpublic tolerance:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.value {\n\n\texport class SpringValue {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(initValue:number, spring:number = 0.1, friction:number = 0.9) {\n\t\t\tthis.acceleration = 0;\n\t\t\tthis.velocity = 0;\n\t\t\tthis.value = this.target = initValue;\n\t\t\tthis.spring = spring;\n\t\t\tthis.friction = friction;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic update(useTransition:boolean = true):number {\n\t\t\tif (useTransition) {\n\t\t\t\tthis.acceleration = (this.target - this.value) * this.spring;\n\t\t\t\tthis.velocity += this.acceleration;\n\t\t\t\tthis.velocity *= this.friction;\n\t\t\t\tthis.value += this.velocity;\n\t\t\t} else {\n\t\t\t\tthis.acceleration = 0;\n\t\t\t\tthis.velocity = 0;\n\t\t\t\tthis.value = this.target;\n\t\t\t}\n\n\t\t\treturn this.value;\n\t\t}\n\n\t\tpublic clone():SpringValue {\n\t\t\tconst v:SpringValue = new SpringValue(this.value, this.spring, this.friction);\n\t\t\tv.acceleration = this.acceleration;\n\t\t\tv.velocity = this.velocity;\n\t\t\tv.target = this.target;\n\t\t\treturn v;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic value:number;\n\t\tpublic target:number;\n\t\tpublic velocity:number;\n\t\tpublic acceleration:number;\n\t\tpublic spring:number;\n\t\tpublic friction:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.value {\n\n\texport class SimpleAverage {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tthis.value = this._value = 0;\n\t\t\tthis.count = this._count = 0;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic add(n:number):number {\n\t\t\tthis._value = (this._value * this._count + n) / ++this._count;\n\n\t\t\tthis.value = this._value;\n\t\t\tthis.count = this._count;\n\n\t\t\treturn this._value;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic value:number;\n\t\tpublic count:number;\n\n\t\tprivate _value:number;\n\t\tprivate _count:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.value {\n\n\texport class SimpleMovingAverage {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(maxCount:number) {\n\t\t\tthis.maxCount = this._maxCount = maxCount;\n\t\t\tthis.value = this._value = 0;\n\t\t\tthis.count = this._count = 0;\n\t\t\tthis.values = [];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic add(n:number):number {\n\t\t\tif (++this._count > this._maxCount) {\n\t\t\t\tthis._count = this._maxCount;\n\n\t\t\t\tconst oldest:number = this.values.shift();\n\t\t\t\tthis._value -= oldest;\n\n\t\t\t\tconst latest:number = n / this._maxCount;\n\t\t\t\tthis._value += latest;\n\n\t\t\t\tthis.values.push(latest);\n\n\t\t\t} else {\n\t\t\t\tthis._value *= (this._count - 1);\n\t\t\t\tthis._value += n;\n\t\t\t\tthis._value /= this._count;\n\n\t\t\t\tthis.values.push(n / this._maxCount);\n\t\t\t}\n\n\t\t\t/*\n\t\t\tthis._values.push(n);\n\n\t\t\tif (++this._count > this._maxCount) {\n\t\t\t\tthis._values.shift();\n\t\t\t\tthis._count = this._maxCount;\n\t\t\t}\n\n\t\t\tthis._value = 0;\n\t\t\tfor (let i:number = 0; i < this._count; ++i) {\n\t\t\t\tthis._value += this._values[i];\n\t\t\t}\n\t\t\tthis._value /= this._count;\n\t\t\t*/\n\n\t\t\tthis.value = this._value;\n\t\t\tthis.count = this._count;\n\n\t\t\treturn this._value;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic value:number;\n\t\tpublic maxCount:number;\n\t\tpublic count:number;\n\n\t\tprivate _value:number;\n\t\tprivate _maxCount:number;\n\t\tprivate _count:number;\n\n\t\tprivate values:number[];\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport type CompleteFunction = (content:any) => void;\n\texport type ErrorFunction = (message:string) => void;\n\n\texport class AssetLoader {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tthis.isLoading_ = false;\n\n\t\t\tthis.currentCount = 0;\n\t\t\tthis.totalCount = 0;\n\n\t\t\tthis.loadingQueries = [];\n\t\t\tthis.loadingQueryIndex = -1;\n\n\t\t\tthis.queriesByQueryId = {};\n\t\t\tthis.queriesByUrl = {};\n\n\t\t\tthis.handlersByType = {};\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic require(url:string, type:string, id:string = ''):string {\n\t\t\treturn this.addQuery(type, url, {}, id);\n\t\t}\n\n\t\tprivate addQuery(type:string, url:string, param:any, id:string = ''):string {\n\t\t\tif (this.queriesByUrl[url]) return this.queriesByUrl[url].id;\n\n\t\t\tconst query:FileQuery = new FileQuery();\n\t\t\tquery.type = type;\n\t\t\tquery.url = url;\n\t\t\tquery.param = param;\n\n\t\t\tif (id != '') {\n\t\t\t\tquery.id = id;\n\t\t\t} else {\n\t\t\t\tquery.id = String(AssetLoader.id);\n\t\t\t\t++AssetLoader.id;\n\t\t\t}\n\n\t\t\tthis.loadingQueries.push(query);\n\t\t\tthis.queriesByQueryId[query.id] = query;\n\t\t\tthis.queriesByUrl[query.url] = query;\n\t\t\treturn query.id;\n\t\t}\n\n\t\tpublic load():void {\n\t\t\tif (this.isLoading_) return;\n\t\t\tthis.isLoading_ = true;\n\t\t\tthis.loadingQueryIndex = -1;\n\t\t\tthis.next();\n\t\t}\n\n\t\tprivate next():void {\n\t\t\tthis.currentCount = this.loadingQueryIndex + 1;\n\t\t\tthis.totalCount = this.loadingQueries.length;\n\n\t\t\tif (this.currentCount > 0) {\n\t\t\t\tthis.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.PROGRESS, this, this.currentCount / this.totalCount, this.currentCount, this.totalCount));\n\t\t\t}\n\n\t\t\tif (this.currentCount < this.totalCount) {\n\t\t\t\tthis.loadingQueryIndex++;\n\t\t\t\tconst query:FileQuery = this.loadingQueries[this.loadingQueryIndex];\n\t\t\t\tquery.isLoading = true;\n\t\t\t\tquery.isLoadComplete = false;\n\t\t\t\ttrace('[AssetLoader] loading... ' + '\\'' + query.url + '\\' as \\'' + query.type + '\\'');\n\n\t\t\t\tconst handler:IFileHandler = this.handlersByType[query.type];\n\t\t\t\tif (handler) {\n\t\t\t\t\thandler.load(query.url, (content:any):void => {\n\t\t\t\t\t\tthis.fileLoadCompleteHandler(query, content);\n\t\t\t\t\t},(message:string = ''):void => {\n\t\t\t\t\t\tthis.fileLoadErrorHandler(query, message);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\ttrace('[AssetLoader] handler is not found \\'' + query.type + '\\'');\n\t\t\t\t\tthis.next();\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tthis.isLoading_ = false;\n\t\t\t\tthis.loadingQueries = [];\n\t\t\t\tthis.loadingQueryIndex = -1;\n\t\t\t\tthis.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.COMPLETE, this, this.currentCount / this.totalCount, this.currentCount, this.totalCount));\n\t\t\t}\n\t\t}\n\n\t\tpublic addHandler(handler:IFileHandler):void {\n\t\t\tthis.handlersByType[handler.getType()] = handler;\n\t\t}\n\n\t\tprivate fileLoadCompleteHandler = (query:FileQuery, content:any):void => {\n\t\t\tquery.isLoading = false;\n\t\t\tquery.isLoadComplete = true;\n\t\t\tquery.content = content;\n\t\t\tif (query.param.onLoad) {\n\t\t\t\tquery.param.onLoad(content);\n\t\t\t}\n\t\t\tthis.next();\n\t\t};\n\n\t\tprivate fileLoadErrorHandler = (query:FileQuery, message:string):void => {\n\t\t\tquery.isLoading = false;\n\t\t\tquery.isLoadComplete = true;\n\t\t\tif (query.param.onError) {\n\t\t\t\tquery.param.onError(message);\n\t\t\t}\n\t\t\tthis.next();\n\t\t};\n\n\t\tpublic addLoadUpdateListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.addEventListener(AssetLoaderEvent.PROGRESS, listener);\n\t\t}\n\n\t\tpublic removeLoadUpdateListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.removeEventListener(AssetLoaderEvent.PROGRESS, listener);\n\t\t}\n\n\t\tpublic addLoadCompleteListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.addEventListener(AssetLoaderEvent.COMPLETE, listener);\n\t\t}\n\n\t\tpublic removeLoadCompleteListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.removeEventListener(AssetLoaderEvent.COMPLETE, listener);\n\t\t}\n\n\t\tpublic getQueryByQueryId(queryId:string):FileQuery {\n\t\t\treturn this.queriesByQueryId[queryId];\n\t\t}\n\n\n\t\tpublic getQueryByUrl(url:string):FileQuery {\n\t\t\treturn this.queriesByUrl[url];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic isLoading():boolean { return this.isLoading_; }\n\t\tprivate isLoading_:boolean;\n\n\t\tpublic getCurrentCount():number { return this.currentCount; }\n\t\tprivate currentCount:number;\n\n\t\tpublic getTotalCount():number { return this.totalCount; }\n\t\tprivate totalCount:number;\n\n\t\tpublic getContentByUrl<T = any>(url:string):T { return this.queriesByUrl[url].content; }\n\t\tpublic getContentByQueryId<T = any>(textureId:string):T { return this.queriesByQueryId[textureId].content; }\n\n\t\tprivate loadingQueries:FileQuery[];\n\t\tprivate loadingQueryIndex:number;\n\n\t\tprivate queriesByQueryId:util.Hash<FileQuery>;\n\t\tprivate queriesByUrl:util.Hash<FileQuery>;\n\n\t\tprivate handlersByType:util.Hash<IFileHandler>;\n\n\t\tprivate eventDispatcher:alm.event.EventDispatcher;\n\n\t\tprivate static id:number = 0;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport class AssetLoaderEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic PROGRESS:string = 'progress';\n\t\tstatic COMPLETE:string = 'complete';\n\t\tstatic ERROR:string = 'error';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, progress:number = 0, loadedCount:number = 0, totalCount:number = 0, content:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.progress = progress;\n\t\t\tthis.loadedCount = loadedCount;\n\t\t\tthis.totalCount = totalCount;\n\t\t\tthis.content = content;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():AssetLoaderEvent {\n\t\t\treturn new AssetLoaderEvent(this.getType(), this.getTarget(), this.progress, this.loadedCount, this.totalCount, this.content);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[AssetLoaderEvent] type = ' + this.getType() + ', progress = ' + this.progress + ', loadedCount = ' + this.loadedCount + ', totalCount = ' + this.totalCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic progress:number;\n\t\tpublic loadedCount:number;\n\t\tpublic totalCount:number;\n\t\tpublic content:any;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport class FileQuery {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoadComplete = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic id:string;\n\t\tpublic type:string;\n\t\tpublic url:string;\n\t\tpublic param:any;\n\t\tpublic content:any;\n\t\tpublic isLoading:boolean;\n\t\tpublic isLoadComplete:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\timport Logger = alm.util.Logger;\n\n\texport abstract class View<T = any> extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(view:T = null, id:string = null) {\n\t\t\tsuper();\n\t\t\tthis.id = id != null ? id : String(View.viewCount);\n\t\t\tthis.view = view;\n\t\t\tthis.name = '';\n\t\t\tthis.autoHideWithInit = true;\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = false;\n\t\t\tthis.isReadying = false;\n\t\t\tthis.isReadied = false;\n\t\t\tthis.isShowing = false;\n\t\t\tthis.isShown = true;\n\t\t\tthis.isHiding = false;\n\n\t\t\tif (View.viewsById[this.id]) {\n\t\t\t\tLogger.warn('View id \\'' + this.id + '\\' is already exists.')\n\t\t\t}\n\t\t\tView.viewsById[this.id] = this;\n\t\t\t++View.viewCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic initialize():void {\n\t\t\tif (this.isInitializing || this.isInitialized) return;\n\t\t\tthis.isInitializing = true;\n\n\t\t\t//if (View.viewsById[this.id] == null) {\n\t\t\t//\tView.viewsById[this.id] = this;\n\t\t\t//}\n\n\t\t\tthis.view = this.implInitialize();\n\t\t\tif (this.isInitializing) {\n\t\t\t\tthrowError(this.name || this, 'view is null', !this.view);\n\t\t\t\tthis.hide(false);\n\t\t\t\tthis.isInitializing = false;\n\t\t\t\tthis.isInitialized = true;\n\t\t\t} else {\n\t\t\t\t// finalized while initializing\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t}\n\n\t\tpublic ready():void {\n\t\t\tif (this.isReadying || this.isReadied) return;\n\t\t\tthis.isReadying = true;\n\t\t\tthrowError(this.name || this, 'ready() was called without being initialized', !this.isInitialized);\n\t\t\tthis.implReady();\n\t\t\tthis.isReadying = false;\n\t\t\tthis.isReadied = true;\n\t\t}\n\n\t\tpublic finalize():void {\n\t\t\tif (!this.isInitializing && !this.isInitialized) return;\n\t\t\tthis.implFinalize();\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = false;\n\n\t\t\tdelete View.viewsById[this.id];\n\t\t\tView.viewsById[this.id] = null;\n\t\t}\n\n\t\tpublic show(useTransition:boolean = true):void {\n\t\t\tif (this.isShown) return;\n\t\t\tthis.getShowCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic hide(useTransition:boolean = true):void {\n\t\t\tif (!this.isShown) return;\n\t\t\tthis.getHideCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic getShowCommand(useTransition:boolean = true):cmd.Command {\n\t\t\tconst command:cmd.Serial = new cmd.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tif (this.isShown) return;\n\t\t\t\t\tthrowError(this.name || this, 'getShowCommand() was called without being initialized', this.isInitializing || !this.isInitialized);\n\t\t\t\t\tthrowWarn(this.name || this, 'getShowCommand() was called without being ready', this.isReadying|| !this.isReadied);\n\t\t\t\t\tthis.isShown = true;\n\t\t\t\t\tthis.isShowing = true;\n\t\t\t\t\tthis.isHiding = false;\n\n\t\t\t\t\tif (this.showCommand) {\n\t\t\t\t\t\tthis.showCommand.interrupt();\n\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.hideCommand) {\n\t\t\t\t\t\tthis.hideCommand.interrupt();\n\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.showCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implShow(this.view, useTransition),\n\t\t\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic getHideCommand(useTransition:boolean = true):cmd.Command {\n\t\t\tconst command:cmd.Serial = new cmd.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tif (!this.isShown) return;\n\t\t\t\t\tif (!this.isInitializing) {\n\t\t\t\t\t\tthrowError(this.name || this, 'getHideCommand() was called without being initialized', this.isInitializing || !this.isInitialized);\n\t\t\t\t\t\tthrowWarn(this.name || this, 'getHideCommand() was called without being ready', this.isReadying || !this.isReadied);\n\t\t\t\t\t}\n\t\t\t\t\tthis.isShown = false;\n\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\tthis.isHiding = true;\n\n\t\t\t\t\tif (this.showCommand) {\n\t\t\t\t\t\tthis.showCommand.interrupt();\n\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.hideCommand) {\n\t\t\t\t\t\tthis.hideCommand.interrupt();\n\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.hideCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implHide(this.view, useTransition),\n\t\t\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t\t\tthis.isHiding = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic getIsInitializing():boolean {\n\t\t\treturn this.isInitializing;\n\t\t}\n\n\t\tpublic getIsInitialized():boolean {\n\t\t\treturn this.isInitialized;\n\t\t}\n\n\t\tpublic getIsReadying():boolean {\n\t\t\treturn this.isReadying;\n\t\t}\n\n\t\tpublic getIsReadied():boolean {\n\t\t\treturn this.isReadied;\n\t\t}\n\n\t\tpublic getIsShowing():boolean {\n\t\t\treturn this.isShowing;\n\t\t}\n\n\t\tpublic getIsShown():boolean {\n\t\t\treturn this.isShown;\n\t\t}\n\n\t\tpublic getIsHiding():boolean {\n\t\t\treturn this.isHiding;\n\t\t}\n\n\t\tpublic getIsHidden():boolean {\n\t\t\treturn !this.isShown;\n\t\t}\n\n\t\tpublic getId():string {\n\t\t\treturn this.id;\n\t\t}\n\n\t\tpublic getView():T {\n\t\t\treturn this.view;\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic setName(value:string):void {\n\t\t\tthis.name = value;\n\t\t}\n\n\t\tpublic getAutoHideWithInit():boolean {\n\t\t\treturn this.autoHideWithInit;\n\t\t}\n\n\t\tpublic setAutoHideWithInit(value:boolean):void {\n\t\t\tthis.autoHideWithInit = value;\n\t\t}\n\n\n\n\n\n\t\tprotected abstract implInitialize():T;\n\t\tprotected abstract implReady():void;\n\t\tprotected abstract implFinalize():void;\n\t\tprotected abstract implShow(view:T, useTransition:boolean):cmd.Command;\n\t\tprotected abstract implHide(view:T, useTransition:boolean):cmd.Command;\n\n\n\n\n\n\t\tpublic static getViewById(id:string):View {\n\t\t\treturn View.viewsById[id];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate id:string;\n\t\tprivate view:T;\n\t\tprivate name:string;\n\t\tprivate autoHideWithInit:boolean;\n\t\tprivate showCommand:cmd.Command;\n\t\tprivate hideCommand:cmd.Command;\n\t\tprivate isInitializing:boolean;\n\t\tprivate isInitialized:boolean;\n\t\tprivate isReadying:boolean;\n\t\tprivate isReadied:boolean;\n\t\tprivate isShowing:boolean;\n\t\tprivate isShown:boolean;\n\t\tprivate isHiding:boolean;\n\n\t\tprivate static viewCount:number = 0;\n\t\tprivate static viewsById:util.Hash<View> = {};\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\texport class ButtonBehavior {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:IButton, hitArea:HTMLElement = null, isHoverCursorEnabled:boolean = true, isPreventDefaultEnabled:boolean = true, isStopPropagationEnabled:boolean = true) {\n\t\t\tthis.target = target;\n\t\t\tthis.hitArea = null;\n\t\t\tthis.isHoverCursorEnabled = isHoverCursorEnabled;\n\t\t\tthis.isPreventDefaultEnabled = isPreventDefaultEnabled;\n\t\t\tthis.isStopPropagationEnabled = isStopPropagationEnabled;\n\t\t\tthis.isEnabled = true;\n\t\t\tthis.isOver = false;\n\t\t\tthis.isDown = false;\n\t\t\tthis.isOverInternal = false;\n\t\t\tthis.isDownInternal = false;\n\t\t\tthis.defaultMouseCursor = '';\n\n\t\t\tthis.setHitArea(hitArea);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic over(useTransition:boolean = true):void {\n\t\t\tthis.isOverInternal = true;\n\t\t\tif (this.isEnabled) {\n\t\t\t\tif (this.isOver) return;\n\t\t\t\tthis.isOver = true;\n\t\t\t\tthis.target.implButtonOver(useTransition);\n\t\t\t}\n\t\t}\n\n\t\tpublic out(useTransition:boolean = true):void {\n\t\t\tthis._out(true, useTransition);\n\t\t}\n\n\t\tprivate _out(checkEnabled:boolean, useTransition:boolean = true):void {\n\t\t\tthis.isOverInternal = false;\n\t\t\tif (this.isEnabled || !checkEnabled) {\n\t\t\t\tif (!this.isOver) return;\n\t\t\t\tthis.isOver = false;\n\t\t\t\tthis.target.implButtonOut(useTransition);\n\t\t\t}\n\t\t}\n\n\t\tpublic down(useTransition:boolean = true):void {\n\t\t\tthis.isDownInternal = true;\n\t\t\tif (this.isEnabled) {\n\t\t\t\tif (this.isDown) return;\n\t\t\t\tthis.isDown = true;\n\t\t\t\tthis.target.implButtonDown(useTransition);\n\t\t\t}\n\t\t}\n\n\t\tpublic up(useTransition:boolean = true):void {\n\t\t\tthis._up(true, useTransition);\n\t\t}\n\n\t\tprivate _up(checkEnabled:boolean, useTransition:boolean = true):void {\n\t\t\tthis.isDownInternal = false;\n\t\t\tif (this.isEnabled || !checkEnabled) {\n\t\t\t\tif (!this.isDown) return;\n\t\t\t\tthis.isDown = false;\n\t\t\t\tthis.target.implButtonUp(useTransition);\n\t\t\t}\n\t\t}\n\n\t\tpublic click(useTransition:boolean = true):void {\n\t\t\tif (this.isEnabled) {\n\t\t\t\tthis.target.implButtonClick(useTransition);\n\t\t\t}\n\t\t}\n\n\t\tprivate on():void {\n\t\t\tif (this.hitArea == null) return;\n\n\t\t\tthis.hitArea.addEventListener('mouseover', this.mouseOverHandler);\n\t\t\tthis.hitArea.addEventListener('mouseout', this.mouseOutHandler);\n\t\t\tthis.hitArea.addEventListener('mousedown', this.mouseDownHandler);\n\t\t\tthis.hitArea.addEventListener('mouseup', this.mouseUpHandler);\n\t\t\tthis.hitArea.addEventListener('click', this.clickHandler);\n\n\t\t\tthis.hitArea.addEventListener('touchstart', this.touchStartHandler);\n\t\t\tthis.hitArea.addEventListener('touchend', this.touchEndHandler);\n\t\t\tthis.hitArea.addEventListener('touchcancel', this.touchCancelHandler);\n\t\t}\n\n\t\tprivate off():void {\n\t\t\tif (this.hitArea == null) return;\n\n\t\t\tthis.hitArea.removeEventListener('mouseover', this.mouseOverHandler);\n\t\t\tthis.hitArea.removeEventListener('mouseout', this.mouseOutHandler);\n\t\t\tthis.hitArea.removeEventListener('mousedown', this.mouseDownHandler);\n\t\t\tthis.hitArea.removeEventListener('mouseup', this.mouseUpHandler);\n\t\t\tthis.hitArea.removeEventListener('click', this.clickHandler);\n\n\t\t\tthis.hitArea.removeEventListener('touchstart', this.touchStartHandler);\n\t\t\tthis.hitArea.removeEventListener('touchend', this.touchEndHandler);\n\t\t\tthis.hitArea.removeEventListener('touchcancel', this.touchCancelHandler);\n\t\t}\n\n\t\tpublic getIsEnabled():boolean {\n\t\t\treturn this.isEnabled;\n\t\t}\n\n\t\tpublic setIsEnabled(value:boolean, useTransition:boolean = true):void {\n\t\t\tif (this.isEnabled != value) {\n\t\t\t\tthis.isEnabled = value;\n\t\t\t\tif (this.isEnabled) {\n\t\t\t\t\tif (this.isOverInternal) {\n\t\t\t\t\t\tthis.over();\n\t\t\t\t\t}\n\t\t\t\t\tif (this.isDownInternal) {\n\t\t\t\t\t\tthis.down();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.isOver) {\n\t\t\t\t\t\tthis._out(false);\n\t\t\t\t\t\tthis.isOverInternal = true;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.isDown) {\n\t\t\t\t\t\tthis._up(false);\n\t\t\t\t\t\tthis.isDownInternal = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.target.implButtonChangeEnabled(this.isEnabled, useTransition);\n\t\t\t}\n\t\t}\n\n\t\tpublic getIsOver():boolean {\n\t\t\treturn this.isOver;\n\t\t}\n\n\t\tpublic getIsDown():boolean {\n\t\t\treturn this.isDown;\n\t\t}\n\n\t\tpublic getHitArea():HTMLElement {\n\t\t\treturn this.hitArea;\n\t\t}\n\n\t\tpublic setHitArea(hitArea:HTMLElement):void {\n\t\t\tif (this.hitArea !== hitArea) {\n\t\t\t\tthis.off();\n\t\t\t\tthis.hitArea = hitArea;\n\t\t\t\tthis.on();\n\t\t\t}\n\t\t}\n\n\t\tpublic clearHitArea():void {\n\t\t\tthis.setHitArea(null);\n\t\t}\n\n\t\tpublic getIsPreventDefaultEnabled():boolean {\n\t\t\treturn this.isPreventDefaultEnabled;\n\t\t}\n\n\t\tpublic setIsPreventDefaultEnabled(enabled:boolean):void {\n\t\t\tthis.isPreventDefaultEnabled = enabled;\n\t\t}\n\n\t\tpublic getIsStopPropagationEnabled():boolean {\n\t\t\treturn this.isStopPropagationEnabled;\n\t\t}\n\n\t\tpublic setIsStopPropagationEnabled(enabled:boolean):void {\n\t\t\tthis.isStopPropagationEnabled = enabled;\n\t\t}\n\n\t\tpublic getIsHoverCursorEnabled():boolean {\n\t\t\treturn this.isHoverCursorEnabled;\n\t\t}\n\n\t\tpublic setIsHoverCursorEnabled(enabled:boolean):void {\n\t\t\tthis.isHoverCursorEnabled = enabled;\n\t\t}\n\n\t\tprivate applyMouseCursor():void {\n\t\t\tif (this.isHoverCursorEnabled) {\n\t\t\t\tif (this.isOverInternal && this.isEnabled && this.hitArea != null) {\n\t\t\t\t\tthis.defaultMouseCursor = this.hitArea.style.cursor;\n\t\t\t\t\tthis.hitArea.style.cursor = 'pointer';\n\t\t\t\t} else {\n\t\t\t\t\tthis.hitArea.style.cursor = this.defaultMouseCursor != '' ? this.defaultMouseCursor : 'auto';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// --------------------------------------------------\n\t\t// Mouse Event\n\n\t\tprivate mouseOverHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.over();\n\t\t\tthis.applyMouseCursor();\n\t\t};\n\n\t\tprivate mouseOutHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.out();\n\t\t\tthis.applyMouseCursor();\n\t\t};\n\n\t\tprivate mouseDownHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.down();\n\t\t};\n\n\t\tprivate mouseUpHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.up();\n\t\t};\n\n\t\tprivate clickHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.click();\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Touch Event\n\n\t\tprivate touchStartHandler = (event:TouchEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.down();\n\t\t};\n\n\t\tprivate touchEndHandler = (event:TouchEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.up();\n\t\t\tthis.click();\n\t\t};\n\n\t\tprivate touchCancelHandler = (event:TouchEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.up();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:IButton;\n\t\tprivate hitArea:HTMLElement;\n\t\tprivate isEnabled:boolean;\n\t\tprivate isOver:boolean;\n\t\tprivate isDown:boolean;\n\t\tprivate isOverInternal:boolean;\n\t\tprivate isDownInternal:boolean;\n\t\tprivate isPreventDefaultEnabled:boolean;\n\t\tprivate isStopPropagationEnabled:boolean;\n\t\tprivate isHoverCursorEnabled:boolean;\n\t\tprivate defaultMouseCursor:string;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\texport class SelectionBehavior {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:ISelection) {\n\t\t\tthis.target = target;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic select(useTransition:boolean = true):void {\n\t\t\tif (this.isSelected) return;\n\t\t\tthis.isSelected = true;\n\t\t\tthis.target.implSelectionChanged(this.isSelected, useTransition);\n\t\t}\n\n\t\tpublic deselect(useTransition:boolean = true):void {\n\t\t\tif (!this.isSelected) return;\n\t\t\tthis.isSelected = false;\n\t\t\tthis.target.implSelectionChanged(this.isSelected, useTransition);\n\t\t}\n\n\t\tpublic getIsSelected():boolean {\n\t\t\treturn this.isSelected;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:ISelection;\n\t\tprivate isSelected:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class DeviceInfo {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tconst u:string = window.navigator.userAgent.toLowerCase();\n\n\t\t\t// Device\n\t\t\tthis.isTablet = (u.indexOf('windows') != -1 && u.indexOf('touch') != -1)\n\t\t\t\t|| u.indexOf('ipad') != -1\n\t\t\t\t|| (u.indexOf('android') != -1 && u.indexOf('mobile') == -1)\n\t\t\t\t|| (u.indexOf('firefox') != -1 && u.indexOf('tablet') != -1)\n\t\t\t\t|| u.indexOf('kindle') != -1\n\t\t\t\t|| u.indexOf('silk') != -1\n\t\t\t\t|| u.indexOf('playbook') != -1;\n\n\t\t\tthis.isMobile = (u.indexOf('windows') != -1 && u.indexOf('phone') != -1)\n\t\t\t\t|| u.indexOf('iphone') != -1\n\t\t\t\t|| u.indexOf('ipod') != -1\n\t\t\t\t|| (u.indexOf('android') != -1 && u.indexOf('mobile') != -1)\n\t\t\t\t|| (u.indexOf('firefox') != -1 && u.indexOf('mobile') != -1)\n\t\t\t\t|| u.indexOf('blackberry') != -1;\n\n\t\t\tthis.isDesktop = !this.isTablet && !this.isMobile;\n\n\t\t\t// OS\n\t\t\tthis.isIOS = u.indexOf('ipad') != -1 || u.indexOf('iphone') != -1 || u.indexOf('ipod') != -1;\n\t\t\tthis.isAndroid = u.indexOf('android') != -1 && u.indexOf('mobile') != -1;\n\n\t\t\t// Browser\n\t\t\tif(u.indexOf('msie') != -1 || u.indexOf('trident') != -1) {\n\t\t\t\tthis.isIE = true;\n\t\t\t} else if(u.indexOf('edge') != -1) {\n\t\t\t\tthis.isEdge = true;\n\t\t\t} else if(u.indexOf('chrome') != -1) {\n\t\t\t\tthis.isChrome = true;\n\t\t\t} else if(u.indexOf('safari') != -1) {\n\t\t\t\tthis.isSafari = true;\n\t\t\t} else if(u.indexOf('firefox') != -1) {\n\t\t\t\tthis.isFireFox = true;\n\t\t\t} else if(u.indexOf('opera') != -1) {\n\t\t\t\tthis.isOpera = true;\n\t\t\t} else {\n\t\t\t\tthis.isUnknownBrowser = true;\n\t\t\t}\n\n\t\t\t// Function\n\t\t\tthis.isTouchEnabled = (typeof window.ontouchstart) !== 'undefined';\n\t\t\tthis.isDownloadEnabled = !this.isIOS;\n\n\t\t\t// Resolution\n\t\t\tthis.devicePixelRatio = window.devicePixelRatio;\n\t\t\tthis.isRetina = this.devicePixelRatio > 1;\n\t\t}\n\n\t\t// --------------------\n\t\t// Device\n\n\t\tpublic static getIsDesktop():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isDesktop;\n\t\t}\n\n\t\tpublic static getIsTablet():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isTablet;\n\t\t}\n\n\t\tpublic static getIsMobile():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isMobile;\n\t\t}\n\n\t\t// --------------------\n\t\t// OS\n\n\t\tpublic static getIsIOS():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isIOS;\n\t\t}\n\n\t\tpublic static getIsAndroid():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isAndroid;\n\t\t}\n\n\t\t// --------------------\n\t\t// Browser\n\n\t\tpublic static getIsIE():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isIE;\n\t\t}\n\n\t\tpublic static getIsEdge():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isEdge;\n\t\t}\n\n\t\tpublic static getIsChrome():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isChrome;\n\t\t}\n\n\t\tpublic static getIsSafari():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isSafari;\n\t\t}\n\n\t\tpublic static getIsFireFox():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isFireFox;\n\t\t}\n\n\t\tpublic static getIsOpera():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isOpera;\n\t\t}\n\n\t\tpublic static getIsUnknownBrowser():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isUnknownBrowser;\n\t\t}\n\n\t\t// --------------------\n\t\t// Function\n\n\t\tpublic static getIsTouchEnabled():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isTouchEnabled;\n\t\t}\n\n\t\tpublic static getIsDownloadEnabled():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isDownloadEnabled;\n\t\t}\n\n\t\t// --------------------\n\t\t// Resolution\n\n\t\tpublic static getIsRetina():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isRetina;\n\t\t}\n\n\t\tpublic static getDevicePixelRatio():number {\n\t\t\tthis.initialize();\n\t\t\treturn this.devicePixelRatio;\n\t\t}\n\n\t\tpublic static getDpi():number {\n\t\t\tif (this.dpi == -1) {\n\t\t\t\tconst div:HTMLElement = document.createElement('div');\n\t\t\t\tdiv.setAttribute('style', 'height:1in;left:-100%;top:-100%;position:absolute;width:1in;');\n\t\t\t\tdocument.body.appendChild(div);\n\t\t\t\tthis.dpi = div.offsetHeight;\n\t\t\t\tdocument.body.removeChild(div);\n\t\t\t}\n\t\t\treturn this.dpi;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static isDesktop:boolean = false;\n\t\tprivate static isTablet:boolean = false;\n\t\tprivate static isMobile:boolean = false;\n\n\t\tprivate static isIOS:boolean = false;\n\t\tprivate static isAndroid:boolean = false;\n\n\t\tprivate static isIE:boolean = false;\n\t\tprivate static isEdge:boolean = false;\n\t\tprivate static isChrome:boolean = false;\n\t\tprivate static isSafari:boolean = false;\n\t\tprivate static isFireFox:boolean = false;\n\t\tprivate static isOpera:boolean = false;\n\t\tprivate static isUnknownBrowser:boolean = false;\n\n\t\tprivate static isTouchEnabled:boolean = false;\n\t\tprivate static isDownloadEnabled:boolean = false;\n\n\t\tprivate static isRetina:boolean = false;\n\t\tprivate static devicePixelRatio:number = 1;\n\t\tprivate static dpi:number = -1;\n\n\t\tprivate static isInitialized:boolean = false;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class LocalStorage {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t * @param value \n\t\t * @param expiredAt UNIX\n\t\t * @returns {boolean} true\n\t\t */\n\t\tpublic static save(key:string, value:any, expiredAt:number = -1):boolean {\n\t\t\tif (!LocalStorage.isAvailable()) return false;\n\t\t\tconst record:{ value:string; expiredAt:number } = { value:JSON.stringify(value), expiredAt: expiredAt };\n\t\t\tlocalStorage.setItem(key, JSON.stringify(record));\n\t\t\treturn true;\n\t\t}\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t * @param value \n\t\t * @param minutes \n\t\t * @returns {boolean} true\n\t\t */\n\t\tpublic static saveWithTerm(key:string, value:any, milliseconds:number = -1):boolean {\n\t\t\tconst expiredAt:number = milliseconds > 0 ? new Date().getTime() + milliseconds :-1;\n\t\t\treturn LocalStorage.save(key, value, expiredAt);\n\t\t}\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t * @returns {any} \n\t\t */\n\t\tpublic static load(key:string, defaultValue:any = null):any {\n\t\t\tif (!LocalStorage.isAvailable()) return defaultValue;\n\t\t\tconst record:{ value:string; expiredAt:number } = JSON.parse(localStorage.getItem(key));\n\t\t\tif (record) {\n\t\t\t\t// \n\t\t\t\tif (record.expiredAt > 0) {\n\t\t\t\t\t// \n\t\t\t\t\tif (new Date().getTime() < record.expiredAt) {\n\t\t\t\t\t\t// \n\t\t\t\t\t\treturn JSON.parse(record.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// \n\t\t\t\t\t\tlocalStorage.removeItem(key);\n\t\t\t\t\t\treturn defaultValue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// \n\t\t\t\t\treturn JSON.parse(record.value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// \n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t */\n\t\tpublic static remove(key:string):void {\n\t\t\tif (!LocalStorage.isAvailable()) return;\n\t\t\tlocalStorage.removeItem(key);\n\t\t}\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @returns {boolean} true\n\t\t */\n\t\tpublic static isAvailable():boolean {\n\t\t\tif (LocalStorage.isAvailable_ == null) {\n\t\t\t\ttry {\n\t\t\t\t\tlocalStorage.setItem('__CKECK__', '__CKECK__');\n\t\t\t\t\tlocalStorage.removeItem('__CKECK__');\n\t\t\t\t\tLocalStorage.isAvailable_ = true;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tLocalStorage.isAvailable_ = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn LocalStorage.isAvailable_;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param dates \n\t\t * @param hours \n\t\t * @param minutes \n\t\t * @param seconds \n\t\t * @param milliseconds \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static toMilliseconds(dates:number = 0, hours:number = 0, minutes:number = 0, seconds:number = 0, milliseconds:number = 0):number {\n\t\t\treturn milliseconds + (seconds + (minutes + (hours + dates * 24) * 60) * 60) * 1000;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static isAvailable_:boolean = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\t// https://github.com/nfriend/ts-keycode-enum\n\texport enum KeyCode {\n\t\tBackspace = 8,\n\t\tTab = 9,\n\t\tEnter = 13,\n\t\tShift = 16,\n\t\tCtrl = 17,\n\t\tAlt = 18,\n\t\tPauseBreak = 19,\n\t\tCapsLock = 20,\n\t\tEscape = 27,\n\t\tSpace = 32,\n\t\tPageUp = 33,\n\t\tPageDown = 34,\n\t\tEnd = 35,\n\t\tHome = 36,\n\n\t\tLeftArrow = 37,\n\t\tUpArrow = 38,\n\t\tRightArrow = 39,\n\t\tDownArrow = 40,\n\n\t\tInsert = 45,\n\t\tDelete = 46,\n\n\t\tKey0 = 48,\n\t\tKey1 = 49,\n\t\tKey2 = 50,\n\t\tKey3 = 51,\n\t\tKey4 = 52,\n\t\tKey5 = 53,\n\t\tKey6 = 54,\n\t\tKey7 = 55,\n\t\tKey8 = 56,\n\t\tKey9 = 57,\n\n\t\tClosedParen = Key0,\n\t\tExclamationMark = Key1,\n\t\tAtSign = Key2,\n\t\tPoundSign = Key3,\n\t\tHash = PoundSign,\n\t\tDollarSign = Key4,\n\t\tPercentSign = Key5,\n\t\tCaret = Key6,\n\t\tHat = Caret,\n\t\tAmpersand = Key7,\n\t\tStar = Key8,\n\t\tAsterik = Star,\n\t\tOpenParen = Key9,\n\n\t\tA = 65,\n\t\tB = 66,\n\t\tC = 67,\n\t\tD = 68,\n\t\tE = 69,\n\t\tF = 70,\n\t\tG = 71,\n\t\tH = 72,\n\t\tI = 73,\n\t\tJ = 74,\n\t\tK = 75,\n\t\tL = 76,\n\t\tM = 77,\n\t\tN = 78,\n\t\tO = 79,\n\t\tP = 80,\n\t\tQ = 81,\n\t\tR = 82,\n\t\tS = 83,\n\t\tT = 84,\n\t\tU = 85,\n\t\tV = 86,\n\t\tW = 87,\n\t\tX = 88,\n\t\tY = 89,\n\t\tZ = 90,\n\n\t\tLeftWindowKey = 91,\n\t\tRightWindowKey = 92,\n\t\tSelectKey = 93,\n\n\t\tNumpad0 = 96,\n\t\tNumpad1 = 97,\n\t\tNumpad2 = 98,\n\t\tNumpad3 = 99,\n\t\tNumpad4 = 100,\n\t\tNumpad5 = 101,\n\t\tNumpad6 = 102,\n\t\tNumpad7 = 103,\n\t\tNumpad8 = 104,\n\t\tNumpad9 = 105,\n\n\t\tMultiply = 106,\n\t\tAdd = 107,\n\t\tSubtract = 109,\n\t\tDecimalPoint = 110,\n\t\tDivide = 111,\n\n\t\tF1 = 112,\n\t\tF2 = 113,\n\t\tF3 = 114,\n\t\tF4 = 115,\n\t\tF5 = 116,\n\t\tF6 = 117,\n\t\tF7 = 118,\n\t\tF8 = 119,\n\t\tF9 = 120,\n\t\tF10 = 121,\n\t\tF11 = 122,\n\t\tF12 = 123,\n\n\t\tNumLock = 144,\n\t\tScrollLock = 145,\n\n\t\tSemiColon = 186,\n\t\tEquals = 187,\n\t\tComma = 188,\n\t\tDash = 189,\n\t\tPeriod = 190,\n\t\tUnderScore = Dash,\n\t\tPlusSign = Equals,\n\t\tForwardSlash = 191,\n\t\tTilde = 192,\n\t\tGraveAccent = Tilde,\n\n\t\tOpenBracket = 219,\n\t\tClosedBracket = 221,\n\t\tQuote = 222\n\t}\n\n\n\n\n\n\texport class KeyWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[KeyWatcher] start');\n\n\t\t\twindow.addEventListener('keydown', this.windowKeyDownHandler);\n\t\t\twindow.addEventListener('keyup', this.windowKeyUpHandler);\n\t\t}\n\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[KeyWatcher] stop');\n\n\t\t\twindow.removeEventListener('keydown', this.windowKeyDownHandler);\n\t\t\twindow.removeEventListener('keyup', this.windowKeyUpHandler);\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener);\n\t\t}\n\n\n\n\n\n\t\tprivate static windowKeyDownHandler = (event:KeyboardEvent):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] == null) {\n\t\t\t\tKeyWatcher.isKeyPressedByKeyCode[keyCode] = true;\n\t\t\t\t++KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_DOWN, KeyWatcher, event));\n\t\t\t} else if (KeyWatcher.isContinuousPressEnabled) {\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_DOWN, KeyWatcher, event));\n\t\t\t}\n\t\t};\n\n\t\tprivate static windowKeyUpHandler = (event:KeyboardEvent):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] != null) {\n\t\t\t\tdelete KeyWatcher.isKeyPressedByKeyCode[keyCode];\n\t\t\t\t--KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_UP, KeyWatcher, event));\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getIsAnyKeyPressed():boolean { return this.pressedKeyCount > 0; }\n\t\tprivate static pressedKeyCount:number = 0;\n\n\t\tpublic static getIsKeyPressed(keyCode:number):boolean { return this.isKeyPressedByKeyCode[keyCode] != null; }\n\t\tprivate static isKeyPressedByKeyCode:util.Hash<boolean> = {};\n\n\n\t\tpublic static getIsContinuousPressEnabled():boolean { return this.isContinuousPressEnabled; }\n\t\tpublic static setIsContinuousPressEnabled(enabled:boolean):void { this.isContinuousPressEnabled = enabled; }\n\t\tprivate static isContinuousPressEnabled:boolean = false;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static isLongPressed:boolean = false;\n\t\tprivate static eventDispatcher:alm.event.EventDispatcher = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class KeyWatcherEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic KEY_UP:string = 'keyUp';\n\t\tstatic KEY_DOWN:string = 'keyDown';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, originalEvent:KeyboardEvent = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.originalEvent = originalEvent;\n\t\t\tthis.key = this.originalEvent.key;\n\t\t\tthis.keyCode = this.originalEvent.keyCode;\n\t\t\tthis.altKey = this.originalEvent.altKey;\n\t\t\tthis.ctrlKey = this.originalEvent.ctrlKey;\n\t\t\tthis.shiftKey = this.originalEvent.shiftKey;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():KeyWatcherEvent {\n\t\t\treturn new KeyWatcherEvent(this.getType(), this.getTarget(), this.originalEvent);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[KeyWatcherEvent] type = ' + this.getType() + ', key = ' + this.key + ', keyCode = ' + this.keyCode + ', altKey = ' + this.altKey + ', ctrlKey = ' + this.ctrlKey + ', shiftKey = ' + this.shiftKey;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic originalEvent:KeyboardEvent;\n\t\tpublic key:string;\n\t\tpublic keyCode:number;\n\t\tpublic altKey:boolean;\n\t\tpublic ctrlKey:boolean;\n\t\tpublic shiftKey:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class WindowWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\t\tpublic static start(target:Window = null):void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[WindowWatcher] start');\n\n\t\t\tthis.window = target || window;\n\n\t\t\tthis.window.addEventListener('resize', this.windowResizeHandler);\n\t\t\tthis.window.addEventListener('orientationchange', this.windowResizeHandler);\n\t\t\tthis.window.addEventListener('scroll', this.windowScrollHandler);\n\t\t\tthis.apply();\n\t\t}\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[WindowWatcher] stop');\n\n\t\t\tthis.window.removeEventListener('resize', this.windowResizeHandler);\n\t\t\tthis.window.removeEventListener('orientationchange', this.windowResizeHandler);\n\t\t\tthis.window.removeEventListener('scroll', this.windowScrollHandler);\n\t\t}\n\n\t\tpublic static apply():void {\n\t\t\tthis.windowWidth = this.window.innerWidth;\n\t\t\tthis.windowHeight = this.window.innerHeight;\n\n\t\t\tthis.scrollTop = (this.window.pageYOffset !== undefined) ? this.window.pageYOffset : document.documentElement.scrollTop;\n\t\t\tthis.scrollBottom = this.scrollTop + this.windowHeight;\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:WindowWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:WindowWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static calcScrolledPosition(y:number):number {\n\t\t\treturn y - this.scrollTop;\n\t\t};\n\n\t\tpublic static calcScrolledPositionRatio(y:number):number {\n\t\t\treturn this.calcScrolledPosition(y) / this.windowHeight;\n\t\t}\n\n\t\tprivate static resize(event:Event):void {\n\t\t\tWindowWatcher.apply();\n\t\t\tWindowWatcher.eventDispatcher.dispatchEvent(new WindowWatcherEvent(WindowWatcherEvent.RESIZE, WindowWatcher, event, WindowWatcher.scrollTop, WindowWatcher.scrollBottom, WindowWatcher.windowWidth, WindowWatcher.windowHeight));\n\t\t};\n\n\n\n\n\n\t\tprivate static windowResizeHandler = (event:Event):void => {\n\t\t\tif (!DeviceInfo.getIsDesktop() && WindowWatcher.isMobileOrientationResize) return;\n\t\t\ttrace('[WindowWatcher] resize by window.resize');\n\t\t\tWindowWatcher.resize(event);\n\t\t};\n\n\t\tprivate static windowOrientationChangeHandler = (event:Event):void => {\n\t\t\tif (DeviceInfo.getIsDesktop() || !WindowWatcher.isMobileOrientationResize) return;\n\t\t\ttrace('[WindowWatcher] resize by window.orientationchange');\n\t\t\tWindowWatcher.resize(event);\n\t\t};\n\n\t\tprivate static windowScrollHandler = (event:Event):void => {\n\t\t\tWindowWatcher.apply();\n\t\t\tWindowWatcher.eventDispatcher.dispatchEvent(new WindowWatcherEvent(WindowWatcherEvent.SCROLL, WindowWatcher, event, WindowWatcher.scrollTop, WindowWatcher.scrollBottom, WindowWatcher.windowWidth, WindowWatcher.windowHeight));\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getWindow():Window { return this.window; }\n\t\tprivate static window:Window = null;\n\n\t\tpublic static getScrollTop():number { return this.scrollTop; }\n\t\tprivate static scrollTop:number;\n\n\t\tpublic static getScrollBottom():number { return this.scrollBottom; }\n\t\tprivate static scrollBottom:number;\n\n\t\tpublic static getWindowWidth():number { return this.windowWidth; }\n\t\tprivate static windowWidth:number = 0;\n\n\t\tpublic static getWindowHeight():number { return this.windowHeight; }\n\t\tprivate static windowHeight:number = 0;\n\n\t\tpublic static getIsMobileOrientationResize():boolean { return this.isMobileOrientationResize; }\n\t\tpublic static setIsMobileOrientationResize(value:boolean):void { this.isMobileOrientationResize = value; }\n\t\tprivate static isMobileOrientationResize:boolean = true;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:alm.event.EventDispatcher = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class WindowWatcherEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic SCROLL:string = 'scroll';\n\t\tstatic RESIZE:string = 'resize';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, originalEvent:Event = null, scrollTop:number = 0, scrollBottom:number = 0, windowWidth:number = 0, windowHeight:number = 0) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.originalEvent = originalEvent;\n\t\t\tthis.scrollTop = scrollTop;\n\t\t\tthis.scrollBottom = scrollBottom;\n\t\t\tthis.windowWidth = windowWidth;\n\t\t\tthis.windowHeight = windowHeight;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():WindowWatcherEvent {\n\t\t\treturn new WindowWatcherEvent(this.getType(), this.getTarget(), this.originalEvent, this.scrollTop, this.scrollBottom, this.windowWidth, this.windowHeight);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[WindowWatcherEvent] type = ' + this.getType() + ', scrollTop = ' + this.scrollTop + ', scrollBottom = ' + this.scrollBottom + ', windowWidth = ' + this.windowWidth + ', windowHeight = ' + this.windowHeight;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic originalEvent:Event;\n\t\tpublic scrollTop:number;\n\t\tpublic scrollBottom:number;\n\t\tpublic windowWidth:number;\n\t\tpublic windowHeight:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Logger = alm.util.Logger;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Scene extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(name:string) {\n\t\t\tsuper();\n\t\t\tthis.name = name;\n\t\t\tthis.state = SceneState.Idling;\n\t\t\tthis.parent = null;\n\t\t\tthis.childrenByName = {};\n\t\t\tthis.numChildren = 0;\n\t\t\tthis.isEntered = false;\n\t\t\tthis.onLoad = null;\n\t\t\tthis.onUnload = null;\n\t\t\tthis.onArrive = null;\n\t\t\tthis.onLeave = null;\n\t\t\tthis.onAscend = null;\n\t\t\tthis.onDescend = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addChild(child:Scene):Scene {\n\t\t\tif (child) {\n\t\t\t\tconst childName:string = child.name;\n\t\t\t\tif (this.childrenByName[childName]) {\n\t\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] addChild was failed, because child name \\'' + childName + '\\' is already contained.');\n\t\t\t\t} else {\n\t\t\t\t\t++this.numChildren;\n\t\t\t\t\tchild.parent = this;\n\t\t\t\t\tthis.childrenByName[childName] = child;\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] addChild was failed, because child is null.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic removeChild(child:Scene):Scene {\n\t\t\tif (child) {\n\t\t\t\tconst childName:string = child.name;\n\t\t\t\tif (this.childrenByName[childName]) {\n\t\t\t\t\t--this.numChildren;\n\t\t\t\t\tchild.parent = null;\n\t\t\t\t\tdelete this.childrenByName[childName];\n\t\t\t\t\treturn child;\n\t\t\t\t} else {\n\t\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] removeChild was failed, because child name \\'' + childName + '\\' is not contained.');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] removeChild was failed, because child is null.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic addChildren(children:Scene[]):Scene[] {\n\t\t\tconst addedChildren:Scene[] = [];\n\t\t\tconst n:number = children.length;\n\t\t\tlet c:Scene;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tc = this.addChild(children[i]);\n\t\t\t\tif (c) {\n\t\t\t\t\taddedChildren.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn addedChildren;\n\t\t}\n\n\t\tpublic removeChildren(children:Scene[]):Scene[] {\n\t\t\tconst removedChildren:Scene[] = [];\n\t\t\tconst n:number = children.length;\n\t\t\tlet c:Scene;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tc = this.removeChild(children[i]);\n\t\t\t\tif (c) {\n\t\t\t\t\tremovedChildren.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn removedChildren;\n\t\t}\n\n\t\tpublic removeAllChildren():Scene[] {\n\t\t\tconst children:Scene[] = [];\n\t\t\tlet child:Scene;\n\t\t\tfor (let name in this.childrenByName) {\n\t\t\t\tchild = this.childrenByName[name];\n\t\t\t\tchild.parent = null;\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\t\t\tthis.childrenByName = {};\n\t\t\tthis.numChildren = 0;\n\t\t\treturn children;\n\t\t}\n\n\t\tpublic contains(child:Scene|string):boolean {\n\t\t\tif (child) {\n\t\t\t\treturn this.childrenByName[typeof child == 'string' ? child : child.name] != null;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic getState():SceneState {\n\t\t\treturn this.state;\n\t\t}\n\n\t\tpublic getLastState():SceneState {\n\t\t\treturn this.lastState;\n\t\t}\n\n\t\tpublic getParent():Scene {\n\t\t\treturn this.parent;\n\t\t}\n\n\t\tpublic getChildByName(name:string):Scene {\n\t\t\treturn this.childrenByName[name];\n\t\t}\n\n\t\tpublic getNumChildren():number {\n\t\t\treturn this.numChildren;\n\t\t}\n\n\t\tpublic getManager():SceneManager {\n\t\t\tif (this.parent) {\n\t\t\t\treturn this.parent.getManager();\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] getManager was failed, check whether if scene is connected to root.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic getPath():string {\n\t\t\tconst manager:SceneManager = this.getManager();\n\t\t\tif (manager) {\n\t\t\t\tconst names:string[] = [this.name];\n\t\t\t\tlet scene:Scene = this;\n\t\t\t\twhile (scene = scene.parent) {\n\t\t\t\t\tnames.unshift(scene.name);\n\t\t\t\t}\n\t\t\t\treturn manager.getScenePathByNames(names);\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] getPath was failed, check whether if scene is connected to root.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic gotoScene(path:string):void {\n\t\t\tthis.getManager().goto(path);\n\t\t}\n\n\n\n\n\n\t\tpublic _load(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Loading;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LOAD, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onLoad) == 'function' ? this.onLoad() : this.implOnLoad();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LOAD_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _unload(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Unloading;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.UNLOAD, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onUnload) == 'function' ? this.onUnload() : this.implOnUnload();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.UNLOAD_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _arrive(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Arriving;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ARRIVE, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onArrive) == 'function' ? this.onArrive() : this.implOnArrive();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ARRIVE_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _leave(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Leaving;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LEAVE, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onLeave) == 'function' ? this.onLeave() : this.implOnLeave();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LEAVE_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _ascend(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Ascending;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ASCEND, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onAscend) == 'function' ? this.onAscend() : this.implOnAscend();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ASCEND_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _descend(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Descending;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.DESCEND, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onDescend) == 'function' ? this.onDescend() : this.implOnDescend();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.DESCEND_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\n\n\n\n\t\tprotected implOnLoad():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnUnload():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnArrive():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnLeave():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnAscend():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnDescend():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t// The callback function is called preferentially over the override\n\t\tpublic onLoad:() => cmd.Command;\n\t\tpublic onUnload:() => cmd.Command;\n\t\tpublic onArrive:() => cmd.Command;\n\t\tpublic onLeave:() => cmd.Command;\n\t\tpublic onAscend:() => cmd.Command;\n\t\tpublic onDescend:() => cmd.Command;\n\n\t\tprivate isEntered:boolean;\n\t\tprivate name:string;\n\t\tprivate state:SceneState;\n\t\tprivate lastState:SceneState;\n\t\tprivate parent:Scene;\n\t\tprivate childrenByName:alm.util.Hash<Scene>;\n\t\tprivate numChildren:number;\n\t\tprivate transferInfo:SceneTransferInfo;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Event = alm.event.Event;\n\n\texport class SceneEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static LOAD:string = 'load';\n\t\tpublic static UNLOAD:string = 'unload';\n\t\tpublic static ARRIVE:string = 'arrive';\n\t\tpublic static LEAVE:string = 'leave';\n\t\tpublic static ASCEND:string = 'ascend';\n\t\tpublic static DESCEND:string = 'descend';\n\n\t\tpublic static LOAD_COMPLETE:string = 'loadComplete';\n\t\tpublic static UNLOAD_COMPLETE:string = 'unloadComplete';\n\t\tpublic static ARRIVE_COMPLETE:string = 'arriveComplete';\n\t\tpublic static LEAVE_COMPLETE:string = 'leaveComplete';\n\t\tpublic static ASCEND_COMPLETE:string = 'ascendComplete';\n\t\tpublic static DESCEND_COMPLETE:string = 'descendComplete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():SceneEvent {\n\t\t\treturn new SceneEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[SceneEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Logger = alm.util.Logger;\n\timport LoggerLevel = alm.util.LoggerLevel;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class SceneManager extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(name:string = '') {\n\t\t\tsuper();\n\t\t\tthis.name = name;\n\t\t\tthis.root = new core.RootScene(this);\n\t\t\tthis.currentScene = null;\n\n\t\t\tthis.waypoints = [];\n\t\t\tthis.waypointIndex = -1;\n\t\t\tthis.lastState = SceneState.Idling;\n\t\t\tthis.eventIndex = -1;\n\t\t\tthis.transferId = -1;\n\t\t\tthis.transferInfo = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tLogger.verbose('----- scene manager start -----');\n\t\t\tthis.goto('/');\n\t\t}\n\n\t\tpublic goto(path:string):void {\n\t\t\tpath = this.resolvePath(path);\n\n\t\t\t// Return if current destination and new destination is same.\n\t\t\tif (this.transferInfo && this.transferInfo.getDestinationPath() == path) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Build waypoints\n\t\t\tlet newWaypoints:core.Waypoint[] = [];\n\t\t\tif (this.waypointIndex != -1) {\n\t\t\t\tnewWaypoints = this.createWaypoints(this.waypoints[this.waypointIndex].getPath(), path);\n\t\t\t} else {\n\t\t\t\t// Init\n\t\t\t\tnewWaypoints = [new core.Waypoint('/', 0)];\n\t\t\t}\n\n\t\t\t// Transfer\n\t\t\tif (newWaypoints.length > 0) {\n\t\t\t\tconst isDestinationChanged:boolean = this.transferInfo != null;\n\n\t\t\t\tif (!isDestinationChanged) {\n\t\t\t\t\tthis.waypointIndex = 0;\n\t\t\t\t\tthis.eventIndex = 0;\n\t\t\t\t\t++this.transferId;\n\t\t\t\t\tthis.waypoints = newWaypoints;\n\t\t\t\t} else {\n\t\t\t\t\tLogger.verbose('destination is changed');\n\t\t\t\t\tLogger.verbose('waypoint index : ' + this.waypointIndex);\n\t\t\t\t\tthis.waypoints = this.waypoints.slice(0, this.waypointIndex + 1).concat(newWaypoints.slice(1));\n\t\t\t\t\tthis.setDirection(this.waypoints);\n\t\t\t\t\tthis.printWaypoint(this.waypoints);\n\t\t\t\t}\n\n\t\t\t\tthis.transferInfo = new SceneTransferInfo(this.transferId, this.waypoints[this.waypointIndex].getPath(), this.waypoints[this.waypoints.length - 1].getPath());\n\n\t\t\t\tif (!isDestinationChanged) {\n\t\t\t\t\tthis.dispatchEvent(new SceneManagerEvent(SceneManagerEvent.TRANSFER_START, this));\n\t\t\t\t}\n\n\t\t\t\tthis.checkState();\n\t\t\t}\n\t\t}\n\n\t\tpublic resolvePath(path:string):string {\n\t\t\t// Relative to absolute\n\t\t\tif (path[0] != '/') {\n\t\t\t\tif (this.currentScene) {\n\t\t\t\t\tpath = this.currentScene.getPath() + '/' + path;\n\t\t\t\t} else {\n\t\t\t\t\tpath = '/' + path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Normalize\n\t\t\tconst names:string[] = path.split('/');\n\t\t\tconst normalized:string[] = [];\n\t\t\tfor (let i:number = 0; i < names.length; ++i) {\n\t\t\t\tconst name:string = names[i];\n\t\t\t\tif (name == '') continue;\n\t\t\t\tif (name == '.') continue;\n\t\t\t\tif (name == '..') {\n\t\t\t\t\tnormalized.pop();\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tnormalized.push(name);\n\t\t\t}\n\n\t\t\treturn '/' + normalized.join('/');\n\t\t}\n\n\t\tpublic addSceneAt(path:string, createScene:boolean = false):Scene {\n\t\t\tlet success:boolean = false;\n\t\t\tconst names:string[] = this.getSceneNamesByPath(path);\n\t\t\tconst n:number = names.length;\n\t\t\tlet scene:Scene = this.root;\n\t\t\tfor (let i:number = 1; i < n; ++i) {\n\t\t\t\tconst name:string = names[i];\n\t\t\t\tif (i == n - 1) {\n\t\t\t\t\tif (scene.contains(name)) {\n\t\t\t\t\t\tLogger.warn('[SceneManager \\'' + this.name + '\\'] addSceneAt was failed, because path \\'' + path + '\\' is already exist.');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscene = scene.addChild(new Scene(name));\n\t\t\t\t\t\tsuccess = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (scene.contains(name)) {\n\t\t\t\t\t\tscene = scene.getChildByName(name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscene = scene.addChild(new Scene(name));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn success ? scene : null;\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic getRoot():Scene {\n\t\t\treturn this.root;\n\t\t}\n\n\t\tpublic getSceneByPath(path:string):Scene {\n\t\t\tconst names:string[] = this.getSceneNamesByPath(path);\n\t\t\tconst n:number = names.length;\n\t\t\tlet scene:Scene = this.root;\n\t\t\tfor (let i:number = 1; i < n; ++i) {\n\t\t\t\tscene = scene.getChildByName(names[i]);\n\t\t\t}\n\t\t\treturn scene;\n\t\t}\n\n\t\tpublic getSceneNamesByPath(path:string):string[] {\n\t\t\treturn path == '/' ? [''] : this.resolvePath(path).split('/');\n\t\t}\n\n\t\tpublic getSceneLevelByNames(names:string[]):number {\n\t\t\treturn names.length - 1;\n\t\t}\n\n\t\tpublic getScenePathByNames(names:string[]):string {\n\t\t\treturn names.length == 0 ? '/' : names.length == 1 ? ('/' + names[0]) : names.join('/');\n\t\t}\n\n\t\tprivate createWaypoints(departurePath:string, destinationPath:string):core.Waypoint[] {\n\t\t\tif (departurePath == destinationPath) {\n\t\t\t\tLogger.warn('[SceneManager] departure path and destination path is same, path = \\'' + departurePath + '\\'');\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tLogger.verbose('----- scene flow -----');\n\n\t\t\tconst waypoints:core.Waypoint[] = [\n\t\t\t\tnew core.Waypoint(departurePath, this.getSceneLevelByNames(this.getSceneNamesByPath(departurePath)))\n\t\t\t];\n\n\t\t\tconst departureNames:string[] = this.getSceneNamesByPath(departurePath);\n\t\t\tconst destinationNames:string[] = this.getSceneNamesByPath(destinationPath);\n\n\t\t\tLogger.verbose('    path');\n\t\t\tLogger.verbose('        current    : \\'' + departurePath + '\\'');\n\t\t\tLogger.verbose('        destination: \\'' + destinationPath + '\\'');\n\n\t\t\tLogger.verbose('    names');\n\t\t\tLogger.verbose('        current(' + departureNames.length + ')    : \\'' + departureNames + '\\'');\n\t\t\tLogger.verbose('        destination(' + destinationNames.length + '): \\'' + destinationNames + '\\'');\n\n\t\t\t// \n\t\t\tlet turningLevel:number = 0;\n\t\t\tlet turningNames:string[] = [];\n\t\t\tlet turningPath:string;\n\t\t\tif (destinationPath == '/') {\n\t\t\t\tturningLevel = -1;\n\t\t\t\tturningNames = [];\n\t\t\t\tturningPath = '/';\n\t\t\t} else {\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (departureNames[turningLevel] == destinationNames[turningLevel]) {\n\t\t\t\t\t\tturningNames.push(departureNames[turningLevel]);\n\t\t\t\t\t\t++turningLevel;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t--turningLevel;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tturningPath = this.getScenePathByNames(turningNames);\n\t\t\t}\n\n\t\t\tLogger.verbose('    turning');\n\t\t\tLogger.verbose('        path     : ' + turningPath);\n\t\t\tLogger.verbose('        level    : ' + turningLevel);\n\t\t\tLogger.verbose('        names(' + turningNames.length + ') : \\'' + turningNames + '\\'');\n\n\t\t\t// \n\t\t\t{\n\t\t\t\tconst names:string[] = departureNames.concat();\n\t\t\t\tlet prevPath:string = departurePath;\n\t\t\t\tfor (let i:number = departureNames.length - 1; i > turningLevel + 1; --i) {\n\t\t\t\t\tnames.pop();\n\t\t\t\t\tconst path:string = this.getScenePathByNames(names);\n\t\t\t\t\tif (path != prevPath) {\n\t\t\t\t\t\tconst level:number = this.getSceneLevelByNames(names);\n\t\t\t\t\t\twaypoints.push(new core.Waypoint(path, level));\n\t\t\t\t\t\tprevPath = path;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (turningPath == destinationPath && turningLevel > 0) {\n\t\t\t\t// \n\t\t\t\tconst from:core.Direction = turningLevel == waypoints[waypoints.length - 1].getLevel() ? core.Direction.Sibling : core.Direction.Ascend;\n\t\t\t\twaypoints.push(new core.Waypoint(turningPath, turningLevel));\n\t\t\t} else {\n\n\t\t\t\t// \n\t\t\t\tconst names:string[] = turningNames.concat();\n\t\t\t\tconst prev:core.Waypoint = waypoints[waypoints.length - 1];\n\t\t\t\tlet prevPath:string = prev.getPath();\n\t\t\t\tlet prevLevel:number = prev.getLevel();\n\t\t\t\tfor (let i:number = turningLevel + 1; i < destinationNames.length; ++i) {\n\t\t\t\t\tconst name:string = destinationNames[i];\n\t\t\t\t\tnames.push(name);\n\t\t\t\t\tconst path:string = this.getScenePathByNames(names);\n\t\t\t\t\tif (path != prevPath) {\n\t\t\t\t\t\tconst level:number = this.getSceneLevelByNames(names);\n\t\t\t\t\t\twaypoints.push(new core.Waypoint(path, level));\n\t\t\t\t\t\tprevLevel = level;\n\t\t\t\t\t\tprevPath = path;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// \n\t\t\tthis.setDirection(waypoints);\n\n\t\t\tif (Logger.level <= LoggerLevel.Verbose) {\n\t\t\t\tthis.printWaypoint(waypoints);\n\t\t\t}\n\n\t\t\treturn waypoints;\n\t\t}\n\n\t\tprivate setDirection(waypoints:core.Waypoint[]):void {\n\t\t\tconst n:number = waypoints.length;\n\t\t\tlet prev:core.Waypoint = null;\n\t\t\tlet point:core.Waypoint;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tpoint = waypoints[i];\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tconst d:number = point.getLevel() - prev.getLevel();\n\t\t\t\t\tpoint._setFrom(d > 0 ? core.Direction.Descend : d < 0 ? core.Direction.Ascend : core.Direction.Sibling);\n\t\t\t\t\tprev._setTo(point.getFrom());\n\t\t\t\t}\n\t\t\t\tprev = point;\n\t\t\t}\n\t\t}\n\n\t\tprivate printWaypoint(waypoints:core.Waypoint[]):void {\n\t\t\tLogger.verbose('    waypoints');\n\t\t\tconst n:number = waypoints.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tLogger.verbose('        [' + i + '] ' + waypoints[i]);\n\t\t\t}\n\t\t\tLogger.verbose('');\n\t\t}\n\n\n\n\n\n\t\tprivate checkState():void {\n\t\t\ttrace('lastState : ' + scn.getSceneStateString(this.lastState));\n\n\t\t\t//trace(this.waypointIndex + ' / ' + this.waypoints.length);\n\n\t\t\tif (this.waypointIndex >= this.waypoints.length) {\n\t\t\t\tLogger.verbose('----- scene transfer complete -----');\n\t\t\t\tconst tmpTransferId:number = this.transferInfo.getTransferId();\n\t\t\t\tthis.waypointIndex = this.waypoints.length - 1;\n\t\t\t\tthis.dispatchEvent(new SceneManagerEvent(SceneManagerEvent.TRANSFER_COMPLETE, this));\n\t\t\t\tif (tmpTransferId == this.transferInfo.getTransferId()) {\n\t\t\t\t\tthis.lastState = SceneState.Idling;\n\t\t\t\t\tthis.transferInfo = null;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentScene) {\n\t\t\t\tconst currentWaypoint:core.Waypoint = this.waypoints[this.waypointIndex];\n\t\t\t\tthis.currentScene = this.getSceneByPath(currentWaypoint.getPath());\n\n\t\t\t\t// Departure scene\n\t\t\t\tif (this.waypoints.length > 1 && this.waypointIndex == 0) {\n\t\t\t\t\ttrace('Departure scene');\n\n\t\t\t\t\t// Leave\n\t\t\t\t\tif (this.lastState != SceneState.Leaving && this.currentScene.getLastState() == SceneState.Arriving) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Leave   : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LEAVE_COMPLETE, this.sceneLeaveCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._leave(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Unload\n\t\t\t\t\tif (this.lastState != SceneState.Unloading && (currentWaypoint.getTo() == core.Direction.Sibling || currentWaypoint.getTo() == core.Direction.Ascend)) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Unload  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._unload(this.transferInfo);\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Departure to child\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tthis.checkState();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Through scene\n\t\t\t\tif (this.waypointIndex > 0 && this.waypointIndex < this.waypoints.length - 1) {\n\t\t\t\t\ttrace('Through scene');\n\n\t\t\t\t\t// Load\n\t\t\t\t\tif (this.lastState != SceneState.Loading && (currentWaypoint.getFrom() == core.Direction.Sibling || currentWaypoint.getFrom() == core.Direction.Descend)) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ascend\n\t\t\t\t\tif (this.lastState != SceneState.Ascending && currentWaypoint.getFrom() == core.Direction.Ascend) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Ascend  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.ASCEND_COMPLETE, this.sceneAscendCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._ascend(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Unload\n\t\t\t\t\tif (this.lastState != SceneState.Unloading && (currentWaypoint.getTo() == core.Direction.Sibling || currentWaypoint.getTo() == core.Direction.Ascend)) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Unload  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._unload(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Descend\n\t\t\t\t\tif (this.lastState != SceneState.Descending && currentWaypoint.getTo() == core.Direction.Descend) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Descend : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.DESCEND_COMPLETE, this.sceneDescendCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._descend(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Destination scene\n\t\t\t\tif (this.waypointIndex == this.waypoints.length - 1) {\n\t\t\t\t\ttrace('Destination scene');\n\n\t\t\t\t\t// Load\n\t\t\t\t\tif (this.lastState != SceneState.Loading && (currentWaypoint.getFrom() == core.Direction.Sibling || currentWaypoint.getFrom() == core.Direction.Descend)) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Arrive\n\t\t\t\t\tif (this.lastState != SceneState.Arriving) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Arrive  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.ARRIVE_COMPLETE, this.sceneArriveCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._arrive(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\ttrace('Init scene');\n\n\t\t\t\t// Init\n\t\t\t\tthis.lastState = SceneState.Idling;\n\t\t\t\tthis.currentScene = this.root;\n\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t}\n\t\t}\n\n\t\tprivate sceneLoadCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\tthis.lastState = SceneState.Loading;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneUnloadCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\tthis.lastState = SceneState.Unloading;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneArriveCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.ARRIVE_COMPLETE, this.sceneArriveCompleteHandler);\n\t\t\tthis.lastState = SceneState.Arriving;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneLeaveCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.LEAVE_COMPLETE, this.sceneLeaveCompleteHandler);\n\t\t\tthis.lastState = SceneState.Leaving;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneAscendCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.ASCEND_COMPLETE, this.sceneAscendCompleteHandler);\n\t\t\tthis.lastState = SceneState.Ascending;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneDescendCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.DESCEND_COMPLETE, this.sceneDescendCompleteHandler);\n\t\t\tthis.lastState = SceneState.Descending;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate name:string;\n\t\tprivate root:Scene;\n\t\tprivate currentScene:Scene;\n\n\t\tprivate waypoints:core.Waypoint[];\n\t\tprivate waypointIndex:number;\n\t\tprivate lastState:SceneState;\n\t\tprivate eventIndex:number;\n\t\tprivate transferInfo:SceneTransferInfo;\n\t\tprivate transferId:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Event = alm.event.Event;\n\n\texport class SceneManagerEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static TRANSFER_START:string = 'transferStart';\n\t\tpublic static TRANSFER_COMPLETE:string = 'transferComplete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():SceneManagerEvent {\n\t\t\treturn new SceneManagerEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[SceneManagerEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\texport class SceneTransferInfo {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(transferId:number, departurePath:string, destinationPath:string) {\n\t\t\tthis.transferId = transferId;\n\t\t\tthis.departurePath = departurePath;\n\t\t\tthis.destinationPath = destinationPath;\n\t\t\tthis.relay = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTransferId():number {\n\t\t\treturn this.transferId;\n\t\t}\n\n\t\tpublic getDeparturePath():string {\n\t\t\treturn this.departurePath;\n\t\t}\n\n\t\tpublic getDestinationPath():string {\n\t\t\treturn this.destinationPath;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic relay:any;\n\n\t\tprivate transferId:number;\n\t\tprivate departurePath:string;\n\t\tprivate destinationPath:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\texport enum SceneState {\n\t\tIdling,\n\t\tLoading,\n\t\tUnloading,\n\t\tArriving,\n\t\tLeaving,\n\t\tAscending,\n\t\tDescending,\n\t}\n\n\texport function getSceneStateString(state:SceneState):string {\n\t\tswitch (state) {\n\t\t\tcase SceneState.Idling:\n\t\t\t\treturn 'idling';\n\t\t\tcase SceneState.Loading:\n\t\t\t\treturn 'loading';\n\t\t\tcase SceneState.Unloading:\n\t\t\t\treturn 'unloading';\n\t\t\tcase SceneState.Arriving:\n\t\t\t\treturn 'arriving';\n\t\t\tcase SceneState.Leaving:\n\t\t\t\treturn 'leaving';\n\t\t\tcase SceneState.Ascending:\n\t\t\t\treturn 'ascending';\n\t\t\tcase SceneState.Descending:\n\t\t\t\treturn 'descending';\n\t\t}\n\t\treturn '';\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport enum Direction {\n\t\tStatic,\n\t\tSibling,\n\t\tAscend,\n\t\tDescend,\n\t}\n\n\texport function getDirectionString(direction:Direction):string {\n\t\tswitch (direction) {\n\t\t\tcase Direction.Static:\n\t\t\t\treturn 'static';\n\t\t\tcase Direction.Sibling:\n\t\t\t\treturn 'sibling';\n\t\t\tcase Direction.Ascend:\n\t\t\t\treturn 'ascend';\n\t\t\tcase Direction.Descend:\n\t\t\t\treturn 'descend';\n\t\t}\n\t\treturn '';\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport class RootScene extends Scene {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(manager:SceneManager) {\n\t\t\tsuper('');\n\t\t\tthis.manager = manager;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getManager():SceneManager {\n\t\t\treturn this.manager;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate manager:SceneManager;\n\t}\n}"]}
{"version":3,"sources":["../src/alumican/cmd/Parallel.ts","../src/alumican/scn/core/Waypoint.ts","../src/alumican/include.ts","../src/alumican/alm/util/Logger.ts","../src/alumican/alm/util/Easing.ts","../src/alumican/alm/event/Event.ts","../src/alumican/alm/event/EventDispatcher.ts","../src/alumican/cmd/CommandState.ts","../src/alumican/cmd/CommandEvent.ts","../src/alumican/cmd/Command.ts","../src/alumican/cmd/CommandList.ts","../src/alumican/cmd/Break.ts","../src/alumican/cmd/Return.ts","../src/alumican/cmd/Log.ts","../src/alumican/cmd/Wait.ts","../src/alumican/cmd/Func.ts","../src/alumican/cmd/Listen.ts","../src/alumican/cmd/Tween.ts","../src/alumican/cmd/Serial.ts","../src/alumican/alm/geom/Vector2.ts","../src/alumican/alm/geom/Vector3.ts","../src/alumican/alm/geom/Rectangle.ts","../src/alumican/alm/util/Obj.ts","../src/alumican/alm/util/Arr.ts","../src/alumican/alm/util/Num.ts","../src/alumican/alm/util/Str.ts","../src/alumican/alm/util/Loc.ts","../src/alumican/alm/util/Boxer.ts","../src/alumican/alm/util/Raffle.ts","../src/alumican/alm/util/Rotator.ts","../src/alumican/alm/util/Pager.ts","../src/alumican/alm/util/PagerEvent.ts","../src/alumican/alm/util/Timer.ts","../src/alumican/alm/util/TimerEvent.ts","../src/alumican/alm/util/ObjectPool.ts","../src/alumican/alm/util/CommandUtil.ts","../src/alumican/alm/loader/AssetLoader.ts","../src/alumican/alm/loader/AssetLoaderEvent.ts","../src/alumican/alm/loader/FileQuery.ts","../src/alumican/alm/view/View.ts","../src/alumican/alm/view/ButtonBehavior.ts","../src/alumican/alm/view/SelectionBehavior.ts","../src/alumican/alm/browser/DeviceInfo.ts","../src/alumican/alm/browser/LocalStorage.ts","../src/alumican/alm/browser/KeyWatcher.ts","../src/alumican/alm/browser/KeyWatcherEvent.ts","../src/alumican/alm/browser/WindowWatcher.ts","../src/alumican/alm/browser/WindowWatcherEvent.ts","../src/alumican/scn/Scene.ts","../src/alumican/scn/SceneEvent.ts","../src/alumican/scn/SceneManager.ts","../src/alumican/scn/SceneManagerEvent.ts","../src/alumican/scn/SceneTransferInfo.ts","../src/alumican/scn/SceneState.ts","../src/alumican/scn/core/Direction.ts","../src/alumican/scn/core/RootScene.ts"],"names":["cmd","scn","alm","trace","messages","_i","arguments","length","util","Logger","info","apply","caller","throwWarn","target","message","condition","warnIf","throwError","errorIf","Easing","linear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","Math","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","createEaseInElastic","s","p","a","abs","asin","createEaseOutElastic","createEaseInOutElastic","easeInElastic","defaultEaseInElastic","easeOutElastic","defaultEaseOutElastic","easeInOutElastic","defaultEaseInOutElastic","createEaseInBack","createEaseOutBack","createEaseInOutBack","easeInBack","easeOutBack","defaultEaseOutBack","easeInOutBack","defaultEaseInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","defaultEaseInBack","event","Event","type","data","this","prototype","getType","getTarget","getData","setData","event_1","EventDispatcher","listeners","addEventListener","eventType","listener","numListeners","i","push","removeEventListener","splice","removeAllEventListener","hasEventListener","dispatchEvent","call","dispatchEventType","CommandState","CommandEvent","_super","eventTarget","__extends","clone","toString","COMPLETE","Command","executeFunction","interruptFunction","destroyFunction","_this","setExecuteFunction","setInterruptFunction","setDestroyFunction","state","Sleeping","self","parent","execute","Error","Executing","getExecuteFunction","interrupt","Interrupting","getInterruptFunction","destroy","getDestroyFunction","notifyComplete","implExecuteFunction","command","implInterruptFunction","implDestroyFunction","func","getState","getParent","setParent","getSelf","CommandList","commands","addCommand","preProcess","getCommands","concat","insertCommand","insertCommandAt","index","Array","addCommandArray","insertCommandArray","insertCommandArrayAt","getLength","getCommandByIndex","numCommands","Func","Break","Return","Log","console","log","slice","getMessages","setMessages","Wait","time","completeHandler","timerId","window","setTimeout","cancel","clearTimeout","getTime","setTime","args","eventDispatcher","getFunction","setFunction","getArguments","setArguments","getEventDispatcher","setEventDispatcher","getEventType","setEventType","Listen","Tween","to","from","duration","easing","onStart","onUpdate","onComplete","intervalHandler","elapsedTime","Date","startTime","progressTime","progressValue","tweenTarget","key","internalFrom","setInterval","updateInterval","clearInterval","timeRatio","value0","setTarget","getDuration","setDuration","getTo","setTo","getFrom","setFrom","getEasing","setEasing","getOnStart","setOnStart","getOnUpdate","setOnUpdate","getOnComplete","setOnComplete","getProgressTime","getProgressValue","getUpdateInterval","setUpdateInterval","milliseconds","Serial","currentCommand","position","next","isPaused","isCompleteOnPaused","implNotifyBreak","implNotifyReturn","getPosition","Parallel","completeCount","command_1","command_2","command_3","getCompleteCount","geom","Vector2","x","y","set","copyTo","point","getClone","zero","normalize","l","getSquareDistance","dx","dy","getDistance","Vector3","z","dz","Rectangle","width","height","rect","getTop","getBottom","getLeft","getRight","getTopLeft","getTopRight","getBottomLeft","getBottomRight","Obj","each","Object","keys","forEach","Arr","sequence","count","init","step","result","v","unique","list","filter","indexOf","duplicated","lastIndexOf","roundRobin","list1","list2","callback","j","m","n","Num","map","value","srcMin","srcMax","dstMin","dstMax","clamp","random","min","max","randomInt","floor","dist","x1","y1","x2","y2","squared","radToDeg","radian","RAD2DEG","degToRad","degree","DEG2RAD","turn","PI3","PI2","PI4","PI5","PI6","PI_2","PI_3","PI_4","PI_6","Str","toTimeString","hours","minutes","seconds","h","substr","Loc","getQuery","pair","query","pairs","location","search","substring","split","Align","ScaleMode","Boxer","resize","bounds","scaleMode","align","ShowAll","Middle_Center","tx","ty","tw","th","bx","by","bw","bh","NoBorder","ratioW","ratioH","ratio","ExactFit","Top_Left","Middle_Left","Bottom_Left","Top_Right","Middle_Right","Bottom_Right","Top_Center","Bottom_Center","Raffle","values","initValues","restValues","restCount","isEmpty","onCheck","isAutoResetEnabled","reset","get","getRestCount","getIsEmply","getIsAutoResetEnabled","setIsAutoResetEnabled","enabled","createIndices","Rotator","angle","velocity","setAngle","setVelocity","getAngle","getVelocity","update","getSin","getCos","getTan","tan","getMagnitude","getVector","xy","LoggerLevel","NullLogging","verbose","warn","error","ConsoleLogging","debug","DOMLogging","dom","html","print","prefix","line","join","innerHTML","innerText","ParallelLogging","loggers","level","Verbose","logger","Info","Warn","Pager","isLoopEnabled","itemCount","itemIds","itemIndexById","onChange","onPrev","onNext","setupById","ids","setup","setupByCount","newItemIndex","oldItemIndex","newItemId","oldItemId","gotoByIndex","itemIndex","useTransition","dispatchPagerEvent","PagerEvent","CHANGE","gotoById","itemId","hasOwnProperty","prev","PREV","NEXT","getIsLoopEnabled","setIsLoopEnabled","getNewItemIndex","getOldItemIndex","getItemCount","getNewItemId","getOldItemId","getItemIds","Timer","interval","repeatCount","timerHandler","tStartTime","getCurrentTime","elapsedCount","isCompleted","stop","tInterval","startInterval","dispatch","TimerEvent","TICK","isRunning","tId","start","tRestTime","stopInterval","restart","valueOf","getIsRunning","getInterval","getElapsedTime","getRestTime","getElapsedCount","getRepeatCount","setRepeatCount","ObjectPool","onRequireItem","onDestroyItem","initCount","growthCount","items","getItem","unshift","returnItem","item","reduce","shift","CommandUtil","single","loader","AssetLoader","fileLoadCompleteHandler","content","isLoading","isLoadComplete","param","onLoad","fileLoadErrorHandler","onError","isLoading_","currentCount","totalCount","loadingQueries","loadingQueryIndex","queriesByQueryId","queriesByUrl","handlersByType","require","url","addQuery","id","FileQuery","String","load","AssetLoaderEvent","PROGRESS","query_1","handler","addHandler","addLoadUpdateListener","removeLoadUpdateListener","addLoadCompleteListener","removeLoadCompleteListener","getQueryByQueryId","queryId","getQueryByUrl","getCurrentCount","getTotalCount","getContentByUrl","getContentByQueryId","textureId","progress","loadedCount","ERROR","view_1","View","view","viewCount","name","autoHideWithInit","isInitializing","isInitialized","isReadying","isReadied","isShowing","isShown","isHiding","viewsById","initialize","implInitialize","hide","ready","implReady","finalize","implFinalize","show","getShowCommand","getHideCommand","showCommand","hideCommand","implShow","implHide","getIsInitializing","getIsInitialized","getIsReadying","getIsReadied","getIsShowing","getIsShown","getIsHiding","getIsHidden","getId","getView","getName","setName","getAutoHideWithInit","setAutoHideWithInit","getViewById","ButtonBehavior","hitArea","isHoverCursorEnabled","isPreventDefaultEnabled","isStopPropagationEnabled","mouseOverHandler","preventDefault","stopPropagation","defaultMouseCursor","style","cursor","over","mouseOutHandler","out","mouseDownHandler","down","mouseUpHandler","up","clickHandler","click","touchStartHandler","touchEndHandler","touchCancelHandler","isOver","isDown","setHitArea","implButtonOver","implButtonOut","implButtonDown","implButtonUp","implButtonClick","on","off","getIsOver","getIsDown","getHitArea","clearHitArea","getIsPreventDefaultEnabled","setIsPreventDefaultEnabled","getIsStopPropagationEnabled","setIsStopPropagationEnabled","getIsHoverCursorEnabled","setIsHoverCursorEnabled","SelectionBehavior","select","isSelected","implSelectionChanged","deselect","getIsSelected","browser","DeviceInfo","u","navigator","userAgent","toLowerCase","isTablet","isMobile","isDesktop","isIOS","isAndroid","isIE","isEdge","isChrome","isSafari","isFireFox","isOpera","isUnknownBrowser","isTouchEnabled","ontouchstart","isDownloadEnabled","isRetina","round","devicePixelRatio","getIsDesktop","getIsTablet","getIsMobile","getIsIOS","getIsAndroid","getIsRetina","getIsIE","getIsEdge","getIsChrome","getIsSafari","getIsFireFox","getIsOpera","getIsUnknownBrowser","getIsTouchEnabled","getIsDownloadEnabled","getDpi","dpi","div","document","createElement","setAttribute","body","appendChild","offsetHeight","removeChild","LocalStorage","save","expiredAt","isAvailable","record","JSON","stringify","localStorage","setItem","saveWithTerm","defaultValue","parse","removeItem","remove","isAvailable_","toMilliseconds","dates","KeyCode","KeyWatcher","windowKeyDownHandler","windowKeyUpHandler","getIsAnyKeyPressed","pressedKeyCount","getIsKeyPressed","keyCode","isKeyPressedByKeyCode","getIsContinuousPressEnabled","isContinuousPressEnabled","setIsContinuousPressEnabled","KeyWatcherEvent","KEY_DOWN","KEY_UP","isLongPressed","originalEvent","altKey","ctrlKey","shiftKey","WindowWatcher","windowResizeHandler","windowScrollHandler","windowWidth","innerWidth","windowHeight","innerHeight","scrollTop","undefined","pageYOffset","documentElement","scrollBottom","calcScrolledPosition","calcScrolledPositionRatio","getWindow","getScrollTop","getScrollBottom","getWindowWidth","getWindowHeight","WindowWatcherEvent","RESIZE","SCROLL","Scene","SceneState","Idling","childrenByName","numChildren","isEntered","onUnload","onArrive","onLeave","onAscend","onDescend","addChild","child","childName","addChildren","children","addedChildren","removeChildren","removedChildren","removeAllChildren","name_1","contains","getLastState","lastState","getChildByName","getNumChildren","getManager","getPath","manager","names","scene","getScenePathByNames","gotoScene","path","goto","_load","transferInfo","Loading","SceneEvent","LOAD","implOnLoad","LOAD_COMPLETE","_unload","Unloading","UNLOAD","implOnUnload","UNLOAD_COMPLETE","_arrive","Arriving","ARRIVE","implOnArrive","ARRIVE_COMPLETE","_leave","Leaving","LEAVE","implOnLeave","LEAVE_COMPLETE","_ascend","Ascending","ASCEND","implOnAscend","ASCEND_COMPLETE","_descend","Descending","DESCEND","implOnDescend","DESCEND_COMPLETE","SceneManager","sceneLoadCompleteHandler","currentScene","eventIndex","checkState","sceneUnloadCompleteHandler","sceneArriveCompleteHandler","sceneLeaveCompleteHandler","sceneAscendCompleteHandler","sceneDescendCompleteHandler","root","core","RootScene","waypoints","waypointIndex","transferId","resolvePath","getDestinationPath","newWaypoints","createWaypoints","Waypoint","isDestinationChanged","setDirection","printWaypoint","SceneTransferInfo","SceneManagerEvent","TRANSFER_START","normalized","name_2","pop","addSceneAt","createScene","success","getSceneNamesByPath","name_3","getRoot","getSceneByPath","getSceneLevelByNames","departurePath","destinationPath","departureNames","destinationNames","turningPath","turningLevel","turningNames","prevPath","getLevel","Direction","Sibling","Ascend","name_4","_setFrom","Descend","_setTo","getSceneStateString","tmpTransferId","getTransferId","TRANSFER_COMPLETE","currentWaypoint","relay","getDeparturePath","getDirectionString","direction","Static","getVersion"],"mappings":"IAEUA,ICAAC,ICgEAC,6WCsHV,SAASC,YAAM,IAAAC,EAAA,GAAAC,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAAD,EAAAC,GAAAC,UAAAD,GACdH,IAAIM,KAAKC,OAAOC,KAAKC,MAAMR,MAAMS,OAAQN,WAG1C,SAASO,UAAUC,EAAYC,EAAgBC,QAAA,IAAAA,IAAAA,GAAA,GAC9Cd,IAAIM,KAAKC,OAAOQ,OAAON,MAAM,KAAML,WAGpC,SAASY,WAAWJ,EAAYC,EAAgBC,QAAA,IAAAA,IAAAA,GAAA,GAC/Cd,IAAIM,KAAKC,OAAOU,QAAQR,MAAM,KAAML,YCjMrC,SAAUJ,GAAI,IAAAM,EAIbY,EAJaZ,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAIjBY,EAAA,WAAA,SAAAA,KAuQA,OArQeA,EAAAC,OAAd,SAAqBC,EAAUC,EAAUC,EAAUC,GAClD,OAAOD,EAAIF,EAAIG,EAAIF,GAONH,EAAAM,WAAd,SAAyBJ,EAAUC,EAAUC,EAAUC,GACtD,OAAOD,GAAKF,GAAKG,GAAKH,EAAIC,GAGbH,EAAAO,YAAd,SAA0BL,EAAUC,EAAUC,EAAUC,GACvD,OAASD,GAAMF,GAAKG,IAAMH,EAAI,GAAKC,GAGtBH,EAAAQ,cAAd,SAA4BN,EAAUC,EAAUC,EAAUC,GACzD,OAAKH,GAAKG,EAAI,GAAK,EAAUD,EAAI,EAAIF,EAAIA,EAAIC,GACpCC,EAAK,KAAQF,GAAMA,EAAI,GAAK,GAAKC,GAO7BH,EAAAS,YAAd,SAA0BP,EAAUC,EAAUC,EAAUC,GACvD,OAAOD,GAAKF,GAAKG,GAAKH,EAAIA,EAAIC,GAGjBH,EAAAU,aAAd,SAA2BR,EAAUC,EAAUC,EAAUC,GACxD,OAAOD,IAAMF,EAAIA,EAAIG,EAAI,GAAKH,EAAIA,EAAI,GAAKC,GAG9BH,EAAAW,eAAd,SAA6BT,EAAUC,EAAUC,EAAUC,GAC1D,OAAKH,GAAKG,EAAI,GAAK,EAAUD,EAAI,EAAIF,EAAIA,EAAIA,EAAIC,EAC1CC,EAAI,IAAMF,GAAK,GAAKA,EAAIA,EAAI,GAAKC,GAO3BH,EAAAY,YAAd,SAA0BV,EAAUC,EAAUC,EAAUC,GACvD,OAAOD,GAAKF,GAAKG,GAAKH,EAAIA,EAAIA,EAAIC,GAGrBH,EAAAa,aAAd,SAA2BX,EAAUC,EAAUC,EAAUC,GACxD,OAASD,IAAOF,EAAIA,EAAIG,EAAI,GAAKH,EAAIA,EAAIA,EAAI,GAAKC,GAGrCH,EAAAc,eAAd,SAA6BZ,EAAUC,EAAUC,EAAUC,GAC1D,OAAKH,GAAKG,EAAI,GAAK,EAAUD,EAAI,EAAIF,EAAIA,EAAIA,EAAIA,EAAIC,GAC5CC,EAAK,IAAMF,GAAK,GAAKA,EAAIA,EAAIA,EAAI,GAAKC,GAOlCH,EAAAe,YAAd,SAA0Bb,EAAUC,EAAUC,EAAUC,GACvD,OAAOD,GAAKF,GAAKG,GAAKH,EAAIA,EAAIA,EAAIA,EAAIC,GAGzBH,EAAAgB,aAAd,SAA2Bd,EAAUC,EAAUC,EAAUC,GACxD,OAAOD,IAAMF,EAAIA,EAAIG,EAAI,GAAKH,EAAIA,EAAIA,EAAIA,EAAI,GAAKC,GAGtCH,EAAAiB,eAAd,SAA6Bf,EAAUC,EAAUC,EAAUC,GAC1D,OAAKH,GAAKG,EAAI,GAAK,EAAUD,EAAI,EAAIF,EAAIA,EAAIA,EAAIA,EAAIA,EAAIC,EAClDC,EAAI,IAAMF,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,GAAKC,GAOnCH,EAAAkB,WAAd,SAAyBhB,EAAUC,EAAUC,EAAUC,GACtD,OAASD,EAAKe,KAAKC,IAAIlB,EAAIG,GAAKc,KAAKE,GAAK,IAAMjB,EAAID,GAGvCH,EAAAsB,YAAd,SAA0BpB,EAAUC,EAAUC,EAAUC,GACvD,OAAOD,EAAIe,KAAKI,IAAIrB,EAAIG,GAAKc,KAAKE,GAAK,IAAMlB,GAGhCH,EAAAwB,cAAd,SAA4BtB,EAAUC,EAAUC,EAAUC,GACzD,OAASD,EAAK,GAAKe,KAAKC,IAAID,KAAKE,GAAKnB,EAAIG,GAAK,GAAKF,GAOvCH,EAAAyB,WAAd,SAAyBvB,EAAUC,EAAUC,EAAUC,GACtD,OAAS,GAALH,EAAeC,EACZC,EAAIe,KAAKO,IAAI,EAAG,IAAMxB,EAAIG,EAAI,IAAMF,GAG9BH,EAAA2B,YAAd,SAA0BzB,EAAUC,EAAUC,EAAUC,GACvD,OAAIH,GAAKG,EAAUF,EAAIC,EAChBA,GAAiC,EAA3Be,KAAKO,IAAI,GAAI,GAAKxB,EAAIG,IAAUF,GAGhCH,EAAA4B,cAAd,SAA4B1B,EAAUC,EAAUC,EAAUC,GACzD,OAAS,GAALH,EAAeC,EACfD,GAAKG,EAAUF,EAAIC,GAClBF,GAAKG,EAAI,GAAK,EAAUD,EAAI,EAAIe,KAAKO,IAAI,EAAG,IAAMxB,EAAI,IAAMC,EAC1DC,EAAI,GAA+B,EAAzBe,KAAKO,IAAI,GAAI,KAAOxB,IAAUC,GAOlCH,EAAA6B,WAAd,SAAyB3B,EAAUC,EAAUC,EAAUC,GACtD,OAASD,GAAMe,KAAKW,KAAK,GAAK5B,GAAKG,GAAKH,GAAK,GAAKC,GAGrCH,EAAA+B,YAAd,SAA0B7B,EAAUC,EAAUC,EAAUC,GACvD,OAAOD,EAAIe,KAAKW,KAAK,GAAK5B,EAAIA,EAAIG,EAAI,GAAKH,GAAKC,GAGnCH,EAAAgC,cAAd,SAA4B9B,EAAUC,EAAUC,EAAUC,GACzD,OAAKH,GAAKG,EAAI,GAAK,GAAYD,EAAK,GAAKe,KAAKW,KAAK,EAAI5B,EAAIA,GAAK,GAAKC,EAC9DC,EAAI,GAAKe,KAAKW,KAAK,GAAK5B,GAAK,GAAKA,GAAK,GAAKC,GAOtCH,EAAAiC,oBAAd,SAAkCC,GACjC,YADiC,IAAAA,IAAAA,EAAA,SAC1B,SAAUhC,EAAUC,EAAUC,EAAUC,GAC9C,IAAI8B,EAAW,EACXC,EAAWhC,EACf,OAAS,GAALF,EAAeC,EACH,IAAXD,GAAKG,GAAgBF,EAAIC,GACrB,GAAL+B,IAAQA,EAAQ,GAAJ9B,GAGf6B,EAFGE,EAAIjB,KAAKkB,IAAIjC,IAChBgC,EAAIhC,EACA+B,EAAI,GAEJA,GAAK,EAAIhB,KAAKE,IAAMF,KAAKmB,KAAKlC,EAAIgC,IAE9BA,EAAIjB,KAAKO,IAAI,EAAG,IAAMxB,GAAK,IAAMiB,KAAKI,KAAKrB,EAAIG,EAAI6B,IAAM,EAAIf,KAAKE,IAAMc,GAAOhC,KAI5EH,EAAAuC,qBAAd,SAAmCL,GAClC,YADkC,IAAAA,IAAAA,EAAA,SAC3B,SAAUhC,EAAUC,EAAUC,EAAUC,GAC9C,IAAI8B,EAAW,EACXC,EAAWhC,EACf,OAAS,GAALF,EAAeC,EACH,IAAXD,GAAKG,GAAgBF,EAAIC,GACrB,GAAL+B,IAAQA,EAAQ,GAAJ9B,GAGf6B,EAFGE,EAAIjB,KAAKkB,IAAIjC,IAChBgC,EAAIhC,EACA+B,EAAI,GAEJA,GAAK,EAAIhB,KAAKE,IAAMF,KAAKmB,KAAKlC,EAAIgC,GAEhCA,EAAIjB,KAAKO,IAAI,GAAI,GAAKxB,GAAKiB,KAAKI,KAAKrB,EAAIG,EAAI6B,IAAM,EAAIf,KAAKE,IAAMc,GAAK/B,EAAID,KAItEH,EAAAwC,uBAAd,SAAqCN,GACpC,YADoC,IAAAA,IAAAA,EAAA,SAC7B,SAAUhC,EAAUC,EAAUC,EAAUC,GAC9C,IAAI8B,EAAW,EACXC,EAAWhC,EACf,OAAS,GAALF,EAAeC,EACC,IAAfD,GAAKG,EAAI,GAAgBF,EAAIC,GACzB,GAAL+B,IAAQA,EAAI9B,GAAK,GAAM,MAG1B6B,EAFGE,EAAIjB,KAAKkB,IAAIjC,IAChBgC,EAAIhC,EACA+B,EAAI,GAEJA,GAAK,EAAIhB,KAAKE,IAAMF,KAAKmB,KAAKlC,EAAIgC,GAEnClC,EAAI,EAAkBkC,EAAIjB,KAAKO,IAAI,EAAG,IAAMxB,GAAK,IAAMiB,KAAKI,KAAKrB,EAAIG,EAAI6B,IAAM,EAAIf,KAAKE,IAAMc,IAA/E,GAAqFhC,EACjGiC,EAAIjB,KAAKO,IAAI,GAAI,IAAMxB,GAAK,IAAMiB,KAAKI,KAAKrB,EAAIG,EAAI6B,IAAM,EAAIf,KAAKE,IAAMc,GAAK,GAAM/B,EAAID,KAInFH,EAAAyC,cAAd,SAA4BvC,EAAUC,EAAUC,EAAUC,GACzD,OAAOL,EAAO0C,qBAAqBxC,EAAGC,EAAGC,EAAGC,IAG/BL,EAAA2C,eAAd,SAA6BzC,EAAUC,EAAUC,EAAUC,GAC1D,OAAOL,EAAO4C,sBAAsB1C,EAAGC,EAAGC,EAAGC,IAGhCL,EAAA6C,iBAAd,SAA+B3C,EAAUC,EAAUC,EAAUC,GAC5D,OAAOL,EAAO8C,wBAAwB5C,EAAGC,EAAGC,EAAGC,IAWlCL,EAAA+C,iBAAd,SAA+Bb,GAC9B,YAD8B,IAAAA,IAAAA,EAAA,SACvB,SAAUhC,EAAUC,EAAUC,EAAUC,GAC9C,OAAOD,GAAKF,GAAKG,GAAKH,IAAMgC,EAAI,GAAKhC,EAAIgC,GAAK/B,IAIlCH,EAAAgD,kBAAd,SAAgCd,GAC/B,YAD+B,IAAAA,IAAAA,EAAA,SACxB,SAAUhC,EAAUC,EAAUC,EAAUC,GAC9C,OAAOD,IAAMF,EAAIA,EAAIG,EAAI,GAAKH,IAAMgC,EAAI,GAAKhC,EAAIgC,GAAK,GAAK/B,IAI/CH,EAAAiD,oBAAd,SAAkCf,GACjC,YADiC,IAAAA,IAAAA,EAAA,SAC1B,SAAUhC,EAAUC,EAAUC,EAAUC,GAC9C,OAAKH,GAAKG,EAAI,GAAK,EAAUD,EAAI,GAAKF,EAAIA,IAAqB,GAAdgC,GAAK,QAAchC,EAAIgC,IAAM/B,EACvEC,EAAI,IAAMF,GAAK,GAAKA,IAAqB,GAAdgC,GAAK,QAAchC,EAAIgC,GAAK,GAAK/B,IAIvDH,EAAAkD,WAAd,SAAyBhD,EAAUC,EAAUC,EAAUC,GACtD,OAAOL,EAAO0C,qBAAqBxC,EAAGC,EAAGC,EAAGC,IAG/BL,EAAAmD,YAAd,SAA0BjD,EAAUC,EAAUC,EAAUC,GACvD,OAAOL,EAAOoD,mBAAmBlD,EAAGC,EAAGC,EAAGC,IAG7BL,EAAAqD,cAAd,SAA4BnD,EAAUC,EAAUC,EAAUC,GACzD,OAAOL,EAAOsD,qBAAqBpD,EAAGC,EAAGC,EAAGC,IAW/BL,EAAAuD,aAAd,SAA2BrD,EAAUC,EAAUC,EAAUC,GACxD,OAAOD,EAAIJ,EAAOwD,cAAcnD,EAAIH,EAAG,EAAGE,EAAGC,GAAKF,GAGrCH,EAAAwD,cAAd,SAA4BtD,EAAUC,EAAUC,EAAUC,GACzD,OAAKH,GAAKG,GAAM,EAAI,KACZD,GAAK,OAASF,EAAIA,GAAKC,EACpBD,EAAK,EAAI,KACZE,GAAK,QAAUF,GAAM,IAAM,MAASA,EAAI,KAAQC,EAC7CD,EAAK,IAAM,KACdE,GAAK,QAAUF,GAAM,KAAO,MAASA,EAAI,OAAUC,EAEnDC,GAAK,QAAUF,GAAM,MAAQ,MAASA,EAAI,SAAYC,GAIjDH,EAAAyD,gBAAd,SAA8BvD,EAAUC,EAAUC,EAAUC,GAC3D,OAAIH,EAAIG,EAAI,EAAgD,GAAtCL,EAAOuD,aAAiB,EAAJrD,EAAO,EAAGE,EAAGC,GAAWF,EAChB,GAA3CH,EAAOwD,cAAkB,EAAJtD,EAAQG,EAAG,EAAGD,EAAGC,GAAe,GAAJD,EAAUD,GAjEpDH,EAAA0C,qBAAsC1C,EAAOiC,sBAC7CjC,EAAA4C,sBAAuC5C,EAAOuC,uBAC9CvC,EAAA8C,wBAAyC9C,EAAOwC,yBAqChDxC,EAAA0D,kBAAmC1D,EAAO+C,mBAC1C/C,EAAAoD,mBAAoCpD,EAAOgD,oBAC3ChD,EAAAsD,qBAAsCtD,EAAOiD,sBA0B7DjD,EAvQA,GAAaZ,EAAAY,OAAMA,EAJpB,CAAUlB,MAAAA,IAAG,KCEb,SAAUA,GAAI,IAAA6E,EAEbC,EAFaD,EAAA7E,EAAA6E,QAAA7E,EAAA6E,MAAK,IAElBC,EAAA,WAQC,SAAAA,EAAYC,EAAanE,EAAeoE,QAAA,IAAAA,IAAAA,EAAA,MACvCC,KAAKF,KAAOA,EACZE,KAAKrE,OAASA,EACdqE,KAAKD,KAAOA,EAgCd,OA7BQF,EAAAI,UAAAC,QAAP,WACC,OAAOF,KAAKF,MAGND,EAAAI,UAAAE,UAAP,WACC,OAAOH,KAAKrE,QAGNkE,EAAAI,UAAAG,QAAP,WACC,OAAOJ,KAAKD,MAGNF,EAAAI,UAAAI,QAAP,SAAeN,GACdC,KAAKD,KAAOA,GAgBdF,EA3CA,GAAaD,EAAAC,MAAKA,EAFnB,CAAU9E,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAuF,EAIbC,EAJaD,EAAAvF,EAAA6E,QAAA7E,EAAA6E,MAAK,IAIlBW,EAAA,WAQC,SAAAA,EAAY5E,QAAA,IAAAA,IAAAA,EAAA,MACXqE,KAAKrE,OAASA,GAAUqE,KACxBA,KAAKQ,UAAY,GAkFnB,OArEQD,EAAAN,UAAAQ,iBAAP,SAAwBC,EAAkBC,GACzC,GAAwB,mBAAd,EAAV,CACA,IAAIH,EAA4BR,KAAKQ,UAAUE,GAC/C,GAAIF,GAEH,IADA,IAAMI,EAAsBJ,EAAUpF,OAC7ByF,EAAW,EAAGA,EAAID,IAAgBC,EAC1C,GAAIF,GAAYH,EAAUK,GAAI,YAG/Bb,KAAKQ,UAAUE,GAAaF,EAAY,GAEzCA,EAAUM,KAAKH,KAGTJ,EAAAN,UAAAc,oBAAP,SAA2BL,EAAkBC,GAC5C,GAAwB,mBAAd,EAAV,CACA,IAAIH,EAA4BR,KAAKQ,UAAUE,GAC/C,GAAIF,EAAW,CAEd,IADA,IAAMI,EAAsBJ,EAAUpF,OAC7ByF,EAAW,EAAGA,EAAID,IAAgBC,EAC1C,GAAIF,GAAYH,EAAUK,GAAI,CAC7BL,EAAUQ,OAAOH,EAAI,GACrB,MAGsB,GAApBL,EAAUpF,eACN4E,KAAKQ,UAAUE,MAKlBH,EAAAN,UAAAgB,uBAAP,SAA8BP,QAAA,IAAAA,IAAAA,EAAA,MACzBA,SACIV,KAAKQ,UAAUE,GAEtBV,KAAKQ,UAAY,IAIZD,EAAAN,UAAAiB,iBAAP,SAAwBR,GACvB,OAAoC,MAA7BV,KAAKQ,UAAUE,IAGhBH,EAAAN,UAAAkB,cAAP,SAAqBvB,GACpB,IAAIY,EAA4BR,KAAKQ,UAAUZ,EAAMM,WACrD,GAAIM,EAEH,IADA,IAAMI,EAAsBJ,EAAUpF,OAC7ByF,EAAW,EAAGA,EAAID,IAAgBC,EAC1CL,EAAUK,GAAGO,KAAKpB,KAAKrE,OAAQiE,IAK3BW,EAAAN,UAAAoB,kBAAP,SAAyBX,EAAkB/E,EAAsBoE,QAAtB,IAAApE,IAAAA,EAAA,WAAsB,IAAAoE,IAAAA,EAAA,MAChEC,KAAKmB,cAAc,IAAIb,EAAAT,MAAMa,EAAW/E,EAAQoE,KAelDQ,EA5FA,GAAaD,EAAAC,gBAAeA,EAJ7B,CAAUxF,MAAAA,IAAG,KCAb,SAAUF,GAET,IAAYyG,GAAAA,EAAAzG,EAAAyG,eAAAzG,EAAAyG,aAAY,KACvBA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,aAAA,GAAA,eALF,CAAUzG,MAAAA,IAAG,KCAb,SAAUA,GAET,IAEA0G,EAAA,SAAAC,GAoBC,SAAAD,EAAYb,EAAkBe,eAAA,IAAAA,IAAAA,EAAA,MAC7BD,EAAAJ,KAAApB,KAAMU,EAAWe,IAAYzB,KA8B/B,OAnDkC0B,UAAAH,EAAAC,GAkC1BD,EAAAtB,UAAA0B,MAAP,WACC,OAAO,IAAIJ,EAAavB,KAAKE,UAAWF,KAAKG,cAGvCoB,EAAAtB,UAAA2B,SAAP,WACC,MAAO,yBAA2B5B,KAAKE,WA/B1BqB,EAAAM,SAAkB,WA2CjCN,EAnDA,CAFexG,IAAI6E,MAAMC,OAEZhF,EAAA0G,aAAYA,EAJ1B,CAAU1G,MAAAA,IAAG,KCAb,SAAUA,GAET,IAEAiH,EAAA,SAAAN,GAQC,SAAAM,EAAYC,EAAiCC,EAAmCC,QAApE,IAAAF,IAAAA,EAAA,WAAiC,IAAAC,IAAAA,EAAA,WAAmC,IAAAC,IAAAA,EAAA,MAAhF,IAAAC,EACCV,EAAAJ,KAAApB,OAAOA,YAEPkC,EAAKC,mBAAmBJ,GACxBG,EAAKE,qBAAqBJ,GAC1BE,EAAKG,mBAAmBJ,GAExBC,EAAKI,MAAQzH,EAAAyG,aAAaiB,UAC1BL,EAAKM,KAAON,GACPO,OAAS,OA4FhB,OA7G6Bf,UAAAI,EAAAN,GA8BrBM,EAAA7B,UAAAyC,QAAP,WACC,GAAI1C,KAAKsC,MAAQzH,EAAAyG,aAAaiB,SAC7B,MAAM,IAAII,MAAM,qDAEjB3C,KAAKsC,MAAQzH,EAAAyG,aAAasB,UAC1B5C,KAAK6C,qBAAqBzB,KAAKpB,KAAMA,OAG/B8B,EAAA7B,UAAA6C,UAAP,WACK9C,KAAKsC,OAASzH,EAAAyG,aAAasB,YAC9B5C,KAAKsC,MAAQzH,EAAAyG,aAAayB,aAC1B/C,KAAKgD,uBAAuB5B,KAAKpB,KAAMA,QAIlC8B,EAAA7B,UAAAgD,QAAP,WACCjD,KAAKsC,MAAQzH,EAAAyG,aAAaiB,SAC1BvC,KAAKkD,qBAAqB9B,KAAKpB,KAAMA,MACrCA,KAAKyC,OAAS,KACdzC,KAAK+B,gBAAkB,KACvB/B,KAAKgC,kBAAoB,KACzBhC,KAAKiC,gBAAkB,MAGdH,EAAA7B,UAAAkD,eAAV,WACC,OAAQnD,KAAKsC,OACZ,KAAKzH,EAAAyG,aAAaiB,SACjB,MACD,KAAK1H,EAAAyG,aAAasB,UAIlB,KAAK/H,EAAAyG,aAAayB,aACjB/C,KAAKmB,cAAc,IAAItG,EAAA0G,aAAa1G,EAAA0G,aAAaM,SAAU7B,OAC3DA,KAAKiD,YAKEnB,EAAA7B,UAAAmD,oBAAV,SAA8BC,GAC7BrD,KAAKmD,kBAEIrB,EAAA7B,UAAAqD,sBAAV,SAAgCD,KAGtBvB,EAAA7B,UAAAsD,oBAAV,SAA8BF,KAavBvB,EAAA7B,UAAA4C,mBAAP,WAAuC,OAAO7C,KAAK+B,iBAAmB/B,KAAKoD,qBACpEtB,EAAA7B,UAAAkC,mBAAP,SAA0BqB,GAAsBxD,KAAK+B,gBAAkByB,GAGhE1B,EAAA7B,UAAA+C,qBAAP,WAAyC,OAAOhD,KAAKgC,mBAAqBhC,KAAKsD,uBACxExB,EAAA7B,UAAAmC,qBAAP,SAA4BoB,GAAsBxD,KAAKgC,kBAAoBwB,GAGpE1B,EAAA7B,UAAAiD,mBAAP,WAAuC,OAAOlD,KAAKiC,iBAAmBjC,KAAKuD,qBACpEzB,EAAA7B,UAAAoC,mBAAP,SAA0BmB,GAAsBxD,KAAKiC,gBAAkBuB,GAGhE1B,EAAA7B,UAAAwD,SAAP,WAAiC,OAAOzD,KAAKsC,OAGtCR,EAAA7B,UAAAyD,UAAP,WAA6B,OAAO1D,KAAKyC,QAClCX,EAAA7B,UAAA0D,UAAP,SAAiBlB,GAAuBzC,KAAKyC,OAASA,GAG/CX,EAAA7B,UAAA2D,QAAP,WAA2B,OAAO5D,KAAKwC,MAExCV,EA7GA,CAFyB/G,IAAI6E,MAAMW,iBAEtB1F,EAAAiH,QAAOA,EAJrB,CAAUjH,MAAAA,IAAG,KCAb,SAAUA,GAET,IAAAgJ,EAAA,SAAArC,GAQC,SAAAqC,QAAY,IAAAC,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,GAAAC,UAAAD,GAAZ,IAAAgH,EACCV,EAAAJ,KAAApB,OAAOA,YACPkC,EAAK4B,SAAW,GAChB5B,EAAK6B,WAAUvI,MAAf0G,EAAmB4B,KAoFrB,OA/F0CpC,UAAAmC,EAAArC,GAwBlCqC,EAAA5D,UAAA8D,WAAP,eAAkB,IAAAD,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,GAAAC,UAAAD,GACK,EAAlB4I,EAAS1I,SACZ4E,KAAKgE,WAAWF,GAChB9D,KAAK8D,SAAW9D,KAAKiE,cAAcC,OAAkBJ,KAIhDD,EAAA5D,UAAAkE,cAAP,eAAqB,IAAAL,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,GAAAC,UAAAD,GACpB8E,KAAKoE,gBAAe5I,MAApBwE,KAAI,CAAiB,GAACkE,OAAKJ,KAGlBD,EAAA5D,UAAAmE,gBAAV,SAA0BC,OAAc,IAAAP,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,EAAA,GAAAC,UAAAD,GACjB,EAAlB4I,EAAS1I,SACZ4E,KAAKgE,WAAWF,GAChBQ,MAAMrE,UAAUe,OAAOxF,MAAMwE,KAAKiE,cAAuB,CAACI,EAAO,GAAIH,OAAOJ,MAIvED,EAAA5D,UAAAsE,gBAAP,SAAuBT,GACtB9D,KAAK+D,WAAUvI,MAAfwE,KAAmB8D,IAGbD,EAAA5D,UAAAuE,mBAAP,SAA0BV,GACzB9D,KAAKmE,cAAa3I,MAAlBwE,KAAsB8D,IAGbD,EAAA5D,UAAAwE,qBAAV,SAA+BJ,EAAcP,GAC5C9D,KAAKoE,gBAAe5I,MAApBwE,KAAI,CAAiBqE,GAAKH,OAAKJ,KAGzBD,EAAA5D,UAAAyE,UAAP,WACC,OAAO1E,KAAK8D,SAAS1I,QAGfyI,EAAA5D,UAAA0E,kBAAP,SAAyBN,GAAwB,OAAOrE,KAAK8D,SAASO,IAC/DR,EAAA5D,UAAAgE,YAAP,WAAiC,OAAOjE,KAAK8D,UAErCD,EAAA5D,UAAA+D,WAAR,SAAmBF,GAGlB,IAFA,IACIT,EADEuB,EAAqBd,EAAS1I,OAE3ByF,EAAW,EAAGA,EAAI+D,IAAe/D,EAElB,mBADvBwC,EAAUS,EAASjD,MACgBiD,EAASjD,GAAKwC,EAAU,IAAIxI,EAAAgK,KAAKxB,IACpEA,EAAQM,UAAU3D,OAIV6D,EAAA5D,UAAAmD,oBAAV,SAA8BC,GAC7BrD,KAAKmD,kBAGIU,EAAA5D,UAAAqD,sBAAV,SAAgCD,KAGtBQ,EAAA5D,UAAAsD,oBAAV,SAA8BF,KAiB/BQ,EA/FA,CAA0ChJ,EAAAiH,SAApBjH,EAAAgJ,YAAWA,EAFlC,CAAUhJ,MAAAA,IAAG,KCAb,SAAUA,GAET,IAAAiK,EAAA,SAAAtD,GAQC,SAAAsD,WACCtD,EAAAJ,KAAApB,OAAOA,KAkCT,OA3C2B0B,UAAAoD,EAAAtD,GAsBhBsD,EAAA7E,UAAAmD,oBAAV,SAA8BC,GAC7B,IAAMG,EAAgBxD,KAAK0D,YAAyB,YAChDF,GAAMA,IACVxD,KAAKmD,kBAGI2B,EAAA7E,UAAAqD,sBAAV,SAAgCD,KAGtByB,EAAA7E,UAAAsD,oBAAV,SAA8BF,KAY/ByB,EA3CA,CAA2BjK,EAAAiH,SAAdjH,EAAAiK,MAAKA,EAFnB,CAAUjK,MAAAA,IAAG,KCAb,SAAUA,GAET,IAAAkK,EAAA,SAAAvD,GAQC,SAAAuD,WACCvD,EAAAJ,KAAApB,OAAOA,KAkCT,OA3C4B0B,UAAAqD,EAAAvD,GAsBjBuD,EAAA9E,UAAAmD,oBAAV,SAA8BC,GAC7B,IAAMG,EAAgBxD,KAAK0D,YAA0B,aACjDF,GAAMA,IACVxD,KAAKmD,kBAGI4B,EAAA9E,UAAAqD,sBAAV,SAAgCD,KAGtB0B,EAAA9E,UAAAsD,oBAAV,SAA8BF,KAY/B0B,EA3CA,CAA4BlK,EAAAiH,SAAfjH,EAAAkK,OAAMA,EAFpB,CAAUlK,MAAAA,IAAG,KCAb,SAAUA,GAET,IAAAmK,EAAA,SAAAxD,GAQC,SAAAwD,QAAY,IAAA/J,EAAA,GAAAC,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAAD,EAAAC,GAAAC,UAAAD,GAAZ,IAAAgH,EACCV,EAAAJ,KAAApB,OAAOA,YACPkC,EAAKjH,SAAWA,IAsClB,OAhDyByG,UAAAsD,EAAAxD,GAuBdwD,EAAA/E,UAAAmD,oBAAV,SAA8BC,GAC7B4B,QAAQC,IAAI1J,MAAMyJ,QAASX,MAAMrE,UAAUkF,MAAM/D,KAAKpB,KAAK/E,WAC3D+E,KAAKmD,kBAGI6B,EAAA/E,UAAAqD,sBAAV,SAAgCD,KAGtB2B,EAAA/E,UAAAsD,oBAAV,SAA8BF,GAC7BrD,KAAK/E,SAAW,MAaV+J,EAAA/E,UAAAmF,YAAP,WAA6B,OAAOpF,KAAK/E,UAClC+J,EAAA/E,UAAAoF,YAAP,SAAmBpK,GAAuB+E,KAAK/E,SAAWA,GAE3D+J,EAhDA,CAAyBnK,EAAAiH,SAAZjH,EAAAmK,IAAGA,EAFjB,CAAUnK,MAAAA,IAAG,KCAb,SAAUA,GAET,IAAAyK,EAAA,SAAA9D,GAQC,SAAA8D,EAAYC,QAAA,IAAAA,IAAAA,EAAA,KAAZ,IAAArD,EACCV,EAAAJ,KAAApB,OAAOA,YAkCAkC,EAAAsD,gBAAkB,SAAC5F,GAC1BsC,EAAKiB,kBAlCLjB,EAAKqD,KAAOA,EACZrD,EAAKuD,SAAW,IAmDlB,OA9D0B/D,UAAA4D,EAAA9D,GAwBf8D,EAAArF,UAAAmD,oBAAV,SAA8BC,GAC7BrD,KAAKyF,QAAUC,OAAOC,WAAW3F,KAAKwF,gBAAiBxF,KAAKuF,OAGnDD,EAAArF,UAAAqD,sBAAV,SAAgCD,GAC/BrD,KAAK4F,UAGIN,EAAArF,UAAAsD,oBAAV,SAA8BF,GAC7BrD,KAAK4F,UAGEN,EAAArF,UAAA2F,OAAR,YACsB,GAAjB5F,KAAKyF,UACRI,aAAa7F,KAAKyF,SAClBzF,KAAKyF,SAAW,IAkBXH,EAAArF,UAAA6F,QAAP,WAA0B,OAAO9F,KAAKuF,MAC/BD,EAAArF,UAAA8F,QAAP,SAAeR,GAAoBvF,KAAKuF,KAAOA,GAIhDD,EA9DA,CAA0BzK,EAAAiH,SAAbjH,EAAAyK,KAAIA,EAFlB,CAAUzK,MAAAA,IAAG,KCAb,SAAUA,GAKT,IAAAgK,EAAA,SAAArD,GAQC,SAAAqD,EAAYrB,EAAsBwC,EAAiBC,EAAwCvF,QAA/E,IAAA8C,IAAAA,EAAA,WAAsB,IAAAwC,IAAAA,EAAA,SAAiB,IAAAC,IAAAA,EAAA,WAAwC,IAAAvF,IAAAA,EAAA,MAA3F,IAAAwB,EACCV,EAAAJ,KAAApB,OAAOA,YA4CAkC,EAAAsD,gBAAkB,SAAC5F,GAC1BsC,EAAKiB,kBA5CLjB,EAAKsB,KAAOA,EACZtB,EAAK8D,KAAOA,EACZ9D,EAAK+D,gBAAkBA,EACvB/D,EAAKxB,UAAYA,IAqEnB,OAlF0BgB,UAAAmD,EAAArD,GA0BfqD,EAAA5E,UAAAmD,oBAAV,SAA8BC,GACzBrD,KAAKiG,iBAAmBjG,KAAKU,WAChCV,KAAKiG,gBAAgBxF,iBAAiBT,KAAKU,UAAWV,KAAKwF,iBAC3DxF,KAAKwD,KAAIhI,MAATwE,KAAaA,KAAKgG,QAElBhG,KAAKwD,KAAIhI,MAATwE,KAAaA,KAAKgG,MAClBhG,KAAKmD,mBAIG0B,EAAA5E,UAAAqD,sBAAV,SAAgCD,GAC3BrD,KAAKiG,iBAAmBjG,KAAKU,WAChCV,KAAKiG,gBAAgBlF,oBAAoBf,KAAKU,UAAWV,KAAKwF,kBAItDX,EAAA5E,UAAAsD,oBAAV,SAA8BF,GACzBrD,KAAKiG,iBAAmBjG,KAAKU,WAChCV,KAAKiG,gBAAgBlF,oBAAoBf,KAAKU,UAAWV,KAAKwF,iBAG/DxF,KAAKwD,KAAO,KACZxD,KAAKgG,KAAO,KACZhG,KAAKiG,gBAAkB,KACvBjG,KAAKU,UAAY,MAiBXmE,EAAA5E,UAAAiG,YAAP,WAAgC,OAAOlG,KAAKwD,MACrCqB,EAAA5E,UAAAkG,YAAP,SAAmB3C,GAAsBxD,KAAKwD,KAAOA,GAG9CqB,EAAA5E,UAAAmG,aAAP,WAA8B,OAAOpG,KAAKgG,MACnCnB,EAAA5E,UAAAoG,aAAP,SAAoBL,GAAmBhG,KAAKgG,KAAOA,GAG5CnB,EAAA5E,UAAAqG,mBAAP,WAA8C,OAAOtG,KAAKiG,iBACnDpB,EAAA5E,UAAAsG,mBAAP,SAA0BN,GAAwCjG,KAAKiG,gBAAkBA,GAGlFpB,EAAA5E,UAAAuG,aAAP,WAA+B,OAAOxG,KAAKU,WACpCmE,EAAA5E,UAAAwG,aAAP,SAAoB/F,GAAyBV,KAAKU,UAAYA,GAE/DmE,EAlFA,CAA0BhK,EAAAiH,SAAbjH,EAAAgK,KAAIA,EALlB,CAAUhK,MAAAA,IAAG,KCAb,SAAUA,GAKT,IAAA6L,EAAA,SAAAlF,GAQC,SAAAkF,EAAYT,EAAwCvF,QAAxC,IAAAuF,IAAAA,EAAA,WAAwC,IAAAvF,IAAAA,EAAA,MAApD,IAAAwB,EACCV,EAAAJ,KAAApB,OAAOA,YAoCAkC,EAAAsD,gBAAkB,SAAC5F,GAC1BsC,EAAKiB,kBApCLjB,EAAK+D,gBAAkBA,EACvB/D,EAAKxB,UAAYA,IAuDnB,OAlE4BgB,UAAAgF,EAAAlF,GAwBjBkF,EAAAzG,UAAAmD,oBAAV,SAA8BC,GACzBrD,KAAKiG,iBAAmBjG,KAAKU,WAChCV,KAAKiG,gBAAgBxF,iBAAiBT,KAAKU,UAAWV,KAAKwF,kBAInDkB,EAAAzG,UAAAqD,sBAAV,SAAgCD,GAC3BrD,KAAKiG,iBAAmBjG,KAAKU,WAChCV,KAAKiG,gBAAgBlF,oBAAoBf,KAAKU,UAAWV,KAAKwF,kBAItDkB,EAAAzG,UAAAsD,oBAAV,SAA8BF,GACzBrD,KAAKiG,iBAAmBjG,KAAKU,WAChCV,KAAKiG,gBAAgBlF,oBAAoBf,KAAKU,UAAWV,KAAKwF,iBAG/DxF,KAAKU,UAAY,KACjBV,KAAKiG,gBAAkB,MAiBjBS,EAAAzG,UAAAqG,mBAAP,WAA8C,OAAOtG,KAAKiG,iBACnDS,EAAAzG,UAAAsG,mBAAP,SAA0BN,GAAwCjG,KAAKiG,gBAAkBA,GAGlFS,EAAAzG,UAAAuG,aAAP,WAA+B,OAAOxG,KAAKU,WACpCgG,EAAAzG,UAAAwG,aAAP,SAAoB/F,GAAyBV,KAAKU,UAAYA,GAE/DgG,EAlEA,CAA4B7L,EAAAiH,SAAfjH,EAAA6L,OAAMA,EALpB,CAAU7L,MAAAA,IAAG,KCAb,SAAUA,GAET,IAAOoB,EAASlB,IAAIM,KAAKY,OAKzB0K,EAAA,SAAAnF,GAQC,SAAAmF,EAAYhL,EAAeiL,EAAWC,EAAoBC,EAAwBC,EAAuCC,EAAsCC,EAAuCC,QAAhK,IAAAL,IAAAA,EAAA,WAAoB,IAAAC,IAAAA,EAAA,UAAwB,IAAAC,IAAAA,EAAwB9K,EAAOC,aAAQ,IAAA8K,IAAAA,EAAA,WAAsC,IAAAC,IAAAA,EAAA,WAAuC,IAAAC,IAAAA,EAAA,MAAtM,IAAAhF,EACCV,EAAAJ,KAAApB,OAAOA,YAsFAkC,EAAAiF,gBAAkB,WACzB,IAAMC,GAAqB,IAAIC,MAAOvB,UAAY5D,EAAKoF,UACnDF,EAAclF,EAAK4E,UACtB5E,EAAK1G,MAAM4L,EAAclF,EAAK4E,UAC1B5E,EAAK+E,UAAU/E,EAAK+E,SAAS/E,EAAKqF,aAAcrF,EAAKsF,iBAEzDtF,EAAK1G,MAAM,GACX0G,EAAK0D,SACD1D,EAAK+E,UAAU/E,EAAK+E,SAAS/E,EAAKqF,aAAcrF,EAAKsF,eACrDtF,EAAKgF,YAAYhF,EAAKgF,WAAWhF,EAAKqF,aAAcrF,EAAKsF,eAC7DtF,EAAKiB,mBA/FNjB,EAAKuF,YAAc9L,EACnBuG,EAAK0E,GAAKA,EACV1E,EAAK2E,KAAOA,EACZ3E,EAAK4E,SAAWA,EAChB5E,EAAK6E,OAASA,EACd7E,EAAK8E,QAAUA,EACf9E,EAAK+E,SAAWA,EAChB/E,EAAKgF,WAAaA,EAClBhF,EAAKqF,aAAe,EACpBrF,EAAKsF,cAAgB,EACrBtF,EAAKoF,UAAY,EACjBpF,EAAKuD,SAAW,IA+IlB,OApK2B/D,UAAAiF,EAAAnF,GAkChBmF,EAAA1G,UAAAmD,oBAAV,SAA8BC,GAI7B,IAAK,IAAIqE,KAHT1H,KAAK2H,aAAe,GAGJ3H,KAAK4G,GACX5G,KAAK4G,GAAGc,GACb1H,KAAK6G,MAA0B,MAAlB7G,KAAK6G,KAAKa,GAC1B1H,KAAK2H,aAAaD,GAAO1H,KAAK6G,KAAKa,GAEnC1H,KAAK2H,aAAaD,GAAO1H,KAAKyH,YAAYC,GAGxB,EAAhB1H,KAAK8G,UACR9G,KAAKyF,QAAUC,OAAOkC,YAAY5H,KAAKmH,gBAAiBR,EAAMkB,gBAC9D7H,KAAKsH,WAAY,IAAID,MAAOvB,UAC5B9F,KAAKxE,MAAM,GACPwE,KAAKgH,SAAShH,KAAKgH,QAAQhH,KAAKuH,aAAcvH,KAAKwH,iBAEvDxH,KAAKxE,MAAM,GACPwE,KAAKgH,SAAShH,KAAKgH,QAAQhH,KAAKuH,aAAcvH,KAAKwH,eACvDxH,KAAKxE,MAAM,GACPwE,KAAKiH,UAAUjH,KAAKiH,SAASjH,KAAKuH,aAAcvH,KAAKwH,eACrDxH,KAAKkH,YAAYlH,KAAKkH,WAAWlH,KAAKuH,aAAcvH,KAAKwH,eAC7DxH,KAAKmD,mBAIGwD,EAAA1G,UAAAqD,sBAAV,SAAgCD,GAC/BrD,KAAK4F,UAGIe,EAAA1G,UAAAsD,oBAAV,SAA8BF,GAC7BrD,KAAK4F,SAEL5F,KAAKyH,YAAc,KACnBzH,KAAK4G,GAAK,KACV5G,KAAK6G,KAAO,KACZ7G,KAAK+G,OAAS,KACd/G,KAAKgH,QAAU,KACfhH,KAAKiH,SAAW,KAChBjH,KAAKkH,WAAa,KAClBlH,KAAK2H,aAAe,MAGbhB,EAAA1G,UAAA2F,OAAR,YACsB,GAAjB5F,KAAKyF,UACRqC,cAAc9H,KAAKyF,SACnBzF,KAAKyF,SAAW,IAIVkB,EAAA1G,UAAAzE,MAAR,SAAcuM,GAGb,IAAIC,EACJ,IAAK,IAAIN,KAHT1H,KAAKuH,aAAeQ,EACpB/H,KAAKwH,cAAgBxH,KAAK+G,OAAO/G,KAAKuH,aAAc,EAAG,EAAG,GAE1CvH,KAAK4G,GACpBoB,EAAShI,KAAK2H,aAAaD,GAC3B1H,KAAKyH,YAAYC,GAAOM,GAAUhI,KAAK4G,GAAGc,GAAOM,GAAUhI,KAAKwH,eA4B3Db,EAAA1G,UAAAE,UAAP,WAA4B,OAAOH,KAAKyH,aACjCd,EAAA1G,UAAAgI,UAAP,SAAiBtM,GAAsBqE,KAAKyH,YAAc9L,GAGnDgL,EAAA1G,UAAAiI,YAAP,WAA8B,OAAOlI,KAAK8G,UACnCH,EAAA1G,UAAAkI,YAAP,SAAmBrB,GAAwB9G,KAAK8G,SAAWA,GAGpDH,EAAA1G,UAAAmI,MAAP,WAAwB,OAAOpI,KAAK4G,IAC7BD,EAAA1G,UAAAoI,MAAP,SAAazB,GAAkB5G,KAAK4G,GAAKA,GAGlCD,EAAA1G,UAAAqI,QAAP,WAA0B,OAAOtI,KAAK6G,MAC/BF,EAAA1G,UAAAsI,QAAP,SAAe1B,GAAoB7G,KAAK6G,KAAOA,GAGxCF,EAAA1G,UAAAuI,UAAP,WAAoC,OAAOxI,KAAK+G,QACzCJ,EAAA1G,UAAAwI,UAAP,SAAiB1B,GAA8B/G,KAAK+G,OAASA,GAGtDJ,EAAA1G,UAAAyI,WAAP,WAA4C,OAAO1I,KAAKgH,SACjDL,EAAA1G,UAAA0I,WAAP,SAAkBnF,GAAmCxD,KAAKgH,QAAUxD,GAG7DmD,EAAA1G,UAAA2I,YAAP,WAA6C,OAAO5I,KAAKiH,UAClDN,EAAA1G,UAAA4I,YAAP,SAAmBrF,GAAmCxD,KAAKiH,SAAWzD,GAG/DmD,EAAA1G,UAAA6I,cAAP,WAA+C,OAAO9I,KAAKkH,YACpDP,EAAA1G,UAAA8I,cAAP,SAAqBvF,GAAmCxD,KAAKkH,WAAa1D,GAGnEmD,EAAA1G,UAAA+I,gBAAP,WAAkC,OAAOhJ,KAAKuH,cAGvCZ,EAAA1G,UAAAgJ,iBAAP,WAAmC,OAAOjJ,KAAKwH,eAOxCb,EAAA1G,UAAAiJ,kBAAP,WAAoC,OAAOvC,EAAMkB,gBAC1ClB,EAAA1G,UAAAkJ,kBAAP,SAAyBC,GAA4BzC,EAAMkB,eAAiBuB,GAC7DzC,EAAAkB,eAAwB,IAAO,GAC/ClB,EApKA,CAA2B9L,EAAAiH,SAAdjH,EAAA8L,MAAKA,EAPnB,CAAU9L,MAAAA,IAAG,KCAb,SAAUA,GAIT,IAAAwO,EAAA,SAAA7H,GAQC,SAAA6H,QAAY,IAAAvF,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,GAAAC,UAAAD,GAAZ,IAAAgH,EAAAV,EAAAhG,MAAAwE,KACU8D,IAAQ9D,YAuCVkC,EAAAsD,gBAAkB,SAAC5F,GAC1BsC,EAAKoH,eAAevI,oBAAoBlG,EAAA0G,aAAaM,SAAUK,EAAKsD,iBACpEtD,EAAKoH,eAAiB,OAChBpH,EAAKqH,UAAYrH,EAAKwC,YAC3BxC,EAAKiB,iBAELjB,EAAKsH,QA5CNtH,EAAKoH,eAAiB,KACtBpH,EAAKqH,UAAY,EACjBrH,EAAKuH,UAAW,EAChBvH,EAAKwH,oBAAqB,IA8G5B,OA3H4BhI,UAAA2H,EAAA7H,GA0BpB6H,EAAApJ,UAAA8D,WAAP,eAAkB,IAAAD,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,GAAAC,UAAAD,GACjBsG,EAAAvB,UAAM8D,WAAUvI,MAAAwE,KAAI8D,IAGduF,EAAApJ,UAAAkE,cAAP,eAAqB,IAAAL,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,GAAAC,UAAAD,GACpBsG,EAAAvB,UAAMmE,gBAAe5I,MAAAwE,KAAA,CAACA,KAAKuJ,SAAW,GAACrF,OAAKJ,KAGtCuF,EAAApJ,UAAAsE,gBAAP,SAAuBT,GACtB9D,KAAK+D,WAAUvI,MAAfwE,KAAmB8D,IAGbuF,EAAApJ,UAAAuE,mBAAP,SAA0BV,GACzB9D,KAAKmE,cAAa3I,MAAlBwE,KAAsB8D,IAGfuF,EAAApJ,UAAAuJ,KAAR,WACCxJ,KAAKsJ,eAAiBtJ,KAAK2E,kBAAkB3E,KAAKuJ,UAClDvJ,KAAKsJ,eAAe7I,iBAAiB5F,EAAA0G,aAAaM,SAAU7B,KAAKwF,iBACjExF,KAAKsJ,eAAe5G,WAaX2G,EAAApJ,UAAAmD,oBAAV,SAA8BC,IAC7BrD,KAAKuJ,SAAW,GACZvJ,KAAK0E,YACR1E,KAAKwJ,OAELxJ,KAAKmD,kBAIGkG,EAAApJ,UAAAqD,sBAAV,SAAgCD,GAC3BrD,KAAKsJ,iBACRtJ,KAAKsJ,eAAevI,oBAAoBlG,EAAA0G,aAAaM,SAAU7B,KAAKwF,iBACpExF,KAAKsJ,eAAexG,YACpB9C,KAAKsJ,eAAiB,MAEvBtJ,KAAKuJ,UAAY,EACjB/H,EAAAvB,UAAMqD,sBAAqBlC,KAAApB,KAACqD,IAGnBgG,EAAApJ,UAAAsD,oBAAV,SAA8BF,GACzBrD,KAAKsJ,iBACRtJ,KAAKsJ,eAAevI,oBAAoBlG,EAAA0G,aAAaM,SAAU7B,KAAKwF,iBACpExF,KAAKsJ,eAAerG,UACpBjD,KAAKsJ,eAAiB,MAEvBtJ,KAAKuJ,UAAY,EACjBvJ,KAAKyJ,UAAW,EAChBzJ,KAAK0J,oBAAqB,EAC1BlI,EAAAvB,UAAMsD,oBAAmBnC,KAAApB,KAACqD,IAGjBgG,EAAApJ,UAAA0J,gBAAV,WACK3J,KAAKsJ,eAAe7F,YAAc5I,EAAAyG,aAAasB,YAClD5C,KAAKsJ,eAAevI,oBAAoBlG,EAAA0G,aAAaM,SAAU7B,KAAKwF,iBACpExF,KAAKsJ,eAAexG,aAErB9C,KAAKmD,kBAGIkG,EAAApJ,UAAA2J,iBAAV,WACK5J,KAAKsJ,eAAe7F,YAAc5I,EAAAyG,aAAasB,YAClD5C,KAAKsJ,eAAevI,oBAAoBlG,EAAA0G,aAAaM,SAAU7B,KAAKwF,iBACpExF,KAAKsJ,eAAexG,aAErB,IAAMU,EAAgBxD,KAAK0D,YAA0B,aACjDF,GAAMA,IACVxD,KAAKiD,WAaIoG,EAAApJ,UAAA4J,YAAV,WAAiC,OAAO7J,KAAKuJ,UAM9CF,EA3HA,CAA4BxO,EAAAgJ,aAAfhJ,EAAAwO,OAAMA,EAJpB,CAAUxO,MAAAA,IAAG,KlBAb,SAAUA,GAIT,IAAAiP,EAAA,SAAAtI,GAQC,SAAAsI,QAAY,IAAAhG,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,GAAAC,UAAAD,GAAZ,IAAAgH,EAAAV,EAAAhG,MAAAwE,KACU8D,IAAQ9D,YA8BVkC,EAAAsD,gBAAkB,SAAC5F,KACpBsC,EAAK6H,eAAiB7H,EAAKwC,aAChCxC,EAAKiB,kBA/BNjB,EAAK6H,cAAgB,IAiIvB,OA3I8BrI,UAAAoI,EAAAtI,GAuBtBsI,EAAA7J,UAAA8D,WAAP,eAAkB,IAAAD,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,GAAAC,UAAAD,GACjBsG,EAAAvB,UAAM8D,WAAUvI,MAAAwE,KAAI8D,IAGdgG,EAAA7J,UAAAkE,cAAP,eAAqB,IAAAL,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,GAAAC,UAAAD,GACpB8E,KAAK+D,WAAUvI,MAAfwE,KAAmB8D,IAGbgG,EAAA7J,UAAAsE,gBAAP,SAAuBT,GACtB9D,KAAK+D,WAAUvI,MAAfwE,KAAmB8D,IAGbgG,EAAA7J,UAAAuE,mBAAP,SAA0BV,GACzB9D,KAAK+D,WAAUvI,MAAfwE,KAAmB8D,IASVgG,EAAA7J,UAAAmD,oBAAV,SAA8BC,GAC7BrD,KAAK+J,cAAgB,EACrB,IAAM3O,EAAgB4E,KAAK0E,YAC3B,GAAa,EAATtJ,EAGH,IAFA,IACI4O,EADElG,EAAqB9D,KAAKiE,cAEvBpD,EAAW,EAAGA,EAAIzF,IAAUyF,GACpCmJ,EAAUlG,EAASjD,IACXJ,iBAAiB5F,EAAA0G,aAAaM,SAAU7B,KAAKwF,iBACrDwE,EAAQtH,eAGT1C,KAAKmD,kBAIG2G,EAAA7J,UAAAqD,sBAAV,SAAgCD,GAC/B,IAAMjI,EAAgB4E,KAAK0E,YAC3B,GAAa,EAATtJ,EAGH,IAFA,IACI6O,EADEnG,EAAqB9D,KAAKiE,cAEvBpD,EAAW,EAAGA,EAAIzF,IAAUyF,GACpCoJ,EAAUnG,EAASjD,IACXE,oBAAoBlG,EAAA0G,aAAaM,SAAU7B,KAAKwF,iBACxDyE,EAAQnH,YAGVtB,EAAAvB,UAAMqD,sBAAqBlC,KAAApB,KAACqD,IAGnByG,EAAA7J,UAAAsD,oBAAV,SAA8BF,GAC7B,IAAMjI,EAAgB4E,KAAK0E,YAC3B,GAAa,EAATtJ,EAGH,IAFA,IACI8O,EADEpG,EAAqB9D,KAAKiE,cAEvBpD,EAAW,EAAGA,EAAIzF,IAAUyF,GACpCqJ,EAAUpG,EAASjD,IACXE,oBAAoBlG,EAAA0G,aAAaM,SAAU7B,KAAKwF,iBACxD0E,EAAQjH,UAGVzB,EAAAvB,UAAMsD,oBAAmBnC,KAAApB,KAACqD,IAGjByG,EAAA7J,UAAA0J,gBAAV,WACC,IAAMvO,EAAgB4E,KAAK0E,YAC3B,GAAa,EAATtJ,EAGH,IAFA,IAAM0I,EAAqB9D,KAAKiE,cAC5BZ,OAAO,EACFxC,EAAW,EAAGA,EAAIzF,IAAUyF,GACpCwC,EAAUS,EAASjD,IACP4C,YAAc5I,EAAAyG,aAAasB,YACtCS,EAAQtC,oBAAoBlG,EAAA0G,aAAaM,SAAU7B,KAAKwF,iBACxDnC,EAAQP,aAIX9C,KAAKmD,kBAGI2G,EAAA7J,UAAA2J,iBAAV,WACC,IAAMxO,EAAgB4E,KAAK0E,YAC3B,GAAa,EAATtJ,EAGH,IAFA,IAAM0I,EAAqB9D,KAAKiE,cAC5BZ,OAAO,EACFxC,EAAW,EAAGA,EAAIzF,IAAUyF,GACpCwC,EAAUS,EAASjD,IACP4C,YAAc5I,EAAAyG,aAAasB,YACtCS,EAAQtC,oBAAoBlG,EAAA0G,aAAaM,SAAU7B,KAAKwF,iBACxDnC,EAAQP,aAIX,IAAMU,EAAgBxD,KAAK0D,YAA0B,aACjDF,GAAMA,IACVxD,KAAKiD,WAaI6G,EAAA7J,UAAAkK,iBAAV,WAAsC,OAAOnK,KAAK+J,eAMnDD,EA3IA,CAA8BjP,EAAAgJ,aAAjBhJ,EAAAiP,SAAQA,EAJtB,CAAUjP,MAAAA,IAAG,KmBAb,SAAUE,GAAI,IAAAqP,EAEbC,EAFaD,EAAArP,EAAAqP,OAAArP,EAAAqP,KAAI,IAEjBC,EAAA,WAQC,SAAAA,EAAYC,EAAcC,QAAd,IAAAD,IAAAA,EAAA,QAAc,IAAAC,IAAAA,EAAA,GACzBvK,KAAKwK,IAAIF,EAAGC,GA8Dd,OAjDQF,EAAApK,UAAAuK,IAAP,SAAWF,EAAUC,GACpBvK,KAAKsK,EAAIA,EACTtK,KAAKuK,EAAIA,GAGHF,EAAApK,UAAAwK,OAAP,SAAcC,GACbA,EAAMF,IAAIxK,KAAKsK,EAAGtK,KAAKuK,IAGjBF,EAAApK,UAAA0K,SAAP,WACC,OAAO,IAAIN,EAAQrK,KAAKsK,EAAGtK,KAAKuK,IAG1BF,EAAApK,UAAA2K,KAAP,WACC5K,KAAKwK,IAAI,EAAG,IAGNH,EAAApK,UAAA4K,UAAP,WACC,IAAMC,EAAW9K,KAAK0E,YACtB1E,KAAKsK,GAAKQ,EACV9K,KAAKuK,GAAKO,GAGJT,EAAApK,UAAAyE,UAAP,WACC,OAAOtH,KAAKW,KAAKiC,KAAKsK,EAAItK,KAAKsK,EAAItK,KAAKuK,EAAIvK,KAAKuK,IAG3CF,EAAApK,UAAA8K,kBAAP,SAAyBL,GACxB,IAAMM,EAAYN,EAAMJ,EAAItK,KAAKsK,EAC3BW,EAAYP,EAAMH,EAAIvK,KAAKuK,EACjC,OAAOS,EAAKA,EAAKC,EAAKA,GAGhBZ,EAAApK,UAAAiL,YAAP,SAAmBR,GAClB,OAAOtN,KAAKW,KAAKiC,KAAK+K,kBAAkBL,KAe1CL,EAvEA,GAAaD,EAAAC,QAAOA,EAFrB,CAAUtP,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAqP,EAEbe,EAFaf,EAAArP,EAAAqP,OAAArP,EAAAqP,KAAI,IAEjBe,EAAA,WAQC,SAAAA,EAAYb,EAAcC,EAAca,QAA5B,IAAAd,IAAAA,EAAA,QAAc,IAAAC,IAAAA,EAAA,QAAc,IAAAa,IAAAA,EAAA,GACvCpL,KAAKwK,IAAIF,EAAGC,EAAGa,GAkEjB,OArDQD,EAAAlL,UAAAuK,IAAP,SAAWF,EAAUC,EAAUa,GAC9BpL,KAAKsK,EAAIA,EACTtK,KAAKuK,EAAIA,EACTvK,KAAKoL,EAAIA,GAGHD,EAAAlL,UAAAwK,OAAP,SAAcC,GACbA,EAAMF,IAAIxK,KAAKsK,EAAGtK,KAAKuK,EAAGvK,KAAKoL,IAGzBD,EAAAlL,UAAA0K,SAAP,WACC,OAAO,IAAIQ,EAAQnL,KAAKsK,EAAGtK,KAAKuK,EAAGvK,KAAKoL,IAGlCD,EAAAlL,UAAA2K,KAAP,WACC5K,KAAKwK,IAAI,EAAG,EAAG,IAGTW,EAAAlL,UAAA4K,UAAP,WACC,IAAMC,EAAW9K,KAAK0E,YACtB1E,KAAKsK,GAAKQ,EACV9K,KAAKuK,GAAKO,EACV9K,KAAKoL,GAAKN,GAGJK,EAAAlL,UAAAyE,UAAP,WACC,OAAOtH,KAAKW,KAAKiC,KAAKsK,EAAItK,KAAKsK,EAAItK,KAAKuK,EAAIvK,KAAKuK,EAAIvK,KAAKoL,EAAIpL,KAAKoL,IAG7DD,EAAAlL,UAAA8K,kBAAP,SAAyBL,GACxB,IAAMM,EAAYN,EAAMJ,EAAItK,KAAKsK,EAC3BW,EAAYP,EAAMH,EAAIvK,KAAKuK,EAC3Bc,EAAYX,EAAMU,EAAIpL,KAAKoL,EACjC,OAAOJ,EAAKA,EAAKC,EAAKA,EAAKI,EAAKA,GAG1BF,EAAAlL,UAAAiL,YAAP,SAAmBR,GAClB,OAAOtN,KAAKW,KAAKiC,KAAK+K,kBAAkBL,KAgB1CS,EA3EA,GAAaf,EAAAe,QAAOA,EAFrB,CAAUpQ,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAqP,EAEbkB,EAFalB,EAAArP,EAAAqP,OAAArP,EAAAqP,KAAI,IAEjBkB,EAAA,WAQC,SAAAA,EAAYhB,EAAcC,EAAcgB,EAAkBC,QAA9C,IAAAlB,IAAAA,EAAA,QAAc,IAAAC,IAAAA,EAAA,QAAc,IAAAgB,IAAAA,EAAA,QAAkB,IAAAC,IAAAA,EAAA,GACzDxL,KAAKwK,IAAIF,EAAGC,EAAGgB,EAAOC,GA0ExB,OA7DQF,EAAArL,UAAAuK,IAAP,SAAWF,EAAUC,EAAUgB,EAAcC,GAC5CxL,KAAKsK,EAAIA,EACTtK,KAAKuK,EAAIA,EACTvK,KAAKuL,MAAQA,EACbvL,KAAKwL,OAASA,GAGRF,EAAArL,UAAAwK,OAAP,SAAcgB,GACbA,EAAKjB,IAAIxK,KAAKsK,EAAGtK,KAAKuK,EAAGvK,KAAKuL,MAAOvL,KAAKwL,SAGpCF,EAAArL,UAAA0K,SAAP,WACC,OAAO,IAAIW,EAAUtL,KAAKsK,EAAGtK,KAAKuK,EAAGvK,KAAKuL,MAAOvL,KAAKwL,SAGhDF,EAAArL,UAAAyL,OAAP,WACC,OAAO1L,KAAKuK,GAGNe,EAAArL,UAAA0L,UAAP,WACC,OAAO3L,KAAKuK,EAAIvK,KAAKwL,QAGfF,EAAArL,UAAA2L,QAAP,WACC,OAAO5L,KAAKsK,GAGNgB,EAAArL,UAAA4L,SAAP,WACC,OAAO7L,KAAKsK,EAAItK,KAAKuL,OAGfD,EAAArL,UAAA6L,WAAP,WACC,OAAO,IAAI1B,EAAAC,QAAQrK,KAAK4L,UAAW5L,KAAK0L,WAGlCJ,EAAArL,UAAA8L,YAAP,WACC,OAAO,IAAI3B,EAAAC,QAAQrK,KAAK6L,WAAY7L,KAAK0L,WAGnCJ,EAAArL,UAAA+L,cAAP,WACC,OAAO,IAAI5B,EAAAC,QAAQrK,KAAK4L,UAAW5L,KAAK2L,cAGlCL,EAAArL,UAAAgM,eAAP,WACC,OAAO,IAAI7B,EAAAC,QAAQrK,KAAK6L,WAAY7L,KAAK2L,cAiB3CL,EAnFA,GAAalB,EAAAkB,UAASA,EAFvB,CAAUvQ,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAEb6Q,EAFa7Q,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjB6Q,EAAA,WASC,SAAAA,KACD,OAReA,EAAAC,KAAd,SAAmBxQ,EAAY6H,GAChB,MAAV7H,GACJyQ,OAAOC,KAAK1Q,GAAQ2Q,QAAQ,SAAC5E,GAC5BlE,EAAKkE,EAAK/L,EAAO+L,OAKpBwE,EAVA,GAAa7Q,EAAA6Q,IAAGA,EAFjB,CAAUnR,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAEbkR,EAFalR,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjBkR,EAAA,WAuEC,SAAAA,KACD,OA/DeA,EAAAC,SAAd,SAAuBC,EAAcC,EAAiBC,QAAjB,IAAAD,IAAAA,EAAA,QAAiB,IAAAC,IAAAA,EAAA,GAGrD,IAFA,IAAMC,EAAkB,IAAItI,MAAMmI,GAC9BI,EAAWH,EACN7L,EAAW,EAAGA,EAAI4L,IAAS5L,EACnC+L,EAAO/L,GAAKgM,EACZA,GAAKF,EAEN,OAAOC,GAQML,EAAAO,OAAd,SAAwBC,GACvB,OAAOA,EAAKC,OAAO,SAAU1C,EAAKzJ,EAAU2B,GAC3C,OAAOA,EAAKyK,QAAQ3C,KAAOzJ,KAUf0L,EAAAW,WAAd,SAA4BH,EAAUD,GAErC,YAFqC,IAAAA,IAAAA,GAAA,GAEjCA,EACIC,EAAKC,OAAO,SAAU1C,EAAKzJ,EAAU2B,GAC3C,OAAOA,EAAKyK,QAAQ3C,KAAO9H,EAAK2K,YAAY7C,KAGtCyC,EAAKC,OAAO,SAAU1C,EAAKzJ,EAAU2B,GAC3C,OAAQA,EAAKyK,QAAQ3C,KAAOzJ,GAAO2B,EAAK2K,YAAY7C,KAAOzJ,KAgBhD0L,EAAAa,WAAd,SAA4BC,EAAWC,EAAWC,GACjD,IAAI1M,EAAU2M,EAAUpP,EAAW,EAC7BqP,EAAWJ,EAAMjS,OACjBsS,EAAWJ,EAAMlS,OACvB,IAAKyF,EAAI,EAAGA,EAAI4M,IAAK5M,EACpB,IAAK2M,EAAI3M,EAAI,EAAG2M,EAAIE,IAAKF,EACxBD,EAASnP,IAAKyC,EAAG2M,EAAGH,EAAMxM,GAAIyM,EAAME,KAMxCjB,EAxEA,GAAalR,EAAAkR,IAAGA,EAFjB,CAAUxR,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAEbsS,EAFatS,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjBsS,EAAA,WAgIC,SAAAA,KACD,OArHeA,EAAAC,IAAd,SAAkBC,EAAcC,EAAeC,EAAeC,EAAeC,EAAeC,GAC3F,YAD2F,IAAAA,IAAAA,GAAA,GACvFJ,GAAUC,EAAeC,GACzBE,IACCJ,EAASC,EACRF,EAAQC,EAAQD,EAAQC,EACXC,EAARF,IAAgBA,EAAQE,GAE7BF,EAAQE,EAAQF,EAAQE,EACXD,EAARD,IAAgBA,EAAQC,KAG3BD,EAAQC,IAAWG,EAASD,IAAWD,EAASD,GAAUE,IASrDL,EAAAQ,OAAd,SAAqBC,EAAgBC,GACpC,YADoB,IAAAD,IAAAA,EAAA,QAAgB,IAAAC,IAAAA,EAAA,GAC7BD,GAAOC,EAAMD,GAAOhR,KAAK+Q,UASnBR,EAAAW,UAAd,SAAwBF,EAAgBC,GACvC,YADuB,IAAAD,IAAAA,EAAA,QAAgB,IAAAC,IAAAA,EAAA,GAChCjR,KAAKmR,MAAMZ,EAAIQ,OAAOC,EAAKC,KAUrBV,EAAAO,MAAd,SAAoBL,EAAcO,EAAYC,GAC7C,OAAOR,EAAQO,EAAMA,EAAeC,EAARR,EAAcQ,EAAMR,GAYnCF,EAAAa,KAAd,SAAmBC,EAAWC,EAAWC,EAAWC,EAAWC,QAAA,IAAAA,IAAAA,GAAA,GAC9D,IAAM7D,EAAY2D,EAAKF,EACjBxD,EAAY2D,EAAKF,EACvB,OAAOG,EAAW7D,EAAKA,EAAKC,EAAKA,EAAM7N,KAAKW,KAAKiN,EAAKA,EAAKC,EAAKA,IAQnD0C,EAAAmB,SAAd,SAAuBC,GACtB,OAAOA,EAASpB,EAAIqB,SAQPrB,EAAAsB,SAAd,SAAuBC,GACtB,OAAOA,EAASvB,EAAIwB,SAUPxB,EAAAyB,KAAd,SAAmBvI,EAAaD,EAAWmI,GAC1C,YAD0C,IAAAA,IAAAA,GAAA,GACnCA,GAAWnI,EAAKC,EAAO8G,EAAI0B,KAAO1B,EAAI2B,IAAMlS,KAAKE,IAAQsJ,EAAKC,EAAO,KAAO,IAAM,KAa5E8G,EAAA2B,IAAuB,EAAVlS,KAAKE,GAClBqQ,EAAA0B,IAAuB,EAAVjS,KAAKE,GAClBqQ,EAAA4B,IAAuB,EAAVnS,KAAKE,GAClBqQ,EAAA6B,IAAuB,EAAVpS,KAAKE,GAClBqQ,EAAA8B,IAAuB,EAAVrS,KAAKE,GAClBqQ,EAAA+B,KAActS,KAAKE,GAAK,EACxBqQ,EAAAgC,KAAcvS,KAAKE,GAAK,EACxBqQ,EAAAiC,KAAcxS,KAAKE,GAAK,EACxBqQ,EAAAkC,KAAczS,KAAKE,GAAK,EAEvBqQ,EAAAqB,QAAiB,IAAM5R,KAAKE,GAC5BqQ,EAAAwB,QAAiB/R,KAAKE,GAAK,IAO3CqQ,EAjIA,GAAatS,EAAAsS,IAAGA,EAFjB,CAAU5S,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAEbyU,EAFazU,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjByU,EAAA,WAqBC,SAAAA,KACD,OAbeA,EAAAC,aAAd,SAA2BC,EAAkBC,EAAoBC,QAAtC,IAAAF,IAAAA,EAAA,QAAkB,IAAAC,IAAAA,EAAA,QAAoB,IAAAC,IAAAA,EAAA,GAChEA,GAAqB,GAAVD,EAAuB,KAARD,EAC1B,IAAIG,EAAW/S,KAAKmR,MAAM2B,EAAU,MAAMtO,WACtC6L,EAAWrQ,KAAKmR,MAAO2B,EAAU,GAAM,IAAItO,WAC3CzD,GAAY,IAAMf,KAAKmR,MAAM2B,EAAU,KAAKE,QAAQ,EAAG,GAC3D,MAAS,KAALD,EACIA,EAAI,KAAO,IAAM1C,GAAG2C,QAAQ,EAAG,GAAK,IAAMjS,EAE1CsP,EAAI,IAAMtP,GAKpB2R,EAtBA,GAAazU,EAAAyU,IAAGA,EAFjB,CAAU/U,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAEbgV,EAFahV,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjBgV,EAAA,WAaC,SAAAA,KACD,OAZeA,EAAAC,SAAd,WAIC,IAHA,IAEIC,EAFEC,EAAqB,GACrBC,EAAiBC,SAASC,OAAOC,UAAU,GAAGC,MAAM,KAElDhQ,EAAW,EAAG4P,EAAM5P,KAAMA,EAEjC2P,GADAD,EAAOE,EAAM5P,GAAGgQ,MAAM,MACX,IAAMN,EAAK,GAEvB,OAAOC,GAITH,EAdA,GAAahV,EAAAgV,IAAGA,EAFjB,CAAUtV,MAAAA,IAAG,KCAb,SAAUA,IAAI,SAAAM,GAEb,IAAYyV,EAAAA,EAYAC,EAAAA,GAZAD,EAAAA,EAAAzV,EAAAyV,QAAAzV,EAAAyV,MAAK,KAChBA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,WAAA,GAAA,aACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,YAAA,GAAA,cACAA,EAAAA,EAAA,cAAA,GAAA,gBACAA,EAAAA,EAAA,aAAA,GAAA,eACAA,EAAAA,EAAA,YAAA,GAAA,cACAA,EAAAA,EAAA,cAAA,GAAA,gBACAA,EAAAA,EAAA,aAAA,GAAA,gBAGWC,EAAAA,EAAA1V,EAAA0V,YAAA1V,EAAA0V,UAAS,KACpBA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,QAAA,GAAA,UAGD,IAAAC,EAAA,WAmCC,SAAAA,KACD,OAlCeA,EAAAC,OAAd,SAAqBtV,EAAuBuV,EAAuBC,EAAyCC,QAAzC,IAAAD,IAAAA,EAAsBJ,EAAUM,cAAS,IAAAD,IAAAA,EAAcN,EAAMQ,eAC/H,IAAIC,EAAY5V,EAAO2O,EACnBkH,EAAY7V,EAAO4O,EACnBkH,EAAY9V,EAAO4P,MACnBmG,EAAY/V,EAAO6P,OAEjBmG,EAAYT,EAAO5G,EACnBsH,EAAYV,EAAO3G,EACnBsH,EAAYX,EAAO3F,MACnBuG,EAAYZ,EAAO1F,OAEzB,OAAQ2F,GACP,KAAKJ,EAAUM,QACf,KAAKN,EAAUgB,SACd,IAAMC,EAAgBH,EAAKJ,EACrBQ,EAAgBH,EAAKJ,EACrBQ,EAAef,GAAaJ,EAAUM,QAAWW,EAASC,EAASD,EAASC,EAAoBA,EAATD,EAAkBA,EAASC,EACxHR,GAAMS,EACNR,GAAMQ,EACN,MAED,KAAKnB,EAAUoB,SACd,OAAO,IAAIpX,EAAAqP,KAAKkB,UAAUqG,EAAIC,EAAIC,EAAIC,GAQxC,OALAP,EAAKI,GAAOP,GAASN,EAAMsB,UAAYhB,GAASN,EAAMuB,aAAejB,GAASN,EAAMwB,YAAe,EACjGlB,GAASN,EAAMyB,WAAanB,GAASN,EAAM0B,cAAgBpB,GAASN,EAAM2B,aAAiBZ,EAAKJ,GAAOI,EAAKJ,GAAM,GACpHD,EAAKI,GAAOR,GAASN,EAAMsB,UAAYhB,GAASN,EAAM4B,YAActB,GAASN,EAAMyB,UAAa,EAC9FnB,GAASN,EAAMwB,aAAelB,GAASN,EAAM6B,eAAiBvB,GAASN,EAAM2B,aAAiBX,EAAKJ,GAAOI,EAAKJ,GAAM,GAEhH,IAAI3W,EAAAqP,KAAKkB,UAAUiG,EAAIC,EAAIC,EAAIC,IAIxCV,EApCA,GAAa3V,EAAA2V,MAAKA,EArBL,CAAAjW,EAAAM,OAAAN,EAAAM,KAAI,KAAlB,CAAUN,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAEbuX,EAFavX,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjBuX,EAAA,WAQC,SAAAA,EAAYC,QAAA,IAAAA,IAAAA,EAAA,MACPA,EACH7S,KAAKwK,IAAIqI,IAET7S,KAAK8S,WAAa9S,KAAK+S,WAAa,KACpC/S,KAAKgT,UAAYhT,KAAK+S,WAAW3X,OACjC4E,KAAKiT,SAAU,GAEhBjT,KAAKkT,QAAU,KACflT,KAAKmT,oBAAqB,EA+E5B,OAlEQP,EAAA3S,UAAAuK,IAAP,SAAWqI,GACV7S,KAAK8S,WAAaD,EAAO3O,SACzBlE,KAAKoT,SAGCR,EAAA3S,UAAAoT,IAAP,WACKrT,KAAKiT,SAAWjT,KAAKmT,oBACxBnT,KAAKoT,QAEN,IAAM/O,EAAejH,KAAKmR,MAAMnR,KAAK+Q,SAAWnO,KAAKgT,WAC/CnF,EAAU7N,KAAK+S,WAAW1O,GAC5BuI,GAAiB,EAOrB,OANI5M,KAAKkT,UAAStG,EAAS5M,KAAKkT,QAAQrF,IACpCjB,IACH5M,KAAK+S,WAAW/R,OAAOqD,EAAO,GAC9BrE,KAAKgT,UAAYhT,KAAK+S,WAAW3X,OACjC4E,KAAKiT,QAA4B,GAAlBjT,KAAKgT,WAEdnF,GAGD+E,EAAA3S,UAAAmT,MAAP,WACCpT,KAAK+S,WAAa/S,KAAK8S,WAAW5O,SAClClE,KAAKgT,UAAYhT,KAAK+S,WAAW3X,OACjC4E,KAAKiT,QAA4B,GAAlBjT,KAAKgT,WAGdJ,EAAA3S,UAAAqT,aAAP,WACC,OAAOtT,KAAKgT,WAGNJ,EAAA3S,UAAAsT,WAAP,WACC,OAAOvT,KAAKiT,SAGNL,EAAA3S,UAAAuT,sBAAP,WACC,OAAOxT,KAAKmT,oBAGNP,EAAA3S,UAAAwT,sBAAP,SAA6BC,GAC5B1T,KAAKmT,mBAAqBO,GAGbd,EAAAe,cAAd,SAA4BlH,GAE3B,IADA,IAAMoG,EAAkB,IAAIvO,MAAMmI,GACzB5L,EAAW,EAAGA,EAAI4L,IAAS5L,EAAGgS,EAAOhS,GAAKA,EACnD,OAAO,IAAI+R,EAAeC,IAoB5BD,EAhGA,GAAavX,EAAAuX,OAAMA,EAFpB,CAAU7X,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAEbuY,EAFavY,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjBuY,EAAA,WAQC,SAAAA,EAAYC,EAAkBC,EAAqB/E,QAAvC,IAAA8E,IAAAA,EAAA,QAAkB,IAAAC,IAAAA,EAAA,QAAqB,IAAA/E,IAAAA,GAAA,GAClD/O,KAAK+T,SAASF,EAAO9E,GACrB/O,KAAKgU,YAAYF,EAAU/E,GAsE7B,OAzDQ6E,EAAA3T,UAAAgU,SAAP,SAAgBlF,GACf,YADe,IAAAA,IAAAA,GAAA,GACRA,EAAS/O,KAAK6T,MAAsB,IAAb7T,KAAK6T,MAAczW,KAAKE,IAGhDsW,EAAA3T,UAAA8T,SAAP,SAAgBF,EAAc9E,QAAA,IAAAA,IAAAA,GAAA,GAC7B/O,KAAK6T,MAAQ9E,EAAS8E,EAASA,EAAQzW,KAAKE,GAAK,KAG3CsW,EAAA3T,UAAAiU,YAAP,SAAmBnF,GAClB,YADkB,IAAAA,IAAAA,GAAA,GACXA,EAAS/O,KAAK8T,SAA4B,IAAhB9T,KAAK8T,SAAiB1W,KAAKE,IAGtDsW,EAAA3T,UAAA+T,YAAP,SAAmBF,EAAiB/E,QAAA,IAAAA,IAAAA,GAAA,GACnC/O,KAAK8T,SAAW/E,EAAS+E,EAAYA,EAAW1W,KAAKE,GAAK,KAGpDsW,EAAA3T,UAAAkU,OAAP,WACCnU,KAAK6T,OAAS7T,KAAK8T,UAGbF,EAAA3T,UAAAmU,OAAP,SAAchZ,GACb,YADa,IAAAA,IAAAA,EAAA,GACNA,EAASgC,KAAKI,IAAIwC,KAAK6T,QAGxBD,EAAA3T,UAAAoU,OAAP,SAAcjZ,GACb,YADa,IAAAA,IAAAA,EAAA,GACNA,EAASgC,KAAKC,IAAI2C,KAAK6T,QAGxBD,EAAA3T,UAAAqU,OAAP,SAAclZ,GACb,YADa,IAAAA,IAAAA,EAAA,GACNA,EAASgC,KAAKmX,IAAIvU,KAAK6T,QAGxBD,EAAA3T,UAAAuU,aAAP,SAAoBpZ,GACnB,YADmB,IAAAA,IAAAA,EAAA,GACZA,GAAU,EAAIgC,KAAKI,IAAIwC,KAAK6T,QAAU,GAGvCD,EAAA3T,UAAAwU,UAAP,SAAiBrZ,EAAmBsZ,GACnC,QADgB,IAAAtZ,IAAAA,EAAA,QAAmB,IAAAsZ,IAAAA,EAAA,MACzB,MAANA,EAIH,MAAO,CAAEpK,EAAGtK,KAAKqU,OAAOjZ,GAASmP,EAAGvK,KAAKoU,OAAOhZ,IAHhDsZ,EAAGpK,EAAItK,KAAKqU,OAAOjZ,GACnBsZ,EAAGnK,EAAIvK,KAAKoU,OAAOhZ,IAkBtBwY,EAhFA,GAAavY,EAAAuY,QAAOA,EAFrB,CAAU7Y,MAAAA,IAAG,K1BAb,SAAUA,IAAI,SAAAM,GAEb,IAAYsZ,EAAAA,GAAAA,EAAAA,EAAAtZ,EAAAsZ,cAAAtZ,EAAAsZ,YAAW,KACtBA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,KAAA,GAAA,OACAA,EAAAA,EAAA,KAAA,GAAA,OACAA,EAAAA,EAAA,MAAA,GAAA,QACAA,EAAAA,EAAA,OAAA,GAAA,SAmBD,IAAAC,EAAA,WAAA,SAAAA,KAaA,OAXQA,EAAA3U,UAAA4U,QAAP,SAAe5Z,KAGR2Z,EAAA3U,UAAA1E,KAAP,SAAYN,KAGL2Z,EAAA3U,UAAA6U,KAAP,SAAY7Z,KAGL2Z,EAAA3U,UAAA8U,MAAP,SAAa9Z,KAEd2Z,EAbA,GAAavZ,EAAAuZ,YAAWA,EAmBxB,IAAAI,EAAA,WAAA,SAAAA,KAiBA,OAfQA,EAAA/U,UAAA4U,QAAP,SAAe5Z,GACdgK,QAAQgQ,MAAMzZ,MAAMyJ,QAASX,MAAMrE,UAAUkF,MAAM/D,KAAK,CAAC,cAAc8C,OAAOjJ,MAGxE+Z,EAAA/U,UAAA1E,KAAP,SAAYN,GACXgK,QAAQC,IAAI1J,MAAMyJ,QAASX,MAAMrE,UAAUkF,MAAM/D,KAAK,CAAC,cAAc8C,OAAOjJ,MAGtE+Z,EAAA/U,UAAA6U,KAAP,SAAY7Z,GACXgK,QAAQ6P,KAAKtZ,MAAMyJ,QAASX,MAAMrE,UAAUkF,MAAM/D,KAAK,CAAC,cAAc8C,OAAOjJ,MAGvE+Z,EAAA/U,UAAA8U,MAAP,SAAa9Z,GACZgK,QAAQ8P,MAAMvZ,MAAMyJ,QAASX,MAAMrE,UAAUkF,MAAM/D,KAAK,CAAC,cAAc8C,OAAOjJ,MAEhF+Z,EAjBA,GAAa3Z,EAAA2Z,eAAcA,EAuB3B,IAAAE,EAAA,WAEC,SAAAA,EAAYC,EAAiBC,GAC5BpV,KAAKmV,IAAMA,EACXnV,KAAKoV,KAAOA,EA8Bd,OA3BQF,EAAAjV,UAAA4U,QAAP,SAAe5Z,GACd+E,KAAKqV,MAAM,aAAcpa,IAGnBia,EAAAjV,UAAA1E,KAAP,SAAYN,GACX+E,KAAKqV,MAAM,aAAcpa,IAGnBia,EAAAjV,UAAA6U,KAAP,SAAY7Z,GACX+E,KAAKqV,MAAM,aAAcpa,IAGnBia,EAAAjV,UAAA8U,MAAP,SAAa9Z,GACZ+E,KAAKqV,MAAM,aAAcpa,IAGlBia,EAAAjV,UAAAoV,MAAR,SAAcC,EAAera,GAC5B,IAAMsa,EAActa,EAASua,KAAK,MAAQ,KACtCxV,KAAKoV,KACRpV,KAAKmV,IAAIM,UAAYF,EAAOvV,KAAKmV,IAAIM,UAErCzV,KAAKmV,IAAIO,UAAYH,EAAOvV,KAAKmV,IAAIO,WAMxCR,EAlCA,GAAa7Z,EAAA6Z,WAAUA,EAwCvB,IAAAS,EAAA,WAEC,SAAAA,EAAYC,GACX5V,KAAK4V,QAAUA,EAgCjB,OA7BQD,EAAA1V,UAAA4U,QAAP,SAAe5Z,GAEd,IADA,IAAMyS,EAAW1N,KAAK4V,QAAQxa,OACrByF,EAAW,EAAGA,EAAI6M,IAAK7M,EAC/Bb,KAAK4V,QAAQ/U,GAAGgU,QAAQrZ,MAAMwE,KAAM/E,IAI/B0a,EAAA1V,UAAA1E,KAAP,SAAYN,GAEX,IADA,IAAMyS,EAAW1N,KAAK4V,QAAQxa,OACrByF,EAAW,EAAGA,EAAI6M,IAAK7M,EAC/Bb,KAAK4V,QAAQ/U,GAAGtF,KAAKC,MAAMwE,KAAM/E,IAI5B0a,EAAA1V,UAAA6U,KAAP,SAAY7Z,GAEX,IADA,IAAMyS,EAAW1N,KAAK4V,QAAQxa,OACrByF,EAAW,EAAGA,EAAI6M,IAAK7M,EAC/Bb,KAAK4V,QAAQ/U,GAAGiU,KAAKtZ,MAAMwE,KAAM/E,IAI5B0a,EAAA1V,UAAA8U,MAAP,SAAa9Z,GAEZ,IADA,IAAMyS,EAAW1N,KAAK4V,QAAQxa,OACrByF,EAAW,EAAGA,EAAI6M,IAAK7M,EAC/Bb,KAAK4V,QAAQ/U,GAAGkU,MAAMvZ,MAAMwE,KAAM/E,IAKrC0a,EAnCA,GAAata,EAAAsa,gBAAeA,EAyC5B,IAAAra,EAAA,WA6BC,SAAAA,KACD,OAzBeA,EAAAuZ,QAAd,eAAsB,IAAA5Z,EAAA,GAAAC,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAAD,EAAAC,GAAAC,UAAAD,GACjBI,EAAOua,OAASlB,EAAYmB,SAASxa,EAAOya,OAAOlB,QAAQ5Z,IAGlDK,EAAAC,KAAd,eAAmB,IAAAN,EAAA,GAAAC,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAAD,EAAAC,GAAAC,UAAAD,GACdI,EAAOua,OAASlB,EAAYqB,MAAM1a,EAAOya,OAAOxa,KAAKN,IAG5CK,EAAAwZ,KAAd,eAAmB,IAAA7Z,EAAA,GAAAC,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAAD,EAAAC,GAAAC,UAAAD,GACdI,EAAOua,OAASlB,EAAYsB,MAAM3a,EAAOya,OAAOjB,KAAK7Z,IAG5CK,EAAAyZ,MAAd,eAAoB,IAAA9Z,EAAA,GAAAC,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAAD,EAAAC,GAAAC,UAAAD,GACfI,EAAOua,OAASlB,EAAYhS,OAAOrH,EAAOya,OAAOhB,MAAM9Z,IAG9CK,EAAAQ,OAAd,SAAqBH,EAAYC,EAAgBC,QAAA,IAAAA,IAAAA,GAAA,GAC5CP,EAAOua,OAASlB,EAAYsB,MAAQpa,GAAWP,EAAOya,OAAOjB,KAAK,CAAClZ,EAAU,MAAQD,KAG5EL,EAAAU,QAAd,SAAsBL,EAAYC,EAAiBC,QAAA,IAAAA,IAAAA,GAAA,GAC9CP,EAAOua,OAASlB,EAAYhS,OAAS9G,GAAWP,EAAOya,OAAOhB,MAAM,CAACnZ,EAAU,MAAQD,KAxB9EL,EAAAua,MAAelB,EAAYmB,QAC3Bxa,EAAAya,OAAkB,IAAIf,EA2BrC1Z,EA9BA,GAAaD,EAAAC,OAAMA,EArJN,CAAAP,EAAAM,OAAAN,EAAAM,KAAI,KAAlB,CAAUN,MAAAA,IAAG,K2BAb,SAAUA,GAAI,IAAAM,EAEb6a,EAFa7a,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjB6a,EAAA,SAAA1U,GAQC,SAAA0U,IAAA,IAAAhU,EACCV,EAAAJ,KAAApB,OAAOA,YAEPkC,EAAKiU,eAAgB,EAErBjU,EAAKkU,UAAY,EACjBlU,EAAKmU,QAAU,KACfnU,EAAKoU,cAAgB,KAErBpU,EAAKqU,SAAW,KAChBrU,EAAKsU,OAAS,KACdtU,EAAKuU,OAAS,OAwIhB,OA3J2B/U,UAAAwU,EAAA1U,GAgCnB0U,EAAAjW,UAAAyW,UAAP,SAAiBC,GAChB3W,KAAKoW,UAAYO,EAAIvb,OACrB4E,KAAKqW,QAAUM,EAEf3W,KAAKsW,cAAgB,GACrB,IAAK,IAAIzV,EAAW,EAAGA,EAAIb,KAAKoW,YAAavV,EAC5Cb,KAAKsW,cAActW,KAAKqW,QAAQxV,IAAMA,EAGvCb,KAAK4W,SAGCV,EAAAjW,UAAA4W,aAAP,SAAoBT,GACnBpW,KAAKoW,UAAYA,EAEjBpW,KAAKqW,QAAU,KACfrW,KAAKsW,cAAgB,KAErBtW,KAAK4W,SAGEV,EAAAjW,UAAA2W,MAAR,WACC5W,KAAK8W,cAAgB,EACrB9W,KAAK+W,cAAgB,EAErB/W,KAAKgX,UAAY,KACjBhX,KAAKiX,UAAY,MAGXf,EAAAjW,UAAAiX,YAAP,SAAmBC,EAAkBC,GAEpC,YAFoC,IAAAA,IAAAA,GAAA,IAChCD,EAAY,GAAKA,GAAanX,KAAKoW,aAAWe,GAAa,GAC3DA,GAAanX,KAAK8W,eAEtB9W,KAAK+W,aAAe/W,KAAK8W,aACzB9W,KAAK8W,aAAeK,EAEhBnX,KAAKqW,UACRrW,KAAKiX,WAAkC,GAAtBjX,KAAK+W,aAAqB/W,KAAKqW,QAAQrW,KAAK+W,cAAgB,KAC7E/W,KAAKgX,WAAkC,GAAtBhX,KAAK8W,aAAqB9W,KAAKqW,QAAQrW,KAAK8W,cAAgB,MAG9E9W,KAAKqX,mBAAmBhc,EAAAic,WAAWC,OAAQvX,KAAKuW,SAAUa,IAEnD,IAGDlB,EAAAjW,UAAAuX,SAAP,SAAgBC,EAAeL,QAAA,IAAAA,IAAAA,GAAA,GAC9B,IAAMD,EAAmBnX,KAAKsW,cAAcoB,eAAeD,GAAUzX,KAAKsW,cAAcmB,IAAW,EACnG,OAAOzX,KAAKkX,YAAYC,EAAWC,IAG7BlB,EAAAjW,UAAA0X,KAAP,SAAYP,QAAA,IAAAA,IAAAA,GAAA,GACX,IAAID,EAAYnX,KAAK8W,aAAe,EAChC9W,KAAKmW,eAAiBgB,EAAY,IAAGA,EAAYnX,KAAKoW,UAAY,GAEtE,IAAMxJ,EAAiB5M,KAAKkX,YAAYC,EAAWC,GAKnD,OAJIxK,GACH5M,KAAKqX,mBAAmBhc,EAAAic,WAAWM,KAAM5X,KAAKwW,OAAQY,GAGhDxK,GAGDsJ,EAAAjW,UAAAuJ,KAAP,SAAY4N,QAAA,IAAAA,IAAAA,GAAA,GACX,IAAID,EAAYnX,KAAK8W,aAAe,EAChC9W,KAAKmW,eAAiBgB,GAAanX,KAAKoW,YAAWe,EAAY,GAEnE,IAAMvK,EAAiB5M,KAAKkX,YAAYC,EAAWC,GAKnD,OAJIxK,GACH5M,KAAKqX,mBAAmBhc,EAAAic,WAAWO,KAAM7X,KAAKyW,OAAQW,GAGhDxK,GAGAsJ,EAAAjW,UAAAoX,mBAAR,SAA2B3W,EAAkB6M,EAAqC6J,GACvDpX,KAAKqW,UAAiC,GAAtBrW,KAAK+W,cAAsB/W,KAAKqW,QAAQrW,KAAK+W,cAC7D/W,KAAKqW,UAAiC,GAAtBrW,KAAK8W,cAAsB9W,KAAKqW,QAAQrW,KAAK8W,cADvF,IAGMlX,EAAmB,IAAIvE,EAAAic,WAAW5W,EAAWV,KAAMA,KAAK8W,aAAc9W,KAAK+W,aAAc/W,KAAKgX,UAAWhX,KAAKiX,UAAWG,GAC3H7J,GACHA,EAAS3N,GAEVI,KAAKmB,cAAcvB,IAabsW,EAAAjW,UAAA6X,iBAAP,WAAoC,OAAO9X,KAAKmW,eACzCD,EAAAjW,UAAA8X,iBAAP,SAAwBlK,GAAsB7N,KAAKmW,cAAgBtI,GAG5DqI,EAAAjW,UAAA+X,gBAAP,WAAkC,OAAOhY,KAAK8W,cAGvCZ,EAAAjW,UAAAgY,gBAAP,WAAkC,OAAOjY,KAAK+W,cAGvCb,EAAAjW,UAAAiY,aAAP,WAA+B,OAAOlY,KAAKoW,WAGpCF,EAAAjW,UAAAkY,aAAP,WAA+B,OAAOnY,KAAKgX,WAGpCd,EAAAjW,UAAAmY,aAAP,WAA+B,OAAOpY,KAAKiX,WAGpCf,EAAAjW,UAAAoY,WAAP,WAA+B,OAAOrY,KAAKqW,SAQ5CH,EA3JA,CAA2Bnb,EAAI6E,MAAMW,iBAAxBlF,EAAA6a,MAAKA,EAFnB,CAAUnb,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAEbic,EAFajc,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjBic,EAAA,SAAA9V,GAsBC,SAAA8V,EAAY5W,EAAkBe,EAAiBqV,EAAqBC,EAAqBC,EAAkBC,EAAkBG,GAA7H,IAAAlV,EACCV,EAAAJ,KAAApB,KAAMU,EAAWe,IAAYzB,YAC7BkC,EAAK4U,aAAeA,EACpB5U,EAAK6U,aAAeA,EACpB7U,EAAK8U,UAAYA,EACjB9U,EAAK+U,UAAYA,EACjB/U,EAAKkV,cAAgBA,IAoCvB,OAhEgC1V,UAAA4V,EAAA9V,GAyCxB8V,EAAArX,UAAA0B,MAAP,WACC,OAAO,IAAI2V,EAAWtX,KAAKE,UAAWF,KAAKG,YAAaH,KAAK8W,aAAc9W,KAAK+W,aAAc/W,KAAKgX,UAAWhX,KAAKiX,UAAWjX,KAAKoX,gBAG7HE,EAAArX,UAAA2B,SAAP,WACC,MAAO,uBAAyB5B,KAAKE,UAAY,KAAOF,KAAK+W,aAAe,OAAS/W,KAAK8W,aAAe,kBAAoB9W,KAAKoX,eAtCrHE,EAAAC,OAAgB,SAChBD,EAAAM,KAAc,OACdN,EAAAO,KAAc,OAsD7BP,EAhEA,CAAgCvc,EAAI6E,MAAMC,OAA7BxE,EAAAic,WAAUA,EAFxB,CAAUvc,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAIbid,EAJajd,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAIjBid,EAAA,SAAA9W,GAQC,SAAA8W,EAAYC,EAAwBC,QAAxB,IAAAD,IAAAA,EAAA,UAAwB,IAAAC,IAAAA,EAAA,GAApC,IAAAtW,EACCV,EAAAJ,KAAApB,OAAOA,YAoEAkC,EAAAuW,aAAe,WACtBvW,EAAKwW,WAAaxW,EAAKyW,mBACrBzW,EAAK0W,aACP,IAAIC,GAAsB,EACH,EAAnB3W,EAAKsW,aAAmBtW,EAAK0W,cAAgB1W,EAAKsW,aACrDK,GAAc,EACd3W,EAAK4W,QACK5W,EAAK6W,WAAa7W,EAAKqW,UACjCrW,EAAK8W,cAAc9W,EAAKqW,UAEzBrW,EAAK+W,SAAS5d,EAAA6d,WAAWC,MACrBN,GACH3W,EAAK+W,SAAS5d,EAAA6d,WAAWrX,WA/E1BK,EAAKqW,SAAWA,EAChBrW,EAAKsW,YAAcA,EACnBtW,EAAKkX,WAAY,EACjBlX,EAAKmX,KAAO,EACZnX,EAAKkR,UAiHP,OA/H2B1R,UAAA4W,EAAA9W,GA2BnB8W,EAAArY,UAAAqZ,MAAP,WACKtZ,KAAKoZ,YACTpZ,KAAKoZ,WAAY,EACjBpZ,KAAK0Y,WAAa1Y,KAAK2Y,iBACvB3Y,KAAKgZ,eAAiC,GAAnBhZ,KAAKuZ,UAAkBvZ,KAAKuZ,UAAYvZ,KAAKuY,YAG1DD,EAAArY,UAAA6Y,KAAP,WACM9Y,KAAKoZ,YACVpZ,KAAKoZ,WAAY,EACjBpZ,KAAKuZ,UAAYvZ,KAAK2Y,iBAAmB3Y,KAAK0Y,WAC9C1Y,KAAKwZ,iBAGClB,EAAArY,UAAAmT,MAAP,WACCpT,KAAK8Y,OACL9Y,KAAK4Y,aAAe,EACpB5Y,KAAKuZ,WAAa,GAGZjB,EAAArY,UAAAwZ,QAAP,WACCzZ,KAAKoT,QACLpT,KAAKsZ,SAOEhB,EAAArY,UAAA0Y,eAAR,WACC,OAAO,IAAItR,MAAOqS,WAGXpB,EAAArY,UAAA+Y,cAAR,SAAsBT,GACrBvY,KAAKwZ,eACLxZ,KAAK+Y,UAAYR,EACjBvY,KAAKqZ,IAAM3T,OAAOkC,YAAY5H,KAAKyY,aAAczY,KAAK+Y,YAG/CT,EAAArY,UAAAuZ,aAAR,YACkB,GAAbxZ,KAAKqZ,MACRvR,cAAc9H,KAAKqZ,KACnBrZ,KAAKqZ,KAAO,IAINf,EAAArY,UAAAgZ,SAAR,SAAiBvY,GAChBV,KAAKmB,cAAc,IAAI9F,EAAA6d,WAAWxY,EAAWV,KAAMA,KAAK4Y,aAAc5Y,KAAKwY,YAAaxY,KAAKsT,kBA6BvFgF,EAAArY,UAAA0Z,aAAP,WAAgC,OAAO3Z,KAAKoZ,WAGrCd,EAAArY,UAAA2Z,YAAP,WAA8B,OAAO5Z,KAAKuY,UACnCD,EAAArY,UAAA2H,YAAP,SAAmB2Q,GAAwBvY,KAAKuY,SAAWA,GAGpDD,EAAArY,UAAA4Z,eAAP,WAAiC,OAAO7Z,KAAK2Y,iBAAmB3Y,KAAK0Y,YAE9DJ,EAAArY,UAAA6Z,YAAP,WAA8B,OAAO9Z,KAAKuY,SAAWvY,KAAK6Z,kBAEnDvB,EAAArY,UAAA8Z,gBAAP,WAAkC,OAAO/Z,KAAK4Y,cAGvCN,EAAArY,UAAA+Z,eAAP,WAAiC,OAAOha,KAAKwY,aACtCF,EAAArY,UAAAga,eAAP,SAAsBxN,GAAqBzM,KAAKwY,YAAc/L,GAGvD6L,EAAArY,UAAAqT,aAAP,WAA+B,OAAOtT,KAAKwY,YAAcxY,KAAK4Y,cAM/DN,EA/HA,CAFyBvd,EAAI6E,MAAMW,iBAEtBlF,EAAAid,MAAKA,EAJnB,CAAUvd,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAIb6d,EAJa7d,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAIjB6d,EAAA,SAAA1X,GAqBC,SAAA0X,EAAYxY,EAAkBe,EAAwBmX,EAAyBJ,EAAwBxF,QAAzE,IAAAvR,IAAAA,EAAA,WAAwB,IAAAmX,IAAAA,EAAA,QAAyB,IAAAJ,IAAAA,EAAA,QAAwB,IAAAxF,IAAAA,EAAA,GAAvG,IAAA9Q,EACCV,EAAAJ,KAAApB,KAAMU,EAAWe,IAAYzB,YAC7BkC,EAAK0W,aAAeA,EACpB1W,EAAKsW,YAAcA,EACnBtW,EAAK8Q,UAAYA,IAkCnB,OA3DgCtR,UAAAwX,EAAA1X,GAsCxB0X,EAAAjZ,UAAA0B,MAAP,WACC,OAAO,IAAIuX,EAAWlZ,KAAKE,UAAWF,KAAKG,YAAaH,KAAK4Y,aAAc5Y,KAAKwY,YAAaxY,KAAKgT,YAG5FkG,EAAAjZ,UAAA2B,SAAP,WACC,MAAO,uBAAyB5B,KAAKE,UAAY,oBAAsBF,KAAK4Y,aAAe,iBAAmB5Y,KAAKwY,YAAc,eAAiBxY,KAAKgT,WAnC1IkG,EAAAC,KAAc,OACdD,EAAArX,SAAkB,WAkDjCqX,EA3DA,CAFene,EAAI6E,MAAMC,OAEZxE,EAAA6d,WAAUA,EAJxB,CAAUne,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAEb6e,EAFa7e,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjB6e,EAAA,WAyBC,SAAAA,EAAYC,EAAuBC,EAAgCC,EAAwBC,QAAxB,IAAAD,IAAAA,EAAA,UAAwB,IAAAC,IAAAA,EAAA,IAC1Fta,KAAKma,cAAgBA,EACrBna,KAAKoa,cAAgBA,EACrBpa,KAAKsa,YAAcA,EACnBta,KAAKua,MAAQ,IAAIjW,MAAM+V,GACvB,IAAK,IAAIxZ,EAAI,EAAGA,EAAIwZ,IAAaxZ,EAChCb,KAAKua,MAAM1Z,GAAKb,KAAKma,gBAEtBna,KAAKqE,MAAQgW,EAgFf,OA/DQH,EAAAja,UAAAua,QAAP,WACC,GAAiB,EAAbxa,KAAKqE,MACR,OAAOrE,KAAKua,QAAQva,KAAKqE,OAE1B,IAAK,IAAIxD,EAAI,EAAGA,EAAIb,KAAKsa,cAAezZ,EACvCb,KAAKua,MAAME,QAAQza,KAAKma,iBAGzB,OADAna,KAAKqE,MAAQrE,KAAKsa,YACXta,KAAKwa,WAQNN,EAAAja,UAAAya,WAAP,SAAkBC,GACjB3a,KAAKua,MAAMva,KAAKqE,SAAWsW,GAOrBT,EAAAja,UAAA2a,OAAP,WAEC,IADA,IAAMlN,EAAI1N,KAAKqE,MACNxD,EAAI,EAAGA,EAAI6M,IAAK7M,EACxBb,KAAKoa,cAAcpa,KAAKua,MAAMM,SAE/B7a,KAAKqE,MAAQ,GAOP6V,EAAAja,UAAAgD,QAAP,WAEC,IADA,IAAMyK,EAAI1N,KAAKua,MAAMnf,OACZyF,EAAI,EAAGA,EAAI6M,IAAK7M,EACxBb,KAAKoa,cAAcpa,KAAKua,MAAM1Z,IAE/Bb,KAAKqE,MAAQ,EACbrE,KAAKua,MAAQ,KACbva,KAAKma,cAAgB,KACrBna,KAAKoa,cAAgB,MAmBvBF,EAjHA,GAAa7e,EAAA6e,WAAUA,EAFxB,CAAUnf,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAM,EAEbyf,EAFazf,EAAAN,EAAAM,OAAAN,EAAAM,KAAI,IAEjByf,EAAA,WAmBC,SAAAA,KACD,OAlBeA,EAAAhC,KAAd,SAAmBzV,GAElB,OADIA,GAASA,EAAQP,YACd,MAGMgY,EAAAtO,SAAd,SAAuB9J,OAAiB,IAAAoB,EAAA,GAAA5I,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAA4I,EAAA5I,EAAA,GAAAC,UAAAD,GACvC,IAAMmB,EAAe,IAAIxB,IAAIwO,OAG7B,OAFAhN,EAAE0H,WAAUvI,MAAZa,EAAgByH,GACZpB,GAASrG,EAAEqG,UACRrG,GAGMye,EAAAC,OAAd,SAAqBrY,EAAiBW,GAErC,OADIX,GAAWW,GAASA,EAAQX,UACzBW,GAITyX,EApBA,GAAazf,EAAAyf,YAAWA,EAFzB,CAAU/f,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAigB,EAKbC,EALaD,EAAAjgB,EAAAigB,SAAAjgB,EAAAigB,OAAM,IAKnBC,EAAA,WAQC,SAAAA,IAAA,IAAA/Y,EAAAlC,KA4FQA,KAAAkb,wBAA0B,SAAC1K,EAAiB2K,GACnD3K,EAAM4K,WAAY,EAClB5K,EAAM6K,gBAAiB,EACvB7K,EAAM2K,QAAUA,EACZ3K,EAAM8K,MAAMC,QACf/K,EAAM8K,MAAMC,OAAOJ,GAEpBjZ,EAAKsH,QAGExJ,KAAAwb,qBAAuB,SAAChL,EAAiB5U,GAChD4U,EAAM4K,WAAY,EAClB5K,EAAM6K,gBAAiB,EACnB7K,EAAM8K,MAAMG,SACfjL,EAAM8K,MAAMG,QAAQ7f,GAErBsG,EAAKsH,QA3GLxJ,KAAK0b,YAAa,EAElB1b,KAAK2b,aAAe,EACpB3b,KAAK4b,WAAa,EAElB5b,KAAK6b,eAAiB,GACtB7b,KAAK8b,mBAAqB,EAE1B9b,KAAK+b,iBAAmB,GACxB/b,KAAKgc,aAAe,GAEpBhc,KAAKic,eAAiB,GAEtBjc,KAAKiG,gBAAkB,IAAIlL,EAAI6E,MAAMW,gBA2JvC,OA9IQ0a,EAAAhb,UAAAic,QAAP,SAAeC,EAAYrc,GAC1B,OAAOE,KAAKoc,SAAStc,EAAMqc,EAAK,KAGzBlB,EAAAhb,UAAAmc,SAAR,SAAiBtc,EAAaqc,EAAYb,GACzC,GAAItb,KAAKgc,aAAaG,GAAM,OAAOnc,KAAKgc,aAAaG,GAAKE,GAE1D,IAAM7L,EAAkB,IAAIwK,EAAAsB,UAS5B,OARA9L,EAAM6L,GAAKE,OAAOtB,EAAYoB,IAC9B7L,EAAM1Q,KAAOA,EACb0Q,EAAM2L,IAAMA,EACZ3L,EAAM8K,MAAQA,EACdtb,KAAK6b,eAAe/a,KAAK0P,GACzBxQ,KAAK+b,iBAAiBvL,EAAM6L,IAAM7L,EAClCxQ,KAAKgc,aAAaxL,EAAM2L,KAAO3L,IAC7ByK,EAAYoB,GACP7L,EAAM6L,IAGPpB,EAAAhb,UAAAuc,KAAP,WACKxc,KAAK0b,aACT1b,KAAK0b,YAAa,EAClB1b,KAAK8b,mBAAqB,EAC1B9b,KAAKwJ,SAGEyR,EAAAhb,UAAAuJ,KAAR,WAAA,IAAAtH,EAAAlC,KAQC,GAPAA,KAAK2b,aAAe3b,KAAK8b,kBAAoB,EAC7C9b,KAAK4b,WAAa5b,KAAK6b,eAAezgB,OAEd,EAApB4E,KAAK2b,cACR3b,KAAKiG,gBAAgB9E,cAAc,IAAI6Z,EAAAyB,iBAAiBzB,EAAAyB,iBAAiBC,SAAU1c,KAAMA,KAAK2b,aAAe3b,KAAK4b,WAAY5b,KAAK2b,aAAc3b,KAAK4b,aAGnJ5b,KAAK2b,aAAe3b,KAAK4b,WAAY,CACxC5b,KAAK8b,oBACL,IAAMa,EAAkB3c,KAAK6b,eAAe7b,KAAK8b,mBACjDa,EAAMvB,WAAY,EAClBuB,EAAMtB,gBAAiB,EACvBrgB,MAAM,6BAAqC2hB,EAAMR,IAAiBQ,EAAM7c,KAAO,KAE/E,IAAM8c,EAAuB5c,KAAKic,eAAeU,EAAM7c,MACnD8c,EACHA,EAAQJ,KAAKG,EAAMR,IAAK,SAAChB,GACxBjZ,EAAKgZ,wBAAwByB,EAAOxB,IACnC,SAACvf,QAAA,IAAAA,IAAAA,EAAA,IACFsG,EAAKsZ,qBAAqBmB,EAAO/gB,MAGlCZ,MAAM,uCAA0C2hB,EAAM7c,KAAO,KAC7DE,KAAKwJ,aAINxJ,KAAK0b,YAAa,EAClB1b,KAAK6b,eAAiB,GACtB7b,KAAK8b,mBAAqB,EAC1B9b,KAAKiG,gBAAgB9E,cAAc,IAAI6Z,EAAAyB,iBAAiBzB,EAAAyB,iBAAiB5a,SAAU7B,KAAMA,KAAK2b,aAAe3b,KAAK4b,WAAY5b,KAAK2b,aAAc3b,KAAK4b,cAIjJX,EAAAhb,UAAA4c,WAAP,SAAkBD,GACjB5c,KAAKic,eAAeW,EAAQ1c,WAAa0c,GAsBnC3B,EAAAhb,UAAA6c,sBAAP,SAA6Bnc,GAC5BX,KAAKiG,gBAAgBxF,iBAAiBua,EAAAyB,iBAAiBC,SAAU/b,IAG3Dsa,EAAAhb,UAAA8c,yBAAP,SAAgCpc,GAC/BX,KAAKiG,gBAAgBlF,oBAAoBia,EAAAyB,iBAAiBC,SAAU/b,IAG9Dsa,EAAAhb,UAAA+c,wBAAP,SAA+Brc,GAC9BX,KAAKiG,gBAAgBxF,iBAAiBua,EAAAyB,iBAAiB5a,SAAUlB,IAG3Dsa,EAAAhb,UAAAgd,2BAAP,SAAkCtc,GACjCX,KAAKiG,gBAAgBlF,oBAAoBia,EAAAyB,iBAAiB5a,SAAUlB,IAG9Dsa,EAAAhb,UAAAid,kBAAP,SAAyBC,GACxB,OAAOnd,KAAK+b,iBAAiBoB,IAIvBlC,EAAAhb,UAAAmd,cAAP,SAAqBjB,GACpB,OAAOnc,KAAKgc,aAAaG,IAanBlB,EAAAhb,UAAAmb,UAAP,WAA6B,OAAOpb,KAAK0b,YAGlCT,EAAAhb,UAAAod,gBAAP,WAAkC,OAAOrd,KAAK2b,cAGvCV,EAAAhb,UAAAqd,cAAP,WAAgC,OAAOtd,KAAK4b,YAGrCX,EAAAhb,UAAAsd,gBAAP,SAAgCpB,GAAgB,OAAOnc,KAAKgc,aAAaG,GAAKhB,SACvEF,EAAAhb,UAAAud,oBAAP,SAAoCC,GAAsB,OAAOzd,KAAK+b,iBAAiB0B,GAAWtC,SAYnFF,EAAAoB,GAAY,EAC5BpB,EAjLA,GAAaD,EAAAC,YAAWA,EALzB,CAAUlgB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAigB,EAEbyB,EAFazB,EAAAjgB,EAAAigB,SAAAjgB,EAAAigB,OAAM,IAEnByB,EAAA,SAAAjb,GAsBC,SAAAib,EAAY/b,EAAkBe,EAAwBic,EAAqBC,EAAwB/B,EAAuBT,QAA5F,IAAA1Z,IAAAA,EAAA,WAAwB,IAAAic,IAAAA,EAAA,QAAqB,IAAAC,IAAAA,EAAA,QAAwB,IAAA/B,IAAAA,EAAA,QAAuB,IAAAT,IAAAA,EAAA,MAA1H,IAAAjZ,EACCV,EAAAJ,KAAApB,KAAMU,EAAWe,IAAYzB,YAC7BkC,EAAKwb,SAAWA,EAChBxb,EAAKyb,YAAcA,EACnBzb,EAAK0Z,WAAaA,EAClB1Z,EAAKiZ,QAAUA,IAmCjB,OA9DsCzZ,UAAA+a,EAAAjb,GAwC9Bib,EAAAxc,UAAA0B,MAAP,WACC,OAAO,IAAI8a,EAAiBzc,KAAKE,UAAWF,KAAKG,YAAaH,KAAK0d,SAAU1d,KAAK2d,YAAa3d,KAAK4b,WAAY5b,KAAKmb,UAG/GsB,EAAAxc,UAAA2B,SAAP,WACC,MAAO,6BAA+B5B,KAAKE,UAAY,gBAAkBF,KAAK0d,SAAW,mBAAqB1d,KAAK2d,YAAc,kBAAoB3d,KAAK4b,YArCpJa,EAAAC,SAAkB,WAClBD,EAAA5a,SAAkB,WAClB4a,EAAAmB,MAAe,QAoDvBnB,EA9DA,CAAsC1hB,EAAI6E,MAAMC,OAAnCmb,EAAAyB,iBAAgBA,EAF9B,CAAU1hB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAEbuhB,EAAAA,EAQC,WACCtc,KAAKob,WAAY,EACjBpb,KAAKqb,gBAAiB,IAZXtgB,EAAAigB,SAAAjgB,EAAAigB,OAAM,KAENsB,UAASA,EAFvB,CAAUvhB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAA8iB,EAENtd,EACAjF,EAEPwiB,EALaD,EAAA9iB,EAAAgjB,OAAAhjB,EAAAgjB,KAAI,IAEVxd,EAAkBxF,EAAI6E,MAAMW,gBAC5BjF,EAASP,EAAIM,KAAKC,OAEzBwiB,EAAA,SAAAtc,GAQC,SAAAsc,EAAYC,EAAe1B,QAAf,IAAA0B,IAAAA,EAAA,WAAe,IAAA1B,IAAAA,EAAA,MAA3B,IAAAna,EACCV,EAAAJ,KAAApB,OAAOA,YACPkC,EAAKma,GAAW,MAANA,EAAaA,EAAKE,OAAOuB,EAAKE,WACxC9b,EAAK6b,KAAOA,EACZ7b,EAAK+b,KAAO,GACZ/b,EAAKgc,kBAAmB,EACxBhc,EAAKic,gBAAiB,EACtBjc,EAAKkc,eAAgB,EACrBlc,EAAKmc,YAAa,EAClBnc,EAAKoc,WAAY,EACjBpc,EAAKqc,WAAY,EACjBrc,EAAKsc,SAAU,EACftc,EAAKuc,UAAW,EAEZX,EAAKY,UAAUxc,EAAKma,KACvB/gB,EAAOwZ,KAAK,YAAe5S,EAAKma,GAAK,wBAEtCyB,EAAKY,UAAUxc,EAAKma,IAAMna,IACxB4b,EAAKE,YAsOT,OAhQ4Ctc,UAAAoc,EAAAtc,GAuCpCsc,EAAA7d,UAAA0e,WAAP,WACK3e,KAAKme,gBAAkBne,KAAKoe,gBAChCpe,KAAKme,gBAAiB,EAMtBne,KAAK+d,KAAO/d,KAAK4e,iBACb5e,KAAKme,gBACRpiB,WAAWiE,KAAKie,MAAQje,KAAM,gBAAiBA,KAAK+d,MACpD/d,KAAK6e,MAAK,GACV7e,KAAKme,gBAAiB,EACtBne,KAAKoe,eAAgB,GAGrBpe,KAAK+d,KAAO,OAIPD,EAAA7d,UAAA6e,MAAP,WACK9e,KAAKqe,YAAcre,KAAKse,YAC5Bte,KAAKqe,YAAa,EAClBtiB,WAAWiE,KAAKie,MAAQje,KAAM,gDAAiDA,KAAKoe,eACpFpe,KAAK+e,YACL/e,KAAKqe,YAAa,EAClBre,KAAKse,WAAY,IAGXR,EAAA7d,UAAA+e,SAAP,YACMhf,KAAKme,gBAAmBne,KAAKoe,iBAClCpe,KAAKif,eACLjf,KAAKme,gBAAiB,EACtBne,KAAKoe,eAAgB,SAEdN,EAAKY,UAAU1e,KAAKqc,IAC3ByB,EAAKY,UAAU1e,KAAKqc,IAAM,OAGpByB,EAAA7d,UAAAif,KAAP,SAAY9H,QAAA,IAAAA,IAAAA,GAAA,GACPpX,KAAKwe,SACTxe,KAAKmf,eAAe/H,GAAe1U,WAG7Bob,EAAA7d,UAAA4e,KAAP,SAAYzH,QAAA,IAAAA,IAAAA,GAAA,GACNpX,KAAKwe,SACVxe,KAAKof,eAAehI,GAAe1U,WAG7Bob,EAAA7d,UAAAkf,eAAP,SAAsB/H,GAAtB,IAAAlV,EAAAlC,UAAsB,IAAAoX,IAAAA,GAAA,GACrB,IAAM/T,EAAqB,IAAIxI,IAAIwO,OA6BnC,OA5BAhG,EAAQU,WACP,IAAIlJ,IAAIgK,KAAK,WACR3C,EAAKsc,UACTziB,WAAWmG,EAAK+b,MAAQ/b,EAAM,wDAAyDA,EAAKic,iBAAmBjc,EAAKkc,eACpH1iB,UAAUwG,EAAK+b,MAAQ/b,EAAM,kDAAmDA,EAAKmc,aAAcnc,EAAKoc,WACxGpc,EAAKsc,SAAU,EACftc,EAAKqc,WAAY,EACjBrc,EAAKuc,UAAW,EAEZvc,EAAKmd,cACRnd,EAAKmd,YAAYvc,YACjBZ,EAAKmd,YAAc,MAEhBnd,EAAKod,cACRpd,EAAKod,YAAYxc,YACjBZ,EAAKod,YAAc,OAGpBpd,EAAKmd,YAAchc,GACXc,cACPjC,EAAKqd,SAASrd,EAAK6b,KAAM3G,GACzB,IAAIvc,IAAIgK,KAAK,WACZ3C,EAAKmd,YAAc,KACnBnd,EAAKqc,WAAY,SAKdlb,GAGDya,EAAA7d,UAAAmf,eAAP,SAAsBhI,GAAtB,IAAAlV,EAAAlC,UAAsB,IAAAoX,IAAAA,GAAA,GACrB,IAAM/T,EAAqB,IAAIxI,IAAIwO,OA+BnC,OA9BAhG,EAAQU,WACP,IAAIlJ,IAAIgK,KAAK,WACP3C,EAAKsc,UACLtc,EAAKic,iBACTpiB,WAAWmG,EAAK+b,MAAQ/b,EAAM,wDAAyDA,EAAKic,iBAAmBjc,EAAKkc,eACpH1iB,UAAUwG,EAAK+b,MAAQ/b,EAAM,kDAAmDA,EAAKmc,aAAenc,EAAKoc,YAE1Gpc,EAAKsc,SAAU,EACftc,EAAKqc,WAAY,EACjBrc,EAAKuc,UAAW,EAEZvc,EAAKmd,cACRnd,EAAKmd,YAAYvc,YACjBZ,EAAKmd,YAAc,MAEhBnd,EAAKod,cACRpd,EAAKod,YAAYxc,YACjBZ,EAAKod,YAAc,OAGpBpd,EAAKod,YAAcjc,GACXc,cACPjC,EAAKsd,SAAStd,EAAK6b,KAAM3G,GACzB,IAAIvc,IAAIgK,KAAK,WACZ3C,EAAKod,YAAc,KACnBpd,EAAKuc,UAAW,SAKbpb,GAGDya,EAAA7d,UAAAwf,kBAAP,WACC,OAAOzf,KAAKme,gBAGNL,EAAA7d,UAAAyf,iBAAP,WACC,OAAO1f,KAAKoe,eAGNN,EAAA7d,UAAA0f,cAAP,WACC,OAAO3f,KAAKqe,YAGNP,EAAA7d,UAAA2f,aAAP,WACC,OAAO5f,KAAKse,WAGNR,EAAA7d,UAAA4f,aAAP,WACC,OAAO7f,KAAKue,WAGNT,EAAA7d,UAAA6f,WAAP,WACC,OAAO9f,KAAKwe,SAGNV,EAAA7d,UAAA8f,YAAP,WACC,OAAO/f,KAAKye,UAGNX,EAAA7d,UAAA+f,YAAP,WACC,OAAQhgB,KAAKwe,SAGPV,EAAA7d,UAAAggB,MAAP,WACC,OAAOjgB,KAAKqc,IAGNyB,EAAA7d,UAAAigB,QAAP,WACC,OAAOlgB,KAAK+d,MAGND,EAAA7d,UAAAkgB,QAAP,WACC,OAAOngB,KAAKie,MAGNH,EAAA7d,UAAAmgB,QAAP,SAAevS,GACd7N,KAAKie,KAAOpQ,GAGNiQ,EAAA7d,UAAAogB,oBAAP,WACC,OAAOrgB,KAAKke,kBAGNJ,EAAA7d,UAAAqgB,oBAAP,SAA2BzS,GAC1B7N,KAAKke,iBAAmBrQ,GAiBXiQ,EAAAyC,YAAd,SAA0BlE,GACzB,OAAOyB,EAAKY,UAAUrC,IA2BRyB,EAAAE,UAAmB,EACnBF,EAAAY,UAA4B,GAC5CZ,EAhQA,CAA4Cvd,GAAtBsd,EAAAC,KAAIA,EAL3B,CAAU/iB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAgjB,EAEbyC,EAFazC,EAAAhjB,EAAAgjB,OAAAhjB,EAAAgjB,KAAI,IAEjByC,EAAA,WAQC,SAAAA,EAAY7kB,EAAgB8kB,EAA4BC,EAAqCC,EAAwCC,QAAzG,IAAAH,IAAAA,EAAA,WAA4B,IAAAC,IAAAA,GAAA,QAAqC,IAAAC,IAAAA,GAAA,QAAwC,IAAAC,IAAAA,GAAA,GAArI,IAAA1e,EAAAlC,KAkIQA,KAAA6gB,iBAAmB,SAACjhB,GACvBsC,EAAKye,yBAAyB/gB,EAAMkhB,iBACpC5e,EAAK0e,0BAA0BhhB,EAAMmhB,kBACrC7e,EAAKwe,uBACRxe,EAAK8e,mBAAqB9e,EAAKue,QAAQQ,MAAMC,OAC7Chf,EAAKue,QAAQQ,MAAMC,OAAS,WAE7Bhf,EAAKif,QAGEnhB,KAAAohB,gBAAkB,SAACxhB,GACtBsC,EAAKye,yBAAyB/gB,EAAMkhB,iBACpC5e,EAAK0e,0BAA0BhhB,EAAMmhB,kBACrC7e,EAAKwe,uBACRxe,EAAKue,QAAQQ,MAAMC,OAAoC,IAA3Bhf,EAAK8e,mBAA2B9e,EAAK8e,mBAAqB,WAEvF9e,EAAKmf,OAGErhB,KAAAshB,iBAAmB,SAAC1hB,GACvBsC,EAAKye,yBAAyB/gB,EAAMkhB,iBACpC5e,EAAK0e,0BAA0BhhB,EAAMmhB,kBACzC7e,EAAKqf,QAGEvhB,KAAAwhB,eAAiB,SAAC5hB,GACrBsC,EAAKye,yBAAyB/gB,EAAMkhB,iBACpC5e,EAAK0e,0BAA0BhhB,EAAMmhB,kBACzC7e,EAAKuf,MAGEzhB,KAAA0hB,aAAe,SAAC9hB,GACnBsC,EAAKye,yBAAyB/gB,EAAMkhB,iBACpC5e,EAAK0e,0BAA0BhhB,EAAMmhB,kBACzC7e,EAAKyf,SAME3hB,KAAA4hB,kBAAoB,SAAChiB,GACxBsC,EAAKye,yBAAyB/gB,EAAMkhB,iBACpC5e,EAAK0e,0BAA0BhhB,EAAMmhB,kBACzC7e,EAAKqf,QAGEvhB,KAAA6hB,gBAAkB,SAACjiB,GACtBsC,EAAKye,yBAAyB/gB,EAAMkhB,iBACpC5e,EAAK0e,0BAA0BhhB,EAAMmhB,kBACzC7e,EAAKuf,MAGEzhB,KAAA8hB,mBAAqB,SAACliB,GACzBsC,EAAKye,yBAAyB/gB,EAAMkhB,iBACpC5e,EAAK0e,0BAA0BhhB,EAAMmhB,kBACzC7e,EAAKuf,MAxLLzhB,KAAKrE,OAASA,EACdqE,KAAKygB,QAAU,KACfzgB,KAAK0gB,qBAAuBA,EAC5B1gB,KAAK2gB,wBAA0BA,EAC/B3gB,KAAK4gB,yBAA2BA,EAChC5gB,KAAK+hB,QAAS,EACd/hB,KAAKgiB,QAAS,EACdhiB,KAAKghB,mBAAqB,GAE1BhhB,KAAKiiB,WAAWxB,GAoMlB,OAvLQD,EAAAvgB,UAAAkhB,KAAP,SAAY/J,QAAA,IAAAA,IAAAA,GAAA,GACPpX,KAAK+hB,SACT/hB,KAAK+hB,QAAS,EACd/hB,KAAKrE,OAAOumB,eAAe9K,KAGrBoJ,EAAAvgB,UAAAohB,IAAP,SAAWjK,QAAA,IAAAA,IAAAA,GAAA,GACLpX,KAAK+hB,SACV/hB,KAAK+hB,QAAS,EACd/hB,KAAKrE,OAAOwmB,cAAc/K,KAGpBoJ,EAAAvgB,UAAAshB,KAAP,SAAYnK,QAAA,IAAAA,IAAAA,GAAA,GACPpX,KAAKgiB,SACThiB,KAAKgiB,QAAS,EACdhiB,KAAKrE,OAAOymB,eAAehL,KAGrBoJ,EAAAvgB,UAAAwhB,GAAP,SAAUrK,QAAA,IAAAA,IAAAA,GAAA,GACJpX,KAAKgiB,SACVhiB,KAAKgiB,QAAS,EACdhiB,KAAKrE,OAAO0mB,aAAajL,KAGnBoJ,EAAAvgB,UAAA0hB,MAAP,SAAavK,QAAA,IAAAA,IAAAA,GAAA,GACZpX,KAAKrE,OAAO2mB,gBAAgBlL,IAGrBoJ,EAAAvgB,UAAAsiB,GAAR,WACCviB,KAAKygB,QAAQhgB,iBAAiB,YAAaT,KAAK6gB,kBAChD7gB,KAAKygB,QAAQhgB,iBAAiB,WAAYT,KAAKohB,iBAC/CphB,KAAKygB,QAAQhgB,iBAAiB,YAAaT,KAAKshB,kBAChDthB,KAAKygB,QAAQhgB,iBAAiB,UAAWT,KAAKwhB,gBAC9CxhB,KAAKygB,QAAQhgB,iBAAiB,QAAST,KAAK0hB,eAOrClB,EAAAvgB,UAAAuiB,IAAR,WACCxiB,KAAKygB,QAAQ1f,oBAAoB,YAAaf,KAAK6gB,kBACnD7gB,KAAKygB,QAAQ1f,oBAAoB,WAAYf,KAAKohB,iBAClDphB,KAAKygB,QAAQ1f,oBAAoB,YAAaf,KAAKshB,kBACnDthB,KAAKygB,QAAQ1f,oBAAoB,UAAWf,KAAKwhB,gBACjDxhB,KAAKygB,QAAQ1f,oBAAoB,QAASf,KAAK0hB,eAOzClB,EAAAvgB,UAAAwiB,UAAP,WACC,OAAOziB,KAAK+hB,QAGNvB,EAAAvgB,UAAAyiB,UAAP,WACC,OAAO1iB,KAAKgiB,QAGNxB,EAAAvgB,UAAA0iB,WAAP,WACC,OAAO3iB,KAAKygB,SAGND,EAAAvgB,UAAAgiB,WAAP,SAAkBxB,GACbzgB,KAAKygB,UAAYA,IACC,OAAjBzgB,KAAKygB,SACRzgB,KAAKwiB,MAENxiB,KAAKygB,QAAUA,EACM,OAAjBzgB,KAAKygB,SACRzgB,KAAKuiB,OAKD/B,EAAAvgB,UAAA2iB,aAAP,WACC5iB,KAAKiiB,WAAW,OAGVzB,EAAAvgB,UAAA4iB,2BAAP,WACC,OAAO7iB,KAAK2gB,yBAGNH,EAAAvgB,UAAA6iB,2BAAP,SAAkCpP,GACjC1T,KAAK2gB,wBAA0BjN,GAGzB8M,EAAAvgB,UAAA8iB,4BAAP,WACC,OAAO/iB,KAAK4gB,0BAGNJ,EAAAvgB,UAAA+iB,4BAAP,SAAmCtP,GAClC1T,KAAK4gB,yBAA2BlN,GAG1B8M,EAAAvgB,UAAAgjB,wBAAP,WACC,OAAOjjB,KAAK0gB,sBAGNF,EAAAvgB,UAAAijB,wBAAP,SAA+BxP,GAC9B1T,KAAK0gB,qBAAuBhN,GAkF9B8M,EAtNA,GAAazC,EAAAyC,eAAcA,EAF5B,CAAUzlB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAgjB,EAEboF,EAFapF,EAAAhjB,EAAAgjB,OAAAhjB,EAAAgjB,KAAI,IAEjBoF,EAAA,WAQC,SAAAA,EAAYxnB,GACXqE,KAAKrE,OAASA,EAyChB,OA5BQwnB,EAAAljB,UAAAmjB,OAAP,SAAchM,QAAA,IAAAA,IAAAA,GAAA,GACTpX,KAAKqjB,aACTrjB,KAAKqjB,YAAa,EAClBrjB,KAAKrE,OAAO2nB,qBAAqBtjB,KAAKqjB,WAAYjM,KAG5C+L,EAAAljB,UAAAsjB,SAAP,SAAgBnM,QAAA,IAAAA,IAAAA,GAAA,GACVpX,KAAKqjB,aACVrjB,KAAKqjB,YAAa,EAClBrjB,KAAKrE,OAAO2nB,qBAAqBtjB,KAAKqjB,WAAYjM,KAG5C+L,EAAAljB,UAAAujB,cAAP,WACC,OAAOxjB,KAAKqjB,YAedF,EAlDA,GAAapF,EAAAoF,kBAAiBA,EAF/B,CAAUpoB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAA0oB,EAEbC,EAFaD,EAAA1oB,EAAA0oB,UAAA1oB,EAAA0oB,QAAO,IAEpBC,EAAA,WAuMC,SAAAA,KACD,OAhMgBA,EAAA/E,WAAf,WACC,IAAI3e,KAAKoe,cAAT,CACApe,KAAKoe,eAAgB,EAErB,IAAMuF,EAAWje,OAAOke,UAAUC,UAAUC,cAG5C9jB,KAAK+jB,UAAqC,GAAzBJ,EAAE1W,QAAQ,aAA2C,GAAvB0W,EAAE1W,QAAQ,WAC/B,GAAtB0W,EAAE1W,QAAQ,UACgB,GAAzB0W,EAAE1W,QAAQ,aAA4C,GAAxB0W,EAAE1W,QAAQ,YACf,GAAzB0W,EAAE1W,QAAQ,aAA4C,GAAxB0W,EAAE1W,QAAQ,YACjB,GAAxB0W,EAAE1W,QAAQ,YACY,GAAtB0W,EAAE1W,QAAQ,UACgB,GAA1B0W,EAAE1W,QAAQ,YAEdjN,KAAKgkB,UAAqC,GAAzBL,EAAE1W,QAAQ,aAA2C,GAAvB0W,EAAE1W,QAAQ,WAC7B,GAAxB0W,EAAE1W,QAAQ,YACY,GAAtB0W,EAAE1W,QAAQ,UACgB,GAAzB0W,EAAE1W,QAAQ,aAA4C,GAAxB0W,EAAE1W,QAAQ,YACf,GAAzB0W,EAAE1W,QAAQ,aAA4C,GAAxB0W,EAAE1W,QAAQ,YACb,GAA5B0W,EAAE1W,QAAQ,cAEdjN,KAAKikB,WAAajkB,KAAK+jB,WAAa/jB,KAAKgkB,SAGzChkB,KAAKkkB,OAA8B,GAAtBP,EAAE1W,QAAQ,UAAyC,GAAxB0W,EAAE1W,QAAQ,YAAyC,GAAtB0W,EAAE1W,QAAQ,QAC/EjN,KAAKmkB,WAAqC,GAAzBR,EAAE1W,QAAQ,aAA4C,GAAxB0W,EAAE1W,QAAQ,WAGhC,GAAtB0W,EAAE1W,QAAQ,UAA0C,GAAzB0W,EAAE1W,QAAQ,WACvCjN,KAAKokB,MAAO,GACmB,GAAtBT,EAAE1W,QAAQ,QACnBjN,KAAKqkB,QAAS,GACmB,GAAxBV,EAAE1W,QAAQ,UACnBjN,KAAKskB,UAAW,GACiB,GAAxBX,EAAE1W,QAAQ,UACnBjN,KAAKukB,UAAW,GACkB,GAAzBZ,EAAE1W,QAAQ,WACnBjN,KAAKwkB,WAAY,GACe,GAAvBb,EAAE1W,QAAQ,SACnBjN,KAAKykB,SAAU,EAEfzkB,KAAK0kB,kBAAmB,EAIzB1kB,KAAK2kB,oBAAkD,IAAzBjf,OAAOkf,aACrC5kB,KAAK6kB,mBAAqB7kB,KAAKkkB,MAG/BlkB,KAAK8kB,SAAkD,GAAvC1nB,KAAK2nB,MAAMrf,OAAOsf,oBAMrBtB,EAAAuB,aAAd,WAEC,OADAjlB,KAAK2e,aACE3e,KAAKikB,WAGCP,EAAAwB,YAAd,WAEC,OADAllB,KAAK2e,aACE3e,KAAK+jB,UAGCL,EAAAyB,YAAd,WAEC,OADAnlB,KAAK2e,aACE3e,KAAKgkB,UAMCN,EAAA0B,SAAd,WAEC,OADAplB,KAAK2e,aACE3e,KAAKkkB,OAGCR,EAAA2B,aAAd,WAEC,OADArlB,KAAK2e,aACE3e,KAAKmkB,WAGCT,EAAA4B,YAAd,WAEC,OADAtlB,KAAK2e,aACE3e,KAAK8kB,UAMCpB,EAAA6B,QAAd,WAEC,OADAvlB,KAAK2e,aACE3e,KAAKokB,MAGCV,EAAA8B,UAAd,WAEC,OADAxlB,KAAK2e,aACE3e,KAAKqkB,QAGCX,EAAA+B,YAAd,WAEC,OADAzlB,KAAK2e,aACE3e,KAAKskB,UAGCZ,EAAAgC,YAAd,WAEC,OADA1lB,KAAK2e,aACE3e,KAAKukB,UAGCb,EAAAiC,aAAd,WAEC,OADA3lB,KAAK2e,aACE3e,KAAKwkB,WAGCd,EAAAkC,WAAd,WAEC,OADA5lB,KAAK2e,aACE3e,KAAKykB,SAGCf,EAAAmC,oBAAd,WAEC,OADA7lB,KAAK2e,aACE3e,KAAK0kB,kBAMChB,EAAAoC,kBAAd,WAEC,OADA9lB,KAAK2e,aACE3e,KAAK2kB,gBAGCjB,EAAAqC,qBAAd,WAEC,OADA/lB,KAAK2e,aACE3e,KAAK6kB,mBAMCnB,EAAAsC,OAAd,WACC,IAAiB,GAAbhmB,KAAKimB,IAAW,CACnB,IAAMC,EAAkBC,SAASC,cAAc,OAC/CF,EAAIG,aAAa,QAAS,gEAC1BF,SAASG,KAAKC,YAAYL,GAC1BlmB,KAAKimB,IAAMC,EAAIM,aACfL,SAASG,KAAKG,YAAYP,GAE3B,OAAOlmB,KAAKimB,KAaEvC,EAAAO,WAAoB,EACpBP,EAAAK,UAAmB,EACnBL,EAAAM,UAAmB,EAEnBN,EAAAQ,OAAgB,EAChBR,EAAAS,WAAoB,EAEpBT,EAAAU,MAAe,EACfV,EAAAW,QAAiB,EACjBX,EAAAY,UAAmB,EACnBZ,EAAAa,UAAmB,EACnBb,EAAAc,WAAoB,EACpBd,EAAAe,SAAkB,EAClBf,EAAAgB,kBAA2B,EAE3BhB,EAAAiB,gBAAyB,EACzBjB,EAAAmB,mBAA4B,EAE5BnB,EAAAoB,UAAmB,EACnBpB,EAAAuC,KAAc,EAEdvC,EAAAtF,eAAwB,EAOxCsF,EAxMA,GAAaD,EAAAC,WAAUA,EAFxB,CAAU3oB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAA0oB,EAEbiD,EAFajD,EAAA1oB,EAAA0oB,UAAA1oB,EAAA0oB,QAAO,IAEpBiD,EAAA,WAsHC,SAAAA,KACD,OAxGeA,EAAAC,KAAd,SAAmBjf,EAAYmG,EAAW+Y,GACzC,QADyC,IAAAA,IAAAA,GAAoB,IACxDF,EAAaG,cAAe,OAAO,EACxC,IAAMC,EAA4C,CAAEjZ,MAAMkZ,KAAKC,UAAUnZ,GAAQ+Y,UAAWA,GAE5F,OADAK,aAAaC,QAAQxf,EAAKqf,KAAKC,UAAUF,KAClC,GASMJ,EAAAS,aAAd,SAA2Bzf,EAAYmG,EAAWzE,QAAA,IAAAA,IAAAA,GAAuB,GACxE,IAAMwd,EAAkC,EAAfxd,GAAmB,IAAI/B,MAAOvB,UAAYsD,GAAe,EAClF,OAAOsd,EAAaC,KAAKjf,EAAKmG,EAAO+Y,IAQxBF,EAAAlK,KAAd,SAAmB9U,EAAY0f,GAC9B,QAD8B,IAAAA,IAAAA,EAAA,OACzBV,EAAaG,cAAe,OAAOO,EACxC,IAAMN,EAA4CC,KAAKM,MAAMJ,aAAazM,QAAQ9S,IAClF,OAAIof,EAEoB,EAAnBA,EAAOF,WAEN,IAAIvf,MAAOvB,UAAYghB,EAAOF,UAE1BG,KAAKM,MAAMP,EAAOjZ,QAGzBoZ,aAAaK,WAAW5f,GACjB0f,GAIDL,KAAKM,MAAMP,EAAOjZ,OAInBuZ,GAQKV,EAAAa,OAAd,SAAqB7f,GACfgf,EAAaG,eAClBI,aAAaK,WAAW5f,IAOXgf,EAAAG,YAAd,WACC,GAAiC,MAA7BH,EAAac,aAChB,IACCP,aAAaC,QAAQ,YAAa,aAClCD,aAAaK,WAAW,aACxBZ,EAAac,cAAe,EAC3B,MAAOzS,GACR2R,EAAac,cAAe,EAG9B,OAAOd,EAAac,cAYPd,EAAAe,eAAd,SAA6BC,EAAkB1X,EAAkBC,EAAoBC,EAAoB9G,GACxG,YAD4B,IAAAse,IAAAA,EAAA,QAAkB,IAAA1X,IAAAA,EAAA,QAAkB,IAAAC,IAAAA,EAAA,QAAoB,IAAAC,IAAAA,EAAA,QAAoB,IAAA9G,IAAAA,EAAA,GACjGA,EAAwE,KAAxD8G,EAAkD,IAAvCD,EAAiC,IAAtBD,EAAgB,GAAR0X,MAavChB,EAAAc,aAAuB,KAOvCd,EAvHA,GAAajD,EAAAiD,aAAYA,EAF1B,CAAU3rB,MAAAA,IAAG,KCAb,SAAUA,IAAI,SAAA0oB,GAGb,IAAYkE,GAAAA,EAAAlE,EAAAkE,UAAAlE,EAAAkE,QAAO,KAClBA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,IAAA,GAAA,MACAA,EAAAA,EAAA,MAAA,IAAA,QACAA,EAAAA,EAAA,MAAA,IAAA,QACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,IAAA,IAAA,MACAA,EAAAA,EAAA,WAAA,IAAA,aACAA,EAAAA,EAAA,SAAA,IAAA,WACAA,EAAAA,EAAA,OAAA,IAAA,SACAA,EAAAA,EAAA,MAAA,IAAA,QACAA,EAAAA,EAAA,OAAA,IAAA,SACAA,EAAAA,EAAA,SAAA,IAAA,WACAA,EAAAA,EAAA,IAAA,IAAA,MACAA,EAAAA,EAAA,KAAA,IAAA,OAEAA,EAAAA,EAAA,UAAA,IAAA,YACAA,EAAAA,EAAA,QAAA,IAAA,UACAA,EAAAA,EAAA,WAAA,IAAA,aACAA,EAAAA,EAAA,UAAA,IAAA,YAEAA,EAAAA,EAAA,OAAA,IAAA,SACAA,EAAAA,EAAA,OAAA,IAAA,SAEAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,KAAA,IAAA,OAEAA,EAAAA,EAAA,YAAA,IAAA,cACAA,EAAAA,EAAA,gBAAA,IAAA,kBACAA,EAAAA,EAAA,OAAA,IAAA,SACAA,EAAAA,EAAA,UAAA,IAAA,YACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,WAAA,IAAA,aACAA,EAAAA,EAAA,YAAA,IAAA,cACAA,EAAAA,EAAA,MAAA,IAAA,QACAA,EAAAA,EAAA,IAAA,IAAA,MACAA,EAAAA,EAAA,UAAA,IAAA,YACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,QAAA,IAAA,UACAA,EAAAA,EAAA,UAAA,IAAA,YAEAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IACAA,EAAAA,EAAA,EAAA,IAAA,IAEAA,EAAAA,EAAA,cAAA,IAAA,gBACAA,EAAAA,EAAA,eAAA,IAAA,iBACAA,EAAAA,EAAA,UAAA,IAAA,YAEAA,EAAAA,EAAA,QAAA,IAAA,UACAA,EAAAA,EAAA,QAAA,IAAA,UACAA,EAAAA,EAAA,QAAA,IAAA,UACAA,EAAAA,EAAA,QAAA,IAAA,UACAA,EAAAA,EAAA,QAAA,KAAA,UACAA,EAAAA,EAAA,QAAA,KAAA,UACAA,EAAAA,EAAA,QAAA,KAAA,UACAA,EAAAA,EAAA,QAAA,KAAA,UACAA,EAAAA,EAAA,QAAA,KAAA,UACAA,EAAAA,EAAA,QAAA,KAAA,UAEAA,EAAAA,EAAA,SAAA,KAAA,WACAA,EAAAA,EAAA,IAAA,KAAA,MACAA,EAAAA,EAAA,SAAA,KAAA,WACAA,EAAAA,EAAA,aAAA,KAAA,eACAA,EAAAA,EAAA,OAAA,KAAA,SAEAA,EAAAA,EAAA,GAAA,KAAA,KACAA,EAAAA,EAAA,GAAA,KAAA,KACAA,EAAAA,EAAA,GAAA,KAAA,KACAA,EAAAA,EAAA,GAAA,KAAA,KACAA,EAAAA,EAAA,GAAA,KAAA,KACAA,EAAAA,EAAA,GAAA,KAAA,KACAA,EAAAA,EAAA,GAAA,KAAA,KACAA,EAAAA,EAAA,GAAA,KAAA,KACAA,EAAAA,EAAA,GAAA,KAAA,KACAA,EAAAA,EAAA,IAAA,KAAA,MACAA,EAAAA,EAAA,IAAA,KAAA,MACAA,EAAAA,EAAA,IAAA,KAAA,MAEAA,EAAAA,EAAA,QAAA,KAAA,UACAA,EAAAA,EAAA,WAAA,KAAA,aAEAA,EAAAA,EAAA,UAAA,KAAA,YACAA,EAAAA,EAAA,OAAA,KAAA,SACAA,EAAAA,EAAA,MAAA,KAAA,QACAA,EAAAA,EAAA,KAAA,KAAA,OACAA,EAAAA,EAAA,OAAA,KAAA,SACAA,EAAAA,EAAA,WAAA,KAAA,aACAA,EAAAA,EAAA,SAAA,KAAA,WACAA,EAAAA,EAAA,aAAA,KAAA,eACAA,EAAAA,EAAA,MAAA,KAAA,QACAA,EAAAA,EAAA,YAAA,KAAA,cAEAA,EAAAA,EAAA,YAAA,KAAA,cACAA,EAAAA,EAAA,cAAA,KAAA,gBACAA,EAAAA,EAAA,MAAA,KAAA,QAOD,IAAAC,EAAA,WAwGC,SAAAA,KACD,OAjGgBA,EAAAjJ,WAAf,WACK3e,KAAKoe,gBACTpe,KAAKoe,eAAgB,EAErBpe,KAAKiG,gBAAkB,IAAIlL,EAAI6E,MAAMW,kBAGxBqnB,EAAAtO,MAAd,WACKtZ,KAAKoZ,YACTpZ,KAAKoZ,WAAY,EAEjBpZ,KAAK2e,aACL3jB,MAAM,sBAEN0K,OAAOjF,iBAAiB,UAAWT,KAAK6nB,sBACxCniB,OAAOjF,iBAAiB,QAAST,KAAK8nB,sBAIzBF,EAAA9O,KAAd,WACM9Y,KAAKoZ,YACVpZ,KAAKoZ,WAAY,EAEjBpZ,KAAK2e,aACL3jB,MAAM,qBAEN0K,OAAO3E,oBAAoB,UAAWf,KAAK6nB,sBAC3CniB,OAAO3E,oBAAoB,QAASf,KAAK8nB,sBAG5BF,EAAAnnB,iBAAd,SAA+BC,EAAkBC,GAChDX,KAAK2e,aACL3e,KAAKiG,gBAAgBxF,iBAAiBC,EAAWC,IAGpCinB,EAAA7mB,oBAAd,SAAkCL,EAAkBC,GACnDX,KAAK2e,aACL3e,KAAKiG,gBAAgBlF,oBAAoBL,EAAWC,IAqCvCinB,EAAAjO,aAAd,WAAuC,OAAO3Z,KAAKoZ,WAGrCwO,EAAAG,mBAAd,WAA6C,OAA8B,EAAvB/nB,KAAKgoB,iBAG3CJ,EAAAK,gBAAd,SAA8BC,GAA0B,OAA8C,MAAvCloB,KAAKmoB,sBAAsBD,IAI5EN,EAAAQ,4BAAd,WAAsD,OAAOpoB,KAAKqoB,0BACpDT,EAAAU,4BAAd,SAA0C5U,GAAwB1T,KAAKqoB,yBAA2B3U,GAzCnFkU,EAAAC,qBAAuB,SAACjoB,GACtC,IAAMsoB,EAAiBtoB,EAAMsoB,QACoB,MAA7CN,EAAWO,sBAAsBD,IACpCN,EAAWO,sBAAsBD,IAAW,IAC1CN,EAAWI,gBACbJ,EAAW3hB,gBAAgB9E,cAAc,IAAIsiB,EAAA8E,gBAAgB9E,EAAA8E,gBAAgBC,SAAUZ,EAAYhoB,KACzFgoB,EAAWS,0BACrBT,EAAW3hB,gBAAgB9E,cAAc,IAAIsiB,EAAA8E,gBAAgB9E,EAAA8E,gBAAgBC,SAAUZ,EAAYhoB,KAItFgoB,EAAAE,mBAAqB,SAACloB,GACpC,IAAMsoB,EAAiBtoB,EAAMsoB,QACoB,MAA7CN,EAAWO,sBAAsBD,YAC7BN,EAAWO,sBAAsBD,KACtCN,EAAWI,gBACbJ,EAAW3hB,gBAAgB9E,cAAc,IAAIsiB,EAAA8E,gBAAgB9E,EAAA8E,gBAAgBE,OAAQb,EAAYhoB,MAepFgoB,EAAAxO,WAAoB,EAGpBwO,EAAAI,gBAAyB,EAGzBJ,EAAAO,sBAA2C,GAK3CP,EAAAS,0BAAmC,EAEnCT,EAAAxJ,eAAwB,EACxBwJ,EAAAc,eAAwB,EACxBd,EAAA3hB,gBAA4C,KAO5D2hB,EAzGA,GAAanE,EAAAmE,WAAUA,EAxIV,CAAA7sB,EAAA0oB,UAAA1oB,EAAA0oB,QAAO,KAArB,CAAU1oB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAA0oB,EAEb8E,EAFa9E,EAAA1oB,EAAA0oB,UAAA1oB,EAAA0oB,QAAO,IAEpB8E,EAAA,SAAA/mB,GAqBC,SAAA+mB,EAAY7nB,EAAkBe,EAAwBknB,QAAxB,IAAAlnB,IAAAA,EAAA,WAAwB,IAAAknB,IAAAA,EAAA,MAAtD,IAAAzmB,EACCV,EAAAJ,KAAApB,KAAMU,EAAWe,IAAYzB,YAC7BkC,EAAKymB,cAAgBA,EACrBzmB,EAAKwF,IAAMxF,EAAKymB,cAAcjhB,IAC9BxF,EAAKgmB,QAAUhmB,EAAKymB,cAAcT,QAClChmB,EAAK0mB,OAAS1mB,EAAKymB,cAAcC,OACjC1mB,EAAK2mB,QAAU3mB,EAAKymB,cAAcE,QAClC3mB,EAAK4mB,SAAW5mB,EAAKymB,cAAcG,WAqCrC,OAjEqCpnB,UAAA6mB,EAAA/mB,GAyC7B+mB,EAAAtoB,UAAA0B,MAAP,WACC,OAAO,IAAI4mB,EAAgBvoB,KAAKE,UAAWF,KAAKG,YAAaH,KAAK2oB,gBAG5DJ,EAAAtoB,UAAA2B,SAAP,WACC,MAAO,4BAA8B5B,KAAKE,UAAY,WAAaF,KAAK0H,IAAM,eAAiB1H,KAAKkoB,QAAU,cAAgBloB,KAAK4oB,OAAS,eAAiB5oB,KAAK6oB,QAAU,gBAAkB7oB,KAAK8oB,UAtC7LP,EAAAE,OAAgB,QAChBF,EAAAC,SAAkB,UAwD1BD,EAjEA,CAAqCxtB,EAAI6E,MAAMC,OAAlC4jB,EAAA8E,gBAAeA,EAF7B,CAAUxtB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAA0oB,EAEbsF,EAFatF,EAAA1oB,EAAA0oB,UAAA1oB,EAAA0oB,QAAO,IAEpBsF,EAAA,WA2HC,SAAAA,KACD,OApHgBA,EAAApK,WAAf,WACK3e,KAAKoe,gBACTpe,KAAKoe,eAAgB,EAErBpe,KAAKiG,gBAAkB,IAAIlL,EAAI6E,MAAMW,kBAGxBwoB,EAAAzP,MAAd,SAAoB3d,QAAA,IAAAA,IAAAA,EAAA,MACfqE,KAAKoZ,YACTpZ,KAAKoZ,WAAY,EAEjBpZ,KAAK2e,aACL3jB,MAAM,yBAENgF,KAAK0F,OAAS/J,GAAU+J,OAEpB+d,EAAAC,WAAWuB,eACdjlB,KAAK0F,OAAOjF,iBAAiB,SAAUT,KAAKgpB,qBAE5ChpB,KAAK0F,OAAOjF,iBAAiB,oBAAqBT,KAAKgpB,qBAExDhpB,KAAK0F,OAAOjF,iBAAiB,SAAUT,KAAKipB,qBAC5CjpB,KAAKxE,UAGQutB,EAAAjQ,KAAd,WACM9Y,KAAKoZ,YACVpZ,KAAKoZ,WAAY,EAEjBpZ,KAAK2e,aACL3jB,MAAM,wBAEFyoB,EAAAC,WAAWuB,eACdjlB,KAAK0F,OAAO3E,oBAAoB,SAAUf,KAAKgpB,qBAE/ChpB,KAAK0F,OAAO3E,oBAAoB,oBAAqBf,KAAKgpB,qBAE3DhpB,KAAK0F,OAAO3E,oBAAoB,SAAUf,KAAKipB,uBAGlCF,EAAAvtB,MAAd,WACCwE,KAAKkpB,YAAclpB,KAAK0F,OAAOyjB,WAC/BnpB,KAAKopB,aAAeppB,KAAK0F,OAAO2jB,YAEhCrpB,KAAKspB,eAAyCC,IAA5BvpB,KAAK0F,OAAO8jB,YAA6BxpB,KAAK0F,OAAO8jB,YAAcrD,SAASsD,gBAAgBH,UAC9GtpB,KAAK0pB,aAAe1pB,KAAKspB,UAAYtpB,KAAKopB,cAG7BL,EAAAtoB,iBAAd,SAA+BC,EAAkBC,GAChDX,KAAK2e,aACL3e,KAAKiG,gBAAgBxF,iBAAiBC,EAAWC,IAGpCooB,EAAAhoB,oBAAd,SAAkCL,EAAkBC,GACnDX,KAAK2e,aACL3e,KAAKiG,gBAAgBlF,oBAAoBL,EAAWC,IAGvCooB,EAAAY,qBAAd,SAAmCpf,GAClC,OAAOA,EAAIvK,KAAKspB,WAGHP,EAAAa,0BAAd,SAAwCrf,GACvC,OAAOvK,KAAK2pB,qBAAqBpf,GAAKvK,KAAKopB,cA2B9BL,EAAApP,aAAd,WAAuC,OAAO3Z,KAAKoZ,WAGrC2P,EAAAc,UAAd,WAAmC,OAAO7pB,KAAK0F,QAGjCqjB,EAAAe,aAAd,WAAsC,OAAO9pB,KAAKspB,WAGpCP,EAAAgB,gBAAd,WAAyC,OAAO/pB,KAAK0pB,cAGvCX,EAAAiB,eAAd,WAAwC,OAAOhqB,KAAKkpB,aAGtCH,EAAAkB,gBAAd,WAAyC,OAAOjqB,KAAKopB,cAnCtCL,EAAAC,oBAAsB,SAACppB,GACrCmpB,EAAcvtB,QACdutB,EAAc9iB,gBAAgB9E,cAAc,IAAIsiB,EAAAyG,mBAAmBzG,EAAAyG,mBAAmBC,OAAQpB,EAAenpB,EAAOmpB,EAAcO,UAAWP,EAAcW,aAAcX,EAAcG,YAAaH,EAAcK,gBAGpML,EAAAE,oBAAsB,SAACrpB,GACrCmpB,EAAcvtB,QACdutB,EAAc9iB,gBAAgB9E,cAAc,IAAIsiB,EAAAyG,mBAAmBzG,EAAAyG,mBAAmBE,OAAQrB,EAAenpB,EAAOmpB,EAAcO,UAAWP,EAAcW,aAAcX,EAAcG,YAAaH,EAAcK,gBAcpML,EAAA3P,WAAoB,EAGpB2P,EAAArjB,OAAgB,KAShBqjB,EAAAG,YAAqB,EAGrBH,EAAAK,aAAsB,EAEtBL,EAAA3K,eAAwB,EACxB2K,EAAA9iB,gBAA4C,KAO5D8iB,EA5HA,GAAatF,EAAAsF,cAAaA,EAF3B,CAAUhuB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAA0oB,EAEbyG,EAFazG,EAAA1oB,EAAA0oB,UAAA1oB,EAAA0oB,QAAO,IAEpByG,EAAA,SAAA1oB,GAqBC,SAAA0oB,EAAYxpB,EAAkBe,EAAwBknB,EAA4BW,EAAsBI,EAAyBR,EAAwBE,QAA3H,IAAA3nB,IAAAA,EAAA,WAAwB,IAAAknB,IAAAA,EAAA,WAA4B,IAAAW,IAAAA,EAAA,QAAsB,IAAAI,IAAAA,EAAA,QAAyB,IAAAR,IAAAA,EAAA,QAAwB,IAAAE,IAAAA,EAAA,GAAzJ,IAAAlnB,EACCV,EAAAJ,KAAApB,KAAMU,EAAWe,IAAYzB,YAC7BkC,EAAKymB,cAAgBA,EACrBzmB,EAAKonB,UAAYA,EACjBpnB,EAAKwnB,aAAeA,EACpBxnB,EAAKgnB,YAAcA,EACnBhnB,EAAKknB,aAAeA,IAoCtB,OA/DwC1nB,UAAAwoB,EAAA1oB,GAwChC0oB,EAAAjqB,UAAA0B,MAAP,WACC,OAAO,IAAIuoB,EAAmBlqB,KAAKE,UAAWF,KAAKG,YAAaH,KAAK2oB,cAAe3oB,KAAKspB,UAAWtpB,KAAK0pB,aAAc1pB,KAAKkpB,YAAalpB,KAAKopB,eAGxIc,EAAAjqB,UAAA2B,SAAP,WACC,MAAO,+BAAiC5B,KAAKE,UAAY,iBAAmBF,KAAKspB,UAAY,oBAAsBtpB,KAAK0pB,aAAe,mBAAqB1pB,KAAKkpB,YAAc,oBAAsBlpB,KAAKopB,cArCpMc,EAAAE,OAAgB,SAChBF,EAAAC,OAAgB,SAsDxBD,EA/DA,CAAwCnvB,EAAI6E,MAAMC,OAArC4jB,EAAAyG,mBAAkBA,EAFhC,CAAUnvB,MAAAA,IAAG,KCAb,SAAUD,GAET,IAAOQ,EAASP,IAAIM,KAAKC,OAGzB+uB,EAAA,SAAA7oB,GAQC,SAAA6oB,EAAYpM,GAAZ,IAAA/b,EACCV,EAAAJ,KAAApB,OAAOA,YACPkC,EAAK+b,KAAOA,EACZ/b,EAAKI,MAAQxH,EAAAwvB,WAAWC,OACxBroB,EAAKO,OAAS,KACdP,EAAKsoB,eAAiB,GACtBtoB,EAAKuoB,YAAc,EACnBvoB,EAAKwoB,WAAY,EACjBxoB,EAAKqZ,OAAS,KACdrZ,EAAKyoB,SAAW,KAChBzoB,EAAK0oB,SAAW,KAChB1oB,EAAK2oB,QAAU,KACf3oB,EAAK4oB,SAAW,KAChB5oB,EAAK6oB,UAAY,OA8TnB,OAnV2BrpB,UAAA2oB,EAAA7oB,GAkCnB6oB,EAAApqB,UAAA+qB,SAAP,SAAgBC,GACf,GAAIA,EAAO,CACV,IAAMC,EAAmBD,EAAMhN,KAC/B,IAAIje,KAAKwqB,eAAeU,GAMvB,QAHElrB,KAAKyqB,aACPQ,EAAMxoB,OAASzC,MACVwqB,eAAeU,GAAaD,EAJjC3vB,EAAOwZ,KAAK,WAAc9U,KAAKie,KAAO,+CAAmDiN,EAAY,gCAQtG5vB,EAAOwZ,KAAK,WAAc9U,KAAKie,KAAO,kDAEvC,OAAO,MAGDoM,EAAApqB,UAAAwmB,YAAP,SAAmBwE,GAClB,GAAIA,EAAO,CACV,IAAMC,EAAmBD,EAAMhN,KAC/B,GAAIje,KAAKwqB,eAAeU,GAIvB,QAHElrB,KAAKyqB,YACPQ,EAAMxoB,OAAS,YACRzC,KAAKwqB,eAAeU,GACpBD,EAEP3vB,EAAOwZ,KAAK,WAAc9U,KAAKie,KAAO,kDAAsDiN,EAAY,4BAGzG5vB,EAAOwZ,KAAK,WAAc9U,KAAKie,KAAO,qDAEvC,OAAO,MAGDoM,EAAApqB,UAAAkrB,YAAP,SAAmBC,GAIlB,IAHA,IAEI/uB,EAFEgvB,EAAwB,GACxB3d,EAAW0d,EAAShwB,OAEjByF,EAAW,EAAGA,EAAI6M,IAAK7M,GAC/BxE,EAAI2D,KAAKgrB,SAASI,EAASvqB,MAE1BwqB,EAAcvqB,KAAKzE,GAGrB,OAAOgvB,GAGDhB,EAAApqB,UAAAqrB,eAAP,SAAsBF,GAIrB,IAHA,IAEI/uB,EAFEkvB,EAA0B,GAC1B7d,EAAW0d,EAAShwB,OAEjByF,EAAW,EAAGA,EAAI6M,IAAK7M,GAC/BxE,EAAI2D,KAAKymB,YAAY2E,EAASvqB,MAE7B0qB,EAAgBzqB,KAAKzE,GAGvB,OAAOkvB,GAGDlB,EAAApqB,UAAAurB,kBAAP,WACC,IACIP,EADEG,EAAmB,GAEzB,IAAK,IAAIK,KAAQzrB,KAAKwqB,gBACrBS,EAAQjrB,KAAKwqB,eAAeiB,IACtBhpB,OAAS,KACf2oB,EAAStqB,KAAKmqB,GAIf,OAFAjrB,KAAKwqB,eAAiB,GACtBxqB,KAAKyqB,YAAc,EACZW,GAGDf,EAAApqB,UAAAyrB,SAAP,SAAgBT,GACf,QAAIA,GAC0E,MAAtEjrB,KAAKwqB,eAA+B,iBAATS,EAAoBA,EAAQA,EAAMhN,OAM/DoM,EAAApqB,UAAAkgB,QAAP,WACC,OAAOngB,KAAKie,MAGNoM,EAAApqB,UAAAwD,SAAP,WACC,OAAOzD,KAAKsC,OAGN+nB,EAAApqB,UAAA0rB,aAAP,WACC,OAAO3rB,KAAK4rB,WAGNvB,EAAApqB,UAAAyD,UAAP,WACC,OAAO1D,KAAKyC,QAGN4nB,EAAApqB,UAAA4rB,eAAP,SAAsB5N,GACrB,OAAOje,KAAKwqB,eAAevM,IAGrBoM,EAAApqB,UAAA6rB,eAAP,WACC,OAAO9rB,KAAKyqB,aAGNJ,EAAApqB,UAAA8rB,WAAP,WACC,OAAI/rB,KAAKyC,OACDzC,KAAKyC,OAAOspB,cAEnBzwB,EAAOwZ,KAAK,WAAc9U,KAAKie,KAAO,0EAEhC,OAGDoM,EAAApqB,UAAA+rB,QAAP,WACC,IAAMC,EAAuBjsB,KAAK+rB,aAClC,GAAIE,EAAS,CAGZ,IAFA,IAAMC,EAAiB,CAAClsB,KAAKie,MACzBkO,EAAcnsB,KACXmsB,EAAQA,EAAM1pB,QACpBypB,EAAMzR,QAAQ0R,EAAMlO,MAErB,OAAOgO,EAAQG,oBAAoBF,GAIpC,OAFC5wB,EAAOwZ,KAAK,WAAc9U,KAAKie,KAAO,uEAEhC,MAGDoM,EAAApqB,UAAAosB,UAAP,SAAiBC,GAChBtsB,KAAK+rB,aAAaQ,KAAKD,IAOjBjC,EAAApqB,UAAAusB,MAAP,SAAaC,GAAb,IAAAvqB,EAAAlC,KACCA,KAAKysB,aAAeA,EACpBzsB,KAAKsC,MAAQxH,EAAAwvB,WAAWoC,QACxB1sB,KAAK0qB,WAAY,EACjB,IAAMrnB,EAAqB,IAAIxI,IAAIwO,OAClC,WACCnH,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAWC,KAAM1qB,IACnD,IAAM7F,EAAuC,mBAAhB6F,EAAW,OAAkBA,EAAKqZ,SAAWrZ,EAAK2qB,aAC3ExwB,GAAGgH,EAAQc,cAAc9H,IAE9B,WACC6F,EAAK0pB,UAAY1pB,EAAKI,MACtBJ,EAAKI,MAAQxH,EAAAwvB,WAAWC,OACxBroB,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAWG,cAAe5qB,MAG9DmB,EAAQX,WAGF2nB,EAAApqB,UAAA8sB,QAAP,SAAeN,GAAf,IAAAvqB,EAAAlC,KACCA,KAAKysB,aAAeA,EACpBzsB,KAAKsC,MAAQxH,EAAAwvB,WAAW0C,UACxBhtB,KAAK0qB,WAAY,EACjB,IAAMrnB,EAAqB,IAAIxI,IAAIwO,OAClC,WACCnH,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAWM,OAAQ/qB,IACrD,IAAM7F,EAAyC,mBAAlB6F,EAAa,SAAkBA,EAAKyoB,WAAazoB,EAAKgrB,eAC/E7wB,GAAGgH,EAAQc,cAAc9H,IAE9B,WACC6F,EAAK0pB,UAAY1pB,EAAKI,MACtBJ,EAAKI,MAAQxH,EAAAwvB,WAAWC,OACxBroB,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAWQ,gBAAiBjrB,MAGhEmB,EAAQX,WAGF2nB,EAAApqB,UAAAmtB,QAAP,SAAeX,GAAf,IAAAvqB,EAAAlC,KACCA,KAAKysB,aAAeA,EACpBzsB,KAAKsC,MAAQxH,EAAAwvB,WAAW+C,SACxBrtB,KAAK0qB,WAAY,EACjB,IAAMrnB,EAAqB,IAAIxI,IAAIwO,OAClC,WACCnH,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAWW,OAAQprB,IACrD,IAAM7F,EAAyC,mBAAlB6F,EAAa,SAAkBA,EAAK0oB,WAAa1oB,EAAKqrB,eAC/ElxB,GAAGgH,EAAQc,cAAc9H,IAE9B,WACC6F,EAAK0pB,UAAY1pB,EAAKI,MACtBJ,EAAKI,MAAQxH,EAAAwvB,WAAWC,OACxBroB,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAWa,gBAAiBtrB,MAGhEmB,EAAQX,WAGF2nB,EAAApqB,UAAAwtB,OAAP,SAAchB,GAAd,IAAAvqB,EAAAlC,KACCA,KAAKysB,aAAeA,EACpBzsB,KAAKsC,MAAQxH,EAAAwvB,WAAWoD,QACxB1tB,KAAK0qB,WAAY,EACjB,IAAMrnB,EAAqB,IAAIxI,IAAIwO,OAClC,WACCnH,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAWgB,MAAOzrB,IACpD,IAAM7F,EAAwC,mBAAjB6F,EAAY,QAAkBA,EAAK2oB,UAAY3oB,EAAK0rB,cAC7EvxB,GAAGgH,EAAQc,cAAc9H,IAE9B,WACC6F,EAAK0pB,UAAY1pB,EAAKI,MACtBJ,EAAKI,MAAQxH,EAAAwvB,WAAWC,OACxBroB,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAWkB,eAAgB3rB,MAG/DmB,EAAQX,WAGF2nB,EAAApqB,UAAA6tB,QAAP,SAAerB,GAAf,IAAAvqB,EAAAlC,KACCA,KAAKysB,aAAeA,EACpBzsB,KAAKsC,MAAQxH,EAAAwvB,WAAWyD,UACxB/tB,KAAK0qB,WAAY,EACjB,IAAMrnB,EAAqB,IAAIxI,IAAIwO,OAClC,WACCnH,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAWqB,OAAQ9rB,IACrD,IAAM7F,EAAyC,mBAAlB6F,EAAa,SAAkBA,EAAK4oB,WAAa5oB,EAAK+rB,eAC/E5xB,GAAGgH,EAAQc,cAAc9H,IAE9B,WACC6F,EAAK0pB,UAAY1pB,EAAKI,MACtBJ,EAAKI,MAAQxH,EAAAwvB,WAAWC,OACxBroB,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAWuB,gBAAiBhsB,MAGhEmB,EAAQX,WAGF2nB,EAAApqB,UAAAkuB,SAAP,SAAgB1B,GAAhB,IAAAvqB,EAAAlC,KACCA,KAAKysB,aAAeA,EACpBzsB,KAAKsC,MAAQxH,EAAAwvB,WAAW8D,WACxBpuB,KAAK0qB,WAAY,EACjB,IAAMrnB,EAAqB,IAAIxI,IAAIwO,OAClC,WACCnH,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAW0B,QAASnsB,IACtD,IAAM7F,EAA0C,mBAAnB6F,EAAc,UAAkBA,EAAK6oB,YAAc7oB,EAAKosB,gBACjFjyB,GAAGgH,EAAQc,cAAc9H,IAE9B,WACC6F,EAAK0pB,UAAY1pB,EAAKI,MACtBJ,EAAKI,MAAQxH,EAAAwvB,WAAWC,OACxBroB,EAAKf,cAAc,IAAIrG,EAAA6xB,WAAW7xB,EAAA6xB,WAAW4B,iBAAkBrsB,MAGjEmB,EAAQX,WAOC2nB,EAAApqB,UAAA4sB,WAAV,WACC,OAAO,IAAIhyB,IAAIiH,SAGNuoB,EAAApqB,UAAAitB,aAAV,WACC,OAAO,IAAIryB,IAAIiH,SAGNuoB,EAAApqB,UAAAstB,aAAV,WACC,OAAO,IAAI1yB,IAAIiH,SAGNuoB,EAAApqB,UAAA2tB,YAAV,WACC,OAAO,IAAI/yB,IAAIiH,SAGNuoB,EAAApqB,UAAAguB,aAAV,WACC,OAAO,IAAIpzB,IAAIiH,SAGNuoB,EAAApqB,UAAAquB,cAAV,WACC,OAAO,IAAIzzB,IAAIiH,SA6BjBuoB,EAnVA,CAFyBtvB,IAAI6E,MAAMW,iBAEtBzF,EAAAuvB,MAAKA,EALnB,CAAUvvB,MAAAA,IAAG,KCAb,SAAUA,GAET,IAEA6xB,EAAA,SAAAnrB,GAgCC,SAAAmrB,EAAYjsB,EAAkBe,eAAA,IAAAA,IAAAA,EAAA,MAC7BD,EAAAJ,KAAApB,KAAMU,EAAWe,IAAYzB,KA8B/B,OA/DgC0B,UAAAirB,EAAAnrB,GA8CxBmrB,EAAA1sB,UAAA0B,MAAP,WACC,OAAO,IAAIgrB,EAAW3sB,KAAKE,UAAWF,KAAKG,cAGrCwsB,EAAA1sB,UAAA2B,SAAP,WACC,MAAO,uBAAyB5B,KAAKE,WA3CxBysB,EAAAC,KAAc,OACdD,EAAAM,OAAgB,SAChBN,EAAAW,OAAgB,SAChBX,EAAAgB,MAAe,QACfhB,EAAAqB,OAAgB,SAChBrB,EAAA0B,QAAiB,UAEjB1B,EAAAG,cAAuB,eACvBH,EAAAQ,gBAAyB,iBACzBR,EAAAa,gBAAyB,iBACzBb,EAAAkB,eAAwB,gBACxBlB,EAAAuB,gBAAyB,iBACzBvB,EAAA4B,iBAA0B,kBA2CzC5B,EA/DA,CAFe5xB,IAAI6E,MAAMC,OAEZ/E,EAAA6xB,WAAUA,EAJxB,CAAU7xB,MAAAA,IAAG,KCAb,SAAUA,GAET,IAAOQ,EAASP,IAAIM,KAAKC,OAClBqZ,EAAc5Z,IAAIM,KAAKsZ,YAG9B6Z,EAAA,SAAAhtB,GAQC,SAAAgtB,EAAYvQ,QAAA,IAAAA,IAAAA,EAAA,IAAZ,IAAA/b,EACCV,EAAAJ,KAAApB,OAAOA,YAkZAkC,EAAAusB,yBAA2B,SAAC7uB,GACnCsC,EAAKwsB,aAAa3tB,oBAAoBjG,EAAA6xB,WAAWG,cAAe5qB,EAAKusB,0BACrEvsB,EAAK0pB,UAAY9wB,EAAAwvB,WAAWoC,UAC1BxqB,EAAKysB,WACPzsB,EAAK0sB,cAGE1sB,EAAA2sB,2BAA6B,SAACjvB,GACrCsC,EAAKwsB,aAAa3tB,oBAAoBjG,EAAA6xB,WAAWQ,gBAAiBjrB,EAAK2sB,4BACvE3sB,EAAK0pB,UAAY9wB,EAAAwvB,WAAW0C,YAC1B9qB,EAAKysB,WACPzsB,EAAK0sB,cAGE1sB,EAAA4sB,2BAA6B,SAAClvB,GACrCsC,EAAKwsB,aAAa3tB,oBAAoBjG,EAAA6xB,WAAWa,gBAAiBtrB,EAAK4sB,4BACvE5sB,EAAK0pB,UAAY9wB,EAAAwvB,WAAW+C,WAC1BnrB,EAAKysB,WACPzsB,EAAK0sB,cAGE1sB,EAAA6sB,0BAA4B,SAACnvB,GACpCsC,EAAKwsB,aAAa3tB,oBAAoBjG,EAAA6xB,WAAWkB,eAAgB3rB,EAAK6sB,2BACtE7sB,EAAK0pB,UAAY9wB,EAAAwvB,WAAWoD,UAC1BxrB,EAAKysB,WACPzsB,EAAK0sB,cAGE1sB,EAAA8sB,2BAA6B,SAACpvB,GACrCsC,EAAKwsB,aAAa3tB,oBAAoBjG,EAAA6xB,WAAWuB,gBAAiBhsB,EAAK8sB,4BACvE9sB,EAAK0pB,UAAY9wB,EAAAwvB,WAAWyD,YAC1B7rB,EAAKysB,WACPzsB,EAAK0sB,cAGE1sB,EAAA+sB,4BAA8B,SAACrvB,GACtCsC,EAAKwsB,aAAa3tB,oBAAoBjG,EAAA6xB,WAAW4B,iBAAkBrsB,EAAK+sB,6BACxE/sB,EAAK0pB,UAAY9wB,EAAAwvB,WAAW8D,aAC1BlsB,EAAKysB,WACPzsB,EAAK0sB,cAxbL1sB,EAAK+b,KAAOA,EACZ/b,EAAKgtB,KAAO,IAAIp0B,EAAAq0B,KAAKC,UAAUltB,GAC/BA,EAAKwsB,aAAe,KAEpBxsB,EAAKmtB,UAAY,GACjBntB,EAAKotB,eAAiB,EACtBptB,EAAK0pB,UAAY9wB,EAAAwvB,WAAWC,OAC5BroB,EAAKysB,YAAc,EACnBzsB,EAAKqtB,YAAc,EACnBrtB,EAAKuqB,aAAe,OAsctB,OAzdkC/qB,UAAA8sB,EAAAhtB,GAgC1BgtB,EAAAvuB,UAAAqZ,MAAP,WACChe,EAAOuZ,QAAQ,mCACf7U,KAAKusB,KAAK,MAGJiC,EAAAvuB,UAAAssB,KAAP,SAAYD,GAIX,GAHAA,EAAOtsB,KAAKwvB,YAAYlD,IAGpBtsB,KAAKysB,cAAgBzsB,KAAKysB,aAAagD,sBAAwBnD,EAAnE,CAKA,IAAIoD,EAA+B,GASnC,GAA0B,GAPzBA,GAD0B,GAAvB1vB,KAAKsvB,cACOtvB,KAAK2vB,gBAAgB3vB,KAAKqvB,UAAUrvB,KAAKsvB,eAAetD,UAAWM,GAGnE,CAAC,IAAIxxB,EAAAq0B,KAAKS,SAAS,IAAK,KAIvBx0B,OAAY,CAC5B,IAAMy0B,EAAoD,MAArB7vB,KAAKysB,aAErCoD,GAMJv0B,EAAOuZ,QAAQ,0BACfvZ,EAAOuZ,QAAQ,oBAAsB7U,KAAKsvB,eAC1CtvB,KAAKqvB,UAAYrvB,KAAKqvB,UAAUlqB,MAAM,EAAGnF,KAAKsvB,cAAgB,GAAGprB,OAAOwrB,EAAavqB,MAAM,IAC3FnF,KAAK8vB,aAAa9vB,KAAKqvB,WACvBrvB,KAAK+vB,cAAc/vB,KAAKqvB,aATxBrvB,KAAKsvB,cAAgB,EACrBtvB,KAAK2uB,WAAa,IAChB3uB,KAAKuvB,WACPvvB,KAAKqvB,UAAYK,GASlB1vB,KAAKysB,aAAe,IAAI3xB,EAAAk1B,kBAAkBhwB,KAAKuvB,WAAYvvB,KAAKqvB,UAAUrvB,KAAKsvB,eAAetD,UAAWhsB,KAAKqvB,UAAUrvB,KAAKqvB,UAAUj0B,OAAS,GAAG4wB,WAE9I6D,GACJ7vB,KAAKmB,cAAc,IAAIrG,EAAAm1B,kBAAkBn1B,EAAAm1B,kBAAkBC,eAAgBlwB,OAG5EA,KAAK4uB,gBAIAJ,EAAAvuB,UAAAuvB,YAAP,SAAmBlD,GAEH,KAAXA,EAAK,KAEPA,EADGtsB,KAAK0uB,aACD1uB,KAAK0uB,aAAa1C,UAAY,IAAMM,EAEpC,IAAMA,GAOf,IAFA,IAAMJ,EAAiBI,EAAKzb,MAAM,KAC5Bsf,EAAsB,GACnBtvB,EAAW,EAAGA,EAAIqrB,EAAM9wB,SAAUyF,EAAG,CAC7C,IAAMuvB,EAAclE,EAAMrrB,GACd,IAARuvB,IACQ,KAARA,IACQ,MAARA,EAIJD,EAAWrvB,KAAKsvB,GAHfD,EAAWE,QAMb,MAAO,IAAMF,EAAW3a,KAAK,MAGvBgZ,EAAAvuB,UAAAqwB,WAAP,SAAkBhE,EAAaiE,QAAA,IAAAA,IAAAA,GAAA,GAK9B,IAJA,IAAIC,GAAkB,EAChBtE,EAAiBlsB,KAAKywB,oBAAoBnE,GAC1C5e,EAAWwe,EAAM9wB,OACnB+wB,EAAcnsB,KAAKkvB,KACdruB,EAAW,EAAGA,EAAI6M,IAAK7M,EAAG,CAClC,IAAM6vB,EAAcxE,EAAMrrB,GACtBA,GAAK6M,EAAI,EACRye,EAAMT,SAASgF,GAClBp1B,EAAOwZ,KAAK,kBAAqB9U,KAAKie,KAAO,2CAA+CqO,EAAO,wBAEnGH,EAAQA,EAAMnB,SAAS,IAAIlwB,EAAAuvB,MAAMqG,IACjCF,GAAU,GAIVrE,EADGA,EAAMT,SAASgF,GACVvE,EAAMN,eAAe6E,GAErBvE,EAAMnB,SAAS,IAAIlwB,EAAAuvB,MAAMqG,IAIpC,OAAOF,EAAUrE,EAAQ,MAGnBqC,EAAAvuB,UAAAkgB,QAAP,WACC,OAAOngB,KAAKie,MAGNuQ,EAAAvuB,UAAA0wB,QAAP,WACC,OAAO3wB,KAAKkvB,MAGNV,EAAAvuB,UAAA2wB,eAAP,SAAsBtE,GAIrB,IAHA,IAAMJ,EAAiBlsB,KAAKywB,oBAAoBnE,GAC1C5e,EAAWwe,EAAM9wB,OACnB+wB,EAAcnsB,KAAKkvB,KACdruB,EAAW,EAAGA,EAAI6M,IAAK7M,EAC/BsrB,EAAQA,EAAMN,eAAeK,EAAMrrB,IAEpC,OAAOsrB,GAGDqC,EAAAvuB,UAAAwwB,oBAAP,SAA2BnE,GAC1B,MAAe,KAARA,EAAc,CAAC,IAAMtsB,KAAKwvB,YAAYlD,GAAMzb,MAAM,MAGnD2d,EAAAvuB,UAAA4wB,qBAAP,SAA4B3E,GAC3B,OAAOA,EAAM9wB,OAAS,GAGhBozB,EAAAvuB,UAAAmsB,oBAAP,SAA2BF,GAC1B,OAAuB,GAAhBA,EAAM9wB,OAAc,IAAsB,GAAhB8wB,EAAM9wB,OAAe,IAAM8wB,EAAM,GAAMA,EAAM1W,KAAK,MAG5EgZ,EAAAvuB,UAAA0vB,gBAAR,SAAwBmB,EAAsBC,GAC7C,GAAID,GAAiBC,EAEpB,OADAz1B,EAAOwZ,KAAK,uEAA0Egc,EAAgB,KAC/F,GAGRx1B,EAAOuZ,QAAQ,0BAEf,IAAMwa,EAA4B,CACjC,IAAIv0B,EAAAq0B,KAAKS,SAASkB,EAAe9wB,KAAK6wB,qBAAqB7wB,KAAKywB,oBAAoBK,MAG/EE,EAA0BhxB,KAAKywB,oBAAoBK,GACnDG,EAA4BjxB,KAAKywB,oBAAoBM,GAE3Dz1B,EAAOuZ,QAAQ,YACfvZ,EAAOuZ,QAAQ,yBAA4Bic,EAAgB,KAC3Dx1B,EAAOuZ,QAAQ,yBAA4Bkc,EAAkB,KAE7Dz1B,EAAOuZ,QAAQ,aACfvZ,EAAOuZ,QAAQ,mBAAqBmc,EAAe51B,OAAS,WAAc41B,EAAiB,KAC3F11B,EAAOuZ,QAAQ,uBAAyBoc,EAAiB71B,OAAS,OAAU61B,EAAmB,KAG/F,IAEIC,EAFAC,EAAsB,EACtBC,EAAwB,GAE5B,GAAuB,KAAnBL,EACHI,GAAgB,EAChBC,EAAe,GACfF,EAAc,QACR,CACN,OAAa,CACZ,GAAIF,EAAeG,IAAiBF,EAAiBE,GAG9C,GACJA,EACF,MAJAC,EAAatwB,KAAKkwB,EAAeG,MAC/BA,EAMJD,EAAclxB,KAAKosB,oBAAoBgF,GAGxC91B,EAAOuZ,QAAQ,eACfvZ,EAAOuZ,QAAQ,sBAAwBqc,GACvC51B,EAAOuZ,QAAQ,sBAAwBsc,GACvC71B,EAAOuZ,QAAQ,iBAAmBuc,EAAah2B,OAAS,QAAWg2B,EAAe,KAMjF,IAFA,IAAMlF,EAAiB8E,EAAe9sB,SAClCmtB,EAAkBP,EACbjwB,EAAWmwB,EAAe51B,OAAS,EAAO+1B,EAAe,EAAnBtwB,IAAwBA,EAAG,CAGzE,GAFAqrB,EAAMmE,OACA/D,EAActsB,KAAKosB,oBAAoBF,KACjCmF,EAAU,CACrB,IAAMxb,EAAe7V,KAAK6wB,qBAAqB3E,GAC/CmD,EAAUvuB,KAAK,IAAIhG,EAAAq0B,KAAKS,SAAStD,EAAMzW,IACvCwb,EAAW/E,GAKd,GAAI4E,GAAeH,GAAkC,EAAfI,EAAkB,CAE3BA,GAAgB9B,EAAUA,EAAUj0B,OAAS,GAAGk2B,WAAax2B,EAAAq0B,KAAKoC,UAAUC,QAAU12B,EAAAq0B,KAAKoC,UAAUE,OACjIpC,EAAUvuB,KAAK,IAAIhG,EAAAq0B,KAAKS,SAASsB,EAAaC,QAI9C,CAAMjF,EAAiBkF,EAAaltB,SAApC,IACMyT,EAAqB0X,EAAUA,EAAUj0B,OAAS,GAGxD,IAFIi2B,EAAkB1Z,EAAKqU,UACJrU,EAAK2Z,WACnBzwB,EAAWswB,EAAe,EAAGtwB,EAAIowB,EAAiB71B,SAAUyF,EAAG,CACvE,IAEMyrB,EAFAoF,EAAcT,EAAiBpwB,GAGrC,GAFAqrB,EAAMprB,KAAK4wB,IACLpF,EAActsB,KAAKosB,oBAAoBF,KACjCmF,EAAU,CACfxb,EAAe7V,KAAK6wB,qBAAqB3E,GAC/CmD,EAAUvuB,KAAK,IAAIhG,EAAAq0B,KAAKS,SAAStD,EAAMzW,IAC3BA,EACZwb,EAAW/E,IAYd,OANAtsB,KAAK8vB,aAAaT,GAEd/zB,EAAOua,OAASlB,EAAYmB,SAC/B9V,KAAK+vB,cAAcV,GAGbA,GAGAb,EAAAvuB,UAAA6vB,aAAR,SAAqBT,GAIpB,IAHA,IAEI3kB,EAFEgD,EAAW2hB,EAAUj0B,OACvBuc,EAAqB,KAEhB9W,EAAW,EAAGA,EAAI6M,IAAK7M,EAAG,CAElC,GADA6J,EAAQ2kB,EAAUxuB,GACV,EAAJA,EAAO,CACV,IAAMvE,EAAWoO,EAAM4mB,WAAa3Z,EAAK2Z,WACzC5mB,EAAMinB,SAAa,EAAJr1B,EAAQxB,EAAAq0B,KAAKoC,UAAUK,QAAUt1B,EAAI,EAAIxB,EAAAq0B,KAAKoC,UAAUE,OAAS32B,EAAAq0B,KAAKoC,UAAUC,SAC/F7Z,EAAKka,OAAOnnB,EAAMpC,WAEnBqP,EAAOjN,IAID8jB,EAAAvuB,UAAA8vB,cAAR,SAAsBV,GACrB/zB,EAAOuZ,QAAQ,iBAEf,IADA,IAAMnH,EAAW2hB,EAAUj0B,OAClByF,EAAW,EAAGA,EAAI6M,IAAK7M,EAC/BvF,EAAOuZ,QAAQ,YAAchU,EAAI,KAAOwuB,EAAUxuB,IAEnDvF,EAAOuZ,QAAQ,KAOR2Z,EAAAvuB,UAAA2uB,WAAR,WAKC,GAJA5zB,MAAM,eAAiBF,EAAIg3B,oBAAoB9xB,KAAK4rB,YAIhD5rB,KAAKsvB,eAAiBtvB,KAAKqvB,UAAUj0B,OAAQ,CAChDE,EAAOuZ,QAAQ,uCACf,IAAMkd,EAAuB/xB,KAAKysB,aAAauF,gBAO/C,OANAhyB,KAAKsvB,cAAgBtvB,KAAKqvB,UAAUj0B,OAAS,EAC7C4E,KAAKmB,cAAc,IAAIrG,EAAAm1B,kBAAkBn1B,EAAAm1B,kBAAkBgC,kBAAmBjyB,YAC1E+xB,GAAiB/xB,KAAKysB,aAAauF,kBACtChyB,KAAK4rB,UAAY9wB,EAAAwvB,WAAWC,OAC5BvqB,KAAKysB,aAAe,OAKtB,GAAIzsB,KAAK0uB,aAAc,CACtB,IAAMwD,EAAgClyB,KAAKqvB,UAAUrvB,KAAKsvB,eAI1D,GAHAtvB,KAAK0uB,aAAe1uB,KAAK4wB,eAAesB,EAAgBlG,WAG5B,EAAxBhsB,KAAKqvB,UAAUj0B,QAAoC,GAAtB4E,KAAKsvB,cAIrC,OAHAt0B,MAAM,mBAGFgF,KAAK4rB,WAAa9wB,EAAAwvB,WAAWoD,SAAW1tB,KAAK0uB,aAAa/C,gBAAkB7wB,EAAAwvB,WAAW+C,UAC1F/xB,EAAOuZ,QAAQ7U,KAAK2uB,WAAa,eAAkB3uB,KAAK0uB,aAAa1C,UAAY,KACjFhsB,KAAK0uB,aAAajuB,iBAAiB3F,EAAA6xB,WAAWkB,eAAgB7tB,KAAK+uB,gCACnE/uB,KAAK0uB,aAAajB,OAAOztB,KAAKysB,eAK3BzsB,KAAK4rB,WAAa9wB,EAAAwvB,WAAW0C,WAAckF,EAAgB9pB,SAAWtN,EAAAq0B,KAAKoC,UAAUC,SAAWU,EAAgB9pB,SAAWtN,EAAAq0B,KAAKoC,UAAUE,UAS3IzxB,KAAKsvB,mBACPtvB,KAAK4uB,iBATH5uB,KAAKsvB,cACPh0B,EAAOuZ,QAAQ7U,KAAK2uB,WAAa,eAAkB3uB,KAAK0uB,aAAa1C,UAAY,KACjFhsB,KAAK0uB,aAAajuB,iBAAiB3F,EAAA6xB,WAAWQ,gBAAiBntB,KAAK6uB,iCACpE7uB,KAAK0uB,aAAa3B,QAAQ/sB,KAAKysB,eAYjC,GAAyB,EAArBzsB,KAAKsvB,eAAqBtvB,KAAKsvB,cAAgBtvB,KAAKqvB,UAAUj0B,OAAS,EAAG,CAI7E,GAHAJ,MAAM,iBAGFgF,KAAK4rB,WAAa9wB,EAAAwvB,WAAWoC,UAAYwF,EAAgB5pB,WAAaxN,EAAAq0B,KAAKoC,UAAUC,SAAWU,EAAgB5pB,WAAaxN,EAAAq0B,KAAKoC,UAAUK,SAI/I,OAHAt2B,EAAOuZ,QAAQ7U,KAAK2uB,WAAa,eAAkB3uB,KAAK0uB,aAAa1C,UAAY,KACjFhsB,KAAK0uB,aAAajuB,iBAAiB3F,EAAA6xB,WAAWG,cAAe9sB,KAAKyuB,+BAClEzuB,KAAK0uB,aAAalC,MAAMxsB,KAAKysB,cAK9B,GAAIzsB,KAAK4rB,WAAa9wB,EAAAwvB,WAAWyD,WAAamE,EAAgB5pB,WAAaxN,EAAAq0B,KAAKoC,UAAUE,OAIzF,OAHAn2B,EAAOuZ,QAAQ7U,KAAK2uB,WAAa,eAAkB3uB,KAAK0uB,aAAa1C,UAAY,KACjFhsB,KAAK0uB,aAAajuB,iBAAiB3F,EAAA6xB,WAAWuB,gBAAiBluB,KAAKgvB,iCACpEhvB,KAAK0uB,aAAaZ,QAAQ9tB,KAAKysB,cAKhC,GAAIzsB,KAAK4rB,WAAa9wB,EAAAwvB,WAAW0C,YAAckF,EAAgB9pB,SAAWtN,EAAAq0B,KAAKoC,UAAUC,SAAWU,EAAgB9pB,SAAWtN,EAAAq0B,KAAKoC,UAAUE,QAK7I,QAJEzxB,KAAKsvB,cACPh0B,EAAOuZ,QAAQ7U,KAAK2uB,WAAa,eAAkB3uB,KAAK0uB,aAAa1C,UAAY,KACjFhsB,KAAK0uB,aAAajuB,iBAAiB3F,EAAA6xB,WAAWQ,gBAAiBntB,KAAK6uB,iCACpE7uB,KAAK0uB,aAAa3B,QAAQ/sB,KAAKysB,cAKhC,GAAIzsB,KAAK4rB,WAAa9wB,EAAAwvB,WAAW8D,YAAc8D,EAAgB9pB,SAAWtN,EAAAq0B,KAAKoC,UAAUK,QAKxF,QAJE5xB,KAAKsvB,cACPh0B,EAAOuZ,QAAQ7U,KAAK2uB,WAAa,eAAkB3uB,KAAK0uB,aAAa1C,UAAY,KACjFhsB,KAAK0uB,aAAajuB,iBAAiB3F,EAAA6xB,WAAW4B,iBAAkBvuB,KAAKivB,kCACrEjvB,KAAK0uB,aAAaP,SAASnuB,KAAKysB,cAMlC,GAAIzsB,KAAKsvB,eAAiBtvB,KAAKqvB,UAAUj0B,OAAS,EAAG,CAIpD,GAHAJ,MAAM,qBAGFgF,KAAK4rB,WAAa9wB,EAAAwvB,WAAWoC,UAAYwF,EAAgB5pB,WAAaxN,EAAAq0B,KAAKoC,UAAUC,SAAWU,EAAgB5pB,WAAaxN,EAAAq0B,KAAKoC,UAAUK,SAI/I,OAHAt2B,EAAOuZ,QAAQ7U,KAAK2uB,WAAa,eAAkB3uB,KAAK0uB,aAAa1C,UAAY,KACjFhsB,KAAK0uB,aAAajuB,iBAAiB3F,EAAA6xB,WAAWG,cAAe9sB,KAAKyuB,+BAClEzuB,KAAK0uB,aAAalC,MAAMxsB,KAAKysB,cAK9B,GAAIzsB,KAAK4rB,WAAa9wB,EAAAwvB,WAAW+C,SAKhC,QAJErtB,KAAKsvB,cACPh0B,EAAOuZ,QAAQ7U,KAAK2uB,WAAa,eAAkB3uB,KAAK0uB,aAAa1C,UAAY,KACjFhsB,KAAK0uB,aAAajuB,iBAAiB3F,EAAA6xB,WAAWa,gBAAiBxtB,KAAK8uB,iCACpE9uB,KAAK0uB,aAAatB,QAAQptB,KAAKysB,oBAMjCzxB,MAAM,cAGNgF,KAAK4rB,UAAY9wB,EAAAwvB,WAAWC,OAC5BvqB,KAAK0uB,aAAe1uB,KAAKkvB,KACzB5zB,EAAOuZ,QAAQ7U,KAAK2uB,WAAa,eAAkB3uB,KAAK0uB,aAAa1C,UAAY,KACjFhsB,KAAK0uB,aAAajuB,iBAAiB3F,EAAA6xB,WAAWG,cAAe9sB,KAAKyuB,0BAClEzuB,KAAK0uB,aAAalC,MAAMxsB,KAAKysB,eAkEhC+B,EAzdA,CAFyBzzB,IAAI6E,MAAMW,iBAEtBzF,EAAA0zB,aAAYA,EAN1B,CAAU1zB,MAAAA,IAAG,KCAb,SAAUA,GAET,IAEAm1B,EAAA,SAAAzuB,GAqBC,SAAAyuB,EAAYvvB,EAAkBe,eAAA,IAAAA,IAAAA,EAAA,MAC7BD,EAAAJ,KAAApB,KAAMU,EAAWe,IAAYzB,KA8B/B,OApDuC0B,UAAAuuB,EAAAzuB,GAmC/ByuB,EAAAhwB,UAAA0B,MAAP,WACC,OAAO,IAAIsuB,EAAkBjwB,KAAKE,UAAWF,KAAKG,cAG5C8vB,EAAAhwB,UAAA2B,SAAP,WACC,MAAO,8BAAgC5B,KAAKE,WAhC/B+vB,EAAAC,eAAwB,gBACxBD,EAAAgC,kBAA2B,mBA2C1ChC,EApDA,CAFel1B,IAAI6E,MAAMC,OAEZ/E,EAAAm1B,kBAAiBA,EAJ/B,CAAUn1B,MAAAA,IAAG,KCAb,SAAUA,GAET,IAAAk1B,EAAA,WAQC,SAAAA,EAAYT,EAAmBuB,EAAsBC,GACpD/wB,KAAKuvB,WAAaA,EAClBvvB,KAAK8wB,cAAgBA,EACrB9wB,KAAK+wB,gBAAkBA,EACvB/wB,KAAKmyB,MAAQ,KAwCf,OA3BQnC,EAAA/vB,UAAA+xB,cAAP,WACC,OAAOhyB,KAAKuvB,YAGNS,EAAA/vB,UAAAmyB,iBAAP,WACC,OAAOpyB,KAAK8wB,eAGNd,EAAA/vB,UAAAwvB,mBAAP,WACC,OAAOzvB,KAAK+wB,iBAkBdf,EApDA,GAAal1B,EAAAk1B,kBAAiBA,EAF/B,CAAUl1B,MAAAA,IAAG,KCAb,SAAUA,GAET,IAAYwvB,EAAAA,GAAAA,EAAAA,EAAAxvB,EAAAwvB,aAAAxvB,EAAAwvB,WAAU,KACrBA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,WAAA,GAAA,aAGexvB,EAAAg3B,oBAAhB,SAAoCxvB,GACnC,OAAQA,GACP,KAAKgoB,EAAWC,OACf,MAAO,SACR,KAAKD,EAAWoC,QACf,MAAO,UACR,KAAKpC,EAAW0C,UACf,MAAO,YACR,KAAK1C,EAAW+C,SACf,MAAO,WACR,KAAK/C,EAAWoD,QACf,MAAO,UACR,KAAKpD,EAAWyD,UACf,MAAO,YACR,KAAKzD,EAAW8D,WACf,MAAO,aAET,MAAO,IA7BT,CAAUtzB,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAq0B,EAEDoC,EAAAA,EAFCpC,EAAAr0B,EAAAq0B,OAAAr0B,EAAAq0B,KAAI,KAELoC,EAAAA,EAAApC,EAAAoC,YAAApC,EAAAoC,UAAS,KACpBA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,QAAA,GAAA,UAGepC,EAAAkD,mBAAhB,SAAmCC,GAClC,OAAQA,GACP,KAAKf,EAAUgB,OACd,MAAO,SACR,KAAKhB,EAAUC,QACd,MAAO,UACR,KAAKD,EAAUE,OACd,MAAO,SACR,KAAKF,EAAUK,QACd,MAAO,UAET,MAAO,IApBT,CAAU92B,MAAAA,IAAG,KCAb,SAAUA,GAAI,IAAAq0B,EAEbC,EAFaD,EAAAr0B,EAAAq0B,OAAAr0B,EAAAq0B,KAAI,IAEjBC,EAAA,SAAA5tB,GAQC,SAAA4tB,EAAYnD,GAAZ,IAAA/pB,EACCV,EAAAJ,KAAApB,KAAM,KAAGA,YACTkC,EAAK+pB,QAAUA,IA4BjB,OAtC+BvqB,UAAA0tB,EAAA5tB,GAuBvB4tB,EAAAnvB,UAAA8rB,WAAP,WACC,OAAO/rB,KAAKisB,SAcdmD,EAtCA,CAA+Bt0B,EAAAuvB,OAAlB8E,EAAAC,UAASA,EAFvB,CAAUt0B,MAAAA,IAAG,KtDAb,SAAUA,GAAI,IAAAq0B,EAEbS,EAFaT,EAAAr0B,EAAAq0B,OAAAr0B,EAAAq0B,KAAI,IAEjBS,EAAA,WAQC,SAAAA,EAAYtD,EAAazW,GACxB7V,KAAKssB,KAAOA,EACZtsB,KAAK6V,MAAQA,EACb7V,KAAK6G,KAAOsoB,EAAAoC,UAAUgB,OACtBvyB,KAAK4G,GAAKuoB,EAAAoC,UAAUgB,OAuDtB,OA1CQ3C,EAAA3vB,UAAA+rB,QAAP,WACC,OAAOhsB,KAAKssB,MAGNsD,EAAA3vB,UAAAqxB,SAAP,WACC,OAAOtxB,KAAK6V,OAGN+Z,EAAA3vB,UAAAqI,QAAP,WACC,OAAOtI,KAAK6G,MAGN+oB,EAAA3vB,UAAAmI,MAAP,WACC,OAAOpI,KAAK4G,IAGNgpB,EAAA3vB,UAAA0xB,SAAP,SAAgB9qB,GACf7G,KAAK6G,KAAOA,GAGN+oB,EAAA3vB,UAAA4xB,OAAP,SAAcjrB,GACb5G,KAAK4G,GAAKA,GAGJgpB,EAAA3vB,UAAA2B,SAAP,WACC,MAAO,sBAAyB5B,KAAKssB,KAAO,cAAiBtsB,KAAK6V,MAAQ,YAAcsZ,EAAAkD,mBAAmBryB,KAAK6G,MAAQ,UAAYsoB,EAAAkD,mBAAmBryB,KAAK4G,KAiB9JgpB,EAnEA,GAAaT,EAAAS,SAAQA,EAFtB,CAAU90B,MAAAA,IAAG,KCgEb,SAAUC,GAGT,SAAgBy3B,IACf,MAAO,SAJCz3B,MAAAA,IAAG,KAGIy3B,WAAUA,EAK1B,IAAMvR,EAAe,cACf5L,EAAiBpQ,QAAQgQ,MAC/BI,EAAM,wDAAyD4L,GAC/D5L,EAAM,kBAAmB4L,GACzB5L,EAAM,oBAA+B4L,GACrC5L,EAAM,0BAA2B4L,GACjC5L,EAAM,8CAA+C4L,GACrD5L,EAAM,wDAAyD4L,GAC/D5L,EAAM,IAhBP","file":"alumican.min.js","sourcesContent":["/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class Parallel extends CommandList {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper(...commands);\n\t\t\tthis.completeCount = 0;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tif (++this.completeCount >= this.getLength()) {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t};\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.completeCount = 0;\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.addEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.execute();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.interrupt();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsuper.implInterruptFunction(command);\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsuper.implDestroyFunction(command);\n\t\t}\n\n\t\tprotected implNotifyBreak():void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tif (command.getState() == CommandState.Executing) {\n\t\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\t\tcommand.interrupt();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implNotifyReturn():void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tif (command.getState() == CommandState.Executing) {\n\t\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\t\tcommand.interrupt();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.destroy();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected getCompleteCount():number { return this.completeCount; }\n\t\tprivate completeCount:number;\n\n\t\tprivate currentCommand:Command;\n\t\tprivate isPaused:boolean;\n\t\tprivate isCompleteOnPaused:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport class Waypoint {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(path:string, level:number) {\n\t\t\tthis.path = path;\n\t\t\tthis.level = level;\n\t\t\tthis.from = Direction.Static;\n\t\t\tthis.to = Direction.Static;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getPath():string {\n\t\t\treturn this.path;\n\t\t}\n\n\t\tpublic getLevel():number {\n\t\t\treturn this.level;\n\t\t}\n\n\t\tpublic getFrom():Direction {\n\t\t\treturn this.from;\n\t\t}\n\n\t\tpublic getTo():Direction {\n\t\t\treturn this.to;\n\t\t}\n\n\t\tpublic _setFrom(from:Direction):void {\n\t\t\tthis.from = from;\n\t\t}\n\n\t\tpublic _setTo(to:Direction):void {\n\t\t\tthis.to = to;\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[Waypoint] path = \\'' + this.path + '\\', level = ' + this.level + ', from = ' + getDirectionString(this.from) + ', to = ' + getDirectionString(this.to);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate path:string;\n\t\tprivate level:number;\n\t\tprivate from:Direction;\n\t\tprivate to:Direction;\n\t}\n}","/* ---------- dependency ---------- */\n\n/* ---------- project ---------- */\n/// <reference path='alm/util/Easing.ts' />\n/// <reference path='alm/event/Event.ts' />\n/// <reference path='alm/event/EventDispatcher.ts' />\n\n/// <reference path='cmd/CommandState.ts' />\n/// <reference path='cmd/CommandEvent.ts' />\n/// <reference path='cmd/Command.ts' />\n/// <reference path='cmd/CommandList.ts' />\n/// <reference path='cmd/Break.ts' />\n/// <reference path='cmd/Return.ts' />\n/// <reference path='cmd/Log.ts' />\n/// <reference path='cmd/Wait.ts' />\n/// <reference path='cmd/Func.ts' />\n/// <reference path='cmd/Listen.ts' />\n/// <reference path='cmd/Tween.ts' />\n/// <reference path='cmd/Serial.ts' />\n/// <reference path='cmd/Parallel.ts' />\n\n/// <reference path='alm/geom/Vector2.ts' />\n/// <reference path='alm/geom/Vector3.ts' />\n/// <reference path='alm/geom/Rectangle.ts' />\n/// <reference path='alm/util/Hash.ts' />\n/// <reference path='alm/util/Obj.ts' />\n/// <reference path='alm/util/Arr.ts' />\n/// <reference path='alm/util/Num.ts' />\n/// <reference path='alm/util/Str.ts' />\n/// <reference path='alm/util/Loc.ts' />\n/// <reference path='alm/util/Boxer.ts' />\n/// <reference path='alm/util/Raffle.ts' />\n/// <reference path='alm/util/Rotator.ts' />\n/// <reference path='alm/util/Logger.ts' />\n/// <reference path='alm/util/Pager.ts' />\n/// <reference path='alm/util/PagerEvent.ts' />\n/// <reference path='alm/util/Timer.ts' />\n/// <reference path='alm/util/TimerEvent.ts' />\n/// <reference path='alm/util/ObjectPool.ts' />\n/// <reference path='alm/util/CommandUtil.ts' />\n/// <reference path='alm/loader/AssetLoader.ts' />\n/// <reference path='alm/loader/AssetLoaderEvent.ts' />\n/// <reference path='alm/loader/FileQuery.ts' />\n/// <reference path='alm/loader/IFileHandler.ts' />\n/// <reference path='alm/view/View.ts' />\n/// <reference path='alm/view/ButtonBehavior.ts' />\n/// <reference path='alm/view/IButton.ts' />\n/// <reference path='alm/view/SelectionBehavior.ts' />\n/// <reference path='alm/view/ISelection.ts' />\n/// <reference path='alm/browser/DeviceInfo.ts' />\n/// <reference path='alm/browser/LocalStorage.ts' />\n/// <reference path='alm/browser/KeyWatcher.ts' />\n/// <reference path='alm/browser/KeyWatcherEvent.ts' />\n/// <reference path='alm/browser/WindowWatcher.ts' />\n/// <reference path='alm/browser/WindowWatcherEvent.ts' />\n\n/// <reference path='scn/Scene.ts' />\n/// <reference path='scn/SceneEvent.ts' />\n/// <reference path='scn/SceneManager.ts' />\n/// <reference path='scn/SceneManagerEvent.ts' />\n/// <reference path='scn/SceneTransferInfo.ts' />\n/// <reference path='scn/SceneState.ts' />\n/// <reference path='scn/core/Direction.ts' />\n/// <reference path='scn/core/RootScene.ts' />\n/// <reference path='scn/core/Waypoint.ts' />\n\nnamespace alm {\n\n\t// Library version info\n\texport function getVersion():string {\n\t\treturn '0.0.1';\n\t}\n\n\t// Credit info\n\tconst style:string = 'color:#999;';\n\tconst print:Function = console.debug;\n\tprint('%c+ + + + + + + + + + + + + + + + + + + + + + + + + +', style);\n\tprint('%c+ alumican.js', style);\n\tprint('%c+ version ' + getVersion(), style);\n\tprint('%c+ http://alumican.net', style);\n\tprint('%c+ https://github.com/alumican/alumican.js', style);\n\tprint('%c+ + + + + + + + + + + + + + + + + + + + + + + + + +', style);\n\tprint('');\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport enum LoggerLevel {\n\t\tVerbose = 0,\n\t\tInfo = 1,\n\t\tWarn = 2,\n\t\tError = 3,\n\t\tSilent = 4,\n\t}\n\n\n\n\n\n\texport interface ILogging {\n\n\t\tverbose(messages:any[]):void;\n\t\tinfo(messages:any[]):void;\n\t\twarn(messages:any[]):void;\n\t\terror(messages:any[]):void;\n\t}\n\n\n\n\n\n\texport class NullLogging implements ILogging {\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t}\n\t}\n\n\n\n\n\n\texport class ConsoleLogging implements ILogging {\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t\tconsole.debug.apply(console, Array.prototype.slice.call(['[Verbose] '].concat(messages)));\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t\tconsole.log.apply(console, Array.prototype.slice.call(['[Info   ] '].concat(messages)));\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t\tconsole.warn.apply(console, Array.prototype.slice.call(['[Warn   ] '].concat(messages)));\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t\tconsole.error.apply(console, Array.prototype.slice.call(['[Error  ] '].concat(messages)));\n\t\t}\n\t}\n\n\n\n\n\n\texport class DOMLogging implements ILogging {\n\n\t\tconstructor(dom:HTMLElement, html:boolean) {\n\t\t\tthis.dom = dom;\n\t\t\tthis.html = html;\n\t\t}\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t\tthis.print('[Verbose] ', messages);\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t\tthis.print('[Info   ] ', messages);\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t\tthis.print('[Warn   ] ', messages);\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t\tthis.print('[Error  ] ', messages);\n\t\t}\n\n\t\tprivate print(prefix:string, messages:any[]):void {\n\t\t\tconst line:string = messages.join(', ') + '\\n';\n\t\t\tif (this.html) {\n\t\t\t\tthis.dom.innerHTML = line + this.dom.innerHTML;\n\t\t\t} else {\n\t\t\t\tthis.dom.innerText = line + this.dom.innerText;\n\t\t\t}\n\t\t}\n\n\t\tprivate dom:HTMLElement;\n\t\tprivate html:boolean;\n\t}\n\n\n\n\n\n\texport class ParallelLogging implements ILogging {\n\n\t\tconstructor(loggers:ILogging[]) {\n\t\t\tthis.loggers = loggers;\n\t\t}\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].verbose.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].info.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].warn.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].error.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tprivate loggers:ILogging[];\n\t}\n\n\n\n\n\n\texport class Logger {\n\n\t\tpublic static level:number = LoggerLevel.Verbose;\n\t\tpublic static logger:ILogging = new ConsoleLogging();\n\n\t\tpublic static verbose(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Verbose) Logger.logger.verbose(messages);\n\t\t}\n\n\t\tpublic static info(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Info) Logger.logger.info(messages);\n\t\t}\n\n\t\tpublic static warn(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Warn) Logger.logger.warn(messages);\n\t\t}\n\n\t\tpublic static error(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Error) Logger.logger.error(messages);\n\t\t}\n\n\t\tpublic static warnIf(target:any, message:string, condition:boolean = true):void {\n\t\t\tif (Logger.level <= LoggerLevel.Warn && condition) Logger.logger.warn([message + ' : ' + target]);\n\t\t}\n\n\t\tpublic static errorIf(target:any, message: string, condition:boolean = true):void {\n\t\t\tif (Logger.level <= LoggerLevel.Error && condition) Logger.logger.error([message + ' : ' + target]);\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}\n\nfunction trace(...messages:any[]):void {\n\talm.util.Logger.info.apply(trace.caller, arguments);\n}\n\nfunction throwWarn(target:any, message:string, condition:boolean = true):void {\n\talm.util.Logger.warnIf.apply(null, arguments);\n}\n\nfunction throwError(target:any, message:string, condition:boolean = true):void {\n\talm.util.Logger.errorIf.apply(null, arguments);\n}","namespace alm.util {\n\n\texport type EasingFunction = (t:number, b:number, c:number, d:number)=>number;\n\n\texport class Easing {\n\n\t\tpublic static linear(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * t / d + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuad(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuad(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * (t /= d) * (t - 2) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuad(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t + b;\n\t\t\treturn (-c) / 2 * ((--t) * (t - 2) - 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInCubic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutCubic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * ((t = t / d - 1) * t * t + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutCubic(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t + b;\n\t\t\treturn c / 2 * ((t -= 2) * t * t + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuart(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuart(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * ((t = t / d - 1) * t * t * t - 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuart(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\n\t\t\treturn (-c) / 2 * ((t -= 2) * t * t * t - 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuint(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuint(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuint(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;\n\t\t\treturn c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * Math.cos(t / d * (Math.PI / 2)) + c + b;\n\t\t}\n\n\t\tpublic static easeOutSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * Math.sin(t / d * (Math.PI / 2)) + b;\n\t\t}\n\n\t\tpublic static easeInOutSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == 0) return b;\n\t\t\treturn c * Math.pow(2, 10 * (t / d - 1)) + b;\n\t\t}\n\n\t\tpublic static easeOutExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == d) return b + c;\n\t\t\treturn c * (-Math.pow(2, -10 * t / d) + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == 0) return b;\n\t\t\tif (t == d) return b + c;\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n\t\t\treturn c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInCirc(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n\t\t}\n\n\t\tpublic static easeOutCirc(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n\t\t}\n\n\t\tpublic static easeInOutCirc(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return (-c) / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n\t\t\treturn c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static createEaseInElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d) == 1) return b + c;\n\t\t\t\tif (p == 0) p = d * 0.3;\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\treturn (-a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p )) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseOutElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d) == 1) return b + c;\n\t\t\t\tif (p == 0) p = d * 0.3;\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseInOutElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d / 2) == 2) return b + c;\n\t\t\t\tif (p == 0) p = d * (0.3 * 1.5);\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\tif (t < 1) return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n\t\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeOutElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseOutElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeInOutElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInOutElastic(t, b, c, d);\n\t\t}\n\n\t\tprivate static defaultEaseInElastic:EasingFunction = Easing.createEaseInElastic();\n\t\tprivate static defaultEaseOutElastic:EasingFunction = Easing.createEaseOutElastic();\n\t\tprivate static defaultEaseInOutElastic:EasingFunction = Easing.createEaseInOutElastic();\n\n\n\n\n\n\t\tpublic static createEaseInBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\treturn c * (t /= d) * t * ((s + 1) * t - s) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseOutBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\treturn c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseInOutBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tif ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n\t\t\t\treturn c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeOutBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseOutBack(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeInOutBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInOutBack(t, b, c, d);\n\t\t}\n\n\t\tprivate static defaultEaseInBack:EasingFunction = Easing.createEaseInBack();\n\t\tprivate static defaultEaseOutBack:EasingFunction = Easing.createEaseOutBack();\n\t\tprivate static defaultEaseInOutBack:EasingFunction = Easing.createEaseInOutBack();\n\n\n\n\n\n\t\tpublic static easeInBounce(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c - Easing.easeOutBounce(d - t, 0, c, d) + b;\n\t\t}\n\n\t\tpublic static easeOutBounce(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d) < (1 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * t * t) + b;\n\t\t\t} else if (t < (2 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\n\t\t\t} else if (t < (2.5 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\n\t\t\t} else {\n\t\t\t\treturn c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInOutBounce(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t < d / 2) return Easing.easeInBounce(t * 2, 0, c, d) * 0.5 + b;\n\t\t\treturn Easing.easeOutBounce(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n\t\t}\n\t}\n}","/// <reference path='../../include.ts' />\r\n\r\nnamespace alm.event {\r\n\r\n\texport class Event {\r\n\r\n\t\t// --------------------------------------------------\r\n\t\t//\r\n\t\t// CONSTRUCTOR\r\n\t\t//\r\n\t\t// --------------------------------------------------\r\n\r\n\t\tconstructor(type:string, target:Object, data:any = null) {\r\n\t\t\tthis.type = type;\r\n\t\t\tthis.target = target;\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\r\n\t\tpublic getType():string {\r\n\t\t\treturn this.type;\r\n\t\t}\r\n\r\n\t\tpublic getTarget():Object {\r\n\t\t\treturn this.target;\r\n\t\t}\r\n\r\n\t\tpublic getData():any {\r\n\t\t\treturn this.data;\r\n\t\t}\r\n\r\n\t\tpublic setData(data:any):void {\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\t\t// --------------------------------------------------\r\n\t\t//\r\n\t\t// MEMBER\r\n\t\t//\r\n\t\t// --------------------------------------------------\r\n\r\n\t\tprivate type:string;\r\n\t\tprivate target:Object;\r\n\t\tprivate data:any;\r\n\t}\r\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.event {\n\n\texport type EventListener = (event:Event) => void;\n\n\texport class EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:any = null) {\n\t\t\tthis.target = target || this;\n\t\t\tthis.listeners = {};\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addEventListener(eventType:string, listener:EventListener):void {\n\t\t\tif (typeof(listener) != 'function') return;\n\t\t\tlet listeners:EventListener[] = this.listeners[eventType];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tif (listener == listeners[i]) return;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.listeners[eventType] = listeners = [];\n\t\t\t}\n\t\t\tlisteners.push(listener);\n\t\t}\n\n\t\tpublic removeEventListener(eventType:string, listener:EventListener):void {\n\t\t\tif (typeof(listener) != 'function') return;\n\t\t\tlet listeners:EventListener[] = this.listeners[eventType];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tif (listener == listeners[i]) {\n\t\t\t\t\t\tlisteners.splice(i,  1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (listeners.length == 0) {\n\t\t\t\t\tdelete this.listeners[eventType];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic removeAllEventListener(eventType:string = null):void {\n\t\t\tif (eventType) {\n\t\t\t\tdelete this.listeners[eventType];\n\t\t\t} else {\n\t\t\t\tthis.listeners = {};\n\t\t\t}\n\t\t}\n\n\t\tpublic hasEventListener(eventType:string):boolean {\n\t\t\treturn this.listeners[eventType] != null;\n\t\t}\n\n\t\tpublic dispatchEvent(event:Event):void {\n\t\t\tlet listeners:EventListener[] = this.listeners[event.getType()];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tlisteners[i].call(this.target, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic dispatchEventType(eventType:string, target:Object = null, data:any = null):void {\n\t\t\tthis.dispatchEvent(new Event(eventType, target, data));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:any;\n\t\tprivate listeners:util.Hash<EventListener[]>;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport enum CommandState {\n\t\tSleeping     = 0,\n\t\tExecuting    = 1,\n\t\tInterrupting = 2,\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class CommandEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static COMPLETE:string = 'complete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():CommandEvent {\n\t\t\treturn new CommandEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[CommandEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Command extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(executeFunction:Function = null, interruptFunction:Function = null, destroyFunction:Function = null) {\n\t\t\tsuper();\n\n\t\t\tthis.setExecuteFunction(executeFunction);\n\t\t\tthis.setInterruptFunction(interruptFunction);\n\t\t\tthis.setDestroyFunction(destroyFunction);\n\n\t\t\tthis.state = CommandState.Sleeping;\n\t\t\tthis.self = this;\n\t\t\tthis.parent = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic execute():void {\n\t\t\tif (this.state > CommandState.Sleeping) {\n\t\t\t\tthrow new Error('[Command.execute] + Command is already executing.');\n\t\t\t}\n\t\t\tthis.state = CommandState.Executing;\n\t\t\tthis.getExecuteFunction().call(this, this);\n\t\t}\n\n\t\tpublic interrupt():void {\n\t\t\tif (this.state == CommandState.Executing) {\n\t\t\t\tthis.state = CommandState.Interrupting;\n\t\t\t\tthis.getInterruptFunction().call(this, this);\n\t\t\t}\n\t\t}\n\n\t\tpublic destroy():void {\n\t\t\tthis.state = CommandState.Sleeping;\n\t\t\tthis.getDestroyFunction().call(this, this);\n\t\t\tthis.parent = null;\n\t\t\tthis.executeFunction = null;\n\t\t\tthis.interruptFunction = null;\n\t\t\tthis.destroyFunction = null;\n\t\t}\n\n\t\tprotected notifyComplete():void {\n\t\t\tswitch (this.state) {\n\t\t\t\tcase CommandState.Sleeping:\n\t\t\t\t\tbreak;\n\t\t\t\tcase CommandState.Executing:\n\t\t\t\t\tthis.dispatchEvent(new CommandEvent(CommandEvent.COMPLETE, this));\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tbreak;\n\t\t\t\tcase CommandState.Interrupting:\n\t\t\t\t\tthis.dispatchEvent(new CommandEvent(CommandEvent.COMPLETE, this));\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.notifyComplete();\n\t\t}\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getExecuteFunction():Function { return this.executeFunction || this.implExecuteFunction };\n\t\tpublic setExecuteFunction(func:Function):void { this.executeFunction = func; }\n\t\tprivate executeFunction:Function;\n\n\t\tpublic getInterruptFunction():Function { return this.interruptFunction || this.implInterruptFunction };\n\t\tpublic setInterruptFunction(func:Function):void { this.interruptFunction = func; }\n\t\tprivate interruptFunction:Function;\n\n\t\tpublic getDestroyFunction():Function { return this.destroyFunction || this.implDestroyFunction };\n\t\tpublic setDestroyFunction(func:Function):void { this.destroyFunction = func; }\n\t\tprivate destroyFunction:Function;\n\n\t\tpublic getState():CommandState { return this.state; }\n\t\tprivate state:CommandState;\n\n\t\tpublic getParent():Command { return this.parent; }\n\t\tpublic setParent(parent:Command):void { this.parent = parent; }\n\t\tprivate parent:Command;\n\n\t\tpublic getSelf():Command { return this.self; }\n\t\tprivate self:Command;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport abstract class CommandList extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper();\n\t\t\tthis.commands = [];\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tif (commands.length > 0) {\n\t\t\t\tthis.preProcess(commands);\n\t\t\t\tthis.commands = this.getCommands().concat(<Command[]>commands);\n\t\t\t}\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommandAt(0, ...commands);\n\t\t}\n\n\t\tprotected insertCommandAt(index:number, ...commands:(Command|Function)[]):void {\n\t\t\tif (commands.length > 0) {\n\t\t\t\tthis.preProcess(commands);\n\t\t\t\tArray.prototype.splice.apply(this.getCommands(), (<any[]>[index, 0]).concat(commands));\n\t\t\t}\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommand(...commands);\n\t\t}\n\n\t\tprotected insertCommandArrayAt(index:number, commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommandAt(index, ...commands);\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn this.commands.length;\n\t\t}\n\n\t\tpublic getCommandByIndex(index:number):Command { return this.commands[index]; }\n\t\tpublic getCommands():Command[] { return this.commands; }\n\n\t\tprivate preProcess(commands:(Command|Function)[]):void {\n\t\t\tconst numCommands:number = commands.length;\n\t\t\tlet command:Command|Function;\n\t\t\tfor (let i:number = 0; i < numCommands; ++i) {\n\t\t\t\tcommand = commands[i];\n\t\t\t\tif (typeof(command) == 'function') commands[i] = command = new Func(command);\n\t\t\t\tcommand.setParent(this);\n\t\t\t}\n\t\t}\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\t\tprotected abstract implNotifyBreak():void;\n\t\tprotected abstract implNotifyReturn():void;\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate commands:Command[];\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Break extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconst func:Function = this.getParent()['notifyBreak'];\n\t\t\tif (func) func();\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Return extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Log extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...messages:any[]) {\n\t\t\tsuper();\n\t\t\tthis.messages = messages;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconsole.log.apply(console, Array.prototype.slice.call(this.messages));\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.messages = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getMessages():any[] { return this.messages; }\n\t\tpublic setMessages(messages:any[]):void { this.messages = messages; }\n\t\tprivate messages:any[];\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Wait extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(time:number = 1000) {\n\t\t\tsuper();\n\t\t\tthis.time = time;\n\t\t\tthis.timerId = -1;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.timerId = window.setTimeout(this.completeHandler, this.time);\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprivate cancel():void {\n\t\t\tif (this.timerId != -1) {\n\t\t\t\tclearTimeout(this.timerId);\n\t\t\t\tthis.timerId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTime():number { return this.time; }\n\t\tpublic setTime(time:number):void { this.time = time; }\n\t\tprivate time:number;\n\n\t\tprivate timerId:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Func extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(func:Function = null, args:any[] = [], eventDispatcher:EventDispatcher = null, eventType:string = null) {\n\t\t\tsuper();\n\t\t\tthis.func = func;\n\t\t\tthis.args = args;\n\t\t\tthis.eventDispatcher = eventDispatcher;\n\t\t\tthis.eventType = eventType;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.addEventListener(this.eventType, this.completeHandler);\n\t\t\t\tthis.func(...this.args);\n\t\t\t} else {\n\t\t\t\tthis.func(...this.args);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\n\t\t\tthis.func = null;\n\t\t\tthis.args = null;\n\t\t\tthis.eventDispatcher = null;\n\t\t\tthis.eventType = null;\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getFunction():Function { return this.func; }\n\t\tpublic setFunction(func:Function):void { this.func = func; }\n\t\tprivate func:Function;\n\n\t\tpublic getArguments():any[] { return this.args; }\n\t\tpublic setArguments(args:any[]):void { this.args = args; }\n\t\tprivate args:any[];\n\n\t\tpublic getEventDispatcher():EventDispatcher { return this.eventDispatcher; }\n\t\tpublic setEventDispatcher(eventDispatcher:EventDispatcher):void { this.eventDispatcher = eventDispatcher; }\n\t\tprivate eventDispatcher:EventDispatcher;\n\n\t\tpublic getEventType():string { return this.eventType; }\n\t\tpublic setEventType(eventType:string):void { this.eventType = eventType; }\n\t\tprivate eventType:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Listen extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventDispatcher:EventDispatcher = null, eventType:string = null) {\n\t\t\tsuper();\n\t\t\tthis.eventDispatcher = eventDispatcher;\n\t\t\tthis.eventType = eventType;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.addEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\n\t\t\tthis.eventType = null;\n\t\t\tthis.eventDispatcher = null;\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getEventDispatcher():EventDispatcher { return this.eventDispatcher; }\n\t\tpublic setEventDispatcher(eventDispatcher:EventDispatcher):void { this.eventDispatcher = eventDispatcher; }\n\t\tprivate eventDispatcher:EventDispatcher;\n\n\t\tpublic getEventType():string { return this.eventType; }\n\t\tpublic setEventType(eventType:string):void { this.eventType = eventType; }\n\t\tprivate eventType:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Easing = alm.util.Easing;\n\timport EasingFunction = alm.util.EasingFunction;\n\n\texport type TweenCallbackFunction = (progressTime:number, progressValue:number) => void;\n\n\texport class Tween extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:Object, to:Object, from:Object = null, duration:number = 1000, easing:EasingFunction = Easing.linear, onStart:TweenCallbackFunction = null, onUpdate:TweenCallbackFunction = null, onComplete:TweenCallbackFunction = null) {\n\t\t\tsuper();\n\t\t\tthis.tweenTarget = target;\n\t\t\tthis.to = to;\n\t\t\tthis.from = from;\n\t\t\tthis.duration = duration;\n\t\t\tthis.easing = easing;\n\t\t\tthis.onStart = onStart;\n\t\t\tthis.onUpdate = onUpdate;\n\t\t\tthis.onComplete = onComplete;\n\t\t\tthis.progressTime = 0;\n\t\t\tthis.progressValue = 0;\n\t\t\tthis.startTime = 0;\n\t\t\tthis.timerId = -1;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.internalFrom = {};\n\t\t\tlet value0:number;\n\t\t\tlet value1:number;\n\t\t\tfor (let key in this.to) {\n\t\t\t\tvalue1 = this.to[key];\n\t\t\t\tif (this.from && this.from[key] != null) {\n\t\t\t\t\tthis.internalFrom[key] = this.from[key];\n\t\t\t\t} else {\n\t\t\t\t\tthis.internalFrom[key] = this.tweenTarget[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.duration > 0) {\n\t\t\t\tthis.timerId = window.setInterval(this.intervalHandler, Tween.updateInterval);\n\t\t\t\tthis.startTime = new Date().getTime();\n\t\t\t\tthis.apply(0);\n\t\t\t\tif (this.onStart) this.onStart(this.progressTime, this.progressValue);\n\t\t\t} else {\n\t\t\t\tthis.apply(0);\n\t\t\t\tif (this.onStart) this.onStart(this.progressTime, this.progressValue);\n\t\t\t\tthis.apply(1);\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t\tif (this.onComplete) this.onComplete(this.progressTime, this.progressValue);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.cancel();\n\n\t\t\tthis.tweenTarget = null;\n\t\t\tthis.to = null;\n\t\t\tthis.from = null;\n\t\t\tthis.easing = null;\n\t\t\tthis.onStart = null;\n\t\t\tthis.onUpdate = null;\n\t\t\tthis.onComplete = null;\n\t\t\tthis.internalFrom = null;\n\t\t}\n\n\t\tprivate cancel():void {\n\t\t\tif (this.timerId != -1) {\n\t\t\t\tclearInterval(this.timerId);\n\t\t\t\tthis.timerId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate apply(timeRatio:number):void {\n\t\t\tthis.progressTime = timeRatio;\n\t\t\tthis.progressValue = this.easing(this.progressTime, 0, 1, 1);\n\t\t\tlet value0:number;\n\t\t\tfor (let key in this.to) {\n\t\t\t\tvalue0 = this.internalFrom[key];\n\t\t\t\tthis.tweenTarget[key] = value0 + (this.to[key] - value0) * this.progressValue;\n\t\t\t}\n\t\t}\n\n\t\tprivate intervalHandler = ():void => {\n\t\t\tconst elapsedTime:number = new Date().getTime() - this.startTime;\n\t\t\tif (elapsedTime < this.duration) {\n\t\t\t\tthis.apply(elapsedTime / this.duration);\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t} else {\n\t\t\t\tthis.apply(1);\n\t\t\t\tthis.cancel();\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t\tif (this.onComplete) this.onComplete(this.progressTime, this.progressValue);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTarget():Object { return this.tweenTarget; }\n\t\tpublic setTarget(target:Object):void { this.tweenTarget = target; }\n\t\tprivate tweenTarget:Object;\n\n\t\tpublic getDuration():number { return this.duration; }\n\t\tpublic setDuration(duration:number):void { this.duration = duration; }\n\t\tprivate duration:number;\n\n\t\tpublic getTo():Object { return this.to; }\n\t\tpublic setTo(to:Object):void { this.to = to; }\n\t\tprivate to:Object;\n\n\t\tpublic getFrom():Object { return this.from; }\n\t\tpublic setFrom(from:Object):void { this.from = from; }\n\t\tprivate from:Object;\n\n\t\tpublic getEasing():EasingFunction { return this.easing; }\n\t\tpublic setEasing(easing:EasingFunction):void { this.easing = easing; }\n\t\tprivate easing:EasingFunction;\n\n\t\tpublic getOnStart():TweenCallbackFunction { return this.onStart; }\n\t\tpublic setOnStart(func:TweenCallbackFunction):void { this.onStart = func; }\n\t\tprivate onStart:TweenCallbackFunction;\n\n\t\tpublic getOnUpdate():TweenCallbackFunction { return this.onUpdate; }\n\t\tpublic setOnUpdate(func:TweenCallbackFunction):void { this.onUpdate = func; }\n\t\tprivate onUpdate:TweenCallbackFunction;\n\n\t\tpublic getOnComplete():TweenCallbackFunction { return this.onComplete; }\n\t\tpublic setOnComplete(func:TweenCallbackFunction):void { this.onComplete = func; }\n\t\tprivate onComplete:TweenCallbackFunction;\n\n\t\tpublic getProgressTime():number { return this.progressTime; }\n\t\tprivate progressTime:number;\n\n\t\tpublic getProgressValue():number { return this.progressValue; }\n\t\tprivate progressValue:number;\n\n\t\tprivate startTime:number;\n\t\tprivate timerId:number;\n\t\tprivate internalFrom:Object;\n\n\t\tpublic getUpdateInterval():number { return Tween.updateInterval; }\n\t\tpublic setUpdateInterval(milliseconds:number):void { Tween.updateInterval = milliseconds; }\n\t\tprivate static updateInterval:number = 1000 / 60;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class Serial extends CommandList {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper(...commands);\n\t\t\tthis.currentCommand = null;\n\t\t\tthis.position = -1;\n\t\t\tthis.isPaused = false;\n\t\t\tthis.isCompleteOnPaused = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.insertCommandAt(this.position + 1, ...commands);\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommand(...commands);\n\t\t}\n\n\t\tprivate next():void {\n\t\t\tthis.currentCommand = this.getCommandByIndex(this.position);\n\t\t\tthis.currentCommand.addEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\tthis.currentCommand.execute();\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\tthis.currentCommand = null;\n\t\t\tif (++this.position >= this.getLength()) {\n\t\t\t\tthis.notifyComplete();\n\t\t\t} else {\n\t\t\t\tthis.next();\n\t\t\t}\n\t\t};\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.position = 0;\n\t\t\tif (this.getLength() > 0) {\n\t\t\t\tthis.next();\n\t\t\t} else {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.currentCommand) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t\tthis.currentCommand = null;\n\t\t\t}\n\t\t\tthis.position = -1;\n\t\t\tsuper.implInterruptFunction(command);\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.currentCommand) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.destroy();\n\t\t\t\tthis.currentCommand = null;\n\t\t\t}\n\t\t\tthis.position = -1;\n\t\t\tthis.isPaused = false;\n\t\t\tthis.isCompleteOnPaused = false;\n\t\t\tsuper.implDestroyFunction(command);\n\t\t}\n\n\t\tprotected implNotifyBreak():void {\n\t\t\tif (this.currentCommand.getState() == CommandState.Executing) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t}\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implNotifyReturn():void {\n\t\t\tif (this.currentCommand.getState() == CommandState.Executing) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t}\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.destroy();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected getPosition():number { return this.position; }\n\t\tprivate position:number;\n\n\t\tprivate currentCommand:Command;\n\t\tprivate isPaused:boolean;\n\t\tprivate isCompleteOnPaused:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Vector2 {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0) {\n\t\t\tthis.set(x, y);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t}\n\n\t\tpublic copyTo(point:Vector2):void {\n\t\t\tpoint.set(this.x, this.y);\n\t\t}\n\n\t\tpublic getClone():Vector2 {\n\t\t\treturn new Vector2(this.x, this.y);\n\t\t}\n\n\t\tpublic zero():void {\n\t\t\tthis.set(0, 0);\n\t\t}\n\n\t\tpublic normalize():void {\n\t\t\tconst l:number = this.getLength();\n\t\t\tthis.x /= l;\n\t\t\tthis.y /= l;\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t\t}\n\n\t\tpublic getSquareDistance(point:Vector2):number {\n\t\t\tconst dx:number = point.x - this.x;\n\t\t\tconst dy:number = point.y - this.y;\n\t\t\treturn dx * dx + dy * dy;\n\t\t}\n\n\t\tpublic getDistance(point:Vector2):number {\n\t\t\treturn Math.sqrt(this.getSquareDistance(point));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Vector3 {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0, z:number = 0) {\n\t\t\tthis.set(x, y, z);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number, z:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t}\n\n\t\tpublic copyTo(point:Vector3):void {\n\t\t\tpoint.set(this.x, this.y, this.z);\n\t\t}\n\n\t\tpublic getClone():Vector3 {\n\t\t\treturn new Vector3(this.x, this.y, this.z);\n\t\t}\n\n\t\tpublic zero():void {\n\t\t\tthis.set(0, 0, 0);\n\t\t}\n\n\t\tpublic normalize():void {\n\t\t\tconst l:number = this.getLength();\n\t\t\tthis.x /= l;\n\t\t\tthis.y /= l;\n\t\t\tthis.z /= l;\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\t\t}\n\n\t\tpublic getSquareDistance(point:Vector3):number {\n\t\t\tconst dx:number = point.x - this.x;\n\t\t\tconst dy:number = point.y - this.y;\n\t\t\tconst dz:number = point.z - this.z;\n\t\t\treturn dx * dx + dy * dy + dz * dz;\n\t\t}\n\n\t\tpublic getDistance(point:Vector3):number {\n\t\t\treturn Math.sqrt(this.getSquareDistance(point));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t\tpublic z:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Rectangle {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0, width:number = 0, height:number = 0) {\n\t\t\tthis.set(x, y, width, height);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number, width:number, height:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\tpublic copyTo(rect:Rectangle):void {\n\t\t\trect.set(this.x, this.y, this.width, this.height);\n\t\t}\n\n\t\tpublic getClone():Rectangle {\n\t\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t\t}\n\n\t\tpublic getTop():number {\n\t\t\treturn this.y;\n\t\t}\n\n\t\tpublic getBottom():number {\n\t\t\treturn this.y + this.height;\n\t\t}\n\n\t\tpublic getLeft():number {\n\t\t\treturn this.x;\n\t\t}\n\n\t\tpublic getRight():number {\n\t\t\treturn this.x + this.width;\n\t\t}\n\n\t\tpublic getTopLeft():Vector2 {\n\t\t\treturn new Vector2(this.getLeft(), this.getTop());\n\t\t}\n\n\t\tpublic getTopRight():Vector2 {\n\t\t\treturn new Vector2(this.getRight(), this.getTop());\n\t\t}\n\n\t\tpublic getBottomLeft():Vector2 {\n\t\t\treturn new Vector2(this.getLeft(), this.getBottom());\n\t\t}\n\n\t\tpublic getBottomRight():Vector2 {\n\t\t\treturn new Vector2(this.getRight(), this.getBottom());\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t\tpublic width:number;\n\t\tpublic height:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Obj {\n\n\t\tpublic static each(target:any, func:(key:string, value:any) => void):void {\n\t\t\tif (target == null) return;\n\t\t\tObject.keys(target).forEach((key:string):void => {\n\t\t\t\tfunc(key, target[key]);\n\t\t\t});\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Arr {\n\n\t\t/**\n\t\t * \n\t\t * @param {number} count \n\t\t * @param {number} init \n\t\t * @param {number} step \n\t\t * @returns {number[]} \n\t\t */\n\t\tpublic static sequence(count:number, init:number = 0, step:number = 1):number[] {\n\t\t\tconst result:number[] = new Array(count);\n\t\t\tlet v:number = init;\n\t\t\tfor (let i:number = 0; i < count; ++i) {\n\t\t\t\tresult[i] = v;\n\t\t\t\tv += step;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param list \n\t\t * @returns {T[]} \n\t\t */\n\t\tpublic static unique<T>(list:T[]):T[] {\n\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\treturn self.indexOf(x) === i;\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param list \n\t\t * @param unique true\n\t\t * @returns {T[]} \n\t\t */\n\t\tpublic static duplicated<T>(list:T[], unique:boolean = false):T[] {\n\n\t\t\tif (unique) {\n\t\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\t\treturn self.indexOf(x) !== self.lastIndexOf(x);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\t\treturn (self.indexOf(x) === i) && (self.lastIndexOf(x) !== i);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * 2\n\t\t * @param {T[]} list1 1\n\t\t * @param {T[]} list2 2\n\t\t * @param {(count: number, index1: number, index2: number, element1: T, element2: T) => void} callback \n\t\t * @param callback.count \n\t\t * @param callback.index1 1\n\t\t * @param callback.index2 2\n\t\t * @param callback.element1 1\n\t\t * @param callback.element2 2\n\t\t */\n\t\tpublic static roundRobin<T>(list1:T[], list2:T[], callback:(count:number, index1:number, index2:number, element1:T, element2:T) => void):void {\n\t\t\tlet i:number, j:number, p:number = 1;\n\t\t\tconst m:number = list1.length;\n\t\t\tconst n:number = list2.length;\n\t\t\tfor (i = 0; i < m; ++i) {\n\t\t\t\tfor (j = i + 1; j < n; ++j) {\n\t\t\t\t\tcallback(p++, i, j, list1[i], list2[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Num {\n\n\t\t/**\n\t\t * \n\t\t * @param {number} value \n\t\t * @param {number} srcMin \n\t\t * @param {number} srcMax \n\t\t * @param {number} dstMin \n\t\t * @param {number} dstMax \n\t\t * @param {boolean} clamp truesrcMin, srcMax\n\t\t * @returns {number} \n\t\t */\n\t\tpublic static map(value:number, srcMin:number, srcMax:number, dstMin:number, dstMax:number, clamp:boolean = true):number {\n\t\t\tif (srcMin == srcMax) return dstMin;\n\t\t\tif (clamp) {\n\t\t\t\tif (srcMin < srcMax) {\n\t\t\t\t\tif (value < srcMin) value = srcMin;\n\t\t\t\t\telse if (value > srcMax) value = srcMax;\n\t\t\t\t} else {\n\t\t\t\t\tif (value < srcMax) value = srcMax;\n\t\t\t\t\telse if (value > srcMin) value = srcMin;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn (value - srcMin) * (dstMax - dstMin) / (srcMax - srcMin) + dstMin;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} min \n\t\t * @param {number} max \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static random(min:number = 0, max:number = 1):number {\n\t\t\treturn min + (max - min) * Math.random();\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} min \n\t\t * @param {number} max \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static randomInt(min:number = 0, max:number = 1):number {\n\t\t\treturn Math.floor(Num.random(min, max));\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} value \n\t\t * @param {number} min \n\t\t * @param {number} max \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static clamp(value:number, min:number, max:number):number {\n\t\t\treturn value < min ? min : (value > max ? max : value);\n\t\t}\n\n\t\t/**\n\t\t * 2\n\t\t * @param {number} x1 1x\n\t\t * @param {number} y1 1y\n\t\t * @param {number} x2 2x\n\t\t * @param {number} y2 2y\n\t\t * @param {boolean} squared true2\n\t\t * @returns {number} \n\t\t */\n\t\tpublic static dist(x1:number, y1:number, x2:number, y2:number, squared:boolean = false):number {\n\t\t\tconst dx:number = x2 - x1;\n\t\t\tconst dy:number = y2 - y1;\n\t\t\treturn squared ? (dx * dx + dy * dy) : Math.sqrt(dx * dx + dy * dy);\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} radian \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static radToDeg(radian:number):number {\n\t\t\treturn radian * Num.RAD2DEG;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} radian \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static degToRad(degree:number):number {\n\t\t\treturn degree * Num.DEG2RAD;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} from \n\t\t * @param {number} to \n\t\t * @param {boolean} radian true\n\t\t * @returns {number} \n\t\t */\n\t\tpublic static turn(from:number, to:number, radian:boolean = true):number {\n\t\t\treturn radian ? ((to - from + Num.PI3) % Num.PI2 - Math.PI) : ((to - from + 540) % 360 - 180);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONST\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static PI2:number = Math.PI * 2;\n\t\tpublic static PI3:number = Math.PI * 3;\n\t\tpublic static PI4:number = Math.PI * 4;\n\t\tpublic static PI5:number = Math.PI * 5;\n\t\tpublic static PI6:number = Math.PI * 6;\n\t\tpublic static PI_2:number = Math.PI / 2;\n\t\tpublic static PI_3:number = Math.PI / 3;\n\t\tpublic static PI_4:number = Math.PI / 4;\n\t\tpublic static PI_6:number = Math.PI / 6;\n\n\t\tprivate static RAD2DEG:number = 180 / Math.PI;\n\t\tprivate static DEG2RAD:number = Math.PI / 180;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Str {\n\n\t\t/**\n\t\t *  h:mm:ss \n\t\t * @param {number} hours \n\t\t * @param {number} minutes \n\t\t * @param {number} seconds \n\t\t * @returns {string} h:mm:ss \n\t\t */\n\t\tpublic static toTimeString(hours:number = 0, minutes:number = 0, seconds:number = 0):string {\n\t\t\tseconds += minutes * 60 + hours * 3600;\n\t\t\tlet h:string = Math.floor(seconds / 3600).toString();\n\t\t\tlet m:string = Math.floor((seconds / 60) % 60).toString();\n\t\t\tlet s:string = ('0' + Math.floor(seconds % 60)).substr(-2, 2);\n\t\t\tif (h != '0') {\n\t\t\t\treturn h + ':' + ('0' + m).substr(-2, 2) + ':' + s;\n\t\t\t} else {\n\t\t\t\treturn m + ':' + s;\n\t\t\t}\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Loc {\n\n\t\tpublic static getQuery():Hash<string> {\n\t\t\tconst query:Hash<string> = {};\n\t\t\tconst pairs:string[] = location.search.substring(1).split('&');\n\t\t\tlet pair:string[];\n\t\t\tfor(let i:number = 0; pairs[i]; ++i) {\n\t\t\t\tpair = pairs[i].split('=');\n\t\t\t\tquery[pair[0]] = pair[1];\n\t\t\t}\n\t\t\treturn query;\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport enum Align {\n\t\tTop_Left,\n\t\tTop_Center,\n\t\tTop_Right,\n\t\tMiddle_Left,\n\t\tMiddle_Center,\n\t\tMiddle_Right,\n\t\tBottom_Left,\n\t\tBottom_Center,\n\t\tBottom_Right\n\t}\n\n\texport enum ScaleMode {\n\t\tExactFit,\n\t\tShowAll,\n\t\tNoBorder,\n\t\tNoScale,\n\t}\n\n\texport class Boxer {\n\n\t\tpublic static resize(target:geom.Rectangle, bounds:geom.Rectangle, scaleMode:ScaleMode = ScaleMode.ShowAll, align:Align = Align.Middle_Center):geom.Rectangle {\n\t\t\tlet tx:number = target.x;\n\t\t\tlet ty:number = target.y;\n\t\t\tlet tw:number = target.width;\n\t\t\tlet th:number = target.height;\n\n\t\t\tconst bx:number = bounds.x;\n\t\t\tconst by:number = bounds.y;\n\t\t\tconst bw:number = bounds.width;\n\t\t\tconst bh:number = bounds.height;\n\n\t\t\tswitch (scaleMode) {\n\t\t\t\tcase ScaleMode.ShowAll:\n\t\t\t\tcase ScaleMode.NoBorder:\n\t\t\t\t\tconst ratioW:number = bw / tw;\n\t\t\t\t\tconst ratioH:number = bh / th;\n\t\t\t\t\tconst ratio:number = scaleMode == ScaleMode.ShowAll ? (ratioW < ratioH ? ratioW : ratioH) : (ratioW > ratioH ? ratioW : ratioH);\n\t\t\t\t\ttw *= ratio;\n\t\t\t\t\tth *= ratio;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ScaleMode.ExactFit:\n\t\t\t\t\treturn new geom.Rectangle(bx, by, bw, bh);\n\t\t\t}\n\n\t\t\ttx = bx + ((align == Align.Top_Left || align == Align.Middle_Left || align == Align.Bottom_Left) ? 0 :\n\t\t\t\t(align == Align.Top_Right || align == Align.Middle_Right || align == Align.Bottom_Right) ? (bw - tw) : (bw - tw) / 2);\n\t\t\tty = by + ((align == Align.Top_Left || align == Align.Top_Center || align == Align.Top_Right) ? 0 :\n\t\t\t\t(align == Align.Bottom_Left || align == Align.Bottom_Center || align == Align.Bottom_Right) ? (bh - th) : (bh - th) / 2);\n\n\t\t\treturn new geom.Rectangle(tx, ty, tw, th);\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Raffle<T = any> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(values:T[] = null) {\n\t\t\tif (values) {\n\t\t\t\tthis.set(values);\n\t\t\t} else {\n\t\t\t\tthis.initValues = this.restValues = null;\n\t\t\t\tthis.restCount = this.restValues.length;\n\t\t\t\tthis.isEmpty = true;\n\t\t\t}\n\t\t\tthis.onCheck = null;\n\t\t\tthis.isAutoResetEnabled = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(values:T[]):void {\n\t\t\tthis.initValues = values.concat();\n\t\t\tthis.reset();\n\t\t}\n\n\t\tpublic get():T {\n\t\t\tif (this.isEmpty && this.isAutoResetEnabled) {\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t\tconst index:number = Math.floor(Math.random() * this.restCount);\n\t\t\tconst value:T = this.restValues[index];\n\t\t\tlet result:boolean = true;\n\t\t\tif (this.onCheck) result = this.onCheck(value);\n\t\t\tif (result) {\n\t\t\t\tthis.restValues.splice(index, 1);\n\t\t\t\tthis.restCount = this.restValues.length;\n\t\t\t\tthis.isEmpty = this.restCount == 0;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tpublic reset():void {\n\t\t\tthis.restValues = this.initValues.concat();\n\t\t\tthis.restCount = this.restValues.length;\n\t\t\tthis.isEmpty = this.restCount == 0;\n\t\t}\n\n\t\tpublic getRestCount():number {\n\t\t\treturn this.restCount;\n\t\t}\n\n\t\tpublic getIsEmply():boolean {\n\t\t\treturn this.isEmpty;\n\t\t}\n\n\t\tpublic getIsAutoResetEnabled():boolean {\n\t\t\treturn this.isAutoResetEnabled;\n\t\t}\n\n\t\tpublic setIsAutoResetEnabled(enabled:boolean):void {\n\t\t\tthis.isAutoResetEnabled = enabled;\n\t\t}\n\n\t\tpublic static createIndices(count:number):Raffle<number> {\n\t\t\tconst values:number[] = new Array(count);\n\t\t\tfor (let i:number = 0; i < count; ++i) values[i] = i;\n\t\t\treturn new Raffle<number>(values);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic onCheck:(value:T) => boolean;\n\n\t\tprivate isAutoResetEnabled:boolean;\n\t\tprivate isEmpty:boolean;\n\t\tprivate restCount:number;\n\t\tprivate restValues:T[];\n\t\tprivate initValues:T[];\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Rotator {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(angle:number = 0, velocity:number = 0, radian:boolean = true) {\n\t\t\tthis.setAngle(angle, radian);\n\t\t\tthis.setVelocity(velocity, radian);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getAngle(radian:boolean = true):number {\n\t\t\treturn radian ? this.angle : (this.angle * 180 / Math.PI);\n\t\t}\n\n\t\tpublic setAngle(angle:number, radian:boolean = true):void {\n\t\t\tthis.angle = radian ? angle : (angle * Math.PI / 180);\n\t\t}\n\n\t\tpublic getVelocity(radian:boolean = true):number {\n\t\t\treturn radian ? this.velocity : (this.velocity * 180 / Math.PI);\n\t\t}\n\n\t\tpublic setVelocity(velocity:number, radian:boolean = true):void {\n\t\t\tthis.velocity = radian ? velocity : (velocity * Math.PI / 180);\n\t\t}\n\n\t\tpublic update():void {\n\t\t\tthis.angle += this.velocity;\n\t\t}\n\n\t\tpublic getSin(length:number = 1):number {\n\t\t\treturn length * Math.sin(this.angle);\n\t\t}\n\n\t\tpublic getCos(length:number = 1):number {\n\t\t\treturn length * Math.cos(this.angle);\n\t\t}\n\n\t\tpublic getTan(length:number = 1):number {\n\t\t\treturn length * Math.tan(this.angle);\n\t\t}\n\n\t\tpublic getMagnitude(length:number = 1):number {\n\t\t\treturn length * (1 + Math.sin(this.angle)) / 2;\n\t\t}\n\n\t\tpublic getVector(length:number = 1, xy:{ x:number, y:number } = null):{ x:number, y:number } {\n\t\t\tif (xy != null) {\n\t\t\t\txy.x = this.getCos(length);\n\t\t\t\txy.y = this.getSin(length);\n\t\t\t} else {\n\t\t\t\treturn { x: this.getCos(length), y: this.getSin(length) };\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate angle:number;\n\t\tprivate velocity:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Pager extends alm.event.EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\n\t\t\tthis.isLoopEnabled = true;\n\n\t\t\tthis.itemCount = 0;\n\t\t\tthis.itemIds = null;\n\t\t\tthis.itemIndexById = null;\n\n\t\t\tthis.onChange = null;\n\t\t\tthis.onPrev = null;\n\t\t\tthis.onNext = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic setupById(ids:string[]):void {\n\t\t\tthis.itemCount = ids.length;\n\t\t\tthis.itemIds = ids;\n\n\t\t\tthis.itemIndexById = {};\n\t\t\tfor (let i:number = 0; i < this.itemCount; ++i) {\n\t\t\t\tthis.itemIndexById[this.itemIds[i]] = i;\n\t\t\t}\n\n\t\t\tthis.setup();\n\t\t}\n\n\t\tpublic setupByCount(itemCount:number):void {\n\t\t\tthis.itemCount = itemCount;\n\n\t\t\tthis.itemIds = null;\n\t\t\tthis.itemIndexById = null;\n\n\t\t\tthis.setup();\n\t\t}\n\n\t\tprivate setup():void {\n\t\t\tthis.newItemIndex = -1;\n\t\t\tthis.oldItemIndex = -1;\n\n\t\t\tthis.newItemId = null;\n\t\t\tthis.oldItemId = null;\n\t\t}\n\n\t\tpublic gotoByIndex(itemIndex:number, useTransition:boolean = true):boolean {\n\t\t\tif (itemIndex < 0 || itemIndex >= this.itemCount) itemIndex = -1;\n\t\t\tif (itemIndex == this.newItemIndex) return false;\n\n\t\t\tthis.oldItemIndex = this.newItemIndex;\n\t\t\tthis.newItemIndex = itemIndex;\n\n\t\t\tif (this.itemIds) {\n\t\t\t\tthis.oldItemId = this.oldItemIndex != -1 ? this.itemIds[this.oldItemIndex] : null;\n\t\t\t\tthis.newItemId = this.newItemIndex != -1 ? this.itemIds[this.newItemIndex] : null;\n\t\t\t}\n\n\t\t\tthis.dispatchPagerEvent(PagerEvent.CHANGE, this.onChange, useTransition);\n\n\t\t\treturn true;\n\t\t}\n\n\t\tpublic gotoById(itemId:string, useTransition:boolean = true):boolean {\n\t\t\tconst itemIndex:number = this.itemIndexById.hasOwnProperty(itemId) ? this.itemIndexById[itemId] : -1;\n\t\t\treturn this.gotoByIndex(itemIndex, useTransition);\n\t\t}\n\n\t\tpublic prev(useTransition:boolean = true):boolean {\n\t\t\tlet itemIndex = this.newItemIndex - 1;\n\t\t\tif (this.isLoopEnabled && itemIndex < 0) itemIndex = this.itemCount - 1;\n\n\t\t\tconst result:boolean = this.gotoByIndex(itemIndex, useTransition);\n\t\t\tif (result) {\n\t\t\t\tthis.dispatchPagerEvent(PagerEvent.PREV, this.onPrev, useTransition);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tpublic next(useTransition:boolean = true):boolean {\n\t\t\tlet itemIndex = this.newItemIndex + 1;\n\t\t\tif (this.isLoopEnabled && itemIndex >= this.itemCount) itemIndex = 0;\n\n\t\t\tconst result:boolean = this.gotoByIndex(itemIndex, useTransition);\n\t\t\tif (result) {\n\t\t\t\tthis.dispatchPagerEvent(PagerEvent.NEXT, this.onNext, useTransition);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tprivate dispatchPagerEvent(eventType:string, callback:(event:PagerEvent) => void, useTransition:boolean):void {\n\t\t\tconst oldItemId:string = (this.itemIds && this.oldItemIndex != -1) ? this.itemIds[this.oldItemIndex] : null;\n\t\t\tconst newItemId:string = (this.itemIds && this.newItemIndex != -1) ? this.itemIds[this.newItemIndex] : null;\n\n\t\t\tconst event:PagerEvent = new PagerEvent(eventType, this, this.newItemIndex, this.oldItemIndex, this.newItemId, this.oldItemId, useTransition);\n\t\t\tif (callback) {\n\t\t\t\tcallback(event);\n\t\t\t}\n\t\t\tthis.dispatchEvent(event);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsLoopEnabled():boolean { return this.isLoopEnabled; }\n\t\tpublic setIsLoopEnabled(value:boolean):void { this.isLoopEnabled = value; }\n\t\tprivate isLoopEnabled:boolean;\n\n\t\tpublic getNewItemIndex():number { return this.newItemIndex; }\n\t\tprivate newItemIndex:number;\n\n\t\tpublic getOldItemIndex():number { return this.oldItemIndex; }\n\t\tprivate oldItemIndex:number;\n\n\t\tpublic getItemCount():number { return this.itemCount; }\n\t\tprivate itemCount:number;\n\n\t\tpublic getNewItemId():string { return this.newItemId; }\n\t\tprivate newItemId:string;\n\n\t\tpublic getOldItemId():string { return this.oldItemId; }\n\t\tprivate oldItemId:string;\n\n\t\tpublic getItemIds():string[] { return this.itemIds; }\n\t\tprivate itemIds:string[];\n\n\t\tprivate itemIndexById:Hash<number>;\n\n\t\tpublic onChange:(event:PagerEvent) => void;\n\t\tpublic onPrev:(event:PagerEvent) => void;\n\t\tpublic onNext:(event:PagerEvent) => void;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class PagerEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static CHANGE:string = 'change';\n\t\tpublic static PREV:string = 'prev';\n\t\tpublic static NEXT:string = 'next';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any, newItemIndex:number, oldItemIndex:number, newItemId:string, oldItemId:string, useTransition:boolean) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.newItemIndex = newItemIndex;\n\t\t\tthis.oldItemIndex = oldItemIndex;\n\t\t\tthis.newItemId = newItemId;\n\t\t\tthis.oldItemId = oldItemId;\n\t\t\tthis.useTransition = useTransition;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():PagerEvent {\n\t\t\treturn new PagerEvent(this.getType(), this.getTarget(), this.newItemIndex, this.oldItemIndex, this.newItemId, this.oldItemId, this.useTransition);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[PagerEvent] type = ' + this.getType() + ', ' + this.oldItemIndex + ' -> ' + this.newItemIndex + ', transition = ' + this.useTransition;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic newItemIndex:number;\n\t\tpublic oldItemIndex:number;\n\t\tpublic newItemId:string;\n\t\tpublic oldItemId:string;\n\t\tpublic useTransition:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Timer extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(interval:number = 1000, repeatCount:number = 0) {\n\t\t\tsuper();\n\t\t\tthis.interval = interval;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tId = -1;\n\t\t\tthis.reset();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\tthis.startInterval(this.tRestTime != -1 ? this.tRestTime : this.interval);\n\t\t}\n\n\t\tpublic stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tRestTime = this.getCurrentTime() - this.tStartTime;\n\t\t\tthis.stopInterval();\n\t\t}\n\n\t\tpublic reset():void {\n\t\t\tthis.stop();\n\t\t\tthis.elapsedCount = 0;\n\t\t\tthis.tRestTime = -1;\n\t\t}\n\n\t\tpublic restart():void {\n\t\t\tthis.reset();\n\t\t\tthis.start();\n\t\t}\n\n\n\n\n\n\t\tprivate getCurrentTime():number {\n\t\t\treturn new Date().valueOf();\n\t\t}\n\n\t\tprivate startInterval(interval:number):void {\n\t\t\tthis.stopInterval();\n\t\t\tthis.tInterval = interval;\n\t\t\tthis.tId = window.setInterval(this.timerHandler, this.tInterval);\n\t\t}\n\n\t\tprivate stopInterval():void {\n\t\t\tif (this.tId != -1) {\n\t\t\t\tclearInterval(this.tId);\n\t\t\t\tthis.tId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate dispatch(eventType:string):void {\n\t\t\tthis.dispatchEvent(new TimerEvent(eventType, this, this.elapsedCount, this.repeatCount, this.getRestCount()));\n\t\t}\n\n\t\tprivate timerHandler = ():void => {\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\t++this.elapsedCount;\n\t\t\tlet isCompleted:boolean = false;\n\t\t\tif (this.repeatCount > 0 && this.elapsedCount >= this.repeatCount) {\n\t\t\t\tisCompleted = true;\n\t\t\t\tthis.stop();\n\t\t\t} else if (this.tInterval != this.interval) {\n\t\t\t\tthis.startInterval(this.interval);\n\t\t\t}\n\t\t\tthis.dispatch(TimerEvent.TICK);\n\t\t\tif (isCompleted) {\n\t\t\t\tthis.dispatch(TimerEvent.COMPLETE);\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsRunning():boolean { return this.isRunning; }\n\t\tprivate isRunning:boolean;\n\n\t\tpublic getInterval():number { return this.interval; }\n\t\tpublic setInterval(interval:number):void { this.interval = interval; }\n\t\tprivate interval:number;\n\n\t\tpublic getElapsedTime():number { return this.getCurrentTime() - this.tStartTime; }\n\n\t\tpublic getRestTime():number { return this.interval - this.getElapsedTime(); }\n\n\t\tpublic getElapsedCount():number { return this.elapsedCount; }\n\t\tprivate elapsedCount:number;\n\n\t\tpublic getRepeatCount():number { return this.repeatCount; }\n\t\tpublic setRepeatCount(count:number):void { this.repeatCount = count; }\n\t\tprivate repeatCount:number;\n\n\t\tpublic getRestCount():number { return this.repeatCount - this.elapsedCount; }\n\n\t\tprivate tStartTime:number;\n\t\tprivate tRestTime:number;\n\t\tprivate tInterval:number;\n\t\tprivate tId:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\timport Event = alm.event.Event;\n\n\texport class TimerEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static TICK:string = 'tick';\n\t\tpublic static COMPLETE:string = 'complete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, elapsedCount:number = 0, repeatCount:number = 0, restCount:number = 0) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.elapsedCount = elapsedCount;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.restCount = restCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():TimerEvent {\n\t\t\treturn new TimerEvent(this.getType(), this.getTarget(), this.elapsedCount, this.repeatCount, this.restCount);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[TimerEvent] type = ' + this.getType() + ', elapsedCount = ' + this.elapsedCount + ', repeatCount=' + this.repeatCount + ', restCount=' + this.restCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic elapsedCount:number;\n\t\tpublic repeatCount:number;\n\t\tpublic restCount:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class ObjectPool<T> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * ObjectPool class.\n\t\t * @class\n\t\t * @param {function} onRequireItem This callback function is called when new item is required.\n\t\t * @param {function} onDestroyItem This callback function is called when item is disposed.\n\t\t * @param {number} initCount Init item count.\n\t\t * @param {number} growthCount Growth item count.\n\t\t *\n\t\t * @property {number} initCount Init item count.\n\t\t * @property {number} growthCount Growth item count.\n\t\t * @property {function} onRequireItem This callback function is called when new item is required.\n\t\t * @property {function} onDestroyItem This callback function is called when item is disposed.\n\t\t * @property {Array} items Array of items.\n\t\t * @property {number} index Current index of items.\n\t\t *\n\t\t * @return void\n\t\t */\n\t\tconstructor(onRequireItem:() => T, onDestroyItem:(item:T) => void, initCount:number = 100, growthCount:number = 50) {\n\t\t\tthis.onRequireItem = onRequireItem;\n\t\t\tthis.onDestroyItem = onDestroyItem;\n\t\t\tthis.growthCount = growthCount;\n\t\t\tthis.items = new Array(initCount);\n\t\t\tfor (let i = 0; i < initCount; ++i) {\n\t\t\t\tthis.items[i] = this.onRequireItem();\n\t\t\t}\n\t\t\tthis.index = initCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * Get item from object pool.\n\t\t * @return {T} Item\n\t\t */\n\t\tpublic getItem():T {\n\t\t\tif (this.index > 0) {\n\t\t\t\treturn this.items[--this.index];\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.growthCount; ++i) {\n\t\t\t\tthis.items.unshift(this.onRequireItem());\n\t\t\t}\n\t\t\tthis.index = this.growthCount;\n\t\t\treturn this.getItem();\n\t\t}\n\n\t\t/**\n\t\t * Return item to object pool.\n\t\t * @param {T} Item.\n\t\t * @return void\n\t\t */\n\t\tpublic returnItem(item:T):void {\n\t\t\tthis.items[this.index++] = item;\n\t\t}\n\n\t\t/**\n\t\t * Optimize object pool size.\n\t\t * @return void\n\t\t */\n\t\tpublic reduce():void {\n\t\t\tconst n = this.index;\n\t\t\tfor (let i = 0; i < n; ++i) {\n\t\t\t\tthis.onDestroyItem(this.items.shift());\n\t\t\t}\n\t\t\tthis.index = 0;\n\t\t}\n\n\t\t/**\n\t\t * Destroy object pool.\n\t\t * @return void\n\t\t */\n\t\tpublic destroy():void {\n\t\t\tconst n = this.items.length;\n\t\t\tfor (let i = 0; i < n; ++i) {\n\t\t\t\tthis.onDestroyItem(this.items[i]);\n\t\t\t}\n\t\t\tthis.index = 0;\n\t\t\tthis.items = null;\n\t\t\tthis.onRequireItem = null;\n\t\t\tthis.onDestroyItem = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate items:T[];\n\t\tprivate index:number;\n\t\tprivate growthCount:number;\n\n\t\tpublic onRequireItem:() => T;\n\t\tpublic onDestroyItem:(item:T) => void;\n\t}\n}\n","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class CommandUtil {\n\n\t\tpublic static stop(command:cmd.Command):any {\n\t\t\tif (command) command.interrupt();\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic static sequence(execute:boolean, ...commands:(cmd.Command|Function)[]):cmd.Serial {\n\t\t\tconst c:cmd.Serial = new cmd.Serial();\n\t\t\tc.addCommand(...commands);\n\t\t\tif (execute) c.execute();\n\t\t\treturn c;\n\t\t}\n\n\t\tpublic static single(execute:boolean, command:cmd.Command):cmd.Command {\n\t\t\tif (execute && command) command.execute();\n\t\t\treturn command;\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport type CompleteFunction = (content:any) => void;\n\texport type ErrorFunction = (message:string) => void;\n\n\texport class AssetLoader {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tthis.isLoading_ = false;\n\n\t\t\tthis.currentCount = 0;\n\t\t\tthis.totalCount = 0;\n\n\t\t\tthis.loadingQueries = [];\n\t\t\tthis.loadingQueryIndex = -1;\n\n\t\t\tthis.queriesByQueryId = {};\n\t\t\tthis.queriesByUrl = {};\n\n\t\t\tthis.handlersByType = {};\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic require(url:string, type:string):string {\n\t\t\treturn this.addQuery(type, url, {});\n\t\t}\n\n\t\tprivate addQuery(type:string, url:string, param:any):string {\n\t\t\tif (this.queriesByUrl[url]) return this.queriesByUrl[url].id;\n\n\t\t\tconst query:FileQuery = new FileQuery();\n\t\t\tquery.id = String(AssetLoader.id);\n\t\t\tquery.type = type;\n\t\t\tquery.url = url;\n\t\t\tquery.param = param;\n\t\t\tthis.loadingQueries.push(query);\n\t\t\tthis.queriesByQueryId[query.id] = query;\n\t\t\tthis.queriesByUrl[query.url] = query;\n\t\t\t++AssetLoader.id;\n\t\t\treturn query.id;\n\t\t}\n\n\t\tpublic load():void {\n\t\t\tif (this.isLoading_) return;\n\t\t\tthis.isLoading_ = true;\n\t\t\tthis.loadingQueryIndex = -1;\n\t\t\tthis.next();\n\t\t}\n\n\t\tprivate next():void {\n\t\t\tthis.currentCount = this.loadingQueryIndex + 1;\n\t\t\tthis.totalCount = this.loadingQueries.length;\n\n\t\t\tif (this.currentCount > 0) {\n\t\t\t\tthis.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.PROGRESS, this, this.currentCount / this.totalCount, this.currentCount, this.totalCount));\n\t\t\t}\n\n\t\t\tif (this.currentCount < this.totalCount) {\n\t\t\t\tthis.loadingQueryIndex++;\n\t\t\t\tconst query:FileQuery = this.loadingQueries[this.loadingQueryIndex];\n\t\t\t\tquery.isLoading = true;\n\t\t\t\tquery.isLoadComplete = false;\n\t\t\t\ttrace('[AssetLoader] loading... ' + '\\'' + query.url + '' as '' + query.type + '\\'');\n\n\t\t\t\tconst handler:IFileHandler = this.handlersByType[query.type];\n\t\t\t\tif (handler) {\n\t\t\t\t\thandler.load(query.url, (content:any):void => {\n\t\t\t\t\t\tthis.fileLoadCompleteHandler(query, content);\n\t\t\t\t\t},(message:string = ''):void => {\n\t\t\t\t\t\tthis.fileLoadErrorHandler(query, message);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\ttrace('[AssetLoader] handler is not found \\'' + query.type + '\\'');\n\t\t\t\t\tthis.next();\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tthis.isLoading_ = false;\n\t\t\t\tthis.loadingQueries = [];\n\t\t\t\tthis.loadingQueryIndex = -1;\n\t\t\t\tthis.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.COMPLETE, this, this.currentCount / this.totalCount, this.currentCount, this.totalCount));\n\t\t\t}\n\t\t}\n\n\t\tpublic addHandler(handler:IFileHandler):void {\n\t\t\tthis.handlersByType[handler.getType()] = handler;\n\t\t}\n\n\t\tprivate fileLoadCompleteHandler = (query:FileQuery, content:any):void => {\n\t\t\tquery.isLoading = false;\n\t\t\tquery.isLoadComplete = true;\n\t\t\tquery.content = content;\n\t\t\tif (query.param.onLoad) {\n\t\t\t\tquery.param.onLoad(content);\n\t\t\t}\n\t\t\tthis.next();\n\t\t};\n\n\t\tprivate fileLoadErrorHandler = (query:FileQuery, message:string):void => {\n\t\t\tquery.isLoading = false;\n\t\t\tquery.isLoadComplete = true;\n\t\t\tif (query.param.onError) {\n\t\t\t\tquery.param.onError(message);\n\t\t\t}\n\t\t\tthis.next();\n\t\t};\n\n\t\tpublic addLoadUpdateListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.addEventListener(AssetLoaderEvent.PROGRESS, listener);\n\t\t}\n\n\t\tpublic removeLoadUpdateListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.removeEventListener(AssetLoaderEvent.PROGRESS, listener);\n\t\t}\n\n\t\tpublic addLoadCompleteListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.addEventListener(AssetLoaderEvent.COMPLETE, listener);\n\t\t}\n\n\t\tpublic removeLoadCompleteListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.removeEventListener(AssetLoaderEvent.COMPLETE, listener);\n\t\t}\n\n\t\tpublic getQueryByQueryId(queryId:string):FileQuery {\n\t\t\treturn this.queriesByQueryId[queryId];\n\t\t}\n\n\n\t\tpublic getQueryByUrl(url:string):FileQuery {\n\t\t\treturn this.queriesByUrl[url];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic isLoading():boolean { return this.isLoading_; }\n\t\tprivate isLoading_:boolean;\n\n\t\tpublic getCurrentCount():number { return this.currentCount; }\n\t\tprivate currentCount:number;\n\n\t\tpublic getTotalCount():number { return this.totalCount; }\n\t\tprivate totalCount:number;\n\n\t\tpublic getContentByUrl<T = any>(url:string):T { return this.queriesByUrl[url].content; }\n\t\tpublic getContentByQueryId<T = any>(textureId:string):T { return this.queriesByQueryId[textureId].content; }\n\n\t\tprivate loadingQueries:FileQuery[];\n\t\tprivate loadingQueryIndex:number;\n\n\t\tprivate queriesByQueryId:util.Hash<FileQuery>;\n\t\tprivate queriesByUrl:util.Hash<FileQuery>;\n\n\t\tprivate handlersByType:util.Hash<IFileHandler>;\n\n\t\tprivate eventDispatcher:alm.event.EventDispatcher;\n\n\t\tprivate static id:number = 0;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport class AssetLoaderEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic PROGRESS:string = 'progress';\n\t\tstatic COMPLETE:string = 'complete';\n\t\tstatic ERROR:string = 'error';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, progress:number = 0, loadedCount:number = 0, totalCount:number = 0, content:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.progress = progress;\n\t\t\tthis.loadedCount = loadedCount;\n\t\t\tthis.totalCount = totalCount;\n\t\t\tthis.content = content;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():AssetLoaderEvent {\n\t\t\treturn new AssetLoaderEvent(this.getType(), this.getTarget(), this.progress, this.loadedCount, this.totalCount, this.content);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[AssetLoaderEvent] type = ' + this.getType() + ', progress = ' + this.progress + ', loadedCount = ' + this.loadedCount + ', totalCount = ' + this.totalCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic progress:number;\n\t\tpublic loadedCount:number;\n\t\tpublic totalCount:number;\n\t\tpublic content:any;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport class FileQuery {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoadComplete = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic id:string;\n\t\tpublic type:string;\n\t\tpublic url:string;\n\t\tpublic param:any;\n\t\tpublic content:any;\n\t\tpublic isLoading:boolean;\n\t\tpublic isLoadComplete:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\timport Logger = alm.util.Logger;\n\n\texport abstract class View<T = any> extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(view:T = null, id:string = null) {\n\t\t\tsuper();\n\t\t\tthis.id = id != null ? id : String(View.viewCount);\n\t\t\tthis.view = view;\n\t\t\tthis.name = '';\n\t\t\tthis.autoHideWithInit = true;\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = false;\n\t\t\tthis.isReadying = false;\n\t\t\tthis.isReadied = false;\n\t\t\tthis.isShowing = false;\n\t\t\tthis.isShown = true;\n\t\t\tthis.isHiding = false;\n\n\t\t\tif (View.viewsById[this.id]) {\n\t\t\t\tLogger.warn('View id \\'' + this.id + '\\' is already exists.')\n\t\t\t}\n\t\t\tView.viewsById[this.id] = this;\n\t\t\t++View.viewCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic initialize():void {\n\t\t\tif (this.isInitializing || this.isInitialized) return;\n\t\t\tthis.isInitializing = true;\n\n\t\t\t//if (View.viewsById[this.id] == null) {\n\t\t\t//\tView.viewsById[this.id] = this;\n\t\t\t//}\n\n\t\t\tthis.view = this.implInitialize();\n\t\t\tif (this.isInitializing) {\n\t\t\t\tthrowError(this.name || this, 'view is null', !this.view);\n\t\t\t\tthis.hide(false);\n\t\t\t\tthis.isInitializing = false;\n\t\t\t\tthis.isInitialized = true;\n\t\t\t} else {\n\t\t\t\t// finalized while initializing\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t}\n\n\t\tpublic ready():void {\n\t\t\tif (this.isReadying || this.isReadied) return;\n\t\t\tthis.isReadying = true;\n\t\t\tthrowError(this.name || this, 'ready() was called without being initialized', !this.isInitialized);\n\t\t\tthis.implReady();\n\t\t\tthis.isReadying = false;\n\t\t\tthis.isReadied = true;\n\t\t}\n\n\t\tpublic finalize():void {\n\t\t\tif (!this.isInitializing && !this.isInitialized) return;\n\t\t\tthis.implFinalize();\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = false;\n\n\t\t\tdelete View.viewsById[this.id];\n\t\t\tView.viewsById[this.id] = null;\n\t\t}\n\n\t\tpublic show(useTransition:boolean = true):void {\n\t\t\tif (this.isShown) return;\n\t\t\tthis.getShowCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic hide(useTransition:boolean = true):void {\n\t\t\tif (!this.isShown) return;\n\t\t\tthis.getHideCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic getShowCommand(useTransition:boolean = true):cmd.Command {\n\t\t\tconst command:cmd.Serial = new cmd.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tif (this.isShown) return;\n\t\t\t\t\tthrowError(this.name || this, 'getShowCommand() was called without being initialized', this.isInitializing || !this.isInitialized);\n\t\t\t\t\tthrowWarn(this.name || this, 'getShowCommand() was called without being ready', this.isReadying|| !this.isReadied);\n\t\t\t\t\tthis.isShown = true;\n\t\t\t\t\tthis.isShowing = true;\n\t\t\t\t\tthis.isHiding = false;\n\n\t\t\t\t\tif (this.showCommand) {\n\t\t\t\t\t\tthis.showCommand.interrupt();\n\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.hideCommand) {\n\t\t\t\t\t\tthis.hideCommand.interrupt();\n\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.showCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implShow(this.view, useTransition),\n\t\t\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic getHideCommand(useTransition:boolean = true):cmd.Command {\n\t\t\tconst command:cmd.Serial = new cmd.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tif (!this.isShown) return;\n\t\t\t\t\tif (!this.isInitializing) {\n\t\t\t\t\t\tthrowError(this.name || this, 'getHideCommand() was called without being initialized', this.isInitializing || !this.isInitialized);\n\t\t\t\t\t\tthrowWarn(this.name || this, 'getHideCommand() was called without being ready', this.isReadying || !this.isReadied);\n\t\t\t\t\t}\n\t\t\t\t\tthis.isShown = false;\n\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\tthis.isHiding = true;\n\n\t\t\t\t\tif (this.showCommand) {\n\t\t\t\t\t\tthis.showCommand.interrupt();\n\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.hideCommand) {\n\t\t\t\t\t\tthis.hideCommand.interrupt();\n\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.hideCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implHide(this.view, useTransition),\n\t\t\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t\t\tthis.isHiding = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic getIsInitializing():boolean {\n\t\t\treturn this.isInitializing;\n\t\t}\n\n\t\tpublic getIsInitialized():boolean {\n\t\t\treturn this.isInitialized;\n\t\t}\n\n\t\tpublic getIsReadying():boolean {\n\t\t\treturn this.isReadying;\n\t\t}\n\n\t\tpublic getIsReadied():boolean {\n\t\t\treturn this.isReadied;\n\t\t}\n\n\t\tpublic getIsShowing():boolean {\n\t\t\treturn this.isShowing;\n\t\t}\n\n\t\tpublic getIsShown():boolean {\n\t\t\treturn this.isShown;\n\t\t}\n\n\t\tpublic getIsHiding():boolean {\n\t\t\treturn this.isHiding;\n\t\t}\n\n\t\tpublic getIsHidden():boolean {\n\t\t\treturn !this.isShown;\n\t\t}\n\n\t\tpublic getId():string {\n\t\t\treturn this.id;\n\t\t}\n\n\t\tpublic getView():T {\n\t\t\treturn this.view;\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic setName(value:string):void {\n\t\t\tthis.name = value;\n\t\t}\n\n\t\tpublic getAutoHideWithInit():boolean {\n\t\t\treturn this.autoHideWithInit;\n\t\t}\n\n\t\tpublic setAutoHideWithInit(value:boolean):void {\n\t\t\tthis.autoHideWithInit = value;\n\t\t}\n\n\n\n\n\n\t\tprotected abstract implInitialize():T;\n\t\tprotected abstract implReady():void;\n\t\tprotected abstract implFinalize():void;\n\t\tprotected abstract implShow(view:T, useTransition:boolean):cmd.Command;\n\t\tprotected abstract implHide(view:T, useTransition:boolean):cmd.Command;\n\n\n\n\n\n\t\tpublic static getViewById(id:string):View {\n\t\t\treturn View.viewsById[id];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate id:string;\n\t\tprivate view:T;\n\t\tprivate name:string;\n\t\tprivate autoHideWithInit:boolean;\n\t\tprivate showCommand:cmd.Command;\n\t\tprivate hideCommand:cmd.Command;\n\t\tprivate isInitializing:boolean;\n\t\tprivate isInitialized:boolean;\n\t\tprivate isReadying:boolean;\n\t\tprivate isReadied:boolean;\n\t\tprivate isShowing:boolean;\n\t\tprivate isShown:boolean;\n\t\tprivate isHiding:boolean;\n\n\t\tprivate static viewCount:number = 0;\n\t\tprivate static viewsById:util.Hash<View> = {};\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\texport class ButtonBehavior {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:IButton, hitArea:HTMLElement = null, isHoverCursorEnabled:boolean = true, isPreventDefaultEnabled:boolean = true, isStopPropagationEnabled:boolean = true) {\n\t\t\tthis.target = target;\n\t\t\tthis.hitArea = null;\n\t\t\tthis.isHoverCursorEnabled = isHoverCursorEnabled;\n\t\t\tthis.isPreventDefaultEnabled = isPreventDefaultEnabled;\n\t\t\tthis.isStopPropagationEnabled = isStopPropagationEnabled;\n\t\t\tthis.isOver = false;\n\t\t\tthis.isDown = false;\n\t\t\tthis.defaultMouseCursor = '';\n\n\t\t\tthis.setHitArea(hitArea);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic over(useTransition:boolean = true):void {\n\t\t\tif (this.isOver) return;\n\t\t\tthis.isOver = true;\n\t\t\tthis.target.implButtonOver(useTransition);\n\t\t}\n\n\t\tpublic out(useTransition:boolean = true):void {\n\t\t\tif (!this.isOver) return;\n\t\t\tthis.isOver = false;\n\t\t\tthis.target.implButtonOut(useTransition);\n\t\t}\n\n\t\tpublic down(useTransition:boolean = true):void {\n\t\t\tif (this.isDown) return;\n\t\t\tthis.isDown = true;\n\t\t\tthis.target.implButtonDown(useTransition);\n\t\t}\n\n\t\tpublic up(useTransition:boolean = true):void {\n\t\t\tif (!this.isDown) return;\n\t\t\tthis.isDown = false;\n\t\t\tthis.target.implButtonUp(useTransition);\n\t\t}\n\n\t\tpublic click(useTransition:boolean = true):void {\n\t\t\tthis.target.implButtonClick(useTransition);\n\t\t}\n\n\t\tprivate on():void {\n\t\t\tthis.hitArea.addEventListener('mouseover', this.mouseOverHandler);\n\t\t\tthis.hitArea.addEventListener('mouseout', this.mouseOutHandler);\n\t\t\tthis.hitArea.addEventListener('mousedown', this.mouseDownHandler);\n\t\t\tthis.hitArea.addEventListener('mouseup', this.mouseUpHandler);\n\t\t\tthis.hitArea.addEventListener('click', this.clickHandler);\n\n\t\t\t//this.hitArea.addEventListener('touchstart', this.touchStartHandler);\n\t\t\t//this.hitArea.addEventListener('touchend', this.touchEndHandler);\n\t\t\t//this.hitArea.addEventListener('touchcancel', this.touchCancelHandler);\n\t\t}\n\n\t\tprivate off():void {\n\t\t\tthis.hitArea.removeEventListener('mouseover', this.mouseOverHandler);\n\t\t\tthis.hitArea.removeEventListener('mouseout', this.mouseOutHandler);\n\t\t\tthis.hitArea.removeEventListener('mousedown', this.mouseDownHandler);\n\t\t\tthis.hitArea.removeEventListener('mouseup', this.mouseUpHandler);\n\t\t\tthis.hitArea.removeEventListener('click', this.clickHandler);\n\n\t\t\t//this.hitArea.removeEventListener('touchstart', this.touchStartHandler);\n\t\t\t//this.hitArea.removeEventListener('touchend', this.touchEndHandler);\n\t\t\t//this.hitArea.removeEventListener('touchcancel', this.touchCancelHandler);\n\t\t}\n\n\t\tpublic getIsOver():boolean {\n\t\t\treturn this.isOver;\n\t\t}\n\n\t\tpublic getIsDown():boolean {\n\t\t\treturn this.isDown;\n\t\t}\n\n\t\tpublic getHitArea():HTMLElement {\n\t\t\treturn this.hitArea;\n\t\t}\n\n\t\tpublic setHitArea(hitArea:HTMLElement):void {\n\t\t\tif (this.hitArea !== hitArea) {\n\t\t\t\tif (this.hitArea !== null) {\n\t\t\t\t\tthis.off();\n\t\t\t\t}\n\t\t\t\tthis.hitArea = hitArea;\n\t\t\t\tif (this.hitArea !== null) {\n\t\t\t\t\tthis.on();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic clearHitArea():void {\n\t\t\tthis.setHitArea(null);\n\t\t}\n\n\t\tpublic getIsPreventDefaultEnabled():boolean {\n\t\t\treturn this.isPreventDefaultEnabled;\n\t\t}\n\n\t\tpublic setIsPreventDefaultEnabled(enabled:boolean):void {\n\t\t\tthis.isPreventDefaultEnabled = enabled;\n\t\t}\n\n\t\tpublic getIsStopPropagationEnabled():boolean {\n\t\t\treturn this.isStopPropagationEnabled;\n\t\t}\n\n\t\tpublic setIsStopPropagationEnabled(enabled:boolean):void {\n\t\t\tthis.isStopPropagationEnabled = enabled;\n\t\t}\n\n\t\tpublic getIsHoverCursorEnabled():boolean {\n\t\t\treturn this.isHoverCursorEnabled;\n\t\t}\n\n\t\tpublic setIsHoverCursorEnabled(enabled:boolean):void {\n\t\t\tthis.isHoverCursorEnabled = enabled;\n\t\t}\n\n\t\t// --------------------------------------------------\n\t\t// Mouse Event\n\n\t\tprivate mouseOverHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tif (this.isHoverCursorEnabled) {\n\t\t\t\tthis.defaultMouseCursor = this.hitArea.style.cursor;\n\t\t\t\tthis.hitArea.style.cursor = 'pointer';\n\t\t\t}\n\t\t\tthis.over();\n\t\t};\n\n\t\tprivate mouseOutHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tif (this.isHoverCursorEnabled) {\n\t\t\t\tthis.hitArea.style.cursor = this.defaultMouseCursor != '' ? this.defaultMouseCursor : 'pointer';\n\t\t\t}\n\t\t\tthis.out();\n\t\t};\n\n\t\tprivate mouseDownHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.down();\n\t\t};\n\n\t\tprivate mouseUpHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.up();\n\t\t};\n\n\t\tprivate clickHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.click();\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Touch Event\n\n\t\tprivate touchStartHandler = (event:TouchEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.down();\n\t\t};\n\n\t\tprivate touchEndHandler = (event:TouchEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.up();\n\t\t};\n\n\t\tprivate touchCancelHandler = (event:TouchEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.up();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:IButton;\n\t\tprivate hitArea:HTMLElement;\n\t\tprivate isOver:boolean;\n\t\tprivate isDown:boolean;\n\t\tprivate isPreventDefaultEnabled:boolean;\n\t\tprivate isStopPropagationEnabled:boolean;\n\t\tprivate isHoverCursorEnabled:boolean;\n\t\tprivate defaultMouseCursor:string;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\texport class SelectionBehavior {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:ISelection) {\n\t\t\tthis.target = target;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic select(useTransition:boolean = true):void {\n\t\t\tif (this.isSelected) return;\n\t\t\tthis.isSelected = true;\n\t\t\tthis.target.implSelectionChanged(this.isSelected, useTransition);\n\t\t}\n\n\t\tpublic deselect(useTransition:boolean = true):void {\n\t\t\tif (!this.isSelected) return;\n\t\t\tthis.isSelected = false;\n\t\t\tthis.target.implSelectionChanged(this.isSelected, useTransition);\n\t\t}\n\n\t\tpublic getIsSelected():boolean {\n\t\t\treturn this.isSelected;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:ISelection;\n\t\tprivate isSelected:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class DeviceInfo {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tconst u:string = window.navigator.userAgent.toLowerCase();\n\n\t\t\t// Device\n\t\t\tthis.isTablet = (u.indexOf('windows') != -1 && u.indexOf('touch') != -1)\n\t\t\t\t|| u.indexOf('ipad') != -1\n\t\t\t\t|| (u.indexOf('android') != -1 && u.indexOf('mobile') == -1)\n\t\t\t\t|| (u.indexOf('firefox') != -1 && u.indexOf('tablet') != -1)\n\t\t\t\t|| u.indexOf('kindle') != -1\n\t\t\t\t|| u.indexOf('silk') != -1\n\t\t\t\t|| u.indexOf('playbook') != -1;\n\n\t\t\tthis.isMobile = (u.indexOf('windows') != -1 && u.indexOf('phone') != -1)\n\t\t\t\t|| u.indexOf('iphone') != -1\n\t\t\t\t|| u.indexOf('ipod') != -1\n\t\t\t\t|| (u.indexOf('android') != -1 && u.indexOf('mobile') != -1)\n\t\t\t\t|| (u.indexOf('firefox') != -1 && u.indexOf('mobile') != -1)\n\t\t\t\t|| u.indexOf('blackberry') != -1;\n\n\t\t\tthis.isDesktop = !this.isTablet && !this.isMobile;\n\n\t\t\t// OS\n\t\t\tthis.isIOS = u.indexOf('ipad') != -1 || u.indexOf('iphone') != -1 || u.indexOf('ipod') != -1;\n\t\t\tthis.isAndroid = u.indexOf('android') != -1 && u.indexOf('mobile') != -1;\n\n\t\t\t// Browser\n\t\t\tif(u.indexOf('msie') != -1 || u.indexOf('trident') != -1) {\n\t\t\t\tthis.isIE = true;\n\t\t\t} else if(u.indexOf('edge') != -1) {\n\t\t\t\tthis.isEdge = true;\n\t\t\t} else if(u.indexOf('chrome') != -1) {\n\t\t\t\tthis.isChrome = true;\n\t\t\t} else if(u.indexOf('safari') != -1) {\n\t\t\t\tthis.isSafari = true;\n\t\t\t} else if(u.indexOf('firefox') != -1) {\n\t\t\t\tthis.isFireFox = true;\n\t\t\t} else if(u.indexOf('opera') != -1) {\n\t\t\t\tthis.isOpera = true;\n\t\t\t} else {\n\t\t\t\tthis.isUnknownBrowser = true;\n\t\t\t}\n\n\t\t\t// Function\n\t\t\tthis.isTouchEnabled = (typeof window.ontouchstart) !== 'undefined';\n\t\t\tthis.isDownloadEnabled = !this.isIOS;\n\n\t\t\t// Resolution\n\t\t\tthis.isRetina = Math.round(window.devicePixelRatio) == 2;\n\t\t}\n\n\t\t// --------------------\n\t\t// Device\n\n\t\tpublic static getIsDesktop():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isDesktop;\n\t\t}\n\n\t\tpublic static getIsTablet():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isTablet;\n\t\t}\n\n\t\tpublic static getIsMobile():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isMobile;\n\t\t}\n\n\t\t// --------------------\n\t\t// OS\n\n\t\tpublic static getIsIOS():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isIOS;\n\t\t}\n\n\t\tpublic static getIsAndroid():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isAndroid;\n\t\t}\n\n\t\tpublic static getIsRetina():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isRetina;\n\t\t}\n\n\t\t// --------------------\n\t\t// Browser\n\n\t\tpublic static getIsIE():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isIE;\n\t\t}\n\n\t\tpublic static getIsEdge():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isEdge;\n\t\t}\n\n\t\tpublic static getIsChrome():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isChrome;\n\t\t}\n\n\t\tpublic static getIsSafari():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isSafari;\n\t\t}\n\n\t\tpublic static getIsFireFox():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isFireFox;\n\t\t}\n\n\t\tpublic static getIsOpera():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isOpera;\n\t\t}\n\n\t\tpublic static getIsUnknownBrowser():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isUnknownBrowser;\n\t\t}\n\n\t\t// --------------------\n\t\t// Function\n\n\t\tpublic static getIsTouchEnabled():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isTouchEnabled;\n\t\t}\n\n\t\tpublic static getIsDownloadEnabled():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isDownloadEnabled;\n\t\t}\n\n\t\t// --------------------\n\t\t// Resolution\n\n\t\tpublic static getDpi():number {\n\t\t\tif (this.dpi == -1) {\n\t\t\t\tconst div:HTMLElement = document.createElement('div');\n\t\t\t\tdiv.setAttribute('style', 'height:1in;left:-100%;top:-100%;position:absolute;width:1in;');\n\t\t\t\tdocument.body.appendChild(div);\n\t\t\t\tthis.dpi = div.offsetHeight;\n\t\t\t\tdocument.body.removeChild(div);\n\t\t\t}\n\t\t\treturn this.dpi;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static isDesktop:boolean = false;\n\t\tprivate static isTablet:boolean = false;\n\t\tprivate static isMobile:boolean = false;\n\n\t\tprivate static isIOS:boolean = false;\n\t\tprivate static isAndroid:boolean = false;\n\n\t\tprivate static isIE:boolean = false;\n\t\tprivate static isEdge:boolean = false;\n\t\tprivate static isChrome:boolean = false;\n\t\tprivate static isSafari:boolean = false;\n\t\tprivate static isFireFox:boolean = false;\n\t\tprivate static isOpera:boolean = false;\n\t\tprivate static isUnknownBrowser:boolean = false;\n\n\t\tprivate static isTouchEnabled:boolean = false;\n\t\tprivate static isDownloadEnabled:boolean = false;\n\n\t\tprivate static isRetina:boolean = false;\n\t\tprivate static dpi:number = -1;\n\n\t\tprivate static isInitialized:boolean = false;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class LocalStorage {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t * @param value \n\t\t * @param expiredAt UNIX\n\t\t * @returns {boolean} true\n\t\t */\n\t\tpublic static save(key:string, value:any, expiredAt:number = -1):boolean {\n\t\t\tif (!LocalStorage.isAvailable()) return false;\n\t\t\tconst record:{ value:string; expiredAt:number } = { value:JSON.stringify(value), expiredAt: expiredAt };\n\t\t\tlocalStorage.setItem(key, JSON.stringify(record));\n\t\t\treturn true;\n\t\t}\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t * @param value \n\t\t * @param minutes \n\t\t * @returns {boolean} true\n\t\t */\n\t\tpublic static saveWithTerm(key:string, value:any, milliseconds:number = -1):boolean {\n\t\t\tconst expiredAt:number = milliseconds > 0 ? new Date().getTime() + milliseconds :-1;\n\t\t\treturn LocalStorage.save(key, value, expiredAt);\n\t\t}\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t * @returns {any} \n\t\t */\n\t\tpublic static load(key:string, defaultValue:any = null):any {\n\t\t\tif (!LocalStorage.isAvailable()) return defaultValue;\n\t\t\tconst record:{ value:string; expiredAt:number } = JSON.parse(localStorage.getItem(key));\n\t\t\tif (record) {\n\t\t\t\t// \n\t\t\t\tif (record.expiredAt > 0) {\n\t\t\t\t\t// \n\t\t\t\t\tif (new Date().getTime() < record.expiredAt) {\n\t\t\t\t\t\t// \n\t\t\t\t\t\treturn JSON.parse(record.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// \n\t\t\t\t\t\tlocalStorage.removeItem(key);\n\t\t\t\t\t\treturn defaultValue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// \n\t\t\t\t\treturn JSON.parse(record.value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// \n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t */\n\t\tpublic static remove(key:string):void {\n\t\t\tif (!LocalStorage.isAvailable()) return;\n\t\t\tlocalStorage.removeItem(key);\n\t\t}\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @returns {boolean} true\n\t\t */\n\t\tpublic static isAvailable():boolean {\n\t\t\tif (LocalStorage.isAvailable_ == null) {\n\t\t\t\ttry {\n\t\t\t\t\tlocalStorage.setItem('__CKECK__', '__CKECK__');\n\t\t\t\t\tlocalStorage.removeItem('__CKECK__');\n\t\t\t\t\tLocalStorage.isAvailable_ = true;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tLocalStorage.isAvailable_ = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn LocalStorage.isAvailable_;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param dates \n\t\t * @param hours \n\t\t * @param minutes \n\t\t * @param seconds \n\t\t * @param milliseconds \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static toMilliseconds(dates:number = 0, hours:number = 0, minutes:number = 0, seconds:number = 0, milliseconds:number = 0):number {\n\t\t\treturn milliseconds + (seconds + (minutes + (hours + dates * 24) * 60) * 60) * 1000;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static isAvailable_:boolean = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\t// https://github.com/nfriend/ts-keycode-enum\n\texport enum KeyCode {\n\t\tBackspace = 8,\n\t\tTab = 9,\n\t\tEnter = 13,\n\t\tShift = 16,\n\t\tCtrl = 17,\n\t\tAlt = 18,\n\t\tPauseBreak = 19,\n\t\tCapsLock = 20,\n\t\tEscape = 27,\n\t\tSpace = 32,\n\t\tPageUp = 33,\n\t\tPageDown = 34,\n\t\tEnd = 35,\n\t\tHome = 36,\n\n\t\tLeftArrow = 37,\n\t\tUpArrow = 38,\n\t\tRightArrow = 39,\n\t\tDownArrow = 40,\n\n\t\tInsert = 45,\n\t\tDelete = 46,\n\n\t\tKey0 = 48,\n\t\tKey1 = 49,\n\t\tKey2 = 50,\n\t\tKey3 = 51,\n\t\tKey4 = 52,\n\t\tKey5 = 53,\n\t\tKey6 = 54,\n\t\tKey7 = 55,\n\t\tKey8 = 56,\n\t\tKey9 = 57,\n\n\t\tClosedParen = Key0,\n\t\tExclamationMark = Key1,\n\t\tAtSign = Key2,\n\t\tPoundSign = Key3,\n\t\tHash = PoundSign,\n\t\tDollarSign = Key4,\n\t\tPercentSign = Key5,\n\t\tCaret = Key6,\n\t\tHat = Caret,\n\t\tAmpersand = Key7,\n\t\tStar = Key8,\n\t\tAsterik = Star,\n\t\tOpenParen = Key9,\n\n\t\tA = 65,\n\t\tB = 66,\n\t\tC = 67,\n\t\tD = 68,\n\t\tE = 69,\n\t\tF = 70,\n\t\tG = 71,\n\t\tH = 72,\n\t\tI = 73,\n\t\tJ = 74,\n\t\tK = 75,\n\t\tL = 76,\n\t\tM = 77,\n\t\tN = 78,\n\t\tO = 79,\n\t\tP = 80,\n\t\tQ = 81,\n\t\tR = 82,\n\t\tS = 83,\n\t\tT = 84,\n\t\tU = 85,\n\t\tV = 86,\n\t\tW = 87,\n\t\tX = 88,\n\t\tY = 89,\n\t\tZ = 90,\n\n\t\tLeftWindowKey = 91,\n\t\tRightWindowKey = 92,\n\t\tSelectKey = 93,\n\n\t\tNumpad0 = 96,\n\t\tNumpad1 = 97,\n\t\tNumpad2 = 98,\n\t\tNumpad3 = 99,\n\t\tNumpad4 = 100,\n\t\tNumpad5 = 101,\n\t\tNumpad6 = 102,\n\t\tNumpad7 = 103,\n\t\tNumpad8 = 104,\n\t\tNumpad9 = 105,\n\n\t\tMultiply = 106,\n\t\tAdd = 107,\n\t\tSubtract = 109,\n\t\tDecimalPoint = 110,\n\t\tDivide = 111,\n\n\t\tF1 = 112,\n\t\tF2 = 113,\n\t\tF3 = 114,\n\t\tF4 = 115,\n\t\tF5 = 116,\n\t\tF6 = 117,\n\t\tF7 = 118,\n\t\tF8 = 119,\n\t\tF9 = 120,\n\t\tF10 = 121,\n\t\tF11 = 122,\n\t\tF12 = 123,\n\n\t\tNumLock = 144,\n\t\tScrollLock = 145,\n\n\t\tSemiColon = 186,\n\t\tEquals = 187,\n\t\tComma = 188,\n\t\tDash = 189,\n\t\tPeriod = 190,\n\t\tUnderScore = Dash,\n\t\tPlusSign = Equals,\n\t\tForwardSlash = 191,\n\t\tTilde = 192,\n\t\tGraveAccent = Tilde,\n\n\t\tOpenBracket = 219,\n\t\tClosedBracket = 221,\n\t\tQuote = 222\n\t}\n\n\n\n\n\n\texport class KeyWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[KeyWatcher] start');\n\n\t\t\twindow.addEventListener('keydown', this.windowKeyDownHandler);\n\t\t\twindow.addEventListener('keyup', this.windowKeyUpHandler);\n\t\t}\n\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[KeyWatcher] stop');\n\n\t\t\twindow.removeEventListener('keydown', this.windowKeyDownHandler);\n\t\t\twindow.removeEventListener('keyup', this.windowKeyUpHandler);\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener);\n\t\t}\n\n\n\n\n\n\t\tprivate static windowKeyDownHandler = (event:KeyboardEvent):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] == null) {\n\t\t\t\tKeyWatcher.isKeyPressedByKeyCode[keyCode] = true;\n\t\t\t\t++KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_DOWN, KeyWatcher, event));\n\t\t\t} else if (KeyWatcher.isContinuousPressEnabled) {\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_DOWN, KeyWatcher, event));\n\t\t\t}\n\t\t};\n\n\t\tprivate static windowKeyUpHandler = (event:KeyboardEvent):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] != null) {\n\t\t\t\tdelete KeyWatcher.isKeyPressedByKeyCode[keyCode];\n\t\t\t\t--KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_UP, KeyWatcher, event));\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getIsAnyKeyPressed():boolean { return this.pressedKeyCount > 0; }\n\t\tprivate static pressedKeyCount:number = 0;\n\n\t\tpublic static getIsKeyPressed(keyCode:number):boolean { return this.isKeyPressedByKeyCode[keyCode] != null; }\n\t\tprivate static isKeyPressedByKeyCode:util.Hash<boolean> = {};\n\n\n\t\tpublic static getIsContinuousPressEnabled():boolean { return this.isContinuousPressEnabled; }\n\t\tpublic static setIsContinuousPressEnabled(enabled:boolean):void { this.isContinuousPressEnabled = enabled; }\n\t\tprivate static isContinuousPressEnabled:boolean = false;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static isLongPressed:boolean = false;\n\t\tprivate static eventDispatcher:alm.event.EventDispatcher = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class KeyWatcherEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic KEY_UP:string = 'keyUp';\n\t\tstatic KEY_DOWN:string = 'keyDown';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, originalEvent:KeyboardEvent = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.originalEvent = originalEvent;\n\t\t\tthis.key = this.originalEvent.key;\n\t\t\tthis.keyCode = this.originalEvent.keyCode;\n\t\t\tthis.altKey = this.originalEvent.altKey;\n\t\t\tthis.ctrlKey = this.originalEvent.ctrlKey;\n\t\t\tthis.shiftKey = this.originalEvent.shiftKey;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():KeyWatcherEvent {\n\t\t\treturn new KeyWatcherEvent(this.getType(), this.getTarget(), this.originalEvent);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[KeyWatcherEvent] type = ' + this.getType() + ', key = ' + this.key + ', keyCode = ' + this.keyCode + ', altKey = ' + this.altKey + ', ctrlKey = ' + this.ctrlKey + ', shiftKey = ' + this.shiftKey;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic originalEvent:KeyboardEvent;\n\t\tpublic key:string;\n\t\tpublic keyCode:number;\n\t\tpublic altKey:boolean;\n\t\tpublic ctrlKey:boolean;\n\t\tpublic shiftKey:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class WindowWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\t\tpublic static start(target:Window = null):void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[WindowWatcher] start');\n\n\t\t\tthis.window = target || window;\n\n\t\t\tif (DeviceInfo.getIsDesktop()) {\n\t\t\t\tthis.window.addEventListener('resize', this.windowResizeHandler);\n\t\t\t} else {\n\t\t\t\tthis.window.addEventListener('orientationchange', this.windowResizeHandler);\n\t\t\t}\n\t\t\tthis.window.addEventListener('scroll', this.windowScrollHandler);\n\t\t\tthis.apply();\n\t\t}\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[WindowWatcher] stop');\n\n\t\t\tif (DeviceInfo.getIsDesktop()) {\n\t\t\t\tthis.window.removeEventListener('resize', this.windowResizeHandler);\n\t\t\t} else {\n\t\t\t\tthis.window.removeEventListener('orientationchange', this.windowResizeHandler);\n\t\t\t}\n\t\t\tthis.window.removeEventListener('scroll', this.windowScrollHandler);\n\t\t}\n\n\t\tpublic static apply():void {\n\t\t\tthis.windowWidth = this.window.innerWidth;\n\t\t\tthis.windowHeight = this.window.innerHeight;\n\n\t\t\tthis.scrollTop = (this.window.pageYOffset !== undefined) ? this.window.pageYOffset : document.documentElement.scrollTop;\n\t\t\tthis.scrollBottom = this.scrollTop + this.windowHeight;\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:WindowWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:WindowWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static calcScrolledPosition(y:number):number {\n\t\t\treturn y - this.scrollTop;\n\t\t};\n\n\t\tpublic static calcScrolledPositionRatio(y:number):number {\n\t\t\treturn this.calcScrolledPosition(y) / this.windowHeight;\n\t\t}\n\n\n\n\n\n\t\tprivate static windowResizeHandler = (event:Event):void => {\n\t\t\tWindowWatcher.apply();\n\t\t\tWindowWatcher.eventDispatcher.dispatchEvent(new WindowWatcherEvent(WindowWatcherEvent.RESIZE, WindowWatcher, event, WindowWatcher.scrollTop, WindowWatcher.scrollBottom, WindowWatcher.windowWidth, WindowWatcher.windowHeight));\n\t\t};\n\n\t\tprivate static windowScrollHandler = (event:Event):void => {\n\t\t\tWindowWatcher.apply();\n\t\t\tWindowWatcher.eventDispatcher.dispatchEvent(new WindowWatcherEvent(WindowWatcherEvent.SCROLL, WindowWatcher, event, WindowWatcher.scrollTop, WindowWatcher.scrollBottom, WindowWatcher.windowWidth, WindowWatcher.windowHeight));\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getWindow():Window { return this.window; }\n\t\tprivate static window:Window = null;\n\n\t\tpublic static getScrollTop():number { return this.scrollTop; }\n\t\tprivate static scrollTop:number;\n\n\t\tpublic static getScrollBottom():number { return this.scrollBottom; }\n\t\tprivate static scrollBottom:number;\n\n\t\tpublic static getWindowWidth():number { return this.windowWidth; }\n\t\tprivate static windowWidth:number = 0;\n\n\t\tpublic static getWindowHeight():number { return this.windowHeight; }\n\t\tprivate static windowHeight:number = 0;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:alm.event.EventDispatcher = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class WindowWatcherEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic SCROLL:string = 'scroll';\n\t\tstatic RESIZE:string = 'resize';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, originalEvent:Event = null, scrollTop:number = 0, scrollBottom:number = 0, windowWidth:number = 0, windowHeight:number = 0) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.originalEvent = originalEvent;\n\t\t\tthis.scrollTop = scrollTop;\n\t\t\tthis.scrollBottom = scrollBottom;\n\t\t\tthis.windowWidth = windowWidth;\n\t\t\tthis.windowHeight = windowHeight;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():WindowWatcherEvent {\n\t\t\treturn new WindowWatcherEvent(this.getType(), this.getTarget(), this.originalEvent, this.scrollTop, this.scrollBottom, this.windowWidth, this.windowHeight);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[WindowWatcherEvent] type = ' + this.getType() + ', scrollTop = ' + this.scrollTop + ', scrollBottom = ' + this.scrollBottom + ', windowWidth = ' + this.windowWidth + ', windowHeight = ' + this.windowHeight;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic originalEvent:Event;\n\t\tpublic scrollTop:number;\n\t\tpublic scrollBottom:number;\n\t\tpublic windowWidth:number;\n\t\tpublic windowHeight:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Logger = alm.util.Logger;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Scene extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(name:string) {\n\t\t\tsuper();\n\t\t\tthis.name = name;\n\t\t\tthis.state = SceneState.Idling;\n\t\t\tthis.parent = null;\n\t\t\tthis.childrenByName = {};\n\t\t\tthis.numChildren = 0;\n\t\t\tthis.isEntered = false;\n\t\t\tthis.onLoad = null;\n\t\t\tthis.onUnload = null;\n\t\t\tthis.onArrive = null;\n\t\t\tthis.onLeave = null;\n\t\t\tthis.onAscend = null;\n\t\t\tthis.onDescend = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addChild(child:Scene):Scene {\n\t\t\tif (child) {\n\t\t\t\tconst childName:string = child.name;\n\t\t\t\tif (this.childrenByName[childName]) {\n\t\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] addChild was failed, because child name \\'' + childName + '\\' is already contained.');\n\t\t\t\t} else {\n\t\t\t\t\t++this.numChildren;\n\t\t\t\t\tchild.parent = this;\n\t\t\t\t\tthis.childrenByName[childName] = child;\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] addChild was failed, because child is null.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic removeChild(child:Scene):Scene {\n\t\t\tif (child) {\n\t\t\t\tconst childName:string = child.name;\n\t\t\t\tif (this.childrenByName[childName]) {\n\t\t\t\t\t--this.numChildren;\n\t\t\t\t\tchild.parent = null;\n\t\t\t\t\tdelete this.childrenByName[childName];\n\t\t\t\t\treturn child;\n\t\t\t\t} else {\n\t\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] removeChild was failed, because child name \\'' + childName + '\\' is not contained.');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] removeChild was failed, because child is null.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic addChildren(children:Scene[]):Scene[] {\n\t\t\tconst addedChildren:Scene[] = [];\n\t\t\tconst n:number = children.length;\n\t\t\tlet c:Scene;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tc = this.addChild(children[i]);\n\t\t\t\tif (c) {\n\t\t\t\t\taddedChildren.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn addedChildren;\n\t\t}\n\n\t\tpublic removeChildren(children:Scene[]):Scene[] {\n\t\t\tconst removedChildren:Scene[] = [];\n\t\t\tconst n:number = children.length;\n\t\t\tlet c:Scene;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tc = this.removeChild(children[i]);\n\t\t\t\tif (c) {\n\t\t\t\t\tremovedChildren.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn removedChildren;\n\t\t}\n\n\t\tpublic removeAllChildren():Scene[] {\n\t\t\tconst children:Scene[] = [];\n\t\t\tlet child:Scene;\n\t\t\tfor (let name in this.childrenByName) {\n\t\t\t\tchild = this.childrenByName[name];\n\t\t\t\tchild.parent = null;\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\t\t\tthis.childrenByName = {};\n\t\t\tthis.numChildren = 0;\n\t\t\treturn children;\n\t\t}\n\n\t\tpublic contains(child:Scene|string):boolean {\n\t\t\tif (child) {\n\t\t\t\treturn this.childrenByName[typeof child == 'string' ? child : child.name] != null;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic getState():SceneState {\n\t\t\treturn this.state;\n\t\t}\n\n\t\tpublic getLastState():SceneState {\n\t\t\treturn this.lastState;\n\t\t}\n\n\t\tpublic getParent():Scene {\n\t\t\treturn this.parent;\n\t\t}\n\n\t\tpublic getChildByName(name:string):Scene {\n\t\t\treturn this.childrenByName[name];\n\t\t}\n\n\t\tpublic getNumChildren():number {\n\t\t\treturn this.numChildren;\n\t\t}\n\n\t\tpublic getManager():SceneManager {\n\t\t\tif (this.parent) {\n\t\t\t\treturn this.parent.getManager();\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] getManager was failed, check whether if scene is connected to root.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic getPath():string {\n\t\t\tconst manager:SceneManager = this.getManager();\n\t\t\tif (manager) {\n\t\t\t\tconst names:string[] = [this.name];\n\t\t\t\tlet scene:Scene = this;\n\t\t\t\twhile (scene = scene.parent) {\n\t\t\t\t\tnames.unshift(scene.name);\n\t\t\t\t}\n\t\t\t\treturn manager.getScenePathByNames(names);\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] getPath was failed, check whether if scene is connected to root.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic gotoScene(path:string):void {\n\t\t\tthis.getManager().goto(path);\n\t\t}\n\n\n\n\n\n\t\tpublic _load(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Loading;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LOAD, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onLoad) == 'function' ? this.onLoad() : this.implOnLoad();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LOAD_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _unload(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Unloading;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.UNLOAD, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onUnload) == 'function' ? this.onUnload() : this.implOnUnload();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.UNLOAD_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _arrive(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Arriving;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ARRIVE, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onArrive) == 'function' ? this.onArrive() : this.implOnArrive();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ARRIVE_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _leave(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Leaving;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LEAVE, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onLeave) == 'function' ? this.onLeave() : this.implOnLeave();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LEAVE_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _ascend(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Ascending;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ASCEND, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onAscend) == 'function' ? this.onAscend() : this.implOnAscend();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ASCEND_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _descend(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Descending;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.DESCEND, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onDescend) == 'function' ? this.onDescend() : this.implOnDescend();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.DESCEND_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\n\n\n\n\t\tprotected implOnLoad():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnUnload():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnArrive():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnLeave():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnAscend():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnDescend():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t// The callback function is called preferentially over the override\n\t\tpublic onLoad:() => cmd.Command;\n\t\tpublic onUnload:() => cmd.Command;\n\t\tpublic onArrive:() => cmd.Command;\n\t\tpublic onLeave:() => cmd.Command;\n\t\tpublic onAscend:() => cmd.Command;\n\t\tpublic onDescend:() => cmd.Command;\n\n\t\tprivate isEntered:boolean;\n\t\tprivate name:string;\n\t\tprivate state:SceneState;\n\t\tprivate lastState:SceneState;\n\t\tprivate parent:Scene;\n\t\tprivate childrenByName:alm.util.Hash<Scene>;\n\t\tprivate numChildren:number;\n\t\tprivate transferInfo:SceneTransferInfo;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Event = alm.event.Event;\n\n\texport class SceneEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static LOAD:string = 'load';\n\t\tpublic static UNLOAD:string = 'unload';\n\t\tpublic static ARRIVE:string = 'arrive';\n\t\tpublic static LEAVE:string = 'leave';\n\t\tpublic static ASCEND:string = 'ascend';\n\t\tpublic static DESCEND:string = 'descend';\n\n\t\tpublic static LOAD_COMPLETE:string = 'loadComplete';\n\t\tpublic static UNLOAD_COMPLETE:string = 'unloadComplete';\n\t\tpublic static ARRIVE_COMPLETE:string = 'arriveComplete';\n\t\tpublic static LEAVE_COMPLETE:string = 'leaveComplete';\n\t\tpublic static ASCEND_COMPLETE:string = 'ascendComplete';\n\t\tpublic static DESCEND_COMPLETE:string = 'descendComplete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():SceneEvent {\n\t\t\treturn new SceneEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[SceneEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Logger = alm.util.Logger;\n\timport LoggerLevel = alm.util.LoggerLevel;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class SceneManager extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(name:string = '') {\n\t\t\tsuper();\n\t\t\tthis.name = name;\n\t\t\tthis.root = new core.RootScene(this);\n\t\t\tthis.currentScene = null;\n\n\t\t\tthis.waypoints = [];\n\t\t\tthis.waypointIndex = -1;\n\t\t\tthis.lastState = SceneState.Idling;\n\t\t\tthis.eventIndex = -1;\n\t\t\tthis.transferId = -1;\n\t\t\tthis.transferInfo = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tLogger.verbose('----- scene manager start -----');\n\t\t\tthis.goto('/');\n\t\t}\n\n\t\tpublic goto(path:string):void {\n\t\t\tpath = this.resolvePath(path);\n\n\t\t\t// Return if current destination and new destination is same.\n\t\t\tif (this.transferInfo && this.transferInfo.getDestinationPath() == path) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Build waypoints\n\t\t\tlet newWaypoints:core.Waypoint[] = [];\n\t\t\tif (this.waypointIndex != -1) {\n\t\t\t\tnewWaypoints = this.createWaypoints(this.waypoints[this.waypointIndex].getPath(), path);\n\t\t\t} else {\n\t\t\t\t// Init\n\t\t\t\tnewWaypoints = [new core.Waypoint('/', 0)];\n\t\t\t}\n\n\t\t\t// Transfer\n\t\t\tif (newWaypoints.length > 0) {\n\t\t\t\tconst isDestinationChanged:boolean = this.transferInfo != null;\n\n\t\t\t\tif (!isDestinationChanged) {\n\t\t\t\t\tthis.waypointIndex = 0;\n\t\t\t\t\tthis.eventIndex = 0;\n\t\t\t\t\t++this.transferId;\n\t\t\t\t\tthis.waypoints = newWaypoints;\n\t\t\t\t} else {\n\t\t\t\t\tLogger.verbose('destination is changed');\n\t\t\t\t\tLogger.verbose('waypoint index : ' + this.waypointIndex);\n\t\t\t\t\tthis.waypoints = this.waypoints.slice(0, this.waypointIndex + 1).concat(newWaypoints.slice(1));\n\t\t\t\t\tthis.setDirection(this.waypoints);\n\t\t\t\t\tthis.printWaypoint(this.waypoints);\n\t\t\t\t}\n\n\t\t\t\tthis.transferInfo = new SceneTransferInfo(this.transferId, this.waypoints[this.waypointIndex].getPath(), this.waypoints[this.waypoints.length - 1].getPath());\n\n\t\t\t\tif (!isDestinationChanged) {\n\t\t\t\t\tthis.dispatchEvent(new SceneManagerEvent(SceneManagerEvent.TRANSFER_START, this));\n\t\t\t\t}\n\n\t\t\t\tthis.checkState();\n\t\t\t}\n\t\t}\n\n\t\tpublic resolvePath(path:string):string {\n\t\t\t// Relative to absolute\n\t\t\tif (path[0] != '/') {\n\t\t\t\tif (this.currentScene) {\n\t\t\t\t\tpath = this.currentScene.getPath() + '/' + path;\n\t\t\t\t} else {\n\t\t\t\t\tpath = '/' + path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Normalize\n\t\t\tconst names:string[] = path.split('/');\n\t\t\tconst normalized:string[] = [];\n\t\t\tfor (let i:number = 0; i < names.length; ++i) {\n\t\t\t\tconst name:string = names[i];\n\t\t\t\tif (name == '') continue;\n\t\t\t\tif (name == '.') continue;\n\t\t\t\tif (name == '..') {\n\t\t\t\t\tnormalized.pop();\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tnormalized.push(name);\n\t\t\t}\n\n\t\t\treturn '/' + normalized.join('/');\n\t\t}\n\n\t\tpublic addSceneAt(path:string, createScene:boolean = false):Scene {\n\t\t\tlet success:boolean = false;\n\t\t\tconst names:string[] = this.getSceneNamesByPath(path);\n\t\t\tconst n:number = names.length;\n\t\t\tlet scene:Scene = this.root;\n\t\t\tfor (let i:number = 1; i < n; ++i) {\n\t\t\t\tconst name:string = names[i];\n\t\t\t\tif (i == n - 1) {\n\t\t\t\t\tif (scene.contains(name)) {\n\t\t\t\t\t\tLogger.warn('[SceneManager \\'' + this.name + '\\'] addSceneAt was failed, because path \\'' + path + '\\' is already exist.');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscene = scene.addChild(new Scene(name));\n\t\t\t\t\t\tsuccess = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (scene.contains(name)) {\n\t\t\t\t\t\tscene = scene.getChildByName(name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscene = scene.addChild(new Scene(name));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn success ? scene : null;\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic getRoot():Scene {\n\t\t\treturn this.root;\n\t\t}\n\n\t\tpublic getSceneByPath(path:string):Scene {\n\t\t\tconst names:string[] = this.getSceneNamesByPath(path);\n\t\t\tconst n:number = names.length;\n\t\t\tlet scene:Scene = this.root;\n\t\t\tfor (let i:number = 1; i < n; ++i) {\n\t\t\t\tscene = scene.getChildByName(names[i]);\n\t\t\t}\n\t\t\treturn scene;\n\t\t}\n\n\t\tpublic getSceneNamesByPath(path:string):string[] {\n\t\t\treturn path == '/' ? [''] : this.resolvePath(path).split('/');\n\t\t}\n\n\t\tpublic getSceneLevelByNames(names:string[]):number {\n\t\t\treturn names.length - 1;\n\t\t}\n\n\t\tpublic getScenePathByNames(names:string[]):string {\n\t\t\treturn names.length == 0 ? '/' : names.length == 1 ? ('/' + names[0]) : names.join('/');\n\t\t}\n\n\t\tprivate createWaypoints(departurePath:string, destinationPath:string):core.Waypoint[] {\n\t\t\tif (departurePath == destinationPath) {\n\t\t\t\tLogger.warn('[SceneManager] departure path and destination path is same, path = \\'' + departurePath + '\\'');\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tLogger.verbose('----- scene flow -----');\n\n\t\t\tconst waypoints:core.Waypoint[] = [\n\t\t\t\tnew core.Waypoint(departurePath, this.getSceneLevelByNames(this.getSceneNamesByPath(departurePath)))\n\t\t\t];\n\n\t\t\tconst departureNames:string[] = this.getSceneNamesByPath(departurePath);\n\t\t\tconst destinationNames:string[] = this.getSceneNamesByPath(destinationPath);\n\n\t\t\tLogger.verbose('    path');\n\t\t\tLogger.verbose('        current    : \\'' + departurePath + '\\'');\n\t\t\tLogger.verbose('        destination: \\'' + destinationPath + '\\'');\n\n\t\t\tLogger.verbose('    names');\n\t\t\tLogger.verbose('        current(' + departureNames.length + ')    : \\'' + departureNames + '\\'');\n\t\t\tLogger.verbose('        destination(' + destinationNames.length + '): \\'' + destinationNames + '\\'');\n\n\t\t\t// \n\t\t\tlet turningLevel:number = 0;\n\t\t\tlet turningNames:string[] = [];\n\t\t\tlet turningPath:string;\n\t\t\tif (destinationPath == '/') {\n\t\t\t\tturningLevel = -1;\n\t\t\t\tturningNames = [];\n\t\t\t\tturningPath = '/';\n\t\t\t} else {\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (departureNames[turningLevel] == destinationNames[turningLevel]) {\n\t\t\t\t\t\tturningNames.push(departureNames[turningLevel]);\n\t\t\t\t\t\t++turningLevel;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t--turningLevel;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tturningPath = this.getScenePathByNames(turningNames);\n\t\t\t}\n\n\t\t\tLogger.verbose('    turning');\n\t\t\tLogger.verbose('        path     : ' + turningPath);\n\t\t\tLogger.verbose('        level    : ' + turningLevel);\n\t\t\tLogger.verbose('        names(' + turningNames.length + ') : \\'' + turningNames + '\\'');\n\n\t\t\t// \n\t\t\t{\n\t\t\t\tconst names:string[] = departureNames.concat();\n\t\t\t\tlet prevPath:string = departurePath;\n\t\t\t\tfor (let i:number = departureNames.length - 1; i > turningLevel + 1; --i) {\n\t\t\t\t\tnames.pop();\n\t\t\t\t\tconst path:string = this.getScenePathByNames(names);\n\t\t\t\t\tif (path != prevPath) {\n\t\t\t\t\t\tconst level:number = this.getSceneLevelByNames(names);\n\t\t\t\t\t\twaypoints.push(new core.Waypoint(path, level));\n\t\t\t\t\t\tprevPath = path;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (turningPath == destinationPath && turningLevel > 0) {\n\t\t\t\t// \n\t\t\t\tconst from:core.Direction = turningLevel == waypoints[waypoints.length - 1].getLevel() ? core.Direction.Sibling : core.Direction.Ascend;\n\t\t\t\twaypoints.push(new core.Waypoint(turningPath, turningLevel));\n\t\t\t} else {\n\n\t\t\t\t// \n\t\t\t\tconst names:string[] = turningNames.concat();\n\t\t\t\tconst prev:core.Waypoint = waypoints[waypoints.length - 1];\n\t\t\t\tlet prevPath:string = prev.getPath();\n\t\t\t\tlet prevLevel:number = prev.getLevel();\n\t\t\t\tfor (let i:number = turningLevel + 1; i < destinationNames.length; ++i) {\n\t\t\t\t\tconst name:string = destinationNames[i];\n\t\t\t\t\tnames.push(name);\n\t\t\t\t\tconst path:string = this.getScenePathByNames(names);\n\t\t\t\t\tif (path != prevPath) {\n\t\t\t\t\t\tconst level:number = this.getSceneLevelByNames(names);\n\t\t\t\t\t\twaypoints.push(new core.Waypoint(path, level));\n\t\t\t\t\t\tprevLevel = level;\n\t\t\t\t\t\tprevPath = path;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// \n\t\t\tthis.setDirection(waypoints);\n\n\t\t\tif (Logger.level <= LoggerLevel.Verbose) {\n\t\t\t\tthis.printWaypoint(waypoints);\n\t\t\t}\n\n\t\t\treturn waypoints;\n\t\t}\n\n\t\tprivate setDirection(waypoints:core.Waypoint[]):void {\n\t\t\tconst n:number = waypoints.length;\n\t\t\tlet prev:core.Waypoint = null;\n\t\t\tlet point:core.Waypoint;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tpoint = waypoints[i];\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tconst d:number = point.getLevel() - prev.getLevel();\n\t\t\t\t\tpoint._setFrom(d > 0 ? core.Direction.Descend : d < 0 ? core.Direction.Ascend : core.Direction.Sibling);\n\t\t\t\t\tprev._setTo(point.getFrom());\n\t\t\t\t}\n\t\t\t\tprev = point;\n\t\t\t}\n\t\t}\n\n\t\tprivate printWaypoint(waypoints:core.Waypoint[]):void {\n\t\t\tLogger.verbose('    waypoints');\n\t\t\tconst n:number = waypoints.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tLogger.verbose('        [' + i + '] ' + waypoints[i]);\n\t\t\t}\n\t\t\tLogger.verbose('');\n\t\t}\n\n\n\n\n\n\t\tprivate checkState():void {\n\t\t\ttrace('lastState : ' + scn.getSceneStateString(this.lastState));\n\n\t\t\t//trace(this.waypointIndex + ' / ' + this.waypoints.length);\n\n\t\t\tif (this.waypointIndex >= this.waypoints.length) {\n\t\t\t\tLogger.verbose('----- scene transfer complete -----');\n\t\t\t\tconst tmpTransferId:number = this.transferInfo.getTransferId();\n\t\t\t\tthis.waypointIndex = this.waypoints.length - 1;\n\t\t\t\tthis.dispatchEvent(new SceneManagerEvent(SceneManagerEvent.TRANSFER_COMPLETE, this));\n\t\t\t\tif (tmpTransferId == this.transferInfo.getTransferId()) {\n\t\t\t\t\tthis.lastState = SceneState.Idling;\n\t\t\t\t\tthis.transferInfo = null;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentScene) {\n\t\t\t\tconst currentWaypoint:core.Waypoint = this.waypoints[this.waypointIndex];\n\t\t\t\tthis.currentScene = this.getSceneByPath(currentWaypoint.getPath());\n\n\t\t\t\t// Departure scene\n\t\t\t\tif (this.waypoints.length > 1 && this.waypointIndex == 0) {\n\t\t\t\t\ttrace('Departure scene');\n\n\t\t\t\t\t// Leave\n\t\t\t\t\tif (this.lastState != SceneState.Leaving && this.currentScene.getLastState() == SceneState.Arriving) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Leave   : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LEAVE_COMPLETE, this.sceneLeaveCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._leave(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Unload\n\t\t\t\t\tif (this.lastState != SceneState.Unloading && (currentWaypoint.getTo() == core.Direction.Sibling || currentWaypoint.getTo() == core.Direction.Ascend)) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Unload  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._unload(this.transferInfo);\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Departure to child\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tthis.checkState();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Through scene\n\t\t\t\tif (this.waypointIndex > 0 && this.waypointIndex < this.waypoints.length - 1) {\n\t\t\t\t\ttrace('Through scene');\n\n\t\t\t\t\t// Load\n\t\t\t\t\tif (this.lastState != SceneState.Loading && (currentWaypoint.getFrom() == core.Direction.Sibling || currentWaypoint.getFrom() == core.Direction.Descend)) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ascend\n\t\t\t\t\tif (this.lastState != SceneState.Ascending && currentWaypoint.getFrom() == core.Direction.Ascend) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Ascend  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.ASCEND_COMPLETE, this.sceneAscendCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._ascend(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Unload\n\t\t\t\t\tif (this.lastState != SceneState.Unloading && (currentWaypoint.getTo() == core.Direction.Sibling || currentWaypoint.getTo() == core.Direction.Ascend)) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Unload  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._unload(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Descend\n\t\t\t\t\tif (this.lastState != SceneState.Descending && currentWaypoint.getTo() == core.Direction.Descend) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Descend : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.DESCEND_COMPLETE, this.sceneDescendCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._descend(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Destination scene\n\t\t\t\tif (this.waypointIndex == this.waypoints.length - 1) {\n\t\t\t\t\ttrace('Destination scene');\n\n\t\t\t\t\t// Load\n\t\t\t\t\tif (this.lastState != SceneState.Loading && (currentWaypoint.getFrom() == core.Direction.Sibling || currentWaypoint.getFrom() == core.Direction.Descend)) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Arrive\n\t\t\t\t\tif (this.lastState != SceneState.Arriving) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Arrive  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.ARRIVE_COMPLETE, this.sceneArriveCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._arrive(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\ttrace('Init scene');\n\n\t\t\t\t// Init\n\t\t\t\tthis.lastState = SceneState.Idling;\n\t\t\t\tthis.currentScene = this.root;\n\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t}\n\t\t}\n\n\t\tprivate sceneLoadCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\tthis.lastState = SceneState.Loading;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneUnloadCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\tthis.lastState = SceneState.Unloading;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneArriveCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.ARRIVE_COMPLETE, this.sceneArriveCompleteHandler);\n\t\t\tthis.lastState = SceneState.Arriving;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneLeaveCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.LEAVE_COMPLETE, this.sceneLeaveCompleteHandler);\n\t\t\tthis.lastState = SceneState.Leaving;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneAscendCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.ASCEND_COMPLETE, this.sceneAscendCompleteHandler);\n\t\t\tthis.lastState = SceneState.Ascending;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneDescendCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.DESCEND_COMPLETE, this.sceneDescendCompleteHandler);\n\t\t\tthis.lastState = SceneState.Descending;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate name:string;\n\t\tprivate root:Scene;\n\t\tprivate currentScene:Scene;\n\n\t\tprivate waypoints:core.Waypoint[];\n\t\tprivate waypointIndex:number;\n\t\tprivate lastState:SceneState;\n\t\tprivate eventIndex:number;\n\t\tprivate transferInfo:SceneTransferInfo;\n\t\tprivate transferId:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Event = alm.event.Event;\n\n\texport class SceneManagerEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static TRANSFER_START:string = 'transferStart';\n\t\tpublic static TRANSFER_COMPLETE:string = 'transferComplete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():SceneManagerEvent {\n\t\t\treturn new SceneManagerEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[SceneManagerEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\texport class SceneTransferInfo {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(transferId:number, departurePath:string, destinationPath:string) {\n\t\t\tthis.transferId = transferId;\n\t\t\tthis.departurePath = departurePath;\n\t\t\tthis.destinationPath = destinationPath;\n\t\t\tthis.relay = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTransferId():number {\n\t\t\treturn this.transferId;\n\t\t}\n\n\t\tpublic getDeparturePath():string {\n\t\t\treturn this.departurePath;\n\t\t}\n\n\t\tpublic getDestinationPath():string {\n\t\t\treturn this.destinationPath;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic relay:any;\n\n\t\tprivate transferId:number;\n\t\tprivate departurePath:string;\n\t\tprivate destinationPath:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\texport enum SceneState {\n\t\tIdling,\n\t\tLoading,\n\t\tUnloading,\n\t\tArriving,\n\t\tLeaving,\n\t\tAscending,\n\t\tDescending,\n\t}\n\n\texport function getSceneStateString(state:SceneState):string {\n\t\tswitch (state) {\n\t\t\tcase SceneState.Idling:\n\t\t\t\treturn 'idling';\n\t\t\tcase SceneState.Loading:\n\t\t\t\treturn 'loading';\n\t\t\tcase SceneState.Unloading:\n\t\t\t\treturn 'unloading';\n\t\t\tcase SceneState.Arriving:\n\t\t\t\treturn 'arriving';\n\t\t\tcase SceneState.Leaving:\n\t\t\t\treturn 'leaving';\n\t\t\tcase SceneState.Ascending:\n\t\t\t\treturn 'ascending';\n\t\t\tcase SceneState.Descending:\n\t\t\t\treturn 'descending';\n\t\t}\n\t\treturn '';\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport enum Direction {\n\t\tStatic,\n\t\tSibling,\n\t\tAscend,\n\t\tDescend,\n\t}\n\n\texport function getDirectionString(direction:Direction):string {\n\t\tswitch (direction) {\n\t\t\tcase Direction.Static:\n\t\t\t\treturn 'static';\n\t\t\tcase Direction.Sibling:\n\t\t\t\treturn 'sibling';\n\t\t\tcase Direction.Ascend:\n\t\t\t\treturn 'ascend';\n\t\t\tcase Direction.Descend:\n\t\t\t\treturn 'descend';\n\t\t}\n\t\treturn '';\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport class RootScene extends Scene {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(manager:SceneManager) {\n\t\t\tsuper('');\n\t\t\tthis.manager = manager;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getManager():SceneManager {\n\t\t\treturn this.manager;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate manager:SceneManager;\n\t}\n}"]}
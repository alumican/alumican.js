{"version":3,"sources":["../src/alumican/alm/util/Logger.ts","../src/alumican/alm/util/Easing.ts","../src/alumican/alm/event/Event.ts","../src/alumican/alm/event/EventDispatcher.ts","../src/alumican/cmd/CommandState.ts","../src/alumican/cmd/CommandEvent.ts","../src/alumican/cmd/Command.ts","../src/alumican/cmd/CommandList.ts","../src/alumican/cmd/Break.ts","../src/alumican/cmd/Return.ts","../src/alumican/cmd/Log.ts","../src/alumican/cmd/Wait.ts","../src/alumican/cmd/Func.ts","../src/alumican/cmd/Listen.ts","../src/alumican/cmd/Tween.ts","../src/alumican/cmd/Serial.ts","../src/alumican/cmd/Parallel.ts","../src/alumican/alm/geom/Vector2.ts","../src/alumican/alm/geom/Vector3.ts","../src/alumican/alm/geom/Rectangle.ts","../src/alumican/alm/util/Obj.ts","../src/alumican/alm/util/Arr.ts","../src/alumican/alm/util/Num.ts","../src/alumican/alm/util/Str.ts","../src/alumican/alm/util/Loc.ts","../src/alumican/alm/util/Boxer.ts","../src/alumican/alm/util/Raffle.ts","../src/alumican/alm/util/Rotator.ts","../src/alumican/alm/util/Pager.ts","../src/alumican/alm/util/PagerEvent.ts","../src/alumican/alm/util/Timer.ts","../src/alumican/alm/util/TimerEvent.ts","../src/alumican/alm/util/ObjectPool.ts","../src/alumican/alm/util/CommandUtil.ts","../src/alumican/alm/loader/AssetLoader.ts","../src/alumican/alm/loader/AssetLoaderEvent.ts","../src/alumican/alm/loader/FileQuery.ts","../src/alumican/alm/view/View.ts","../src/alumican/alm/view/ButtonBehavior.ts","../src/alumican/alm/view/SelectionBehavior.ts","../src/alumican/alm/browser/DeviceInfo.ts","../src/alumican/alm/browser/LocalStorage.ts","../src/alumican/alm/browser/KeyWatcher.ts","../src/alumican/alm/browser/KeyWatcherEvent.ts","../src/alumican/alm/browser/WindowWatcher.ts","../src/alumican/alm/browser/WindowWatcherEvent.ts","../src/alumican/scn/Scene.ts","../src/alumican/scn/SceneEvent.ts","../src/alumican/scn/SceneManager.ts","../src/alumican/scn/SceneManagerEvent.ts","../src/alumican/scn/SceneTransferInfo.ts","../src/alumican/scn/SceneState.ts","../src/alumican/scn/core/Direction.ts","../src/alumican/scn/core/RootScene.ts","../src/alumican/scn/core/Waypoint.ts","../src/alumican/include.ts"],"names":["trace","messages","_i","arguments","length","alm","util","Logger","info","apply","caller","throwWarn","target","message","condition","warnIf","throwError","errorIf","Easing","linear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","Math","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","createEaseInElastic","s","p","a","abs","asin","createEaseOutElastic","createEaseInOutElastic","easeInElastic","defaultEaseInElastic","easeOutElastic","defaultEaseOutElastic","easeInOutElastic","defaultEaseInOutElastic","createEaseInBack","createEaseOutBack","createEaseInOutBack","easeInBack","easeOutBack","defaultEaseOutBack","easeInOutBack","defaultEaseInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","defaultEaseInBack","event","Event","type","data","this","prototype","getType","getTarget","getData","setData","event_1","EventDispatcher","listeners","addEventListener","eventType","listener","numListeners","i","push","removeEventListener","splice","removeAllEventListener","hasEventListener","dispatchEvent","call","dispatchEventType","cmd","CommandState","CommandEvent","_super","eventTarget","__extends","clone","toString","COMPLETE","Command","executeFunction","interruptFunction","destroyFunction","_this","setExecuteFunction","setInterruptFunction","setDestroyFunction","state","Sleeping","self","parent","execute","Error","Executing","getExecuteFunction","interrupt","Interrupting","getInterruptFunction","destroy","getDestroyFunction","notifyComplete","implExecuteFunction","command","implInterruptFunction","implDestroyFunction","func","getState","getParent","setParent","getSelf","CommandList","commands","addCommand","preProcess","getCommands","concat","insertCommand","insertCommandAt","index","Array","addCommandArray","insertCommandArray","insertCommandArrayAt","getLength","getCommandByIndex","numCommands","Func","Break","Return","Log","console","log","slice","getMessages","setMessages","Wait","time","completeHandler","timerId","window","setTimeout","cancel","clearTimeout","getTime","setTime","args","eventDispatcher","getFunction","setFunction","getArguments","setArguments","getEventDispatcher","setEventDispatcher","getEventType","setEventType","Listen","Tween","to","from","duration","easing","onStart","onUpdate","onComplete","intervalHandler","elapsedTime","Date","startTime","progressTime","progressValue","tweenTarget","internalFrom","key","setInterval","updateInterval","clearInterval","timeRatio","value0","setTarget","getDuration","setDuration","getTo","setTo","getFrom","setFrom","getEasing","setEasing","getOnStart","setOnStart","getOnUpdate","setOnUpdate","getOnComplete","setOnComplete","getProgressTime","getProgressValue","getUpdateInterval","setUpdateInterval","milliseconds","Serial","currentCommand","position","next","isPaused","isCompleteOnPaused","implNotifyBreak","implNotifyReturn","getPosition","Parallel","completeCount","command_1","command_2","command_3","getCompleteCount","geom","Vector2","x","y","set","copyTo","point","getClone","zero","normalize","l","getSquareDistance","dx","dy","getDistance","Vector3","z","dz","Rectangle","width","height","rect","getTop","getBottom","getLeft","getRight","getTopLeft","getTopRight","getBottomLeft","getBottomRight","Obj","each","Object","keys","forEach","Arr","sequence","count","init","step","result","v","unique","list","filter","indexOf","duplicated","lastIndexOf","roundRobin","list1","list2","callback","j","m","n","Num","map","value","srcMin","srcMax","dstMin","dstMax","clamp","random","min","max","randomInt","floor","dist","x1","y1","x2","y2","squared","radToDeg","radian","RAD2DEG","degToRad","degree","DEG2RAD","turn","PI3","PI2","PI4","PI5","PI6","PI_2","PI_3","PI_4","PI_6","Str","toTimeString","hours","minutes","seconds","h","substr","Loc","getQuery","pair","query","pairs","location","search","substring","split","Align","ScaleMode","Boxer","resize","bounds","scaleMode","align","ShowAll","Middle_Center","tx","ty","tw","th","bx","by","bw","bh","NoBorder","ratioW","ratioH","ratio","ExactFit","Top_Left","Middle_Left","Bottom_Left","Top_Right","Middle_Right","Bottom_Right","Top_Center","Bottom_Center","Raffle","values","initValues","restValues","restCount","isEmpty","onCheck","isAutoResetEnabled","reset","get","getRestCount","getIsEmply","getIsAutoResetEnabled","setIsAutoResetEnabled","enabled","createIndices","Rotator","angle","velocity","setAngle","setVelocity","getAngle","getVelocity","update","getSin","getCos","getTan","tan","getMagnitude","getVector","xy","LoggerLevel","NullLogging","verbose","warn","error","ConsoleLogging","debug","DOMLogging","dom","html","print","prefix","line","join","innerHTML","innerText","ParallelLogging","loggers","level","Verbose","logger","Info","Warn","Pager","isLoopEnabled","itemCount","itemIds","itemIndexById","onChange","onPrev","onNext","setupById","ids","setup","setupByCount","newItemIndex","oldItemIndex","newItemId","oldItemId","gotoByIndex","itemIndex","useTransition","dispatchPagerEvent","PagerEvent","CHANGE","gotoById","itemId","hasOwnProperty","prev","PREV","NEXT","getIsLoopEnabled","setIsLoopEnabled","getNewItemIndex","getOldItemIndex","getItemCount","getNewItemId","getOldItemId","getItemIds","Timer","interval","repeatCount","timerHandler","tStartTime","getCurrentTime","elapsedCount","isCompleted","stop","tInterval","startInterval","dispatch","TimerEvent","TICK","isRunning","tId","start","tRestTime","stopInterval","restart","valueOf","getIsRunning","getInterval","getElapsedTime","getRestTime","getElapsedCount","getRepeatCount","setRepeatCount","ObjectPool","onRequireItem","onDestroyItem","initCount","growthCount","items","getItem","unshift","returnItem","item","reduce","shift","CommandUtil","single","loader","AssetLoader","fileLoadCompleteHandler","content","isLoading","isLoadComplete","param","onLoad","fileLoadErrorHandler","onError","isLoading_","currentCount","totalCount","loadingQueries","loadingQueryIndex","queriesByQueryId","queriesByUrl","handlersByType","require","url","addQuery","id","FileQuery","String","load","AssetLoaderEvent","PROGRESS","query_1","handler","addHandler","addLoadUpdateListener","removeLoadUpdateListener","addLoadCompleteListener","removeLoadCompleteListener","getQueryByQueryId","queryId","getQueryByUrl","getCurrentCount","getTotalCount","getContentByUrl","getContentByQueryId","textureId","progress","loadedCount","ERROR","view_1","View","view","name","autoHideWithInit","isInitializing","isInitialized","isReadying","isReadied","isShowing","isShown","isHiding","viewsById","initialize","implInitialize","hide","ready","implReady","finalize","implFinalize","show","getShowCommand","getHideCommand","showCommand","hideCommand","implShow","implHide","getIsInitializing","getIsInitialized","getIsReadying","getIsReadied","getIsShowing","getIsShown","getIsHiding","getIsHidden","getId","getView","getName","setName","getAutoHideWithInit","setAutoHideWithInit","getViewById","ButtonBehavior","hitArea","isHoverCursorEnabled","isPreventDefaultEnabled","isStopPropagationEnabled","mouseOverHandler","preventDefault","stopPropagation","defaultMouseCursor","style","cursor","over","mouseOutHandler","out","mouseDownHandler","down","mouseUpHandler","clickHandler","click","isOver","isDown","setHitArea","implButtonOver","implButtonOut","implButtonDown","up","implButtonUp","implButtonClick","on","off","getIsOver","getIsDown","getHitArea","clearHitArea","getIsPreventDefaultEnabled","setIsPreventDefaultEnabled","getIsStopPropagationEnabled","setIsStopPropagationEnabled","getIsHoverCursorEnabled","setIsHoverCursorEnabled","SelectionBehavior","select","isSelected","implSelectionChanged","deselect","getIsSelected","browser","DeviceInfo","u","navigator","userAgent","toLowerCase","isTablet","isMobile","isDesktop","isIOS","isAndroid","isIE","isEdge","isChrome","isSafari","isFireFox","isOpera","isUnknownBrowser","isTouchEnabled","ontouchstart","isDownloadEnabled","isRetina","round","devicePixelRatio","getIsDesktop","getIsTablet","getIsMobile","getIsIOS","getIsAndroid","getIsRetina","getIsIE","getIsEdge","getIsChrome","getIsSafari","getIsFireFox","getIsOpera","getIsUnknownBrowser","getIsTouchEnabled","getIsDownloadEnabled","getDpi","dpi","div","document","createElement","setAttribute","body","appendChild","offsetHeight","removeChild","LocalStorage","save","expiredAt","isAvailable","record","JSON","stringify","localStorage","setItem","saveWithTerm","defaultValue","parse","removeItem","remove","isAvailable_","toMilliseconds","dates","KeyCode","KeyWatcher","windowKeyDownHandler","windowKeyUpHandler","getIsAnyKeyPressed","pressedKeyCount","getIsKeyPressed","keyCode","isKeyPressedByKeyCode","getIsContinuousPressEnabled","isContinuousPressEnabled","setIsContinuousPressEnabled","KeyWatcherEvent","KEY_DOWN","KEY_UP","isLongPressed","originalEvent","altKey","ctrlKey","shiftKey","WindowWatcher","windowResizeHandler","windowScrollHandler","windowWidth","innerWidth","windowHeight","innerHeight","scrollTop","undefined","pageYOffset","documentElement","scrollBottom","calcScrolledPosition","calcScrolledPositionRatio","getScrollTop","getScrollBottom","getWindowWidth","getWindowHeight","WindowWatcherEvent","RESIZE","SCROLL","scn","Scene","SceneState","Idling","childrenByName","numChildren","isEntered","onUnload","onArrive","onLeave","onAscend","onDescend","addChild","child","childName","addChildren","children","addedChildren","removeChildren","removedChildren","removeAllChildren","name_1","contains","getLastState","lastState","getChildByName","getNumChildren","getManager","getPath","manager","names","scene","getScenePathByNames","gotoScene","path","goto","_load","transferInfo","Loading","SceneEvent","LOAD","implOnLoad","LOAD_COMPLETE","_unload","Unloading","UNLOAD","implOnUnload","UNLOAD_COMPLETE","_arrive","Arriving","ARRIVE","implOnArrive","ARRIVE_COMPLETE","_leave","Leaving","LEAVE","implOnLeave","LEAVE_COMPLETE","_ascend","Ascending","ASCEND","implOnAscend","ASCEND_COMPLETE","_descend","Descending","DESCEND","implOnDescend","DESCEND_COMPLETE","SceneManager","sceneLoadCompleteHandler","currentScene","eventIndex","checkState","sceneUnloadCompleteHandler","sceneArriveCompleteHandler","sceneLeaveCompleteHandler","sceneAscendCompleteHandler","sceneDescendCompleteHandler","root","core","RootScene","waypoints","waypointIndex","transferId","resolvePath","getDestinationPath","newWaypoints","createWaypoints","Waypoint","isDestinationChanged","setDirection","printWaypoint","SceneTransferInfo","SceneManagerEvent","TRANSFER_START","normalized","name_2","pop","addSceneAt","createScene","success","getSceneNamesByPath","name_3","getRoot","getSceneByPath","getSceneLevelByNames","departurePath","destinationPath","departureNames","destinationNames","turningPath","turningLevel","turningNames","prevPath","getLevel","Direction","Sibling","Ascend","name_4","_setFrom","Descend","_setTo","getSceneStateString","tmpTransferId","getTransferId","TRANSFER_COMPLETE","currentWaypoint","relay","getDeparturePath","getDirectionString","direction","Static","getVersion"],"mappings":"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","file":"alumican.min.js","sourcesContent":["/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport enum LoggerLevel {\n\t\tVerbose = 0,\n\t\tInfo = 1,\n\t\tWarn = 2,\n\t\tError = 3,\n\t\tSilent = 4,\n\t}\n\n\n\n\n\n\texport interface ILogging {\n\n\t\tverbose(messages:any[]):void;\n\t\tinfo(messages:any[]):void;\n\t\twarn(messages:any[]):void;\n\t\terror(messages:any[]):void;\n\t}\n\n\n\n\n\n\texport class NullLogging implements ILogging {\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t}\n\t}\n\n\n\n\n\n\texport class ConsoleLogging implements ILogging {\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t\tconsole.debug.apply(console, Array.prototype.slice.call(['[Verbose] '].concat(messages)));\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t\tconsole.log.apply(console, Array.prototype.slice.call(['[Info   ] '].concat(messages)));\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t\tconsole.warn.apply(console, Array.prototype.slice.call(['[Warn   ] '].concat(messages)));\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t\tconsole.error.apply(console, Array.prototype.slice.call(['[Error  ] '].concat(messages)));\n\t\t}\n\t}\n\n\n\n\n\n\texport class DOMLogging implements ILogging {\n\n\t\tconstructor(dom:HTMLElement, html:boolean) {\n\t\t\tthis.dom = dom;\n\t\t\tthis.html = html;\n\t\t}\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t\tthis.print('[Verbose] ', messages);\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t\tthis.print('[Info   ] ', messages);\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t\tthis.print('[Warn   ] ', messages);\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t\tthis.print('[Error  ] ', messages);\n\t\t}\n\n\t\tprivate print(prefix:string, messages:any[]):void {\n\t\t\tconst line:string = messages.join(', ') + '\\n';\n\t\t\tif (this.html) {\n\t\t\t\tthis.dom.innerHTML = line + this.dom.innerHTML;\n\t\t\t} else {\n\t\t\t\tthis.dom.innerText = line + this.dom.innerText;\n\t\t\t}\n\t\t}\n\n\t\tprivate dom:HTMLElement;\n\t\tprivate html:boolean;\n\t}\n\n\n\n\n\n\texport class ParallelLogging implements ILogging {\n\n\t\tconstructor(loggers:ILogging[]) {\n\t\t\tthis.loggers = loggers;\n\t\t}\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].verbose.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].info.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].warn.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].error.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tprivate loggers:ILogging[];\n\t}\n\n\n\n\n\n\texport class Logger {\n\n\t\tpublic static level:number = LoggerLevel.Verbose;\n\t\tpublic static logger:ILogging = new ConsoleLogging();\n\n\t\tpublic static verbose(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Verbose) Logger.logger.verbose(messages);\n\t\t}\n\n\t\tpublic static info(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Info) Logger.logger.info(messages);\n\t\t}\n\n\t\tpublic static warn(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Warn) Logger.logger.warn(messages);\n\t\t}\n\n\t\tpublic static error(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Error) Logger.logger.error(messages);\n\t\t}\n\n\t\tpublic static warnIf(target:any, message:string, condition:boolean = true):void {\n\t\t\tif (Logger.level <= LoggerLevel.Warn && condition) Logger.logger.warn([message + ' : ' + target]);\n\t\t}\n\n\t\tpublic static errorIf(target:any, message: string, condition:boolean = true):void {\n\t\t\tif (Logger.level <= LoggerLevel.Error && condition) Logger.logger.error([message + ' : ' + target]);\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}\n\nfunction trace(...messages:any[]):void {\n\talm.util.Logger.info.apply(trace.caller, arguments);\n}\n\nfunction throwWarn(target:any, message:string, condition:boolean = true):void {\n\talm.util.Logger.warnIf.apply(null, arguments);\n}\n\nfunction throwError(target:any, message:string, condition:boolean = true):void {\n\talm.util.Logger.errorIf.apply(null, arguments);\n}","namespace alm.util {\n\n\texport type EasingFunction = (t:number, b:number, c:number, d:number)=>number;\n\n\texport class Easing {\n\n\t\tpublic static linear(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * t / d + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuad(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuad(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * (t /= d) * (t - 2) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuad(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t + b;\n\t\t\treturn (-c) / 2 * ((--t) * (t - 2) - 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInCubic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutCubic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * ((t = t / d - 1) * t * t + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutCubic(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t + b;\n\t\t\treturn c / 2 * ((t -= 2) * t * t + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuart(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuart(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * ((t = t / d - 1) * t * t * t - 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuart(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\n\t\t\treturn (-c) / 2 * ((t -= 2) * t * t * t - 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuint(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuint(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuint(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;\n\t\t\treturn c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * Math.cos(t / d * (Math.PI / 2)) + c + b;\n\t\t}\n\n\t\tpublic static easeOutSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * Math.sin(t / d * (Math.PI / 2)) + b;\n\t\t}\n\n\t\tpublic static easeInOutSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == 0) return b;\n\t\t\treturn c * Math.pow(2, 10 * (t / d - 1)) + b;\n\t\t}\n\n\t\tpublic static easeOutExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == d) return b + c;\n\t\t\treturn c * (-Math.pow(2, -10 * t / d) + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == 0) return b;\n\t\t\tif (t == d) return b + c;\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n\t\t\treturn c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInCirc(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n\t\t}\n\n\t\tpublic static easeOutCirc(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n\t\t}\n\n\t\tpublic static easeInOutCirc(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return (-c) / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n\t\t\treturn c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static createEaseInElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d) == 1) return b + c;\n\t\t\t\tif (p == 0) p = d * 0.3;\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\treturn (-a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p )) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseOutElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d) == 1) return b + c;\n\t\t\t\tif (p == 0) p = d * 0.3;\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseInOutElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d / 2) == 2) return b + c;\n\t\t\t\tif (p == 0) p = d * (0.3 * 1.5);\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\tif (t < 1) return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n\t\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeOutElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseOutElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeInOutElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInOutElastic(t, b, c, d);\n\t\t}\n\n\t\tprivate static defaultEaseInElastic:EasingFunction = Easing.createEaseInElastic();\n\t\tprivate static defaultEaseOutElastic:EasingFunction = Easing.createEaseOutElastic();\n\t\tprivate static defaultEaseInOutElastic:EasingFunction = Easing.createEaseInOutElastic();\n\n\n\n\n\n\t\tpublic static createEaseInBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\treturn c * (t /= d) * t * ((s + 1) * t - s) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseOutBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\treturn c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseInOutBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tif ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n\t\t\t\treturn c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeOutBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseOutBack(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeInOutBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInOutBack(t, b, c, d);\n\t\t}\n\n\t\tprivate static defaultEaseInBack:EasingFunction = Easing.createEaseInBack();\n\t\tprivate static defaultEaseOutBack:EasingFunction = Easing.createEaseOutBack();\n\t\tprivate static defaultEaseInOutBack:EasingFunction = Easing.createEaseInOutBack();\n\n\n\n\n\n\t\tpublic static easeInBounce(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c - Easing.easeOutBounce(d - t, 0, c, d) + b;\n\t\t}\n\n\t\tpublic static easeOutBounce(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d) < (1 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * t * t) + b;\n\t\t\t} else if (t < (2 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\n\t\t\t} else if (t < (2.5 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\n\t\t\t} else {\n\t\t\t\treturn c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInOutBounce(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t < d / 2) return Easing.easeInBounce(t * 2, 0, c, d) * 0.5 + b;\n\t\t\treturn Easing.easeOutBounce(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n\t\t}\n\t}\n}","/// <reference path='../../include.ts' />\r\n\r\nnamespace alm.event {\r\n\r\n\texport class Event {\r\n\r\n\t\t// --------------------------------------------------\r\n\t\t//\r\n\t\t// CONSTRUCTOR\r\n\t\t//\r\n\t\t// --------------------------------------------------\r\n\r\n\t\tconstructor(type:string, target:Object, data:any = null) {\r\n\t\t\tthis.type = type;\r\n\t\t\tthis.target = target;\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\r\n\t\tpublic getType():string {\r\n\t\t\treturn this.type;\r\n\t\t}\r\n\r\n\t\tpublic getTarget():Object {\r\n\t\t\treturn this.target;\r\n\t\t}\r\n\r\n\t\tpublic getData():any {\r\n\t\t\treturn this.data;\r\n\t\t}\r\n\r\n\t\tpublic setData(data:any):void {\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\t\t// --------------------------------------------------\r\n\t\t//\r\n\t\t// MEMBER\r\n\t\t//\r\n\t\t// --------------------------------------------------\r\n\r\n\t\tprivate type:string;\r\n\t\tprivate target:Object;\r\n\t\tprivate data:any;\r\n\t}\r\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.event {\n\n\texport type EventListener = (event:Event) => void;\n\n\texport class EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:any = null) {\n\t\t\tthis.target = target || this;\n\t\t\tthis.listeners = {};\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addEventListener(eventType:string, listener:EventListener):void {\n\t\t\tif (typeof(listener) != 'function') return;\n\t\t\tlet listeners:EventListener[] = this.listeners[eventType];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tif (listener == listeners[i]) return;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.listeners[eventType] = listeners = [];\n\t\t\t}\n\t\t\tlisteners.push(listener);\n\t\t}\n\n\t\tpublic removeEventListener(eventType:string, listener:EventListener):void {\n\t\t\tif (typeof(listener) != 'function') return;\n\t\t\tlet listeners:EventListener[] = this.listeners[eventType];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tif (listener == listeners[i]) {\n\t\t\t\t\t\tlisteners.splice(i,  1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (listeners.length == 0) {\n\t\t\t\t\tdelete this.listeners[eventType];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic removeAllEventListener(eventType:string = null):void {\n\t\t\tif (eventType) {\n\t\t\t\tdelete this.listeners[eventType];\n\t\t\t} else {\n\t\t\t\tthis.listeners = {};\n\t\t\t}\n\t\t}\n\n\t\tpublic hasEventListener(eventType:string):boolean {\n\t\t\treturn this.listeners[eventType] != null;\n\t\t}\n\n\t\tpublic dispatchEvent(event:Event):void {\n\t\t\tlet listeners:EventListener[] = this.listeners[event.getType()];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tlisteners[i].call(this.target, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic dispatchEventType(eventType:string, target:Object = null, data:any = null):void {\n\t\t\tthis.dispatchEvent(new Event(eventType, target, data));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:any;\n\t\tprivate listeners:util.Hash<EventListener[]>;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport enum CommandState {\n\t\tSleeping     = 0,\n\t\tExecuting    = 1,\n\t\tInterrupting = 2,\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class CommandEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static COMPLETE:string = 'complete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():CommandEvent {\n\t\t\treturn new CommandEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[CommandEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Command extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(executeFunction:Function = null, interruptFunction:Function = null, destroyFunction:Function = null) {\n\t\t\tsuper();\n\n\t\t\tthis.setExecuteFunction(executeFunction);\n\t\t\tthis.setInterruptFunction(interruptFunction);\n\t\t\tthis.setDestroyFunction(destroyFunction);\n\n\t\t\tthis.state = CommandState.Sleeping;\n\t\t\tthis.self = this;\n\t\t\tthis.parent = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic execute():void {\n\t\t\tif (this.state > CommandState.Sleeping) {\n\t\t\t\tthrow new Error('[Command.execute] + Command is already executing.');\n\t\t\t}\n\t\t\tthis.state = CommandState.Executing;\n\t\t\tthis.getExecuteFunction().call(this, this);\n\t\t}\n\n\t\tpublic interrupt():void {\n\t\t\tif (this.state == CommandState.Executing) {\n\t\t\t\tthis.state = CommandState.Interrupting;\n\t\t\t\tthis.getInterruptFunction().call(this, this);\n\t\t\t}\n\t\t}\n\n\t\tpublic destroy():void {\n\t\t\tthis.state = CommandState.Sleeping;\n\t\t\tthis.getDestroyFunction().call(this, this);\n\t\t\tthis.parent = null;\n\t\t\tthis.executeFunction = null;\n\t\t\tthis.interruptFunction = null;\n\t\t\tthis.destroyFunction = null;\n\t\t}\n\n\t\tprotected notifyComplete():void {\n\t\t\tswitch (this.state) {\n\t\t\t\tcase CommandState.Sleeping:\n\t\t\t\t\tbreak;\n\t\t\t\tcase CommandState.Executing:\n\t\t\t\t\tthis.dispatchEvent(new CommandEvent(CommandEvent.COMPLETE, this));\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tbreak;\n\t\t\t\tcase CommandState.Interrupting:\n\t\t\t\t\tthis.dispatchEvent(new CommandEvent(CommandEvent.COMPLETE, this));\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.notifyComplete();\n\t\t}\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getExecuteFunction():Function { return this.executeFunction || this.implExecuteFunction };\n\t\tpublic setExecuteFunction(func:Function):void { this.executeFunction = func; }\n\t\tprivate executeFunction:Function;\n\n\t\tpublic getInterruptFunction():Function { return this.interruptFunction || this.implInterruptFunction };\n\t\tpublic setInterruptFunction(func:Function):void { this.interruptFunction = func; }\n\t\tprivate interruptFunction:Function;\n\n\t\tpublic getDestroyFunction():Function { return this.destroyFunction || this.implDestroyFunction };\n\t\tpublic setDestroyFunction(func:Function):void { this.destroyFunction = func; }\n\t\tprivate destroyFunction:Function;\n\n\t\tpublic getState():CommandState { return this.state; }\n\t\tprivate state:CommandState;\n\n\t\tpublic getParent():Command { return this.parent; }\n\t\tpublic setParent(parent:Command):void { this.parent = parent; }\n\t\tprivate parent:Command;\n\n\t\tpublic getSelf():Command { return this.self; }\n\t\tprivate self:Command;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport abstract class CommandList extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper();\n\t\t\tthis.commands = [];\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tif (commands.length > 0) {\n\t\t\t\tthis.preProcess(commands);\n\t\t\t\tthis.commands = this.getCommands().concat(<Command[]>commands);\n\t\t\t}\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommandAt(0, ...commands);\n\t\t}\n\n\t\tprotected insertCommandAt(index:number, ...commands:(Command|Function)[]):void {\n\t\t\tif (commands.length > 0) {\n\t\t\t\tthis.preProcess(commands);\n\t\t\t\tArray.prototype.splice.apply(this.getCommands(), (<any[]>[index, 0]).concat(commands));\n\t\t\t}\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommand(...commands);\n\t\t}\n\n\t\tprotected insertCommandArrayAt(index:number, commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommandAt(index, ...commands);\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn this.commands.length;\n\t\t}\n\n\t\tpublic getCommandByIndex(index:number):Command { return this.commands[index]; }\n\t\tpublic getCommands():Command[] { return this.commands; }\n\n\t\tprivate preProcess(commands:(Command|Function)[]):void {\n\t\t\tconst numCommands:number = commands.length;\n\t\t\tlet command:Command|Function;\n\t\t\tfor (let i:number = 0; i < numCommands; ++i) {\n\t\t\t\tcommand = commands[i];\n\t\t\t\tif (typeof(command) == 'function') commands[i] = command = new Func(command);\n\t\t\t\tcommand.setParent(this);\n\t\t\t}\n\t\t}\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\t\tprotected abstract implNotifyBreak():void;\n\t\tprotected abstract implNotifyReturn():void;\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate commands:Command[];\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Break extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconst func:Function = this.getParent()['notifyBreak'];\n\t\t\tif (func) func();\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Return extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Log extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...messages:any[]) {\n\t\t\tsuper();\n\t\t\tthis.messages = messages;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconsole.log.apply(console, Array.prototype.slice.call(this.messages));\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.messages = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getMessages():any[] { return this.messages; }\n\t\tpublic setMessages(messages:any[]):void { this.messages = messages; }\n\t\tprivate messages:any[];\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Wait extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(time:number = 1000) {\n\t\t\tsuper();\n\t\t\tthis.time = time;\n\t\t\tthis.timerId = -1;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.timerId = window.setTimeout(this.completeHandler, this.time);\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprivate cancel():void {\n\t\t\tif (this.timerId != -1) {\n\t\t\t\tclearTimeout(this.timerId);\n\t\t\t\tthis.timerId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTime():number { return this.time; }\n\t\tpublic setTime(time:number):void { this.time = time; }\n\t\tprivate time:number;\n\n\t\tprivate timerId:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Func extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(func:Function = null, args:any[] = [], eventDispatcher:EventDispatcher = null, eventType:string = null) {\n\t\t\tsuper();\n\t\t\tthis.func = func;\n\t\t\tthis.args = args;\n\t\t\tthis.eventDispatcher = eventDispatcher;\n\t\t\tthis.eventType = eventType;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.addEventListener(this.eventType, this.completeHandler);\n\t\t\t\tthis.func(...this.args);\n\t\t\t} else {\n\t\t\t\tthis.func(...this.args);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\n\t\t\tthis.func = null;\n\t\t\tthis.args = null;\n\t\t\tthis.eventDispatcher = null;\n\t\t\tthis.eventType = null;\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getFunction():Function { return this.func; }\n\t\tpublic setFunction(func:Function):void { this.func = func; }\n\t\tprivate func:Function;\n\n\t\tpublic getArguments():any[] { return this.args; }\n\t\tpublic setArguments(args:any[]):void { this.args = args; }\n\t\tprivate args:any[];\n\n\t\tpublic getEventDispatcher():EventDispatcher { return this.eventDispatcher; }\n\t\tpublic setEventDispatcher(eventDispatcher:EventDispatcher):void { this.eventDispatcher = eventDispatcher; }\n\t\tprivate eventDispatcher:EventDispatcher;\n\n\t\tpublic getEventType():string { return this.eventType; }\n\t\tpublic setEventType(eventType:string):void { this.eventType = eventType; }\n\t\tprivate eventType:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Listen extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventDispatcher:EventDispatcher = null, eventType:string = null) {\n\t\t\tsuper();\n\t\t\tthis.eventDispatcher = eventDispatcher;\n\t\t\tthis.eventType = eventType;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.addEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\n\t\t\tthis.eventType = null;\n\t\t\tthis.eventDispatcher = null;\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getEventDispatcher():EventDispatcher { return this.eventDispatcher; }\n\t\tpublic setEventDispatcher(eventDispatcher:EventDispatcher):void { this.eventDispatcher = eventDispatcher; }\n\t\tprivate eventDispatcher:EventDispatcher;\n\n\t\tpublic getEventType():string { return this.eventType; }\n\t\tpublic setEventType(eventType:string):void { this.eventType = eventType; }\n\t\tprivate eventType:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Easing = alm.util.Easing;\n\timport EasingFunction = alm.util.EasingFunction;\n\n\texport type TweenCallbackFunction = (progressTime:number, progressValue:number) => void;\n\n\texport class Tween extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:Object, to:Object, from:Object = null, duration:number = 1000, easing:EasingFunction = Easing.linear, onStart:TweenCallbackFunction = null, onUpdate:TweenCallbackFunction = null, onComplete:TweenCallbackFunction = null) {\n\t\t\tsuper();\n\t\t\tthis.tweenTarget = target;\n\t\t\tthis.to = to;\n\t\t\tthis.from = from;\n\t\t\tthis.duration = duration;\n\t\t\tthis.easing = easing;\n\t\t\tthis.onStart = onStart;\n\t\t\tthis.onUpdate = onUpdate;\n\t\t\tthis.onComplete = onComplete;\n\t\t\tthis.progressTime = 0;\n\t\t\tthis.progressValue = 0;\n\t\t\tthis.startTime = 0;\n\t\t\tthis.timerId = -1;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.internalFrom = {};\n\t\t\tlet value0:number;\n\t\t\tlet value1:number;\n\t\t\tfor (let key in this.to) {\n\t\t\t\tvalue1 = this.to[key];\n\t\t\t\tif (this.from && this.from[key] != null) {\n\t\t\t\t\tthis.internalFrom[key] = this.from[key];\n\t\t\t\t} else {\n\t\t\t\t\tthis.internalFrom[key] = this.tweenTarget[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.duration > 0) {\n\t\t\t\tthis.timerId = window.setInterval(this.intervalHandler, Tween.updateInterval);\n\t\t\t\tthis.startTime = new Date().getTime();\n\t\t\t\tthis.apply(0);\n\t\t\t\tif (this.onStart) this.onStart(this.progressTime, this.progressValue);\n\t\t\t} else {\n\t\t\t\tthis.apply(0);\n\t\t\t\tif (this.onStart) this.onStart(this.progressTime, this.progressValue);\n\t\t\t\tthis.apply(1);\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t\tif (this.onComplete) this.onComplete(this.progressTime, this.progressValue);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.cancel();\n\n\t\t\tthis.tweenTarget = null;\n\t\t\tthis.to = null;\n\t\t\tthis.from = null;\n\t\t\tthis.easing = null;\n\t\t\tthis.onStart = null;\n\t\t\tthis.onUpdate = null;\n\t\t\tthis.onComplete = null;\n\t\t\tthis.internalFrom = null;\n\t\t}\n\n\t\tprivate cancel():void {\n\t\t\tif (this.timerId != -1) {\n\t\t\t\tclearInterval(this.timerId);\n\t\t\t\tthis.timerId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate apply(timeRatio:number):void {\n\t\t\tthis.progressTime = timeRatio;\n\t\t\tthis.progressValue = this.easing(this.progressTime, 0, 1, 1);\n\t\t\tlet value0:number;\n\t\t\tfor (let key in this.to) {\n\t\t\t\tvalue0 = this.internalFrom[key];\n\t\t\t\tthis.tweenTarget[key] = value0 + (this.to[key] - value0) * this.progressValue;\n\t\t\t}\n\t\t}\n\n\t\tprivate intervalHandler = ():void => {\n\t\t\tconst elapsedTime:number = new Date().getTime() - this.startTime;\n\t\t\tif (elapsedTime < this.duration) {\n\t\t\t\tthis.apply(elapsedTime / this.duration);\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t} else {\n\t\t\t\tthis.apply(1);\n\t\t\t\tthis.cancel();\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t\tif (this.onComplete) this.onComplete(this.progressTime, this.progressValue);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTarget():Object { return this.tweenTarget; }\n\t\tpublic setTarget(target:Object):void { this.tweenTarget = target; }\n\t\tprivate tweenTarget:Object;\n\n\t\tpublic getDuration():number { return this.duration; }\n\t\tpublic setDuration(duration:number):void { this.duration = duration; }\n\t\tprivate duration:number;\n\n\t\tpublic getTo():Object { return this.to; }\n\t\tpublic setTo(to:Object):void { this.to = to; }\n\t\tprivate to:Object;\n\n\t\tpublic getFrom():Object { return this.from; }\n\t\tpublic setFrom(from:Object):void { this.from = from; }\n\t\tprivate from:Object;\n\n\t\tpublic getEasing():EasingFunction { return this.easing; }\n\t\tpublic setEasing(easing:EasingFunction):void { this.easing = easing; }\n\t\tprivate easing:EasingFunction;\n\n\t\tpublic getOnStart():TweenCallbackFunction { return this.onStart; }\n\t\tpublic setOnStart(func:TweenCallbackFunction):void { this.onStart = func; }\n\t\tprivate onStart:TweenCallbackFunction;\n\n\t\tpublic getOnUpdate():TweenCallbackFunction { return this.onUpdate; }\n\t\tpublic setOnUpdate(func:TweenCallbackFunction):void { this.onUpdate = func; }\n\t\tprivate onUpdate:TweenCallbackFunction;\n\n\t\tpublic getOnComplete():TweenCallbackFunction { return this.onComplete; }\n\t\tpublic setOnComplete(func:TweenCallbackFunction):void { this.onComplete = func; }\n\t\tprivate onComplete:TweenCallbackFunction;\n\n\t\tpublic getProgressTime():number { return this.progressTime; }\n\t\tprivate progressTime:number;\n\n\t\tpublic getProgressValue():number { return this.progressValue; }\n\t\tprivate progressValue:number;\n\n\t\tprivate startTime:number;\n\t\tprivate timerId:number;\n\t\tprivate internalFrom:Object;\n\n\t\tpublic getUpdateInterval():number { return Tween.updateInterval; }\n\t\tpublic setUpdateInterval(milliseconds:number):void { Tween.updateInterval = milliseconds; }\n\t\tprivate static updateInterval:number = 1000 / 60;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class Serial extends CommandList {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper(...commands);\n\t\t\tthis.currentCommand = null;\n\t\t\tthis.position = -1;\n\t\t\tthis.isPaused = false;\n\t\t\tthis.isCompleteOnPaused = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.insertCommandAt(this.position + 1, ...commands);\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommand(...commands);\n\t\t}\n\n\t\tprivate next():void {\n\t\t\tthis.currentCommand = this.getCommandByIndex(this.position);\n\t\t\tthis.currentCommand.addEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\tthis.currentCommand.execute();\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\tthis.currentCommand = null;\n\t\t\tif (++this.position >= this.getLength()) {\n\t\t\t\tthis.notifyComplete();\n\t\t\t} else {\n\t\t\t\tthis.next();\n\t\t\t}\n\t\t};\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.position = 0;\n\t\t\tif (this.getLength() > 0) {\n\t\t\t\tthis.next();\n\t\t\t} else {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.currentCommand) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t\tthis.currentCommand = null;\n\t\t\t}\n\t\t\tthis.position = -1;\n\t\t\tsuper.implInterruptFunction(command);\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.currentCommand) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.destroy();\n\t\t\t\tthis.currentCommand = null;\n\t\t\t}\n\t\t\tthis.position = -1;\n\t\t\tthis.isPaused = false;\n\t\t\tthis.isCompleteOnPaused = false;\n\t\t\tsuper.implDestroyFunction(command);\n\t\t}\n\n\t\tprotected implNotifyBreak():void {\n\t\t\tif (this.currentCommand.getState() == CommandState.Executing) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t}\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implNotifyReturn():void {\n\t\t\tif (this.currentCommand.getState() == CommandState.Executing) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t}\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.destroy();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected getPosition():number { return this.position; }\n\t\tprivate position:number;\n\n\t\tprivate currentCommand:Command;\n\t\tprivate isPaused:boolean;\n\t\tprivate isCompleteOnPaused:boolean;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class Parallel extends CommandList {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper(...commands);\n\t\t\tthis.completeCount = 0;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tif (++this.completeCount >= this.getLength()) {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t};\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.completeCount = 0;\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.addEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.execute();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.interrupt();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsuper.implInterruptFunction(command);\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsuper.implDestroyFunction(command);\n\t\t}\n\n\t\tprotected implNotifyBreak():void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tif (command.getState() == CommandState.Executing) {\n\t\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\t\tcommand.interrupt();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implNotifyReturn():void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tif (command.getState() == CommandState.Executing) {\n\t\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\t\tcommand.interrupt();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.destroy();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected getCompleteCount():number { return this.completeCount; }\n\t\tprivate completeCount:number;\n\n\t\tprivate currentCommand:Command;\n\t\tprivate isPaused:boolean;\n\t\tprivate isCompleteOnPaused:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Vector2 {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0) {\n\t\t\tthis.set(x, y);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t}\n\n\t\tpublic copyTo(point:Vector2):void {\n\t\t\tpoint.set(this.x, this.y);\n\t\t}\n\n\t\tpublic getClone():Vector2 {\n\t\t\treturn new Vector2(this.x, this.y);\n\t\t}\n\n\t\tpublic zero():void {\n\t\t\tthis.set(0, 0);\n\t\t}\n\n\t\tpublic normalize():void {\n\t\t\tconst l:number = this.getLength();\n\t\t\tthis.x /= l;\n\t\t\tthis.y /= l;\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t\t}\n\n\t\tpublic getSquareDistance(point:Vector2):number {\n\t\t\tconst dx:number = point.x - this.x;\n\t\t\tconst dy:number = point.y - this.y;\n\t\t\treturn dx * dx + dy * dy;\n\t\t}\n\n\t\tpublic getDistance(point:Vector2):number {\n\t\t\treturn Math.sqrt(this.getSquareDistance(point));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Vector3 {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0, z:number = 0) {\n\t\t\tthis.set(x, y, z);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number, z:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t}\n\n\t\tpublic copyTo(point:Vector3):void {\n\t\t\tpoint.set(this.x, this.y, this.z);\n\t\t}\n\n\t\tpublic getClone():Vector3 {\n\t\t\treturn new Vector3(this.x, this.y, this.z);\n\t\t}\n\n\t\tpublic zero():void {\n\t\t\tthis.set(0, 0, 0);\n\t\t}\n\n\t\tpublic normalize():void {\n\t\t\tconst l:number = this.getLength();\n\t\t\tthis.x /= l;\n\t\t\tthis.y /= l;\n\t\t\tthis.z /= l;\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\t\t}\n\n\t\tpublic getSquareDistance(point:Vector3):number {\n\t\t\tconst dx:number = point.x - this.x;\n\t\t\tconst dy:number = point.y - this.y;\n\t\t\tconst dz:number = point.z - this.z;\n\t\t\treturn dx * dx + dy * dy + dz * dz;\n\t\t}\n\n\t\tpublic getDistance(point:Vector3):number {\n\t\t\treturn Math.sqrt(this.getSquareDistance(point));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t\tpublic z:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Rectangle {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0, width:number = 0, height:number = 0) {\n\t\t\tthis.set(x, y, width, height);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number, width:number, height:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\tpublic copyTo(rect:Rectangle):void {\n\t\t\trect.set(this.x, this.y, this.width, this.height);\n\t\t}\n\n\t\tpublic getClone():Rectangle {\n\t\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t\t}\n\n\t\tpublic getTop():number {\n\t\t\treturn this.y;\n\t\t}\n\n\t\tpublic getBottom():number {\n\t\t\treturn this.y + this.height;\n\t\t}\n\n\t\tpublic getLeft():number {\n\t\t\treturn this.x;\n\t\t}\n\n\t\tpublic getRight():number {\n\t\t\treturn this.x + this.width;\n\t\t}\n\n\t\tpublic getTopLeft():Vector2 {\n\t\t\treturn new Vector2(this.getLeft(), this.getTop());\n\t\t}\n\n\t\tpublic getTopRight():Vector2 {\n\t\t\treturn new Vector2(this.getRight(), this.getTop());\n\t\t}\n\n\t\tpublic getBottomLeft():Vector2 {\n\t\t\treturn new Vector2(this.getLeft(), this.getBottom());\n\t\t}\n\n\t\tpublic getBottomRight():Vector2 {\n\t\t\treturn new Vector2(this.getRight(), this.getBottom());\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t\tpublic width:number;\n\t\tpublic height:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Obj {\n\n\t\tpublic static each(target:any, func:(key:string, value:any) => void):void {\n\t\t\tif (target == null) return;\n\t\t\tObject.keys(target).forEach((key:string):void => {\n\t\t\t\tfunc(key, target[key]);\n\t\t\t});\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Arr {\n\n\t\t/**\n\t\t * \n\t\t * @param {number} count \n\t\t * @param {number} init \n\t\t * @param {number} step \n\t\t * @returns {number[]} \n\t\t */\n\t\tpublic static sequence(count:number, init:number = 0, step:number = 1):number[] {\n\t\t\tconst result:number[] = new Array(count);\n\t\t\tlet v:number = init;\n\t\t\tfor (let i:number = 0; i < count; ++i) {\n\t\t\t\tresult[i] = v;\n\t\t\t\tv += step;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param list \n\t\t * @returns {T[]} \n\t\t */\n\t\tpublic static unique<T>(list:T[]):T[] {\n\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\treturn self.indexOf(x) === i;\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param list \n\t\t * @param unique true\n\t\t * @returns {T[]} \n\t\t */\n\t\tpublic static duplicated<T>(list:T[], unique:boolean = false):T[] {\n\n\t\t\tif (unique) {\n\t\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\t\treturn self.indexOf(x) !== self.lastIndexOf(x);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\t\treturn (self.indexOf(x) === i) && (self.lastIndexOf(x) !== i);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * 2\n\t\t * @param {T[]} list1 1\n\t\t * @param {T[]} list2 2\n\t\t * @param {(count: number, index1: number, index2: number, element1: T, element2: T) => void} callback \n\t\t * @param callback.count \n\t\t * @param callback.index1 1\n\t\t * @param callback.index2 2\n\t\t * @param callback.element1 1\n\t\t * @param callback.element2 2\n\t\t */\n\t\tpublic static roundRobin<T>(list1:T[], list2:T[], callback:(count:number, index1:number, index2:number, element1:T, element2:T) => void):void {\n\t\t\tlet i:number, j:number, p:number = 1;\n\t\t\tconst m:number = list1.length;\n\t\t\tconst n:number = list2.length;\n\t\t\tfor (i = 0; i < m; ++i) {\n\t\t\t\tfor (j = i + 1; j < n; ++j) {\n\t\t\t\t\tcallback(p++, i, j, list1[i], list2[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Num {\n\n\t\t/**\n\t\t * \n\t\t * @param {number} value \n\t\t * @param {number} srcMin \n\t\t * @param {number} srcMax \n\t\t * @param {number} dstMin \n\t\t * @param {number} dstMax \n\t\t * @param {boolean} clamp truesrcMin, srcMax\n\t\t * @returns {number} \n\t\t */\n\t\tpublic static map(value:number, srcMin:number, srcMax:number, dstMin:number, dstMax:number, clamp:boolean = true):number {\n\t\t\tif (srcMin == srcMax) return dstMin;\n\t\t\tif (clamp) {\n\t\t\t\tif (srcMin < srcMax) {\n\t\t\t\t\tif (value < srcMin) value = srcMin;\n\t\t\t\t\telse if (value > srcMax) value = srcMax;\n\t\t\t\t} else {\n\t\t\t\t\tif (value < srcMax) value = srcMax;\n\t\t\t\t\telse if (value > srcMin) value = srcMin;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn (value - srcMin) * (dstMax - dstMin) / (srcMax - srcMin) + dstMin;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} min \n\t\t * @param {number} max \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static random(min:number = 0, max:number = 1):number {\n\t\t\treturn min + (max - min) * Math.random();\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} min \n\t\t * @param {number} max \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static randomInt(min:number = 0, max:number = 1):number {\n\t\t\treturn Math.floor(Num.random(min, max));\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} value \n\t\t * @param {number} min \n\t\t * @param {number} max \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static clamp(value:number, min:number, max:number):number {\n\t\t\treturn value < min ? min : (value > max ? max : value);\n\t\t}\n\n\t\t/**\n\t\t * 2\n\t\t * @param {number} x1 1x\n\t\t * @param {number} y1 1y\n\t\t * @param {number} x2 2x\n\t\t * @param {number} y2 2y\n\t\t * @param {boolean} squared true2\n\t\t * @returns {number} \n\t\t */\n\t\tpublic static dist(x1:number, y1:number, x2:number, y2:number, squared:boolean = false):number {\n\t\t\tconst dx:number = x2 - x1;\n\t\t\tconst dy:number = y2 - y1;\n\t\t\treturn squared ? (dx * dx + dy * dy) : Math.sqrt(dx * dx + dy * dy);\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} radian \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static radToDeg(radian:number):number {\n\t\t\treturn radian * Num.RAD2DEG;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} radian \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static degToRad(degree:number):number {\n\t\t\treturn degree * Num.DEG2RAD;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param {number} from \n\t\t * @param {number} to \n\t\t * @param {boolean} radian true\n\t\t * @returns {number} \n\t\t */\n\t\tpublic static turn(from:number, to:number, radian:boolean = true):number {\n\t\t\treturn radian ? ((to - from + Num.PI3) % Num.PI2 - Math.PI) : ((to - from + 540) % 360 - 180);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONST\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static PI2:number = Math.PI * 2;\n\t\tpublic static PI3:number = Math.PI * 3;\n\t\tpublic static PI4:number = Math.PI * 4;\n\t\tpublic static PI5:number = Math.PI * 5;\n\t\tpublic static PI6:number = Math.PI * 6;\n\t\tpublic static PI_2:number = Math.PI / 2;\n\t\tpublic static PI_3:number = Math.PI / 3;\n\t\tpublic static PI_4:number = Math.PI / 4;\n\t\tpublic static PI_6:number = Math.PI / 6;\n\n\t\tprivate static RAD2DEG:number = 180 / Math.PI;\n\t\tprivate static DEG2RAD:number = Math.PI / 180;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Str {\n\n\t\t/**\n\t\t *  h:mm:ss \n\t\t * @param {number} hours \n\t\t * @param {number} minutes \n\t\t * @param {number} seconds \n\t\t * @returns {string} h:mm:ss \n\t\t */\n\t\tpublic static toTimeString(hours:number = 0, minutes:number = 0, seconds:number = 0):string {\n\t\t\tseconds += minutes * 60 + hours * 3600;\n\t\t\tlet h:string = Math.floor(seconds / 3600).toString();\n\t\t\tlet m:string = Math.floor((seconds / 60) % 60).toString();\n\t\t\tlet s:string = ('0' + Math.floor(seconds % 60)).substr(-2, 2);\n\t\t\tif (h != '0') {\n\t\t\t\treturn h + ':' + ('0' + m).substr(-2, 2) + ':' + s;\n\t\t\t} else {\n\t\t\t\treturn m + ':' + s;\n\t\t\t}\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Loc {\n\n\t\tpublic static getQuery():Hash<string> {\n\t\t\tconst query:Hash<string> = {};\n\t\t\tconst pairs:string[] = location.search.substring(1).split('&');\n\t\t\tlet pair:string[];\n\t\t\tfor(let i:number = 0; pairs[i]; ++i) {\n\t\t\t\tpair = pairs[i].split('=');\n\t\t\t\tquery[pair[0]] = pair[1];\n\t\t\t}\n\t\t\treturn query;\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport enum Align {\n\t\tTop_Left,\n\t\tTop_Center,\n\t\tTop_Right,\n\t\tMiddle_Left,\n\t\tMiddle_Center,\n\t\tMiddle_Right,\n\t\tBottom_Left,\n\t\tBottom_Center,\n\t\tBottom_Right\n\t}\n\n\texport enum ScaleMode {\n\t\tExactFit,\n\t\tShowAll,\n\t\tNoBorder,\n\t\tNoScale,\n\t}\n\n\texport class Boxer {\n\n\t\tpublic static resize(target:geom.Rectangle, bounds:geom.Rectangle, scaleMode:ScaleMode = ScaleMode.ShowAll, align:Align = Align.Middle_Center):geom.Rectangle {\n\t\t\tlet tx:number = target.x;\n\t\t\tlet ty:number = target.y;\n\t\t\tlet tw:number = target.width;\n\t\t\tlet th:number = target.height;\n\n\t\t\tconst bx:number = bounds.x;\n\t\t\tconst by:number = bounds.y;\n\t\t\tconst bw:number = bounds.width;\n\t\t\tconst bh:number = bounds.height;\n\n\t\t\tswitch (scaleMode) {\n\t\t\t\tcase ScaleMode.ShowAll:\n\t\t\t\tcase ScaleMode.NoBorder:\n\t\t\t\t\tconst ratioW:number = bw / tw;\n\t\t\t\t\tconst ratioH:number = bh / th;\n\t\t\t\t\tconst ratio:number = scaleMode == ScaleMode.ShowAll ? (ratioW < ratioH ? ratioW : ratioH) : (ratioW > ratioH ? ratioW : ratioH);\n\t\t\t\t\ttw *= ratio;\n\t\t\t\t\tth *= ratio;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ScaleMode.ExactFit:\n\t\t\t\t\treturn new geom.Rectangle(bx, by, bw, bh);\n\t\t\t}\n\n\t\t\ttx = bx + ((align == Align.Top_Left || align == Align.Middle_Left || align == Align.Bottom_Left) ? 0 :\n\t\t\t\t(align == Align.Top_Right || align == Align.Middle_Right || align == Align.Bottom_Right) ? (bw - tw) : (bw - tw) / 2);\n\t\t\tty = by + ((align == Align.Top_Left || align == Align.Top_Center || align == Align.Top_Right) ? 0 :\n\t\t\t\t(align == Align.Bottom_Left || align == Align.Bottom_Center || align == Align.Bottom_Right) ? (bh - th) : (bh - th) / 2);\n\n\t\t\treturn new geom.Rectangle(tx, ty, tw, th);\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Raffle<T = any> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(values:T[] = null) {\n\t\t\tif (values) {\n\t\t\t\tthis.set(values);\n\t\t\t} else {\n\t\t\t\tthis.initValues = this.restValues = null;\n\t\t\t\tthis.restCount = this.restValues.length;\n\t\t\t\tthis.isEmpty = true;\n\t\t\t}\n\t\t\tthis.onCheck = null;\n\t\t\tthis.isAutoResetEnabled = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(values:T[]):void {\n\t\t\tthis.initValues = values.concat();\n\t\t\tthis.reset();\n\t\t}\n\n\t\tpublic get():T {\n\t\t\tif (this.isEmpty && this.isAutoResetEnabled) {\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t\tconst index:number = Math.floor(Math.random() * this.restCount);\n\t\t\tconst value:T = this.restValues[index];\n\t\t\tlet result:boolean = true;\n\t\t\tif (this.onCheck) result = this.onCheck(value);\n\t\t\tif (result) {\n\t\t\t\tthis.restValues.splice(index, 1);\n\t\t\t\tthis.restCount = this.restValues.length;\n\t\t\t\tthis.isEmpty = this.restCount == 0;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tpublic reset():void {\n\t\t\tthis.restValues = this.initValues.concat();\n\t\t\tthis.restCount = this.restValues.length;\n\t\t\tthis.isEmpty = this.restCount == 0;\n\t\t}\n\n\t\tpublic getRestCount():number {\n\t\t\treturn this.restCount;\n\t\t}\n\n\t\tpublic getIsEmply():boolean {\n\t\t\treturn this.isEmpty;\n\t\t}\n\n\t\tpublic getIsAutoResetEnabled():boolean {\n\t\t\treturn this.isAutoResetEnabled;\n\t\t}\n\n\t\tpublic setIsAutoResetEnabled(enabled:boolean):void {\n\t\t\tthis.isAutoResetEnabled = enabled;\n\t\t}\n\n\t\tpublic static createIndices(count:number):Raffle<number> {\n\t\t\tconst values:number[] = new Array(count);\n\t\t\tfor (let i:number = 0; i < count; ++i) values[i] = i;\n\t\t\treturn new Raffle<number>(values);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic onCheck:(value:T) => boolean;\n\n\t\tprivate isAutoResetEnabled:boolean;\n\t\tprivate isEmpty:boolean;\n\t\tprivate restCount:number;\n\t\tprivate restValues:T[];\n\t\tprivate initValues:T[];\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Rotator {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(angle:number = 0, velocity:number = 0, radian:boolean = true) {\n\t\t\tthis.setAngle(angle, radian);\n\t\t\tthis.setVelocity(velocity, radian);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getAngle(radian:boolean = true):number {\n\t\t\treturn radian ? this.angle : (this.angle * 180 / Math.PI);\n\t\t}\n\n\t\tpublic setAngle(angle:number, radian:boolean = true):void {\n\t\t\tthis.angle = radian ? angle : (angle * Math.PI / 180);\n\t\t}\n\n\t\tpublic getVelocity(radian:boolean = true):number {\n\t\t\treturn radian ? this.velocity : (this.velocity * 180 / Math.PI);\n\t\t}\n\n\t\tpublic setVelocity(velocity:number, radian:boolean = true):void {\n\t\t\tthis.velocity = radian ? velocity : (velocity * Math.PI / 180);\n\t\t}\n\n\t\tpublic update():void {\n\t\t\tthis.angle += this.velocity;\n\t\t}\n\n\t\tpublic getSin(length:number = 1):number {\n\t\t\treturn length * Math.sin(this.angle);\n\t\t}\n\n\t\tpublic getCos(length:number = 1):number {\n\t\t\treturn length * Math.cos(this.angle);\n\t\t}\n\n\t\tpublic getTan(length:number = 1):number {\n\t\t\treturn length * Math.tan(this.angle);\n\t\t}\n\n\t\tpublic getMagnitude(length:number = 1):number {\n\t\t\treturn length * (1 + Math.sin(this.angle)) / 2;\n\t\t}\n\n\t\tpublic getVector(length:number = 1, xy:{ x:number, y:number } = null):{ x:number, y:number } {\n\t\t\tif (xy != null) {\n\t\t\t\txy.x = this.getCos(length);\n\t\t\t\txy.y = this.getSin(length);\n\t\t\t} else {\n\t\t\t\treturn { x: this.getCos(length), y: this.getSin(length) };\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate angle:number;\n\t\tprivate velocity:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Pager extends alm.event.EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\n\t\t\tthis.isLoopEnabled = true;\n\n\t\t\tthis.itemCount = 0;\n\t\t\tthis.itemIds = null;\n\t\t\tthis.itemIndexById = null;\n\n\t\t\tthis.onChange = null;\n\t\t\tthis.onPrev = null;\n\t\t\tthis.onNext = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic setupById(ids:string[]):void {\n\t\t\tthis.itemCount = ids.length;\n\t\t\tthis.itemIds = ids;\n\n\t\t\tthis.itemIndexById = {};\n\t\t\tfor (let i:number = 0; i < this.itemCount; ++i) {\n\t\t\t\tthis.itemIndexById[this.itemIds[i]] = i;\n\t\t\t}\n\n\t\t\tthis.setup();\n\t\t}\n\n\t\tpublic setupByCount(itemCount:number):void {\n\t\t\tthis.itemCount = itemCount;\n\n\t\t\tthis.itemIds = null;\n\t\t\tthis.itemIndexById = null;\n\n\t\t\tthis.setup();\n\t\t}\n\n\t\tprivate setup():void {\n\t\t\tthis.newItemIndex = -1;\n\t\t\tthis.oldItemIndex = -1;\n\n\t\t\tthis.newItemId = null;\n\t\t\tthis.oldItemId = null;\n\t\t}\n\n\t\tpublic gotoByIndex(itemIndex:number, useTransition:boolean = true):boolean {\n\t\t\tif (itemIndex < 0 || itemIndex >= this.itemCount) itemIndex = -1;\n\t\t\tif (itemIndex == this.newItemIndex) return false;\n\n\t\t\tthis.oldItemIndex = this.newItemIndex;\n\t\t\tthis.newItemIndex = itemIndex;\n\n\t\t\tif (this.itemIds) {\n\t\t\t\tthis.oldItemId = this.oldItemIndex != -1 ? this.itemIds[this.oldItemIndex] : null;\n\t\t\t\tthis.newItemId = this.newItemIndex != -1 ? this.itemIds[this.newItemIndex] : null;\n\t\t\t}\n\n\t\t\tthis.dispatchPagerEvent(PagerEvent.CHANGE, this.onChange, useTransition);\n\n\t\t\treturn true;\n\t\t}\n\n\t\tpublic gotoById(itemId:string, useTransition:boolean = true):boolean {\n\t\t\tconst itemIndex:number = this.itemIndexById.hasOwnProperty(itemId) ? this.itemIndexById[itemId] : -1;\n\t\t\treturn this.gotoByIndex(itemIndex, useTransition);\n\t\t}\n\n\t\tpublic prev(useTransition:boolean = true):boolean {\n\t\t\tlet itemIndex = this.newItemIndex - 1;\n\t\t\tif (this.isLoopEnabled && itemIndex < 0) itemIndex = this.itemCount - 1;\n\n\t\t\tconst result:boolean = this.gotoByIndex(itemIndex, useTransition);\n\t\t\tif (result) {\n\t\t\t\tthis.dispatchPagerEvent(PagerEvent.PREV, this.onPrev, useTransition);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tpublic next(useTransition:boolean = true):boolean {\n\t\t\tlet itemIndex = this.newItemIndex + 1;\n\t\t\tif (this.isLoopEnabled && itemIndex >= this.itemCount) itemIndex = 0;\n\n\t\t\tconst result:boolean = this.gotoByIndex(itemIndex, useTransition);\n\t\t\tif (result) {\n\t\t\t\tthis.dispatchPagerEvent(PagerEvent.NEXT, this.onNext, useTransition);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tprivate dispatchPagerEvent(eventType:string, callback:(event:PagerEvent) => void, useTransition:boolean):void {\n\t\t\tconst oldItemId:string = this.oldItemIndex != -1 ? this.itemIds[this.oldItemIndex] : null;\n\t\t\tconst newItemId:string = this.newItemIndex != -1 ? this.itemIds[this.newItemIndex] : null;\n\n\t\t\tconst event:PagerEvent = new PagerEvent(eventType, this, this.newItemIndex, this.oldItemIndex, this.newItemId, this.oldItemId, useTransition);\n\t\t\tif (callback) {\n\t\t\t\tcallback(event);\n\t\t\t}\n\t\t\tthis.dispatchEvent(event);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsLoopEnabled():boolean { return this.isLoopEnabled; }\n\t\tpublic setIsLoopEnabled(value:boolean):void { this.isLoopEnabled = value; }\n\t\tprivate isLoopEnabled:boolean;\n\n\t\tpublic getNewItemIndex():number { return this.newItemIndex; }\n\t\tprivate newItemIndex:number;\n\n\t\tpublic getOldItemIndex():number { return this.oldItemIndex; }\n\t\tprivate oldItemIndex:number;\n\n\t\tpublic getItemCount():number { return this.itemCount; }\n\t\tprivate itemCount:number;\n\n\t\tpublic getNewItemId():string { return this.newItemId; }\n\t\tprivate newItemId:string;\n\n\t\tpublic getOldItemId():string { return this.oldItemId; }\n\t\tprivate oldItemId:string;\n\n\t\tpublic getItemIds():string[] { return this.itemIds; }\n\t\tprivate itemIds:string[];\n\n\t\tprivate itemIndexById:Hash<number>;\n\n\t\tpublic onChange:(event:PagerEvent) => void;\n\t\tpublic onPrev:(event:PagerEvent) => void;\n\t\tpublic onNext:(event:PagerEvent) => void;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class PagerEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static CHANGE:string = 'change';\n\t\tpublic static PREV:string = 'prev';\n\t\tpublic static NEXT:string = 'next';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any, newItemIndex:number, oldItemIndex:number, newItemId:string, oldItemId:string, useTransition:boolean) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.newItemIndex = newItemIndex;\n\t\t\tthis.oldItemIndex = oldItemIndex;\n\t\t\tthis.newItemId = newItemId;\n\t\t\tthis.oldItemId = oldItemId;\n\t\t\tthis.useTransition = useTransition;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():PagerEvent {\n\t\t\treturn new PagerEvent(this.getType(), this.getTarget(), this.newItemIndex, this.oldItemIndex, this.newItemId, this.oldItemId, this.useTransition);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[PagerEvent] type = ' + this.getType() + ', ' + this.oldItemIndex + ' -> ' + this.newItemIndex + ', transition = ' + this.useTransition;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic newItemIndex:number;\n\t\tpublic oldItemIndex:number;\n\t\tpublic newItemId:string;\n\t\tpublic oldItemId:string;\n\t\tpublic useTransition:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Timer extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(interval:number = 1000, repeatCount:number = 0) {\n\t\t\tsuper();\n\t\t\tthis.interval = interval;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tId = -1;\n\t\t\tthis.reset();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\tthis.startInterval(this.tRestTime != -1 ? this.tRestTime : this.interval);\n\t\t}\n\n\t\tpublic stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tRestTime = this.getCurrentTime() - this.tStartTime;\n\t\t\tthis.stopInterval();\n\t\t}\n\n\t\tpublic reset():void {\n\t\t\tthis.stop();\n\t\t\tthis.elapsedCount = 0;\n\t\t\tthis.tRestTime = -1;\n\t\t}\n\n\t\tpublic restart():void {\n\t\t\tthis.reset();\n\t\t\tthis.start();\n\t\t}\n\n\n\n\n\n\t\tprivate getCurrentTime():number {\n\t\t\treturn new Date().valueOf();\n\t\t}\n\n\t\tprivate startInterval(interval:number):void {\n\t\t\tthis.stopInterval();\n\t\t\tthis.tInterval = interval;\n\t\t\tthis.tId = window.setInterval(this.timerHandler, this.tInterval);\n\t\t}\n\n\t\tprivate stopInterval():void {\n\t\t\tif (this.tId != -1) {\n\t\t\t\tclearInterval(this.tId);\n\t\t\t\tthis.tId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate dispatch(eventType:string):void {\n\t\t\tthis.dispatchEvent(new TimerEvent(eventType, this, this.elapsedCount, this.repeatCount, this.getRestCount()));\n\t\t}\n\n\t\tprivate timerHandler = ():void => {\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\t++this.elapsedCount;\n\t\t\tlet isCompleted:boolean = false;\n\t\t\tif (this.repeatCount > 0 && this.elapsedCount >= this.repeatCount) {\n\t\t\t\tisCompleted = true;\n\t\t\t\tthis.stop();\n\t\t\t} else if (this.tInterval != this.interval) {\n\t\t\t\tthis.startInterval(this.interval);\n\t\t\t}\n\t\t\tthis.dispatch(TimerEvent.TICK);\n\t\t\tif (isCompleted) {\n\t\t\t\tthis.dispatch(TimerEvent.COMPLETE);\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsRunning():boolean { return this.isRunning; }\n\t\tprivate isRunning:boolean;\n\n\t\tpublic getInterval():number { return this.interval; }\n\t\tpublic setInterval(interval:number):void { this.interval = interval; }\n\t\tprivate interval:number;\n\n\t\tpublic getElapsedTime():number { return this.getCurrentTime() - this.tStartTime; }\n\n\t\tpublic getRestTime():number { return this.interval - this.getElapsedTime(); }\n\n\t\tpublic getElapsedCount():number { return this.elapsedCount; }\n\t\tprivate elapsedCount:number;\n\n\t\tpublic getRepeatCount():number { return this.repeatCount; }\n\t\tpublic setRepeatCount(count:number):void { this.repeatCount = count; }\n\t\tprivate repeatCount:number;\n\n\t\tpublic getRestCount():number { return this.repeatCount - this.elapsedCount; }\n\n\t\tprivate tStartTime:number;\n\t\tprivate tRestTime:number;\n\t\tprivate tInterval:number;\n\t\tprivate tId:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\timport Event = alm.event.Event;\n\n\texport class TimerEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static TICK:string = 'tick';\n\t\tpublic static COMPLETE:string = 'complete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, elapsedCount:number = 0, repeatCount:number = 0, restCount:number = 0) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.elapsedCount = elapsedCount;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.restCount = restCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():TimerEvent {\n\t\t\treturn new TimerEvent(this.getType(), this.getTarget(), this.elapsedCount, this.repeatCount, this.restCount);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[TimerEvent] type = ' + this.getType() + ', elapsedCount = ' + this.elapsedCount + ', repeatCount=' + this.repeatCount + ', restCount=' + this.restCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic elapsedCount:number;\n\t\tpublic repeatCount:number;\n\t\tpublic restCount:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class ObjectPool<T> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * ObjectPool class.\n\t\t * @class\n\t\t * @param {function} onRequireItem This callback function is called when new item is required.\n\t\t * @param {function} onDestroyItem This callback function is called when item is disposed.\n\t\t * @param {number} initCount Init item count.\n\t\t * @param {number} growthCount Growth item count.\n\t\t *\n\t\t * @property {number} initCount Init item count.\n\t\t * @property {number} growthCount Growth item count.\n\t\t * @property {function} onRequireItem This callback function is called when new item is required.\n\t\t * @property {function} onDestroyItem This callback function is called when item is disposed.\n\t\t * @property {Array} items Array of items.\n\t\t * @property {number} index Current index of items.\n\t\t *\n\t\t * @return void\n\t\t */\n\t\tconstructor(onRequireItem:() => T, onDestroyItem:(item:T) => void, initCount:number = 100, growthCount:number = 50) {\n\t\t\tthis.onRequireItem = onRequireItem;\n\t\t\tthis.onDestroyItem = onDestroyItem;\n\t\t\tthis.growthCount = growthCount;\n\t\t\tthis.items = new Array(initCount);\n\t\t\tfor (let i = 0; i < initCount; ++i) {\n\t\t\t\tthis.items[i] = this.onRequireItem();\n\t\t\t}\n\t\t\tthis.index = initCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * Get item from object pool.\n\t\t * @return {T} Item\n\t\t */\n\t\tpublic getItem():T {\n\t\t\tif (this.index > 0) {\n\t\t\t\treturn this.items[--this.index];\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.growthCount; ++i) {\n\t\t\t\tthis.items.unshift(this.onRequireItem());\n\t\t\t}\n\t\t\tthis.index = this.growthCount;\n\t\t\treturn this.getItem();\n\t\t}\n\n\t\t/**\n\t\t * Return item to object pool.\n\t\t * @param {T} Item.\n\t\t * @return void\n\t\t */\n\t\tpublic returnItem(item:T):void {\n\t\t\tthis.items[this.index++] = item;\n\t\t}\n\n\t\t/**\n\t\t * Optimize object pool size.\n\t\t * @return void\n\t\t */\n\t\tpublic reduce():void {\n\t\t\tconst n = this.index;\n\t\t\tfor (let i = 0; i < n; ++i) {\n\t\t\t\tthis.onDestroyItem(this.items.shift());\n\t\t\t}\n\t\t\tthis.index = 0;\n\t\t}\n\n\t\t/**\n\t\t * Destroy object pool.\n\t\t * @return void\n\t\t */\n\t\tpublic destroy():void {\n\t\t\tconst n = this.items.length;\n\t\t\tfor (let i = 0; i < n; ++i) {\n\t\t\t\tthis.onDestroyItem(this.items[i]);\n\t\t\t}\n\t\t\tthis.index = 0;\n\t\t\tthis.items = null;\n\t\t\tthis.onRequireItem = null;\n\t\t\tthis.onDestroyItem = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate items:T[];\n\t\tprivate index:number;\n\t\tprivate growthCount:number;\n\n\t\tpublic onRequireItem:() => T;\n\t\tpublic onDestroyItem:(item:T) => void;\n\t}\n}\n","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class CommandUtil {\n\n\t\tpublic static stop(command:cmd.Command):any {\n\t\t\tif (command) command.interrupt();\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic static sequence(execute:boolean, ...commands:(cmd.Command|Function)[]):cmd.Serial {\n\t\t\tconst c:cmd.Serial = new cmd.Serial();\n\t\t\tc.addCommand(...commands);\n\t\t\tif (execute) c.execute();\n\t\t\treturn c;\n\t\t}\n\n\t\tpublic static single(execute:boolean, command:cmd.Command):cmd.Command {\n\t\t\tif (execute && command) command.execute();\n\t\t\treturn command;\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport type CompleteFunction = (content:any) => void;\n\texport type ErrorFunction = (message:string) => void;\n\n\texport class AssetLoader {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tthis.isLoading_ = false;\n\n\t\t\tthis.currentCount = 0;\n\t\t\tthis.totalCount = 0;\n\n\t\t\tthis.loadingQueries = [];\n\t\t\tthis.loadingQueryIndex = -1;\n\n\t\t\tthis.queriesByQueryId = {};\n\t\t\tthis.queriesByUrl = {};\n\n\t\t\tthis.handlersByType = {};\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic require(url:string, type:string):string {\n\t\t\treturn this.addQuery(type, url, {});\n\t\t}\n\n\t\tprivate addQuery(type:string, url:string, param:any):string {\n\t\t\tif (this.queriesByUrl[url]) return this.queriesByUrl[url].id;\n\n\t\t\tconst query:FileQuery = new FileQuery();\n\t\t\tquery.id = String(AssetLoader.id);\n\t\t\tquery.type = type;\n\t\t\tquery.url = url;\n\t\t\tquery.param = param;\n\t\t\tthis.loadingQueries.push(query);\n\t\t\tthis.queriesByQueryId[query.id] = query;\n\t\t\tthis.queriesByUrl[query.url] = query;\n\t\t\t++AssetLoader.id;\n\t\t\treturn query.id;\n\t\t}\n\n\t\tpublic load():void {\n\t\t\tif (this.isLoading_) return;\n\t\t\tthis.isLoading_ = true;\n\t\t\tthis.loadingQueryIndex = -1;\n\t\t\tthis.next();\n\t\t}\n\n\t\tprivate next():void {\n\t\t\tthis.currentCount = this.loadingQueryIndex + 1;\n\t\t\tthis.totalCount = this.loadingQueries.length;\n\n\t\t\tif (this.currentCount > 0) {\n\t\t\t\tthis.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.PROGRESS, this, this.currentCount / this.totalCount, this.currentCount, this.totalCount));\n\t\t\t}\n\n\t\t\tif (this.currentCount < this.totalCount) {\n\t\t\t\tthis.loadingQueryIndex++;\n\t\t\t\tconst query:FileQuery = this.loadingQueries[this.loadingQueryIndex];\n\t\t\t\tquery.isLoading = true;\n\t\t\t\tquery.isLoadComplete = false;\n\t\t\t\ttrace('[AssetLoader] loading... ' + '\\'' + query.url + '' as '' + query.type + '\\'');\n\n\t\t\t\tconst handler:IFileHandler = this.handlersByType[query.type];\n\t\t\t\tif (handler) {\n\t\t\t\t\thandler.load(query.url, (content:any):void => {\n\t\t\t\t\t\tthis.fileLoadCompleteHandler(query, content);\n\t\t\t\t\t},(message:string = ''):void => {\n\t\t\t\t\t\tthis.fileLoadErrorHandler(query, message);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\ttrace('[AssetLoader] handler is not found \\'' + query.type + '\\'');\n\t\t\t\t\tthis.next();\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tthis.isLoading_ = false;\n\t\t\t\tthis.loadingQueries = [];\n\t\t\t\tthis.loadingQueryIndex = -1;\n\t\t\t\tthis.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.COMPLETE, this, this.currentCount / this.totalCount, this.currentCount, this.totalCount));\n\t\t\t}\n\t\t}\n\n\t\tpublic addHandler(handler:IFileHandler):void {\n\t\t\tthis.handlersByType[handler.getType()] = handler;\n\t\t}\n\n\t\tprivate fileLoadCompleteHandler = (query:FileQuery, content:any):void => {\n\t\t\tquery.isLoading = false;\n\t\t\tquery.isLoadComplete = true;\n\t\t\tquery.content = content;\n\t\t\tif (query.param.onLoad) {\n\t\t\t\tquery.param.onLoad(content);\n\t\t\t}\n\t\t\tthis.next();\n\t\t};\n\n\t\tprivate fileLoadErrorHandler = (query:FileQuery, message:string):void => {\n\t\t\tquery.isLoading = false;\n\t\t\tquery.isLoadComplete = true;\n\t\t\tif (query.param.onError) {\n\t\t\t\tquery.param.onError(message);\n\t\t\t}\n\t\t\tthis.next();\n\t\t};\n\n\t\tpublic addLoadUpdateListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.addEventListener(AssetLoaderEvent.PROGRESS, listener);\n\t\t}\n\n\t\tpublic removeLoadUpdateListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.removeEventListener(AssetLoaderEvent.PROGRESS, listener);\n\t\t}\n\n\t\tpublic addLoadCompleteListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.addEventListener(AssetLoaderEvent.COMPLETE, listener);\n\t\t}\n\n\t\tpublic removeLoadCompleteListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.removeEventListener(AssetLoaderEvent.COMPLETE, listener);\n\t\t}\n\n\t\tpublic getQueryByQueryId(queryId:string):FileQuery {\n\t\t\treturn this.queriesByQueryId[queryId];\n\t\t}\n\n\n\t\tpublic getQueryByUrl(url:string):FileQuery {\n\t\t\treturn this.queriesByUrl[url];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic isLoading():boolean { return this.isLoading_; }\n\t\tprivate isLoading_:boolean;\n\n\t\tpublic getCurrentCount():number { return this.currentCount; }\n\t\tprivate currentCount:number;\n\n\t\tpublic getTotalCount():number { return this.totalCount; }\n\t\tprivate totalCount:number;\n\n\t\tpublic getContentByUrl<T = any>(url:string):T { return this.queriesByUrl[url].content; }\n\t\tpublic getContentByQueryId<T = any>(textureId:string):T { return this.queriesByQueryId[textureId].content; }\n\n\t\tprivate loadingQueries:FileQuery[];\n\t\tprivate loadingQueryIndex:number;\n\n\t\tprivate queriesByQueryId:util.Hash<FileQuery>;\n\t\tprivate queriesByUrl:util.Hash<FileQuery>;\n\n\t\tprivate handlersByType:util.Hash<IFileHandler>;\n\n\t\tprivate eventDispatcher:alm.event.EventDispatcher;\n\n\t\tprivate static id:number = 0;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport class AssetLoaderEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic PROGRESS:string = 'progress';\n\t\tstatic COMPLETE:string = 'complete';\n\t\tstatic ERROR:string = 'error';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, progress:number = 0, loadedCount:number = 0, totalCount:number = 0, content:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.progress = progress;\n\t\t\tthis.loadedCount = loadedCount;\n\t\t\tthis.totalCount = totalCount;\n\t\t\tthis.content = content;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():AssetLoaderEvent {\n\t\t\treturn new AssetLoaderEvent(this.getType(), this.getTarget(), this.progress, this.loadedCount, this.totalCount, this.content);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[AssetLoaderEvent] type = ' + this.getType() + ', progress = ' + this.progress + ', loadedCount = ' + this.loadedCount + ', totalCount = ' + this.totalCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic progress:number;\n\t\tpublic loadedCount:number;\n\t\tpublic totalCount:number;\n\t\tpublic content:any;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport class FileQuery {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoadComplete = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic id:string;\n\t\tpublic type:string;\n\t\tpublic url:string;\n\t\tpublic param:any;\n\t\tpublic content:any;\n\t\tpublic isLoading:boolean;\n\t\tpublic isLoadComplete:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport abstract class View<T = any> extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(view:T = null) {\n\t\t\tsuper();\n\t\t\tthis.id = View.id;\n\t\t\tthis.view = view;\n\t\t\tthis.name = '';\n\t\t\tthis.autoHideWithInit = true;\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = false;\n\t\t\tthis.isReadying = false;\n\t\t\tthis.isReadied = false;\n\t\t\tthis.isShowing = false;\n\t\t\tthis.isShown = true;\n\t\t\tthis.isHiding = false;\n\n\t\t\tView.viewsById[View.id] = this;\n\t\t\t++View.id;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic initialize():void {\n\t\t\tif (this.isInitializing || this.isInitialized) return;\n\t\t\tthis.isInitializing = true;\n\n\t\t\tif (View.viewsById[this.id] == null) {\n\t\t\t\tView.viewsById[this.id] = this;\n\t\t\t}\n\n\t\t\tthis.view = this.implInitialize();\n\t\t\tif (this.isInitializing) {\n\t\t\t\tthrowError(this.name || this, 'view is null', !this.view);\n\t\t\t\tthis.hide(false);\n\t\t\t\tthis.isInitializing = false;\n\t\t\t\tthis.isInitialized = true;\n\t\t\t} else {\n\t\t\t\t// finalized while initializing\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t}\n\n\t\tpublic ready():void {\n\t\t\tif (this.isReadying || this.isReadied) return;\n\t\t\tthis.isReadying = true;\n\t\t\tthrowError(this.name || this, 'ready() was called without being initialized', !this.isInitialized);\n\t\t\tthis.implReady();\n\t\t\tthis.isReadying = false;\n\t\t\tthis.isReadied = true;\n\t\t}\n\n\t\tpublic finalize():void {\n\t\t\tif (!this.isInitializing && !this.isInitialized) return;\n\t\t\tthis.implFinalize();\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = false;\n\n\t\t\tdelete View.viewsById[this.id];\n\t\t\tView.viewsById[this.id] = null;\n\t\t}\n\n\t\tpublic show(useTransition:boolean = true):void {\n\t\t\tif (this.isShown) return;\n\t\t\tthis.getShowCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic hide(useTransition:boolean = true):void {\n\t\t\tif (!this.isShown) return;\n\t\t\tthis.getHideCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic getShowCommand(useTransition:boolean = true):cmd.Command {\n\t\t\tconst command:cmd.Serial = new cmd.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tif (this.isShown) return;\n\t\t\t\t\tthrowError(this.name || this, 'getShowCommand() was called without being initialized', this.isInitializing || !this.isInitialized);\n\t\t\t\t\tthrowWarn(this.name || this, 'getShowCommand() was called without being ready', this.isReadying|| !this.isReadied);\n\t\t\t\t\tthis.isShown = true;\n\t\t\t\t\tthis.isShowing = true;\n\t\t\t\t\tthis.isHiding = false;\n\n\t\t\t\t\tif (this.showCommand) {\n\t\t\t\t\t\tthis.showCommand.interrupt();\n\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.hideCommand) {\n\t\t\t\t\t\tthis.hideCommand.interrupt();\n\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.showCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implShow(this.view, useTransition),\n\t\t\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic getHideCommand(useTransition:boolean = true):cmd.Command {\n\t\t\tconst command:cmd.Serial = new cmd.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tif (!this.isShown) return;\n\t\t\t\t\tif (!this.isInitializing) {\n\t\t\t\t\t\tthrowError(this.name || this, 'getHideCommand() was called without being initialized', this.isInitializing || !this.isInitialized);\n\t\t\t\t\t\tthrowWarn(this.name || this, 'getHideCommand() was called without being ready', this.isReadying || !this.isReadied);\n\t\t\t\t\t}\n\t\t\t\t\tthis.isShown = false;\n\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\tthis.isHiding = true;\n\n\t\t\t\t\tif (this.showCommand) {\n\t\t\t\t\t\tthis.showCommand.interrupt();\n\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.hideCommand) {\n\t\t\t\t\t\tthis.hideCommand.interrupt();\n\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.hideCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implHide(this.view, useTransition),\n\t\t\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t\t\tthis.isHiding = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic getIsInitializing():boolean {\n\t\t\treturn this.isInitializing;\n\t\t}\n\n\t\tpublic getIsInitialized():boolean {\n\t\t\treturn this.isInitialized;\n\t\t}\n\n\t\tpublic getIsReadying():boolean {\n\t\t\treturn this.isReadying;\n\t\t}\n\n\t\tpublic getIsReadied():boolean {\n\t\t\treturn this.isReadied;\n\t\t}\n\n\t\tpublic getIsShowing():boolean {\n\t\t\treturn this.isShowing;\n\t\t}\n\n\t\tpublic getIsShown():boolean {\n\t\t\treturn this.isShown;\n\t\t}\n\n\t\tpublic getIsHiding():boolean {\n\t\t\treturn this.isHiding;\n\t\t}\n\n\t\tpublic getIsHidden():boolean {\n\t\t\treturn !this.isShown;\n\t\t}\n\n\t\tpublic getId():number {\n\t\t\treturn this.id;\n\t\t}\n\n\t\tpublic getView():T {\n\t\t\treturn this.view;\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic setName(value:string):void {\n\t\t\tthis.name = value;\n\t\t}\n\n\t\tpublic getAutoHideWithInit():boolean {\n\t\t\treturn this.autoHideWithInit;\n\t\t}\n\n\t\tpublic setAutoHideWithInit(value:boolean):void {\n\t\t\tthis.autoHideWithInit = value;\n\t\t}\n\n\n\n\n\n\t\tprotected abstract implInitialize():T;\n\t\tprotected abstract implReady():void;\n\t\tprotected abstract implFinalize():void;\n\t\tprotected abstract implShow(view:T, useTransition:boolean):cmd.Command;\n\t\tprotected abstract implHide(view:T, useTransition:boolean):cmd.Command;\n\n\n\n\n\n\t\tpublic static getViewById(id:number):View {\n\t\t\treturn View.viewsById[id];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate id:number;\n\t\tprivate view:T;\n\t\tprivate name:string;\n\t\tprivate autoHideWithInit:boolean;\n\t\tprivate showCommand:cmd.Command;\n\t\tprivate hideCommand:cmd.Command;\n\t\tprivate isInitializing:boolean;\n\t\tprivate isInitialized:boolean;\n\t\tprivate isReadying:boolean;\n\t\tprivate isReadied:boolean;\n\t\tprivate isShowing:boolean;\n\t\tprivate isShown:boolean;\n\t\tprivate isHiding:boolean;\n\n\t\tprivate static id:number = 0;\n\t\tprivate static viewsById:util.Hash<View> = {};\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\texport class ButtonBehavior {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:IButton, hitArea:HTMLElement = null, isHoverCursorEnabled:boolean = true, isPreventDefaultEnabled:boolean = true, isStopPropagationEnabled:boolean = true) {\n\t\t\tthis.target = target;\n\t\t\tthis.hitArea = null;\n\t\t\tthis.isHoverCursorEnabled = isHoverCursorEnabled;\n\t\t\tthis.isPreventDefaultEnabled = isPreventDefaultEnabled;\n\t\t\tthis.isStopPropagationEnabled = isStopPropagationEnabled;\n\t\t\tthis.isOver = false;\n\t\t\tthis.isDown = false;\n\t\t\tthis.defaultMouseCursor = '';\n\n\t\t\tthis.setHitArea(hitArea);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic over(useTransition:boolean = true):void {\n\t\t\tif (this.isOver) return;\n\t\t\tthis.isOver = true;\n\t\t\tthis.target.implButtonOver(useTransition);\n\t\t}\n\n\t\tpublic out(useTransition:boolean = true):void {\n\t\t\tif (!this.isOver) return;\n\t\t\tthis.isOver = false;\n\t\t\tthis.target.implButtonOut(useTransition);\n\t\t}\n\n\t\tpublic down(useTransition:boolean = true):void {\n\t\t\tif (this.isDown) return;\n\t\t\tthis.isDown = true;\n\t\t\tthis.target.implButtonDown(useTransition);\n\t\t}\n\n\t\tpublic up(useTransition:boolean = true):void {\n\t\t\tif (!this.isDown) return;\n\t\t\tthis.isDown = false;\n\t\t\tthis.target.implButtonUp(useTransition);\n\t\t}\n\n\t\tpublic click(useTransition:boolean = true):void {\n\t\t\tthis.target.implButtonClick(useTransition);\n\t\t}\n\n\t\tprivate on():void {\n\t\t\tthis.hitArea.addEventListener('mouseover', this.mouseOverHandler);\n\t\t\tthis.hitArea.addEventListener('mouseout', this.mouseOutHandler);\n\t\t\tthis.hitArea.addEventListener('mousedown', this.mouseDownHandler);\n\t\t\tthis.hitArea.addEventListener('mouseup', this.mouseUpHandler);\n\t\t\tthis.hitArea.addEventListener('click', this.clickHandler);\n\t\t}\n\n\t\tprivate off():void {\n\t\t\tthis.hitArea.removeEventListener('mouseover', this.mouseOverHandler);\n\t\t\tthis.hitArea.removeEventListener('mouseout', this.mouseOutHandler);\n\t\t\tthis.hitArea.removeEventListener('mousedown', this.mouseDownHandler);\n\t\t\tthis.hitArea.removeEventListener('mouseup', this.mouseUpHandler);\n\t\t\tthis.hitArea.removeEventListener('click', this.clickHandler);\n\t\t}\n\n\t\tprivate mouseOverHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tif (this.isHoverCursorEnabled) {\n\t\t\t\tthis.defaultMouseCursor = this.hitArea.style.cursor;\n\t\t\t\tthis.hitArea.style.cursor = 'pointer';\n\t\t\t}\n\t\t\tthis.over();\n\t\t};\n\n\t\tprivate mouseOutHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tif (this.isHoverCursorEnabled) {\n\t\t\t\tthis.hitArea.style.cursor = this.defaultMouseCursor != '' ? this.defaultMouseCursor : 'pointer';\n\t\t\t}\n\t\t\tthis.out();\n\t\t};\n\n\t\tprivate mouseDownHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.down();\n\t\t};\n\n\t\tprivate mouseUpHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.over();\n\t\t};\n\n\t\tprivate clickHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.click();\n\t\t};\n\n\t\tpublic getIsOver():boolean {\n\t\t\treturn this.isOver;\n\t\t}\n\n\t\tpublic getIsDown():boolean {\n\t\t\treturn this.isDown;\n\t\t}\n\n\t\tpublic getHitArea():HTMLElement {\n\t\t\treturn this.hitArea;\n\t\t}\n\n\t\tpublic setHitArea(hitArea:HTMLElement):void {\n\t\t\tif (this.hitArea !== hitArea) {\n\t\t\t\tif (this.hitArea !== null) {\n\t\t\t\t\tthis.off();\n\t\t\t\t}\n\t\t\t\tthis.hitArea = hitArea;\n\t\t\t\tif (this.hitArea !== null) {\n\t\t\t\t\tthis.on();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic clearHitArea():void {\n\t\t\tthis.setHitArea(null);\n\t\t}\n\n\t\tpublic getIsPreventDefaultEnabled():boolean {\n\t\t\treturn this.isPreventDefaultEnabled;\n\t\t}\n\n\t\tpublic setIsPreventDefaultEnabled(enabled:boolean):void {\n\t\t\tthis.isPreventDefaultEnabled = enabled;\n\t\t}\n\n\t\tpublic getIsStopPropagationEnabled():boolean {\n\t\t\treturn this.isStopPropagationEnabled;\n\t\t}\n\n\t\tpublic setIsStopPropagationEnabled(enabled:boolean):void {\n\t\t\tthis.isStopPropagationEnabled = enabled;\n\t\t}\n\n\t\tpublic getIsHoverCursorEnabled():boolean {\n\t\t\treturn this.isHoverCursorEnabled;\n\t\t}\n\n\t\tpublic setIsHoverCursorEnabled(enabled:boolean):void {\n\t\t\tthis.isHoverCursorEnabled = enabled;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:IButton;\n\t\tprivate hitArea:HTMLElement;\n\t\tprivate isOver:boolean;\n\t\tprivate isDown:boolean;\n\t\tprivate isPreventDefaultEnabled:boolean;\n\t\tprivate isStopPropagationEnabled:boolean;\n\t\tprivate isHoverCursorEnabled:boolean;\n\t\tprivate defaultMouseCursor:string;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\texport class SelectionBehavior {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:ISelection) {\n\t\t\tthis.target = target;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic select(useTransition:boolean = true):void {\n\t\t\tif (this.isSelected) return;\n\t\t\tthis.isSelected = true;\n\t\t\tthis.target.implSelectionChanged(this.isSelected, useTransition);\n\t\t}\n\n\t\tpublic deselect(useTransition:boolean = true):void {\n\t\t\tif (!this.isSelected) return;\n\t\t\tthis.isSelected = false;\n\t\t\tthis.target.implSelectionChanged(this.isSelected, useTransition);\n\t\t}\n\n\t\tpublic getIsSelected():boolean {\n\t\t\treturn this.isSelected;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:ISelection;\n\t\tprivate isSelected:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class DeviceInfo {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tconst u:string = window.navigator.userAgent.toLowerCase();\n\n\t\t\t// Device\n\t\t\tthis.isTablet = (u.indexOf('windows') != -1 && u.indexOf('touch') != -1)\n\t\t\t\t|| u.indexOf('ipad') != -1\n\t\t\t\t|| (u.indexOf('android') != -1 && u.indexOf('mobile') == -1)\n\t\t\t\t|| (u.indexOf('firefox') != -1 && u.indexOf('tablet') != -1)\n\t\t\t\t|| u.indexOf('kindle') != -1\n\t\t\t\t|| u.indexOf('silk') != -1\n\t\t\t\t|| u.indexOf('playbook') != -1;\n\n\t\t\tthis.isMobile = (u.indexOf('windows') != -1 && u.indexOf('phone') != -1)\n\t\t\t\t|| u.indexOf('iphone') != -1\n\t\t\t\t|| u.indexOf('ipod') != -1\n\t\t\t\t|| (u.indexOf('android') != -1 && u.indexOf('mobile') != -1)\n\t\t\t\t|| (u.indexOf('firefox') != -1 && u.indexOf('mobile') != -1)\n\t\t\t\t|| u.indexOf('blackberry') != -1;\n\n\t\t\tthis.isDesktop = !this.isTablet && !this.isMobile;\n\n\t\t\t// OS\n\t\t\tthis.isIOS = u.indexOf('ipad') != -1 || u.indexOf('iphone') != -1 || u.indexOf('ipod') != -1;\n\t\t\tthis.isAndroid = u.indexOf('android') != -1 && u.indexOf('mobile') != -1;\n\n\t\t\t// Browser\n\t\t\tif(u.indexOf('msie') != -1 || u.indexOf('trident') != -1) {\n\t\t\t\tthis.isIE = true;\n\t\t\t} else if(u.indexOf('edge') != -1) {\n\t\t\t\tthis.isEdge = true;\n\t\t\t} else if(u.indexOf('chrome') != -1) {\n\t\t\t\tthis.isChrome = true;\n\t\t\t} else if(u.indexOf('safari') != -1) {\n\t\t\t\tthis.isSafari = true;\n\t\t\t} else if(u.indexOf('firefox') != -1) {\n\t\t\t\tthis.isFireFox = true;\n\t\t\t} else if(u.indexOf('opera') != -1) {\n\t\t\t\tthis.isOpera = true;\n\t\t\t} else {\n\t\t\t\tthis.isUnknownBrowser = true;\n\t\t\t}\n\n\t\t\t// Function\n\t\t\tthis.isTouchEnabled = (typeof window.ontouchstart) !== 'undefined';\n\t\t\tthis.isDownloadEnabled = !this.isIOS;\n\n\t\t\t// Resolution\n\t\t\tthis.isRetina = Math.round(window.devicePixelRatio) == 2;\n\t\t}\n\n\t\t// --------------------\n\t\t// Device\n\n\t\tpublic static getIsDesktop():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isDesktop;\n\t\t}\n\n\t\tpublic static getIsTablet():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isTablet;\n\t\t}\n\n\t\tpublic static getIsMobile():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isMobile;\n\t\t}\n\n\t\t// --------------------\n\t\t// OS\n\n\t\tpublic static getIsIOS():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isIOS;\n\t\t}\n\n\t\tpublic static getIsAndroid():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isAndroid;\n\t\t}\n\n\t\tpublic static getIsRetina():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isRetina;\n\t\t}\n\n\t\t// --------------------\n\t\t// Browser\n\n\t\tpublic static getIsIE():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isIE;\n\t\t}\n\n\t\tpublic static getIsEdge():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isEdge;\n\t\t}\n\n\t\tpublic static getIsChrome():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isChrome;\n\t\t}\n\n\t\tpublic static getIsSafari():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isSafari;\n\t\t}\n\n\t\tpublic static getIsFireFox():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isFireFox;\n\t\t}\n\n\t\tpublic static getIsOpera():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isOpera;\n\t\t}\n\n\t\tpublic static getIsUnknownBrowser():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isUnknownBrowser;\n\t\t}\n\n\t\t// --------------------\n\t\t// Function\n\n\t\tpublic static getIsTouchEnabled():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isTouchEnabled;\n\t\t}\n\n\t\tpublic static getIsDownloadEnabled():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isDownloadEnabled;\n\t\t}\n\n\t\t// --------------------\n\t\t// Resolution\n\n\t\tpublic static getDpi():number {\n\t\t\tif (this.dpi == -1) {\n\t\t\t\tconst div:HTMLElement = document.createElement('div');\n\t\t\t\tdiv.setAttribute('style', 'height:1in;left:-100%;top:-100%;position:absolute;width:1in;');\n\t\t\t\tdocument.body.appendChild(div);\n\t\t\t\tthis.dpi = div.offsetHeight;\n\t\t\t\tdocument.body.removeChild(div);\n\t\t\t}\n\t\t\treturn this.dpi;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static isDesktop:boolean = false;\n\t\tprivate static isTablet:boolean = false;\n\t\tprivate static isMobile:boolean = false;\n\n\t\tprivate static isIOS:boolean = false;\n\t\tprivate static isAndroid:boolean = false;\n\n\t\tprivate static isIE:boolean = false;\n\t\tprivate static isEdge:boolean = false;\n\t\tprivate static isChrome:boolean = false;\n\t\tprivate static isSafari:boolean = false;\n\t\tprivate static isFireFox:boolean = false;\n\t\tprivate static isOpera:boolean = false;\n\t\tprivate static isUnknownBrowser:boolean = false;\n\n\t\tprivate static isTouchEnabled:boolean = false;\n\t\tprivate static isDownloadEnabled:boolean = false;\n\n\t\tprivate static isRetina:boolean = false;\n\t\tprivate static dpi:number = -1;\n\n\t\tprivate static isInitialized:boolean = false;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class LocalStorage {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t * @param value \n\t\t * @param expiredAt UNIX\n\t\t * @returns {boolean} true\n\t\t */\n\t\tpublic static save(key:string, value:any, expiredAt:number = -1):boolean {\n\t\t\tif (!LocalStorage.isAvailable()) return false;\n\t\t\tconst record:{ value:string; expiredAt:number } = { value:JSON.stringify(value), expiredAt: expiredAt };\n\t\t\tlocalStorage.setItem(key, JSON.stringify(record));\n\t\t\treturn true;\n\t\t}\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t * @param value \n\t\t * @param minutes \n\t\t * @returns {boolean} true\n\t\t */\n\t\tpublic static saveWithTerm(key:string, value:any, milliseconds:number = -1):boolean {\n\t\t\tconst expiredAt:number = milliseconds > 0 ? new Date().getTime() + milliseconds :-1;\n\t\t\treturn LocalStorage.save(key, value, expiredAt);\n\t\t}\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t * @returns {any} \n\t\t */\n\t\tpublic static load(key:string, defaultValue:any = null):any {\n\t\t\tif (!LocalStorage.isAvailable()) return defaultValue;\n\t\t\tconst record:{ value:string; expiredAt:number } = JSON.parse(localStorage.getItem(key));\n\t\t\tif (record) {\n\t\t\t\t// \n\t\t\t\tif (record.expiredAt > 0) {\n\t\t\t\t\t// \n\t\t\t\t\tif (new Date().getTime() < record.expiredAt) {\n\t\t\t\t\t\t// \n\t\t\t\t\t\treturn JSON.parse(record.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// \n\t\t\t\t\t\tlocalStorage.removeItem(key);\n\t\t\t\t\t\treturn defaultValue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// \n\t\t\t\t\treturn JSON.parse(record.value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// \n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @param key \n\t\t */\n\t\tpublic static remove(key:string):void {\n\t\t\tif (!LocalStorage.isAvailable()) return;\n\t\t\tlocalStorage.removeItem(key);\n\t\t}\n\n\t\t/**\n\t\t * LocalStorage\n\t\t * @returns {boolean} true\n\t\t */\n\t\tpublic static isAvailable():boolean {\n\t\t\tif (LocalStorage.isAvailable_ == null) {\n\t\t\t\ttry {\n\t\t\t\t\tlocalStorage.setItem('__CKECK__', '__CKECK__');\n\t\t\t\t\tlocalStorage.removeItem('__CKECK__');\n\t\t\t\t\tLocalStorage.isAvailable_ = true;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tLocalStorage.isAvailable_ = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn LocalStorage.isAvailable_;\n\t\t}\n\n\t\t/**\n\t\t * \n\t\t * @param dates \n\t\t * @param hours \n\t\t * @param minutes \n\t\t * @param seconds \n\t\t * @param milliseconds \n\t\t * @returns {number} \n\t\t */\n\t\tpublic static toMilliseconds(dates:number = 0, hours:number = 0, minutes:number = 0, seconds:number = 0, milliseconds:number = 0):number {\n\t\t\treturn milliseconds + (seconds + (minutes + (hours + dates * 24) * 60) * 60) * 1000;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static isAvailable_:boolean = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\t// https://github.com/nfriend/ts-keycode-enum\n\texport enum KeyCode {\n\t\tBackspace = 8,\n\t\tTab = 9,\n\t\tEnter = 13,\n\t\tShift = 16,\n\t\tCtrl = 17,\n\t\tAlt = 18,\n\t\tPauseBreak = 19,\n\t\tCapsLock = 20,\n\t\tEscape = 27,\n\t\tSpace = 32,\n\t\tPageUp = 33,\n\t\tPageDown = 34,\n\t\tEnd = 35,\n\t\tHome = 36,\n\n\t\tLeftArrow = 37,\n\t\tUpArrow = 38,\n\t\tRightArrow = 39,\n\t\tDownArrow = 40,\n\n\t\tInsert = 45,\n\t\tDelete = 46,\n\n\t\tKey0 = 48,\n\t\tKey1 = 49,\n\t\tKey2 = 50,\n\t\tKey3 = 51,\n\t\tKey4 = 52,\n\t\tKey5 = 53,\n\t\tKey6 = 54,\n\t\tKey7 = 55,\n\t\tKey8 = 56,\n\t\tKey9 = 57,\n\n\t\tClosedParen = Key0,\n\t\tExclamationMark = Key1,\n\t\tAtSign = Key2,\n\t\tPoundSign = Key3,\n\t\tHash = PoundSign,\n\t\tDollarSign = Key4,\n\t\tPercentSign = Key5,\n\t\tCaret = Key6,\n\t\tHat = Caret,\n\t\tAmpersand = Key7,\n\t\tStar = Key8,\n\t\tAsterik = Star,\n\t\tOpenParen = Key9,\n\n\t\tA = 65,\n\t\tB = 66,\n\t\tC = 67,\n\t\tD = 68,\n\t\tE = 69,\n\t\tF = 70,\n\t\tG = 71,\n\t\tH = 72,\n\t\tI = 73,\n\t\tJ = 74,\n\t\tK = 75,\n\t\tL = 76,\n\t\tM = 77,\n\t\tN = 78,\n\t\tO = 79,\n\t\tP = 80,\n\t\tQ = 81,\n\t\tR = 82,\n\t\tS = 83,\n\t\tT = 84,\n\t\tU = 85,\n\t\tV = 86,\n\t\tW = 87,\n\t\tX = 88,\n\t\tY = 89,\n\t\tZ = 90,\n\n\t\tLeftWindowKey = 91,\n\t\tRightWindowKey = 92,\n\t\tSelectKey = 93,\n\n\t\tNumpad0 = 96,\n\t\tNumpad1 = 97,\n\t\tNumpad2 = 98,\n\t\tNumpad3 = 99,\n\t\tNumpad4 = 100,\n\t\tNumpad5 = 101,\n\t\tNumpad6 = 102,\n\t\tNumpad7 = 103,\n\t\tNumpad8 = 104,\n\t\tNumpad9 = 105,\n\n\t\tMultiply = 106,\n\t\tAdd = 107,\n\t\tSubtract = 109,\n\t\tDecimalPoint = 110,\n\t\tDivide = 111,\n\n\t\tF1 = 112,\n\t\tF2 = 113,\n\t\tF3 = 114,\n\t\tF4 = 115,\n\t\tF5 = 116,\n\t\tF6 = 117,\n\t\tF7 = 118,\n\t\tF8 = 119,\n\t\tF9 = 120,\n\t\tF10 = 121,\n\t\tF11 = 122,\n\t\tF12 = 123,\n\n\t\tNumLock = 144,\n\t\tScrollLock = 145,\n\n\t\tSemiColon = 186,\n\t\tEquals = 187,\n\t\tComma = 188,\n\t\tDash = 189,\n\t\tPeriod = 190,\n\t\tUnderScore = Dash,\n\t\tPlusSign = Equals,\n\t\tForwardSlash = 191,\n\t\tTilde = 192,\n\t\tGraveAccent = Tilde,\n\n\t\tOpenBracket = 219,\n\t\tClosedBracket = 221,\n\t\tQuote = 222\n\t}\n\n\n\n\n\n\texport class KeyWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[KeyWatcher] start');\n\n\t\t\twindow.addEventListener('keydown', this.windowKeyDownHandler);\n\t\t\twindow.addEventListener('keyup', this.windowKeyUpHandler);\n\t\t}\n\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[KeyWatcher] stop');\n\n\t\t\twindow.removeEventListener('keydown', this.windowKeyDownHandler);\n\t\t\twindow.removeEventListener('keyup', this.windowKeyUpHandler);\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener);\n\t\t}\n\n\n\n\n\n\t\tprivate static windowKeyDownHandler = (event:KeyboardEvent):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] == null) {\n\t\t\t\tKeyWatcher.isKeyPressedByKeyCode[keyCode] = true;\n\t\t\t\t++KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_DOWN, KeyWatcher, event));\n\t\t\t} else if (KeyWatcher.isContinuousPressEnabled) {\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_DOWN, KeyWatcher, event));\n\t\t\t}\n\t\t};\n\n\t\tprivate static windowKeyUpHandler = (event:KeyboardEvent):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] != null) {\n\t\t\t\tdelete KeyWatcher.isKeyPressedByKeyCode[keyCode];\n\t\t\t\t--KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_UP, KeyWatcher, event));\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getIsAnyKeyPressed():boolean { return this.pressedKeyCount > 0; }\n\t\tprivate static pressedKeyCount:number = 0;\n\n\t\tpublic static getIsKeyPressed(keyCode:number):boolean { return this.isKeyPressedByKeyCode[keyCode] != null; }\n\t\tprivate static isKeyPressedByKeyCode:util.Hash<boolean> = {};\n\n\n\t\tpublic static getIsContinuousPressEnabled():boolean { return this.isContinuousPressEnabled; }\n\t\tpublic static setIsContinuousPressEnabled(enabled:boolean):void { this.isContinuousPressEnabled = enabled; }\n\t\tprivate static isContinuousPressEnabled:boolean = false;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static isLongPressed:boolean = false;\n\t\tprivate static eventDispatcher:alm.event.EventDispatcher = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class KeyWatcherEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic KEY_UP:string = 'keyUp';\n\t\tstatic KEY_DOWN:string = 'keyDown';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, originalEvent:KeyboardEvent = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.originalEvent = originalEvent;\n\t\t\tthis.key = this.originalEvent.key;\n\t\t\tthis.keyCode = this.originalEvent.keyCode;\n\t\t\tthis.altKey = this.originalEvent.altKey;\n\t\t\tthis.ctrlKey = this.originalEvent.ctrlKey;\n\t\t\tthis.shiftKey = this.originalEvent.shiftKey;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():KeyWatcherEvent {\n\t\t\treturn new KeyWatcherEvent(this.getType(), this.getTarget(), this.originalEvent);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[KeyWatcherEvent] type = ' + this.getType() + ', key = ' + this.key + ', keyCode = ' + this.keyCode + ', altKey = ' + this.altKey + ', ctrlKey = ' + this.ctrlKey + ', shiftKey = ' + this.shiftKey;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic originalEvent:KeyboardEvent;\n\t\tpublic key:string;\n\t\tpublic keyCode:number;\n\t\tpublic altKey:boolean;\n\t\tpublic ctrlKey:boolean;\n\t\tpublic shiftKey:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class WindowWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[WindowWatcher] start');\n\n\t\t\tif (DeviceInfo.getIsDesktop()) {\n\t\t\t\twindow.addEventListener('resize', this.windowResizeHandler);\n\t\t\t} else {\n\t\t\t\twindow.addEventListener('orientationchange', this.windowResizeHandler);\n\t\t\t}\n\t\t\twindow.addEventListener('scroll', this.windowScrollHandler);\n\t\t\tthis.apply();\n\t\t}\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[WindowWatcher] stop');\n\n\t\t\tif (DeviceInfo.getIsDesktop()) {\n\t\t\t\twindow.removeEventListener('resize', this.windowResizeHandler);\n\t\t\t} else {\n\t\t\t\twindow.removeEventListener('orientationchange', this.windowResizeHandler);\n\t\t\t}\n\t\t\twindow.removeEventListener('scroll', this.windowScrollHandler);\n\t\t}\n\n\t\tpublic static apply():void {\n\t\t\tthis.windowWidth = window.innerWidth;\n\t\t\tthis.windowHeight = window.innerHeight;\n\n\t\t\tthis.scrollTop = (window.pageYOffset !== undefined) ? window.pageYOffset : document.documentElement.scrollTop;;\n\t\t\tthis.scrollBottom = this.scrollTop + this.windowHeight;\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:WindowWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:WindowWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static calcScrolledPosition(y:number):number {\n\t\t\treturn y - this.scrollTop;\n\t\t};\n\n\t\tpublic static calcScrolledPositionRatio(y:number):number {\n\t\t\treturn this.calcScrolledPosition(y) / this.windowHeight;\n\t\t}\n\n\n\n\n\n\t\tprivate static windowResizeHandler = (event:Event):void => {\n\t\t\tWindowWatcher.apply();\n\t\t\tWindowWatcher.eventDispatcher.dispatchEvent(new WindowWatcherEvent(WindowWatcherEvent.RESIZE, WindowWatcher, event, WindowWatcher.scrollTop, WindowWatcher.scrollBottom, WindowWatcher.windowWidth, WindowWatcher.windowHeight));\n\t\t};\n\n\t\tprivate static windowScrollHandler = (event:Event):void => {\n\t\t\tWindowWatcher.apply();\n\t\t\tWindowWatcher.eventDispatcher.dispatchEvent(new WindowWatcherEvent(WindowWatcherEvent.SCROLL, WindowWatcher, event, WindowWatcher.scrollTop, WindowWatcher.scrollBottom, WindowWatcher.windowWidth, WindowWatcher.windowHeight));\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getScrollTop():number { return this.scrollTop; }\n\t\tprivate static scrollTop:number;\n\n\t\tpublic static getScrollBottom():number { return this.scrollBottom; }\n\t\tprivate static scrollBottom:number;\n\n\t\tpublic static getWindowWidth():number { return this.windowWidth; }\n\t\tprivate static windowWidth:number = 0;\n\n\t\tpublic static getWindowHeight():number { return this.windowHeight; }\n\t\tprivate static windowHeight:number = 0;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:alm.event.EventDispatcher = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class WindowWatcherEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic SCROLL:string = 'scroll';\n\t\tstatic RESIZE:string = 'resize';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, originalEvent:Event = null, scrollTop:number = 0, scrollBottom:number = 0, windowWidth:number = 0, windowHeight:number = 0) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.originalEvent = originalEvent;\n\t\t\tthis.scrollTop = scrollTop;\n\t\t\tthis.scrollBottom = scrollBottom;\n\t\t\tthis.windowWidth = windowWidth;\n\t\t\tthis.windowHeight = windowHeight;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():WindowWatcherEvent {\n\t\t\treturn new WindowWatcherEvent(this.getType(), this.getTarget(), this.originalEvent, this.scrollTop, this.scrollBottom, this.windowWidth, this.windowHeight);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[WindowWatcherEvent] type = ' + this.getType() + ', scrollTop = ' + this.scrollTop + ', scrollBottom = ' + this.scrollBottom + ', windowWidth = ' + this.windowWidth + ', windowHeight = ' + this.windowHeight;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic originalEvent:Event;\n\t\tpublic scrollTop:number;\n\t\tpublic scrollBottom:number;\n\t\tpublic windowWidth:number;\n\t\tpublic windowHeight:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Logger = alm.util.Logger;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Scene extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(name:string) {\n\t\t\tsuper();\n\t\t\tthis.name = name;\n\t\t\tthis.state = SceneState.Idling;\n\t\t\tthis.parent = null;\n\t\t\tthis.childrenByName = {};\n\t\t\tthis.numChildren = 0;\n\t\t\tthis.isEntered = false;\n\t\t\tthis.onLoad = null;\n\t\t\tthis.onUnload = null;\n\t\t\tthis.onArrive = null;\n\t\t\tthis.onLeave = null;\n\t\t\tthis.onAscend = null;\n\t\t\tthis.onDescend = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addChild(child:Scene):Scene {\n\t\t\tif (child) {\n\t\t\t\tconst childName:string = child.name;\n\t\t\t\tif (this.childrenByName[childName]) {\n\t\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] addChild was failed, because child name \\'' + childName + '\\' is already contained.');\n\t\t\t\t} else {\n\t\t\t\t\t++this.numChildren;\n\t\t\t\t\tchild.parent = this;\n\t\t\t\t\tthis.childrenByName[childName] = child;\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] addChild was failed, because child is null.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic removeChild(child:Scene):Scene {\n\t\t\tif (child) {\n\t\t\t\tconst childName:string = child.name;\n\t\t\t\tif (this.childrenByName[childName]) {\n\t\t\t\t\t--this.numChildren;\n\t\t\t\t\tchild.parent = null;\n\t\t\t\t\tdelete this.childrenByName[childName];\n\t\t\t\t\treturn child;\n\t\t\t\t} else {\n\t\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] removeChild was failed, because child name \\'' + childName + '\\' is not contained.');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] removeChild was failed, because child is null.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic addChildren(children:Scene[]):Scene[] {\n\t\t\tconst addedChildren:Scene[] = [];\n\t\t\tconst n:number = children.length;\n\t\t\tlet c:Scene;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tc = this.addChild(children[i]);\n\t\t\t\tif (c) {\n\t\t\t\t\taddedChildren.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn addedChildren;\n\t\t}\n\n\t\tpublic removeChildren(children:Scene[]):Scene[] {\n\t\t\tconst removedChildren:Scene[] = [];\n\t\t\tconst n:number = children.length;\n\t\t\tlet c:Scene;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tc = this.removeChild(children[i]);\n\t\t\t\tif (c) {\n\t\t\t\t\tremovedChildren.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn removedChildren;\n\t\t}\n\n\t\tpublic removeAllChildren():Scene[] {\n\t\t\tconst children:Scene[] = [];\n\t\t\tlet child:Scene;\n\t\t\tfor (let name in this.childrenByName) {\n\t\t\t\tchild = this.childrenByName[name];\n\t\t\t\tchild.parent = null;\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\t\t\tthis.childrenByName = {};\n\t\t\tthis.numChildren = 0;\n\t\t\treturn children;\n\t\t}\n\n\t\tpublic contains(child:Scene|string):boolean {\n\t\t\tif (child) {\n\t\t\t\treturn this.childrenByName[typeof child == 'string' ? child : child.name] != null;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic getState():SceneState {\n\t\t\treturn this.state;\n\t\t}\n\n\t\tpublic getLastState():SceneState {\n\t\t\treturn this.lastState;\n\t\t}\n\n\t\tpublic getParent():Scene {\n\t\t\treturn this.parent;\n\t\t}\n\n\t\tpublic getChildByName(name:string):Scene {\n\t\t\treturn this.childrenByName[name];\n\t\t}\n\n\t\tpublic getNumChildren():number {\n\t\t\treturn this.numChildren;\n\t\t}\n\n\t\tpublic getManager():SceneManager {\n\t\t\tif (this.parent) {\n\t\t\t\treturn this.parent.getManager();\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] getManager was failed, check whether if scene is connected to root.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic getPath():string {\n\t\t\tconst manager:SceneManager = this.getManager();\n\t\t\tif (manager) {\n\t\t\t\tconst names:string[] = [this.name];\n\t\t\t\tlet scene:Scene = this;\n\t\t\t\twhile (scene = scene.parent) {\n\t\t\t\t\tnames.unshift(scene.name);\n\t\t\t\t}\n\t\t\t\treturn manager.getScenePathByNames(names);\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] getPath was failed, check whether if scene is connected to root.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic gotoScene(path:string):void {\n\t\t\tthis.getManager().goto(path);\n\t\t}\n\n\n\n\n\n\t\tpublic _load(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Loading;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LOAD, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onLoad) == 'function' ? this.onLoad() : this.implOnLoad();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LOAD_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _unload(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Unloading;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.UNLOAD, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onUnload) == 'function' ? this.onUnload() : this.implOnUnload();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.UNLOAD_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _arrive(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Arriving;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ARRIVE, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onArrive) == 'function' ? this.onArrive() : this.implOnArrive();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ARRIVE_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _leave(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Leaving;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LEAVE, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onLeave) == 'function' ? this.onLeave() : this.implOnLeave();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LEAVE_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _ascend(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Ascending;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ASCEND, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onAscend) == 'function' ? this.onAscend() : this.implOnAscend();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ASCEND_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _descend(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Descending;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.DESCEND, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onDescend) == 'function' ? this.onDescend() : this.implOnDescend();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.DESCEND_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\n\n\n\n\t\tprotected implOnLoad():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnUnload():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnArrive():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnLeave():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnAscend():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnDescend():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t// The callback function is called preferentially over the override\n\t\tpublic onLoad:() => cmd.Command;\n\t\tpublic onUnload:() => cmd.Command;\n\t\tpublic onArrive:() => cmd.Command;\n\t\tpublic onLeave:() => cmd.Command;\n\t\tpublic onAscend:() => cmd.Command;\n\t\tpublic onDescend:() => cmd.Command;\n\n\t\tprivate isEntered:boolean;\n\t\tprivate name:string;\n\t\tprivate state:SceneState;\n\t\tprivate lastState:SceneState;\n\t\tprivate parent:Scene;\n\t\tprivate childrenByName:alm.util.Hash<Scene>;\n\t\tprivate numChildren:number;\n\t\tprivate transferInfo:SceneTransferInfo;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Event = alm.event.Event;\n\n\texport class SceneEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static LOAD:string = 'load';\n\t\tpublic static UNLOAD:string = 'unload';\n\t\tpublic static ARRIVE:string = 'arrive';\n\t\tpublic static LEAVE:string = 'leave';\n\t\tpublic static ASCEND:string = 'ascend';\n\t\tpublic static DESCEND:string = 'descend';\n\n\t\tpublic static LOAD_COMPLETE:string = 'loadComplete';\n\t\tpublic static UNLOAD_COMPLETE:string = 'unloadComplete';\n\t\tpublic static ARRIVE_COMPLETE:string = 'arriveComplete';\n\t\tpublic static LEAVE_COMPLETE:string = 'leaveComplete';\n\t\tpublic static ASCEND_COMPLETE:string = 'ascendComplete';\n\t\tpublic static DESCEND_COMPLETE:string = 'descendComplete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():SceneEvent {\n\t\t\treturn new SceneEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[SceneEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Logger = alm.util.Logger;\n\timport LoggerLevel = alm.util.LoggerLevel;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class SceneManager extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(name:string = '') {\n\t\t\tsuper();\n\t\t\tthis.name = name;\n\t\t\tthis.root = new core.RootScene(this);\n\t\t\tthis.currentScene = null;\n\n\t\t\tthis.waypoints = [];\n\t\t\tthis.waypointIndex = -1;\n\t\t\tthis.lastState = SceneState.Idling;\n\t\t\tthis.eventIndex = -1;\n\t\t\tthis.transferId = -1;\n\t\t\tthis.transferInfo = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tLogger.verbose('----- scene manager start -----');\n\t\t\tthis.goto('/');\n\t\t}\n\n\t\tpublic goto(path:string):void {\n\t\t\tpath = this.resolvePath(path);\n\n\t\t\t// Return if current destination and new destination is same.\n\t\t\tif (this.transferInfo && this.transferInfo.getDestinationPath() == path) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Build waypoints\n\t\t\tlet newWaypoints:core.Waypoint[] = [];\n\t\t\tif (this.waypointIndex != -1) {\n\t\t\t\tnewWaypoints = this.createWaypoints(this.waypoints[this.waypointIndex].getPath(), path);\n\t\t\t} else {\n\t\t\t\t// Init\n\t\t\t\tnewWaypoints = [new core.Waypoint('/', 0)];\n\t\t\t}\n\n\t\t\t// Transfer\n\t\t\tif (newWaypoints.length > 0) {\n\t\t\t\tconst isDestinationChanged:boolean = this.transferInfo != null;\n\n\t\t\t\tif (!isDestinationChanged) {\n\t\t\t\t\tthis.waypointIndex = 0;\n\t\t\t\t\tthis.eventIndex = 0;\n\t\t\t\t\t++this.transferId;\n\t\t\t\t\tthis.waypoints = newWaypoints;\n\t\t\t\t} else {\n\t\t\t\t\tLogger.verbose('destination is changed');\n\t\t\t\t\tLogger.verbose('waypoint index : ' + this.waypointIndex);\n\t\t\t\t\tthis.waypoints = this.waypoints.slice(0, this.waypointIndex + 1).concat(newWaypoints.slice(1));\n\t\t\t\t\tthis.setDirection(this.waypoints);\n\t\t\t\t\tthis.printWaypoint(this.waypoints);\n\t\t\t\t}\n\n\t\t\t\tthis.transferInfo = new SceneTransferInfo(this.transferId, this.waypoints[this.waypointIndex].getPath(), this.waypoints[this.waypoints.length - 1].getPath());\n\n\t\t\t\tif (!isDestinationChanged) {\n\t\t\t\t\tthis.dispatchEvent(new SceneManagerEvent(SceneManagerEvent.TRANSFER_START, this));\n\t\t\t\t}\n\n\t\t\t\tthis.checkState();\n\t\t\t}\n\t\t}\n\n\t\tpublic resolvePath(path:string):string {\n\t\t\t// Relative to absolute\n\t\t\tif (path[0] != '/') {\n\t\t\t\tif (this.currentScene) {\n\t\t\t\t\tpath = this.currentScene.getPath() + '/' + path;\n\t\t\t\t} else {\n\t\t\t\t\tpath = '/' + path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Normalize\n\t\t\tconst names:string[] = path.split('/');\n\t\t\tconst normalized:string[] = [];\n\t\t\tfor (let i:number = 0; i < names.length; ++i) {\n\t\t\t\tconst name:string = names[i];\n\t\t\t\tif (name == '') continue;\n\t\t\t\tif (name == '.') continue;\n\t\t\t\tif (name == '..') {\n\t\t\t\t\tnormalized.pop();\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tnormalized.push(name);\n\t\t\t}\n\n\t\t\treturn '/' + normalized.join('/');\n\t\t}\n\n\t\tpublic addSceneAt(path:string, createScene:boolean = false):Scene {\n\t\t\tlet success:boolean = false;\n\t\t\tconst names:string[] = this.getSceneNamesByPath(path);\n\t\t\tconst n:number = names.length;\n\t\t\tlet scene:Scene = this.root;\n\t\t\tfor (let i:number = 1; i < n; ++i) {\n\t\t\t\tconst name:string = names[i];\n\t\t\t\tif (i == n - 1) {\n\t\t\t\t\tif (scene.contains(name)) {\n\t\t\t\t\t\tLogger.warn('[SceneManager \\'' + this.name + '\\'] addSceneAt was failed, because path \\'' + path + '\\' is already exist.');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscene = scene.addChild(new Scene(name));\n\t\t\t\t\t\tsuccess = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (scene.contains(name)) {\n\t\t\t\t\t\tscene = scene.getChildByName(name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscene = scene.addChild(new Scene(name));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn success ? scene : null;\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic getRoot():Scene {\n\t\t\treturn this.root;\n\t\t}\n\n\t\tpublic getSceneByPath(path:string):Scene {\n\t\t\tconst names:string[] = this.getSceneNamesByPath(path);\n\t\t\tconst n:number = names.length;\n\t\t\tlet scene:Scene = this.root;\n\t\t\tfor (let i:number = 1; i < n; ++i) {\n\t\t\t\tscene = scene.getChildByName(names[i]);\n\t\t\t}\n\t\t\treturn scene;\n\t\t}\n\n\t\tpublic getSceneNamesByPath(path:string):string[] {\n\t\t\treturn path == '/' ? [''] : this.resolvePath(path).split('/');\n\t\t}\n\n\t\tpublic getSceneLevelByNames(names:string[]):number {\n\t\t\treturn names.length - 1;\n\t\t}\n\n\t\tpublic getScenePathByNames(names:string[]):string {\n\t\t\treturn names.length == 0 ? '/' : names.length == 1 ? ('/' + names[0]) : names.join('/');\n\t\t}\n\n\t\tprivate createWaypoints(departurePath:string, destinationPath:string):core.Waypoint[] {\n\t\t\tif (departurePath == destinationPath) {\n\t\t\t\tLogger.warn('[SceneManager] departure path and destination path is same, path = \\'' + departurePath + '\\'');\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tLogger.verbose('----- scene flow -----');\n\n\t\t\tconst waypoints:core.Waypoint[] = [\n\t\t\t\tnew core.Waypoint(departurePath, this.getSceneLevelByNames(this.getSceneNamesByPath(departurePath)))\n\t\t\t];\n\n\t\t\tconst departureNames:string[] = this.getSceneNamesByPath(departurePath);\n\t\t\tconst destinationNames:string[] = this.getSceneNamesByPath(destinationPath);\n\n\t\t\tLogger.verbose('    path');\n\t\t\tLogger.verbose('        current    : \\'' + departurePath + '\\'');\n\t\t\tLogger.verbose('        destination: \\'' + destinationPath + '\\'');\n\n\t\t\tLogger.verbose('    names');\n\t\t\tLogger.verbose('        current(' + departureNames.length + ')    : \\'' + departureNames + '\\'');\n\t\t\tLogger.verbose('        destination(' + destinationNames.length + '): \\'' + destinationNames + '\\'');\n\n\t\t\t// \n\t\t\tlet turningLevel:number = 0;\n\t\t\tlet turningNames:string[] = [];\n\t\t\tlet turningPath:string;\n\t\t\tif (destinationPath == '/') {\n\t\t\t\tturningLevel = -1;\n\t\t\t\tturningNames = [];\n\t\t\t\tturningPath = '/';\n\t\t\t} else {\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (departureNames[turningLevel] == destinationNames[turningLevel]) {\n\t\t\t\t\t\tturningNames.push(departureNames[turningLevel]);\n\t\t\t\t\t\t++turningLevel;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t--turningLevel;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tturningPath = this.getScenePathByNames(turningNames);\n\t\t\t}\n\n\t\t\tLogger.verbose('    turning');\n\t\t\tLogger.verbose('        path     : ' + turningPath);\n\t\t\tLogger.verbose('        level    : ' + turningLevel);\n\t\t\tLogger.verbose('        names(' + turningNames.length + ') : \\'' + turningNames + '\\'');\n\n\t\t\t// \n\t\t\t{\n\t\t\t\tconst names:string[] = departureNames.concat();\n\t\t\t\tlet prevPath:string = departurePath;\n\t\t\t\tfor (let i:number = departureNames.length - 1; i > turningLevel + 1; --i) {\n\t\t\t\t\tnames.pop();\n\t\t\t\t\tconst path:string = this.getScenePathByNames(names);\n\t\t\t\t\tif (path != prevPath) {\n\t\t\t\t\t\tconst level:number = this.getSceneLevelByNames(names);\n\t\t\t\t\t\twaypoints.push(new core.Waypoint(path, level));\n\t\t\t\t\t\tprevPath = path;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (turningPath == destinationPath && turningLevel > 0) {\n\t\t\t\t// \n\t\t\t\tconst from:core.Direction = turningLevel == waypoints[waypoints.length - 1].getLevel() ? core.Direction.Sibling : core.Direction.Ascend;\n\t\t\t\twaypoints.push(new core.Waypoint(turningPath, turningLevel));\n\t\t\t} else {\n\n\t\t\t\t// \n\t\t\t\tconst names:string[] = turningNames.concat();\n\t\t\t\tconst prev:core.Waypoint = waypoints[waypoints.length - 1];\n\t\t\t\tlet prevPath:string = prev.getPath();\n\t\t\t\tlet prevLevel:number = prev.getLevel();\n\t\t\t\tfor (let i:number = turningLevel + 1; i < destinationNames.length; ++i) {\n\t\t\t\t\tconst name:string = destinationNames[i];\n\t\t\t\t\tnames.push(name);\n\t\t\t\t\tconst path:string = this.getScenePathByNames(names);\n\t\t\t\t\tif (path != prevPath) {\n\t\t\t\t\t\tconst level:number = this.getSceneLevelByNames(names);\n\t\t\t\t\t\twaypoints.push(new core.Waypoint(path, level));\n\t\t\t\t\t\tprevLevel = level;\n\t\t\t\t\t\tprevPath = path;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// \n\t\t\tthis.setDirection(waypoints);\n\n\t\t\tif (Logger.level <= LoggerLevel.Verbose) {\n\t\t\t\tthis.printWaypoint(waypoints);\n\t\t\t}\n\n\t\t\treturn waypoints;\n\t\t}\n\n\t\tprivate setDirection(waypoints:core.Waypoint[]):void {\n\t\t\tconst n:number = waypoints.length;\n\t\t\tlet prev:core.Waypoint = null;\n\t\t\tlet point:core.Waypoint;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tpoint = waypoints[i];\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tconst d:number = point.getLevel() - prev.getLevel();\n\t\t\t\t\tpoint._setFrom(d > 0 ? core.Direction.Descend : d < 0 ? core.Direction.Ascend : core.Direction.Sibling);\n\t\t\t\t\tprev._setTo(point.getFrom());\n\t\t\t\t}\n\t\t\t\tprev = point;\n\t\t\t}\n\t\t}\n\n\t\tprivate printWaypoint(waypoints:core.Waypoint[]):void {\n\t\t\tLogger.verbose('    waypoints');\n\t\t\tconst n:number = waypoints.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tLogger.verbose('        [' + i + '] ' + waypoints[i]);\n\t\t\t}\n\t\t\tLogger.verbose('');\n\t\t}\n\n\n\n\n\n\t\tprivate checkState():void {\n\t\t\ttrace('lastState : ' + scn.getSceneStateString(this.lastState));\n\n\t\t\t//trace(this.waypointIndex + ' / ' + this.waypoints.length);\n\n\t\t\tif (this.waypointIndex >= this.waypoints.length) {\n\t\t\t\tLogger.verbose('----- scene transfer complete -----');\n\t\t\t\tconst tmpTransferId:number = this.transferInfo.getTransferId();\n\t\t\t\tthis.waypointIndex = this.waypoints.length - 1;\n\t\t\t\tthis.dispatchEvent(new SceneManagerEvent(SceneManagerEvent.TRANSFER_COMPLETE, this));\n\t\t\t\tif (tmpTransferId == this.transferInfo.getTransferId()) {\n\t\t\t\t\tthis.lastState = SceneState.Idling;\n\t\t\t\t\tthis.transferInfo = null;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentScene) {\n\t\t\t\tconst currentWaypoint:core.Waypoint = this.waypoints[this.waypointIndex];\n\t\t\t\tthis.currentScene = this.getSceneByPath(currentWaypoint.getPath());\n\n\t\t\t\t// Departure scene\n\t\t\t\tif (this.waypoints.length > 1 && this.waypointIndex == 0) {\n\t\t\t\t\ttrace('Departure scene');\n\n\t\t\t\t\t// Leave\n\t\t\t\t\tif (this.lastState != SceneState.Leaving && this.currentScene.getLastState() == SceneState.Arriving) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Leave   : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LEAVE_COMPLETE, this.sceneLeaveCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._leave(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Unload\n\t\t\t\t\tif (this.lastState != SceneState.Unloading && (currentWaypoint.getTo() == core.Direction.Sibling || currentWaypoint.getTo() == core.Direction.Ascend)) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Unload  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._unload(this.transferInfo);\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Departure to child\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tthis.checkState();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Through scene\n\t\t\t\tif (this.waypointIndex > 0 && this.waypointIndex < this.waypoints.length - 1) {\n\t\t\t\t\ttrace('Through scene');\n\n\t\t\t\t\t// Load\n\t\t\t\t\tif (this.lastState != SceneState.Loading && (currentWaypoint.getFrom() == core.Direction.Sibling || currentWaypoint.getFrom() == core.Direction.Descend)) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ascend\n\t\t\t\t\tif (this.lastState != SceneState.Ascending && currentWaypoint.getFrom() == core.Direction.Ascend) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Ascend  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.ASCEND_COMPLETE, this.sceneAscendCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._ascend(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Unload\n\t\t\t\t\tif (this.lastState != SceneState.Unloading && (currentWaypoint.getTo() == core.Direction.Sibling || currentWaypoint.getTo() == core.Direction.Ascend)) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Unload  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._unload(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Descend\n\t\t\t\t\tif (this.lastState != SceneState.Descending && currentWaypoint.getTo() == core.Direction.Descend) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Descend : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.DESCEND_COMPLETE, this.sceneDescendCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._descend(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Destination scene\n\t\t\t\tif (this.waypointIndex == this.waypoints.length - 1) {\n\t\t\t\t\ttrace('Destination scene');\n\n\t\t\t\t\t// Load\n\t\t\t\t\tif (this.lastState != SceneState.Loading && (currentWaypoint.getFrom() == core.Direction.Sibling || currentWaypoint.getFrom() == core.Direction.Descend)) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Arrive\n\t\t\t\t\tif (this.lastState != SceneState.Arriving) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Arrive  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.ARRIVE_COMPLETE, this.sceneArriveCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._arrive(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\ttrace('Init scene');\n\n\t\t\t\t// Init\n\t\t\t\tthis.lastState = SceneState.Idling;\n\t\t\t\tthis.currentScene = this.root;\n\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t}\n\t\t}\n\n\t\tprivate sceneLoadCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\tthis.lastState = SceneState.Loading;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneUnloadCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\tthis.lastState = SceneState.Unloading;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneArriveCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.ARRIVE_COMPLETE, this.sceneArriveCompleteHandler);\n\t\t\tthis.lastState = SceneState.Arriving;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneLeaveCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.LEAVE_COMPLETE, this.sceneLeaveCompleteHandler);\n\t\t\tthis.lastState = SceneState.Leaving;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneAscendCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.ASCEND_COMPLETE, this.sceneAscendCompleteHandler);\n\t\t\tthis.lastState = SceneState.Ascending;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneDescendCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.DESCEND_COMPLETE, this.sceneDescendCompleteHandler);\n\t\t\tthis.lastState = SceneState.Descending;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate name:string;\n\t\tprivate root:Scene;\n\t\tprivate currentScene:Scene;\n\n\t\tprivate waypoints:core.Waypoint[];\n\t\tprivate waypointIndex:number;\n\t\tprivate lastState:SceneState;\n\t\tprivate eventIndex:number;\n\t\tprivate transferInfo:SceneTransferInfo;\n\t\tprivate transferId:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Event = alm.event.Event;\n\n\texport class SceneManagerEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static TRANSFER_START:string = 'transferStart';\n\t\tpublic static TRANSFER_COMPLETE:string = 'transferComplete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():SceneManagerEvent {\n\t\t\treturn new SceneManagerEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[SceneManagerEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\texport class SceneTransferInfo {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(transferId:number, departurePath:string, destinationPath:string) {\n\t\t\tthis.transferId = transferId;\n\t\t\tthis.departurePath = departurePath;\n\t\t\tthis.destinationPath = destinationPath;\n\t\t\tthis.relay = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTransferId():number {\n\t\t\treturn this.transferId;\n\t\t}\n\n\t\tpublic getDeparturePath():string {\n\t\t\treturn this.departurePath;\n\t\t}\n\n\t\tpublic getDestinationPath():string {\n\t\t\treturn this.destinationPath;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic relay:any;\n\n\t\tprivate transferId:number;\n\t\tprivate departurePath:string;\n\t\tprivate destinationPath:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\texport enum SceneState {\n\t\tIdling,\n\t\tLoading,\n\t\tUnloading,\n\t\tArriving,\n\t\tLeaving,\n\t\tAscending,\n\t\tDescending,\n\t}\n\n\texport function getSceneStateString(state:SceneState):string {\n\t\tswitch (state) {\n\t\t\tcase SceneState.Idling:\n\t\t\t\treturn 'idling';\n\t\t\tcase SceneState.Loading:\n\t\t\t\treturn 'loading';\n\t\t\tcase SceneState.Unloading:\n\t\t\t\treturn 'unloading';\n\t\t\tcase SceneState.Arriving:\n\t\t\t\treturn 'arriving';\n\t\t\tcase SceneState.Leaving:\n\t\t\t\treturn 'leaving';\n\t\t\tcase SceneState.Ascending:\n\t\t\t\treturn 'ascending';\n\t\t\tcase SceneState.Descending:\n\t\t\t\treturn 'descending';\n\t\t}\n\t\treturn '';\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport enum Direction {\n\t\tStatic,\n\t\tSibling,\n\t\tAscend,\n\t\tDescend,\n\t}\n\n\texport function getDirectionString(direction:Direction):string {\n\t\tswitch (direction) {\n\t\t\tcase Direction.Static:\n\t\t\t\treturn 'static';\n\t\t\tcase Direction.Sibling:\n\t\t\t\treturn 'sibling';\n\t\t\tcase Direction.Ascend:\n\t\t\t\treturn 'ascend';\n\t\t\tcase Direction.Descend:\n\t\t\t\treturn 'descend';\n\t\t}\n\t\treturn '';\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport class RootScene extends Scene {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(manager:SceneManager) {\n\t\t\tsuper('');\n\t\t\tthis.manager = manager;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getManager():SceneManager {\n\t\t\treturn this.manager;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate manager:SceneManager;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport class Waypoint {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(path:string, level:number) {\n\t\t\tthis.path = path;\n\t\t\tthis.level = level;\n\t\t\tthis.from = Direction.Static;\n\t\t\tthis.to = Direction.Static;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getPath():string {\n\t\t\treturn this.path;\n\t\t}\n\n\t\tpublic getLevel():number {\n\t\t\treturn this.level;\n\t\t}\n\n\t\tpublic getFrom():Direction {\n\t\t\treturn this.from;\n\t\t}\n\n\t\tpublic getTo():Direction {\n\t\t\treturn this.to;\n\t\t}\n\n\t\tpublic _setFrom(from:Direction):void {\n\t\t\tthis.from = from;\n\t\t}\n\n\t\tpublic _setTo(to:Direction):void {\n\t\t\tthis.to = to;\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[Waypoint] path = \\'' + this.path + '\\', level = ' + this.level + ', from = ' + getDirectionString(this.from) + ', to = ' + getDirectionString(this.to);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate path:string;\n\t\tprivate level:number;\n\t\tprivate from:Direction;\n\t\tprivate to:Direction;\n\t}\n}","/* ---------- dependency ---------- */\n\n/* ---------- project ---------- */\n/// <reference path='alm/util/Easing.ts' />\n/// <reference path='alm/event/Event.ts' />\n/// <reference path='alm/event/EventDispatcher.ts' />\n\n/// <reference path='cmd/CommandState.ts' />\n/// <reference path='cmd/CommandEvent.ts' />\n/// <reference path='cmd/Command.ts' />\n/// <reference path='cmd/CommandList.ts' />\n/// <reference path='cmd/Break.ts' />\n/// <reference path='cmd/Return.ts' />\n/// <reference path='cmd/Log.ts' />\n/// <reference path='cmd/Wait.ts' />\n/// <reference path='cmd/Func.ts' />\n/// <reference path='cmd/Listen.ts' />\n/// <reference path='cmd/Tween.ts' />\n/// <reference path='cmd/Serial.ts' />\n/// <reference path='cmd/Parallel.ts' />\n\n/// <reference path='alm/geom/Vector2.ts' />\n/// <reference path='alm/geom/Vector3.ts' />\n/// <reference path='alm/geom/Rectangle.ts' />\n/// <reference path='alm/util/Hash.ts' />\n/// <reference path='alm/util/Obj.ts' />\n/// <reference path='alm/util/Arr.ts' />\n/// <reference path='alm/util/Num.ts' />\n/// <reference path='alm/util/Str.ts' />\n/// <reference path='alm/util/Loc.ts' />\n/// <reference path='alm/util/Boxer.ts' />\n/// <reference path='alm/util/Raffle.ts' />\n/// <reference path='alm/util/Rotator.ts' />\n/// <reference path='alm/util/Logger.ts' />\n/// <reference path='alm/util/Pager.ts' />\n/// <reference path='alm/util/PagerEvent.ts' />\n/// <reference path='alm/util/Timer.ts' />\n/// <reference path='alm/util/TimerEvent.ts' />\n/// <reference path='alm/util/ObjectPool.ts' />\n/// <reference path='alm/util/CommandUtil.ts' />\n/// <reference path='alm/loader/AssetLoader.ts' />\n/// <reference path='alm/loader/AssetLoaderEvent.ts' />\n/// <reference path='alm/loader/FileQuery.ts' />\n/// <reference path='alm/loader/IFileHandler.ts' />\n/// <reference path='alm/view/View.ts' />\n/// <reference path='alm/view/ButtonBehavior.ts' />\n/// <reference path='alm/view/IButton.ts' />\n/// <reference path='alm/view/SelectionBehavior.ts' />\n/// <reference path='alm/view/ISelection.ts' />\n/// <reference path='alm/browser/DeviceInfo.ts' />\n/// <reference path='alm/browser/LocalStorage.ts' />\n/// <reference path='alm/browser/KeyWatcher.ts' />\n/// <reference path='alm/browser/KeyWatcherEvent.ts' />\n/// <reference path='alm/browser/WindowWatcher.ts' />\n/// <reference path='alm/browser/WindowWatcherEvent.ts' />\n\n/// <reference path='scn/Scene.ts' />\n/// <reference path='scn/SceneEvent.ts' />\n/// <reference path='scn/SceneManager.ts' />\n/// <reference path='scn/SceneManagerEvent.ts' />\n/// <reference path='scn/SceneTransferInfo.ts' />\n/// <reference path='scn/SceneState.ts' />\n/// <reference path='scn/core/Direction.ts' />\n/// <reference path='scn/core/RootScene.ts' />\n/// <reference path='scn/core/Waypoint.ts' />\n\nnamespace alm {\n\n\t// Library version info\n\texport function getVersion():string {\n\t\treturn '0.0.1';\n\t}\n\n\t// Credit info\n\tconst style:string = 'color:#999;';\n\tconst print:Function = console.debug;\n\tprint('%c+ + + + + + + + + + + + + + + + + + + + + + + + + +', style);\n\tprint('%c+ alumican.js', style);\n\tprint('%c+ version ' + getVersion(), style);\n\tprint('%c+ http://alumican.net', style);\n\tprint('%c+ https://github.com/alumican/alumican.js', style);\n\tprint('%c+ + + + + + + + + + + + + + + + + + + + + + + + + +', style);\n\tprint('');\n}"]}
{"version":3,"sources":["../src/alumican/alm/util/Easing.ts","../src/alumican/alm/event/Event.ts","../src/alumican/alm/event/EventDispatcher.ts","../src/alumican/cmd/CommandState.ts","../src/alumican/cmd/CommandEvent.ts","../src/alumican/cmd/Command.ts","../src/alumican/cmd/CommandList.ts","../src/alumican/cmd/Break.ts","../src/alumican/cmd/Return.ts","../src/alumican/cmd/Log.ts","../src/alumican/cmd/Wait.ts","../src/alumican/cmd/Func.ts","../src/alumican/cmd/Listen.ts","../src/alumican/cmd/Tween.ts","../src/alumican/cmd/Serial.ts","../src/alumican/cmd/Parallel.ts","../src/alumican/alm/geom/Vector2.ts","../src/alumican/alm/geom/Vector3.ts","../src/alumican/alm/geom/Rectangle.ts","../src/alumican/alm/util/Hash.ts","../src/alumican/alm/util/Obj.ts","../src/alumican/alm/util/Arr.ts","../src/alumican/alm/util/Num.ts","../src/alumican/alm/util/Str.ts","../src/alumican/alm/util/Loc.ts","../src/alumican/alm/util/Boxer.ts","../src/alumican/alm/util/Raffle.ts","../src/alumican/alm/util/Rotator.ts","../src/alumican/alm/util/Logger.ts","../src/alumican/alm/util/Pager.ts","../src/alumican/alm/util/PagerEvent.ts","../src/alumican/alm/util/Timer.ts","../src/alumican/alm/util/TimerEvent.ts","../src/alumican/alm/util/ObjectPool.ts","../src/alumican/alm/util/CommandUtil.ts","../src/alumican/alm/loader/AssetLoader.ts","../src/alumican/alm/loader/AssetLoaderEvent.ts","../src/alumican/alm/loader/FileQuery.ts","../src/alumican/alm/loader/IFileHandler.ts","../src/alumican/alm/view/View.ts","../src/alumican/alm/view/ButtonBehavior.ts","../src/alumican/alm/view/IButton.ts","../src/alumican/alm/view/SelectionBehavior.ts","../src/alumican/alm/view/ISelection.ts","../src/alumican/alm/browser/DeviceInfo.ts","../src/alumican/alm/browser/LocalStorage.ts","../src/alumican/alm/browser/KeyWatcher.ts","../src/alumican/alm/browser/KeyWatcherEvent.ts","../src/alumican/alm/browser/WindowWatcher.ts","../src/alumican/alm/browser/WindowWatcherEvent.ts","../src/alumican/scn/Scene.ts","../src/alumican/scn/SceneEvent.ts","../src/alumican/scn/SceneManager.ts","../src/alumican/scn/SceneManagerEvent.ts","../src/alumican/scn/SceneTransferInfo.ts","../src/alumican/scn/SceneState.ts","../src/alumican/scn/core/Direction.ts","../src/alumican/scn/core/RootScene.ts","../src/alumican/scn/core/Waypoint.ts","../src/alumican/include.ts"],"names":[],"mappings":"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","file":"alumican.d.ts","sourcesContent":["namespace alm.util {\n\n\texport type EasingFunction = (t:number, b:number, c:number, d:number)=>number;\n\n\texport class Easing {\n\n\t\tpublic static linear(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * t / d + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuad(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuad(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * (t /= d) * (t - 2) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuad(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t + b;\n\t\t\treturn (-c) / 2 * ((--t) * (t - 2) - 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInCubic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutCubic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * ((t = t / d - 1) * t * t + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutCubic(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t + b;\n\t\t\treturn c / 2 * ((t -= 2) * t * t + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuart(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuart(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * ((t = t / d - 1) * t * t * t - 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuart(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\n\t\t\treturn (-c) / 2 * ((t -= 2) * t * t * t - 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInQuint(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * (t /= d) * t * t * t * t + b;\n\t\t}\n\n\t\tpublic static easeOutQuint(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutQuint(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;\n\t\t\treturn c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * Math.cos(t / d * (Math.PI / 2)) + c + b;\n\t\t}\n\n\t\tpublic static easeOutSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * Math.sin(t / d * (Math.PI / 2)) + b;\n\t\t}\n\n\t\tpublic static easeInOutSine(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == 0) return b;\n\t\t\treturn c * Math.pow(2, 10 * (t / d - 1)) + b;\n\t\t}\n\n\t\tpublic static easeOutExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == d) return b + c;\n\t\t\treturn c * (-Math.pow(2, -10 * t / d) + 1) + b;\n\t\t}\n\n\t\tpublic static easeInOutExpo(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t == 0) return b;\n\t\t\tif (t == d) return b + c;\n\t\t\tif ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n\t\t\treturn c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static easeInCirc(t:number, b:number, c:number, d:number):number {\n\t\t\treturn (-c) * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n\t\t}\n\n\t\tpublic static easeOutCirc(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n\t\t}\n\n\t\tpublic static easeInOutCirc(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d / 2) < 1) return (-c) / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n\t\t\treturn c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n\t\t}\n\n\n\n\n\n\t\tpublic static createEaseInElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d) == 1) return b + c;\n\t\t\t\tif (p == 0) p = d * 0.3;\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\treturn (-a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p )) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseOutElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d) == 1) return b + c;\n\t\t\t\tif (p == 0) p = d * 0.3;\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseInOutElastic(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tlet p:number = 0;\n\t\t\t\tlet a:number = c;\n\t\t\t\tif (t == 0) return b;\n\t\t\t\tif ((t /= d / 2) == 2) return b + c;\n\t\t\t\tif (p == 0) p = d * (0.3 * 1.5);\n\t\t\t\tif (a < Math.abs(c)) {\n\t\t\t\t\ta = c;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else {\n\t\t\t\t\ts = p / (2 * Math.PI) * Math.asin(c / a);\n\t\t\t\t}\n\t\t\t\tif (t < 1) return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n\t\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeOutElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseOutElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeInOutElastic(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInOutElastic(t, b, c, d);\n\t\t}\n\n\t\tprivate static defaultEaseInElastic:EasingFunction = Easing.createEaseInElastic();\n\t\tprivate static defaultEaseOutElastic:EasingFunction = Easing.createEaseOutElastic();\n\t\tprivate static defaultEaseInOutElastic:EasingFunction = Easing.createEaseInOutElastic();\n\n\n\n\n\n\t\tpublic static createEaseInBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\treturn c * (t /= d) * t * ((s + 1) * t - s) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseOutBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\treturn c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static createEaseInOutBack(s:number = 1.70158):EasingFunction {\n\t\t\treturn function (t:number, b:number, c:number, d:number) {\n\t\t\t\tif ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n\t\t\t\treturn c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInElastic(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeOutBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseOutBack(t, b, c, d);\n\t\t}\n\n\t\tpublic static easeInOutBack(t:number, b:number, c:number, d:number):number {\n\t\t\treturn Easing.defaultEaseInOutBack(t, b, c, d);\n\t\t}\n\n\t\tprivate static defaultEaseInBack:EasingFunction = Easing.createEaseInBack();\n\t\tprivate static defaultEaseOutBack:EasingFunction = Easing.createEaseOutBack();\n\t\tprivate static defaultEaseInOutBack:EasingFunction = Easing.createEaseInOutBack();\n\n\n\n\n\n\t\tpublic static easeInBounce(t:number, b:number, c:number, d:number):number {\n\t\t\treturn c - Easing.easeOutBounce(d - t, 0, c, d) + b;\n\t\t}\n\n\t\tpublic static easeOutBounce(t:number, b:number, c:number, d:number):number {\n\t\t\tif ((t /= d) < (1 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * t * t) + b;\n\t\t\t} else if (t < (2 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\n\t\t\t} else if (t < (2.5 / 2.75)) {\n\t\t\t\treturn c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\n\t\t\t} else {\n\t\t\t\treturn c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\n\t\t\t}\n\t\t}\n\n\t\tpublic static easeInOutBounce(t:number, b:number, c:number, d:number):number {\n\t\t\tif (t < d / 2) return Easing.easeInBounce(t * 2, 0, c, d) * 0.5 + b;\n\t\t\treturn Easing.easeOutBounce(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n\t\t}\n\t}\n}","/// <reference path='../../include.ts' />\r\n\r\nnamespace alm.event {\r\n\r\n\texport class Event {\r\n\r\n\t\t// --------------------------------------------------\r\n\t\t//\r\n\t\t// CONSTRUCTOR\r\n\t\t//\r\n\t\t// --------------------------------------------------\r\n\r\n\t\tconstructor(type:string, target:Object, data:any = null) {\r\n\t\t\tthis.type = type;\r\n\t\t\tthis.target = target;\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\r\n\t\tpublic getType():string {\r\n\t\t\treturn this.type;\r\n\t\t}\r\n\r\n\t\tpublic getTarget():Object {\r\n\t\t\treturn this.target;\r\n\t\t}\r\n\r\n\t\tpublic getData():any {\r\n\t\t\treturn this.data;\r\n\t\t}\r\n\r\n\t\tpublic setData(data:any):void {\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\t\t// --------------------------------------------------\r\n\t\t//\r\n\t\t// MEMBER\r\n\t\t//\r\n\t\t// --------------------------------------------------\r\n\r\n\t\tprivate type:string;\r\n\t\tprivate target:Object;\r\n\t\tprivate data:any;\r\n\t}\r\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.event {\n\n\texport type EventListener = (event:Event) => void;\n\n\texport class EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:any = null) {\n\t\t\tthis.target = target || this;\n\t\t\tthis.listeners = {};\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addEventListener(eventType:string, listener:EventListener):void {\n\t\t\tif (typeof(listener) != 'function') return;\n\t\t\tlet listeners:EventListener[] = this.listeners[eventType];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tif (listener == listeners[i]) return;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.listeners[eventType] = listeners = [];\n\t\t\t}\n\t\t\tlisteners.push(listener);\n\t\t}\n\n\t\tpublic removeEventListener(eventType:string, listener:EventListener):void {\n\t\t\tif (typeof(listener) != 'function') return;\n\t\t\tlet listeners:EventListener[] = this.listeners[eventType];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tif (listener == listeners[i]) {\n\t\t\t\t\t\tlisteners.splice(i,  1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (listeners.length == 0) {\n\t\t\t\t\tdelete this.listeners[eventType];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic removeAllEventListener(eventType:string = null):void {\n\t\t\tif (eventType) {\n\t\t\t\tdelete this.listeners[eventType];\n\t\t\t} else {\n\t\t\t\tthis.listeners = {};\n\t\t\t}\n\t\t}\n\n\t\tpublic hasEventListener(eventType:string):boolean {\n\t\t\treturn this.listeners[eventType] != null;\n\t\t}\n\n\t\tpublic dispatchEvent(event:Event):void {\n\t\t\tlet listeners:EventListener[] = this.listeners[event.getType()];\n\t\t\tif (listeners) {\n\t\t\t\tconst numListeners:number = listeners.length;\n\t\t\t\tfor (let i:number = 0; i < numListeners; ++i) {\n\t\t\t\t\tlisteners[i].call(this.target, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic dispatchEventType(eventType:string, target:Object = null, data:any = null):void {\n\t\t\tthis.dispatchEvent(new Event(eventType, target, data));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:any;\n\t\tprivate listeners:util.Hash<EventListener[]>;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport enum CommandState {\n\t\tSleeping     = 0,\n\t\tExecuting    = 1,\n\t\tInterrupting = 2,\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class CommandEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static COMPLETE:string = 'complete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():CommandEvent {\n\t\t\treturn new CommandEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[CommandEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Command extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(executeFunction:Function = null, interruptFunction:Function = null, destroyFunction:Function = null) {\n\t\t\tsuper();\n\n\t\t\tthis.setExecuteFunction(executeFunction);\n\t\t\tthis.setInterruptFunction(interruptFunction);\n\t\t\tthis.setDestroyFunction(destroyFunction);\n\n\t\t\tthis.state = CommandState.Sleeping;\n\t\t\tthis.self = this;\n\t\t\tthis.parent = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic execute():void {\n\t\t\tif (this.state > CommandState.Sleeping) {\n\t\t\t\tthrow new Error('[Command.execute] + Command is already executing.');\n\t\t\t}\n\t\t\tthis.state = CommandState.Executing;\n\t\t\tthis.getExecuteFunction().call(this, this);\n\t\t}\n\n\t\tpublic interrupt():void {\n\t\t\tif (this.state == CommandState.Executing) {\n\t\t\t\tthis.state = CommandState.Interrupting;\n\t\t\t\tthis.getInterruptFunction().call(this, this);\n\t\t\t}\n\t\t}\n\n\t\tpublic destroy():void {\n\t\t\tthis.state = CommandState.Sleeping;\n\t\t\tthis.getDestroyFunction().call(this, this);\n\t\t\tthis.parent = null;\n\t\t\tthis.executeFunction = null;\n\t\t\tthis.interruptFunction = null;\n\t\t\tthis.destroyFunction = null;\n\t\t}\n\n\t\tprotected notifyComplete():void {\n\t\t\tswitch (this.state) {\n\t\t\t\tcase CommandState.Sleeping:\n\t\t\t\t\tbreak;\n\t\t\t\tcase CommandState.Executing:\n\t\t\t\t\tthis.dispatchEvent(new CommandEvent(CommandEvent.COMPLETE, this));\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tbreak;\n\t\t\t\tcase CommandState.Interrupting:\n\t\t\t\t\tthis.dispatchEvent(new CommandEvent(CommandEvent.COMPLETE, this));\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.notifyComplete();\n\t\t}\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getExecuteFunction():Function { return this.executeFunction || this.implExecuteFunction };\n\t\tpublic setExecuteFunction(func:Function):void { this.executeFunction = func; }\n\t\tprivate executeFunction:Function;\n\n\t\tpublic getInterruptFunction():Function { return this.interruptFunction || this.implInterruptFunction };\n\t\tpublic setInterruptFunction(func:Function):void { this.interruptFunction = func; }\n\t\tprivate interruptFunction:Function;\n\n\t\tpublic getDestroyFunction():Function { return this.destroyFunction || this.implDestroyFunction };\n\t\tpublic setDestroyFunction(func:Function):void { this.destroyFunction = func; }\n\t\tprivate destroyFunction:Function;\n\n\t\tpublic getState():CommandState { return this.state; }\n\t\tprivate state:CommandState;\n\n\t\tpublic getParent():Command { return this.parent; }\n\t\tpublic setParent(parent:Command):void { this.parent = parent; }\n\t\tprivate parent:Command;\n\n\t\tpublic getSelf():Command { return this.self; }\n\t\tprivate self:Command;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport abstract class CommandList extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper();\n\t\t\tthis.commands = [];\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tif (commands.length > 0) {\n\t\t\t\tthis.preProcess(commands);\n\t\t\t\tthis.commands = this.getCommands().concat(<Command[]>commands);\n\t\t\t}\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommandAt(0, ...commands);\n\t\t}\n\n\t\tprotected insertCommandAt(index:number, ...commands:(Command|Function)[]):void {\n\t\t\tif (commands.length > 0) {\n\t\t\t\tthis.preProcess(commands);\n\t\t\t\tArray.prototype.splice.apply(this.getCommands(), (<any[]>[index, 0]).concat(commands));\n\t\t\t}\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommand(...commands);\n\t\t}\n\n\t\tprotected insertCommandArrayAt(index:number, commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommandAt(index, ...commands);\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn this.commands.length;\n\t\t}\n\n\t\tpublic getCommandByIndex(index:number):Command { return this.commands[index]; }\n\t\tpublic getCommands():Command[] { return this.commands; }\n\n\t\tprivate preProcess(commands:(Command|Function)[]):void {\n\t\t\tconst numCommands:number = commands.length;\n\t\t\tlet command:Command|Function;\n\t\t\tfor (let i:number = 0; i < numCommands; ++i) {\n\t\t\t\tcommand = commands[i];\n\t\t\t\tif (typeof(command) == 'function') commands[i] = command = new Func(command);\n\t\t\t\tcommand.setParent(this);\n\t\t\t}\n\t\t}\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\t\tprotected abstract implNotifyBreak():void;\n\t\tprotected abstract implNotifyReturn():void;\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate commands:Command[];\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Break extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconst func:Function = this.getParent()['notifyBreak'];\n\t\t\tif (func) func();\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Return extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Log extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...messages:any[]) {\n\t\t\tsuper();\n\t\t\tthis.messages = messages;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tconsole.log.apply(console, Array.prototype.slice.call(this.messages));\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.messages = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getMessages():any[] { return this.messages; }\n\t\tpublic setMessages(messages:any[]):void { this.messages = messages; }\n\t\tprivate messages:any[];\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\texport class Wait extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(time:number = 1000) {\n\t\t\tsuper();\n\t\t\tthis.time = time;\n\t\t\tthis.timerId = -1;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.timerId = window.setTimeout(this.completeHandler, this.time);\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprivate cancel():void {\n\t\t\tif (this.timerId != -1) {\n\t\t\t\tclearTimeout(this.timerId);\n\t\t\t\tthis.timerId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTime():number { return this.time; }\n\t\tpublic setTime(time:number):void { this.time = time; }\n\t\tprivate time:number;\n\n\t\tprivate timerId:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Func extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(func:Function = null, args:any[] = [], eventDispatcher:EventDispatcher = null, eventType:string = null) {\n\t\t\tsuper();\n\t\t\tthis.func = func;\n\t\t\tthis.args = args;\n\t\t\tthis.eventDispatcher = eventDispatcher;\n\t\t\tthis.eventType = eventType;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.addEventListener(this.eventType, this.completeHandler);\n\t\t\t\tthis.func(...this.args);\n\t\t\t} else {\n\t\t\t\tthis.func(...this.args);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\n\t\t\tthis.func = null;\n\t\t\tthis.args = null;\n\t\t\tthis.eventDispatcher = null;\n\t\t\tthis.eventType = null;\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getFunction():Function { return this.func; }\n\t\tpublic setFunction(func:Function):void { this.func = func; }\n\t\tprivate func:Function;\n\n\t\tpublic getArguments():any[] { return this.args; }\n\t\tpublic setArguments(args:any[]):void { this.args = args; }\n\t\tprivate args:any[];\n\n\t\tpublic getEventDispatcher():EventDispatcher { return this.eventDispatcher; }\n\t\tpublic setEventDispatcher(eventDispatcher:EventDispatcher):void { this.eventDispatcher = eventDispatcher; }\n\t\tprivate eventDispatcher:EventDispatcher;\n\n\t\tpublic getEventType():string { return this.eventType; }\n\t\tpublic setEventType(eventType:string):void { this.eventType = eventType; }\n\t\tprivate eventType:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Listen extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventDispatcher:EventDispatcher = null, eventType:string = null) {\n\t\t\tsuper();\n\t\t\tthis.eventDispatcher = eventDispatcher;\n\t\t\tthis.eventType = eventType;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.addEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.eventDispatcher && this.eventType) {\n\t\t\t\tthis.eventDispatcher.removeEventListener(this.eventType, this.completeHandler);\n\t\t\t}\n\n\t\t\tthis.eventType = null;\n\t\t\tthis.eventDispatcher = null;\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.notifyComplete();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getEventDispatcher():EventDispatcher { return this.eventDispatcher; }\n\t\tpublic setEventDispatcher(eventDispatcher:EventDispatcher):void { this.eventDispatcher = eventDispatcher; }\n\t\tprivate eventDispatcher:EventDispatcher;\n\n\t\tpublic getEventType():string { return this.eventType; }\n\t\tpublic setEventType(eventType:string):void { this.eventType = eventType; }\n\t\tprivate eventType:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Easing = alm.util.Easing;\n\timport EasingFunction = alm.util.EasingFunction;\n\n\texport type TweenCallbackFunction = (progressTime:number, progressValue:number) => void;\n\n\texport class Tween extends Command {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:Object, to:Object, from:Object = null, duration:number = 1000, easing:EasingFunction = Easing.linear, onStart:TweenCallbackFunction = null, onUpdate:TweenCallbackFunction = null, onComplete:TweenCallbackFunction = null) {\n\t\t\tsuper();\n\t\t\tthis.tweenTarget = target;\n\t\t\tthis.to = to;\n\t\t\tthis.from = from;\n\t\t\tthis.duration = duration;\n\t\t\tthis.easing = easing;\n\t\t\tthis.onStart = onStart;\n\t\t\tthis.onUpdate = onUpdate;\n\t\t\tthis.onComplete = onComplete;\n\t\t\tthis.progressTime = 0;\n\t\t\tthis.progressValue = 0;\n\t\t\tthis.startTime = 0;\n\t\t\tthis.timerId = -1;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.internalFrom = {};\n\t\t\tlet value0:number;\n\t\t\tlet value1:number;\n\t\t\tfor (let key in this.to) {\n\t\t\t\tvalue1 = this.to[key];\n\t\t\t\tif (this.from && this.from[key] != null) {\n\t\t\t\t\tthis.internalFrom[key] = this.from[key];\n\t\t\t\t} else {\n\t\t\t\t\tthis.internalFrom[key] = this.tweenTarget[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.duration > 0) {\n\t\t\t\tthis.timerId = window.setInterval(this.intervalHandler, Tween.updateInterval);\n\t\t\t\tthis.startTime = new Date().getTime();\n\t\t\t\tthis.apply(0);\n\t\t\t\tif (this.onStart) this.onStart(this.progressTime, this.progressValue);\n\t\t\t} else {\n\t\t\t\tthis.apply(0);\n\t\t\t\tif (this.onStart) this.onStart(this.progressTime, this.progressValue);\n\t\t\t\tthis.apply(1);\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t\tif (this.onComplete) this.onComplete(this.progressTime, this.progressValue);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tthis.cancel();\n\n\t\t\tthis.tweenTarget = null;\n\t\t\tthis.to = null;\n\t\t\tthis.from = null;\n\t\t\tthis.easing = null;\n\t\t\tthis.onStart = null;\n\t\t\tthis.onUpdate = null;\n\t\t\tthis.onComplete = null;\n\t\t\tthis.internalFrom = null;\n\t\t}\n\n\t\tprivate cancel():void {\n\t\t\tif (this.timerId != -1) {\n\t\t\t\tclearInterval(this.timerId);\n\t\t\t\tthis.timerId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate apply(timeRatio:number):void {\n\t\t\tthis.progressTime = timeRatio;\n\t\t\tthis.progressValue = this.easing(this.progressTime, 0, 1, 1);\n\t\t\tlet value0:number;\n\t\t\tfor (let key in this.to) {\n\t\t\t\tvalue0 = this.internalFrom[key];\n\t\t\t\tthis.tweenTarget[key] = value0 + (this.to[key] - value0) * this.progressValue;\n\t\t\t}\n\t\t}\n\n\t\tprivate intervalHandler = ():void => {\n\t\t\tconst elapsedTime:number = new Date().getTime() - this.startTime;\n\t\t\tif (elapsedTime < this.duration) {\n\t\t\t\tthis.apply(elapsedTime / this.duration);\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t} else {\n\t\t\t\tthis.apply(1);\n\t\t\t\tthis.cancel();\n\t\t\t\tif (this.onUpdate) this.onUpdate(this.progressTime, this.progressValue);\n\t\t\t\tif (this.onComplete) this.onComplete(this.progressTime, this.progressValue);\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTarget():Object { return this.tweenTarget; }\n\t\tpublic setTarget(target:Object):void { this.tweenTarget = target; }\n\t\tprivate tweenTarget:Object;\n\n\t\tpublic getDuration():number { return this.duration; }\n\t\tpublic setDuration(duration:number):void { this.duration = duration; }\n\t\tprivate duration:number;\n\n\t\tpublic getTo():Object { return this.to; }\n\t\tpublic setTo(to:Object):void { this.to = to; }\n\t\tprivate to:Object;\n\n\t\tpublic getFrom():Object { return this.from; }\n\t\tpublic setFrom(from:Object):void { this.from = from; }\n\t\tprivate from:Object;\n\n\t\tpublic getEasing():EasingFunction { return this.easing; }\n\t\tpublic setEasing(easing:EasingFunction):void { this.easing = easing; }\n\t\tprivate easing:EasingFunction;\n\n\t\tpublic getOnStart():TweenCallbackFunction { return this.onStart; }\n\t\tpublic setOnStart(func:TweenCallbackFunction):void { this.onStart = func; }\n\t\tprivate onStart:TweenCallbackFunction;\n\n\t\tpublic getOnUpdate():TweenCallbackFunction { return this.onUpdate; }\n\t\tpublic setOnUpdate(func:TweenCallbackFunction):void { this.onUpdate = func; }\n\t\tprivate onUpdate:TweenCallbackFunction;\n\n\t\tpublic getOnComplete():TweenCallbackFunction { return this.onComplete; }\n\t\tpublic setOnComplete(func:TweenCallbackFunction):void { this.onComplete = func; }\n\t\tprivate onComplete:TweenCallbackFunction;\n\n\t\tpublic getProgressTime():number { return this.progressTime; }\n\t\tprivate progressTime:number;\n\n\t\tpublic getProgressValue():number { return this.progressValue; }\n\t\tprivate progressValue:number;\n\n\t\tprivate startTime:number;\n\t\tprivate timerId:number;\n\t\tprivate internalFrom:Object;\n\n\t\tpublic getUpdateInterval():number { return Tween.updateInterval; }\n\t\tpublic setUpdateInterval(milliseconds:number):void { Tween.updateInterval = milliseconds; }\n\t\tprivate static updateInterval:number = 1000 / 60;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class Serial extends CommandList {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper(...commands);\n\t\t\tthis.currentCommand = null;\n\t\t\tthis.position = -1;\n\t\t\tthis.isPaused = false;\n\t\t\tthis.isCompleteOnPaused = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.insertCommandAt(this.position + 1, ...commands);\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.insertCommand(...commands);\n\t\t}\n\n\t\tprivate next():void {\n\t\t\tthis.currentCommand = this.getCommandByIndex(this.position);\n\t\t\tthis.currentCommand.addEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\tthis.currentCommand.execute();\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\tthis.currentCommand = null;\n\t\t\tif (++this.position >= this.getLength()) {\n\t\t\t\tthis.notifyComplete();\n\t\t\t} else {\n\t\t\t\tthis.next();\n\t\t\t}\n\t\t};\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.position = 0;\n\t\t\tif (this.getLength() > 0) {\n\t\t\t\tthis.next();\n\t\t\t} else {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tif (this.currentCommand) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t\tthis.currentCommand = null;\n\t\t\t}\n\t\t\tthis.position = -1;\n\t\t\tsuper.implInterruptFunction(command);\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tif (this.currentCommand) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.destroy();\n\t\t\t\tthis.currentCommand = null;\n\t\t\t}\n\t\t\tthis.position = -1;\n\t\t\tthis.isPaused = false;\n\t\t\tthis.isCompleteOnPaused = false;\n\t\t\tsuper.implDestroyFunction(command);\n\t\t}\n\n\t\tprotected implNotifyBreak():void {\n\t\t\tif (this.currentCommand.getState() == CommandState.Executing) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t}\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implNotifyReturn():void {\n\t\t\tif (this.currentCommand.getState() == CommandState.Executing) {\n\t\t\t\tthis.currentCommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\tthis.currentCommand.interrupt();\n\t\t\t}\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.destroy();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected getPosition():number { return this.position; }\n\t\tprivate position:number;\n\n\t\tprivate currentCommand:Command;\n\t\tprivate isPaused:boolean;\n\t\tprivate isCompleteOnPaused:boolean;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace cmd {\n\n\timport Event = alm.event.Event;\n\n\texport class Parallel extends CommandList {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(...commands:(Command|Function)[]) {\n\t\t\tsuper(...commands);\n\t\t\tthis.completeCount = 0;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addCommand(...commands:(Command|Function)[]):void {\n\t\t\tsuper.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommand(...commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic addCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tpublic insertCommandArray(commands:(Command|Function)[]):void {\n\t\t\tthis.addCommand(...commands);\n\t\t}\n\n\t\tprivate completeHandler = (event:Event):void => {\n\t\t\tif (++this.completeCount >= this.getLength()) {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t};\n\n\t\tprotected implExecuteFunction(command:Command):void {\n\t\t\tthis.completeCount = 0;\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.addEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.execute();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.notifyComplete();\n\t\t\t}\n\t\t}\n\n\t\tprotected implInterruptFunction(command:Command):void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.interrupt();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsuper.implInterruptFunction(command);\n\t\t}\n\n\t\tprotected implDestroyFunction(command:Command):void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\tcommand.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsuper.implDestroyFunction(command);\n\t\t}\n\n\t\tprotected implNotifyBreak():void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tif (command.getState() == CommandState.Executing) {\n\t\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\t\tcommand.interrupt();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.notifyComplete();\n\t\t}\n\n\t\tprotected implNotifyReturn():void {\n\t\t\tconst length:number = this.getLength();\n\t\t\tif (length > 0) {\n\t\t\t\tconst commands:Command[] = this.getCommands();\n\t\t\t\tlet command:Command;\n\t\t\t\tfor (let i:number = 0; i < length; ++i) {\n\t\t\t\t\tcommand = commands[i];\n\t\t\t\t\tif (command.getState() == CommandState.Executing) {\n\t\t\t\t\t\tcommand.removeEventListener(CommandEvent.COMPLETE, this.completeHandler);\n\t\t\t\t\t\tcommand.interrupt();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst func:Function = this.getParent()['notifyReturn'];\n\t\t\tif (func) func();\n\t\t\tthis.destroy();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected getCompleteCount():number { return this.completeCount; }\n\t\tprivate completeCount:number;\n\n\t\tprivate currentCommand:Command;\n\t\tprivate isPaused:boolean;\n\t\tprivate isCompleteOnPaused:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Vector2 {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0) {\n\t\t\tthis.set(x, y);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t}\n\n\t\tpublic copyTo(point:Vector2):void {\n\t\t\tpoint.set(this.x, this.y);\n\t\t}\n\n\t\tpublic getClone():Vector2 {\n\t\t\treturn new Vector2(this.x, this.y);\n\t\t}\n\n\t\tpublic zero():void {\n\t\t\tthis.set(0, 0);\n\t\t}\n\n\t\tpublic normalize():void {\n\t\t\tconst l:number = this.getLength();\n\t\t\tthis.x /= l;\n\t\t\tthis.y /= l;\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t\t}\n\n\t\tpublic getSquareDistance(point:Vector2):number {\n\t\t\tconst dx:number = point.x - this.x;\n\t\t\tconst dy:number = point.y - this.y;\n\t\t\treturn dx * dx + dy * dy;\n\t\t}\n\n\t\tpublic getDistance(point:Vector2):number {\n\t\t\treturn Math.sqrt(this.getSquareDistance(point));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Vector3 {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0, z:number = 0) {\n\t\t\tthis.set(x, y, z);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number, z:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t}\n\n\t\tpublic copyTo(point:Vector3):void {\n\t\t\tpoint.set(this.x, this.y, this.z);\n\t\t}\n\n\t\tpublic getClone():Vector3 {\n\t\t\treturn new Vector3(this.x, this.y, this.z);\n\t\t}\n\n\t\tpublic zero():void {\n\t\t\tthis.set(0, 0, 0);\n\t\t}\n\n\t\tpublic normalize():void {\n\t\t\tconst l:number = this.getLength();\n\t\t\tthis.x /= l;\n\t\t\tthis.y /= l;\n\t\t\tthis.z /= l;\n\t\t}\n\n\t\tpublic getLength():number {\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\t\t}\n\n\t\tpublic getSquareDistance(point:Vector3):number {\n\t\t\tconst dx:number = point.x - this.x;\n\t\t\tconst dy:number = point.y - this.y;\n\t\t\tconst dz:number = point.z - this.z;\n\t\t\treturn dx * dx + dy * dy + dz * dz;\n\t\t}\n\n\t\tpublic getDistance(point:Vector3):number {\n\t\t\treturn Math.sqrt(this.getSquareDistance(point));\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t\tpublic z:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.geom {\n\n\texport class Rectangle {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(x:number = 0, y:number = 0, width:number = 0, height:number = 0) {\n\t\t\tthis.set(x, y, width, height);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(x:number, y:number, width:number, height:number):void {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\tpublic copyTo(rect:Rectangle):void {\n\t\t\trect.set(this.x, this.y, this.width, this.height);\n\t\t}\n\n\t\tpublic getClone():Rectangle {\n\t\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t\t}\n\n\t\tpublic getTop():number {\n\t\t\treturn this.y;\n\t\t}\n\n\t\tpublic getBottom():number {\n\t\t\treturn this.y + this.height;\n\t\t}\n\n\t\tpublic getLeft():number {\n\t\t\treturn this.x;\n\t\t}\n\n\t\tpublic getRight():number {\n\t\t\treturn this.x + this.width;\n\t\t}\n\n\t\tpublic getTopLeft():Vector2 {\n\t\t\treturn new Vector2(this.getLeft(), this.getTop());\n\t\t}\n\n\t\tpublic getTopRight():Vector2 {\n\t\t\treturn new Vector2(this.getRight(), this.getTop());\n\t\t}\n\n\t\tpublic getBottomLeft():Vector2 {\n\t\t\treturn new Vector2(this.getLeft(), this.getBottom());\n\t\t}\n\n\t\tpublic getBottomRight():Vector2 {\n\t\t\treturn new Vector2(this.getRight(), this.getBottom());\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\t\tpublic width:number;\n\t\tpublic height:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport interface Hash<T> { [key: string]: T; }\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Obj {\n\n\t\tpublic static each(target:any, func:(key:string, value:any) => void):void {\n\t\t\tif (target == null) return;\n\t\t\tObject.keys(target).forEach((key:string):void => {\n\t\t\t\tfunc(key, target[key]);\n\t\t\t});\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Arr {\n\n\t\t/**\n\t\t * 等差数列を生成する\n\t\t * @param {number} count 要素数\n\t\t * @param {number} init 初期値\n\t\t * @param {number} step 等差\n\t\t * @returns {number[]} 出力配列\n\t\t */\n\t\tpublic static sequence(count:number, init:number = 0, step:number = 1):number[] {\n\t\t\tconst result:number[] = new Array(count);\n\t\t\tlet v:number = init;\n\t\t\tfor (let i:number = 0; i < count; ++i) {\n\t\t\t\tresult[i] = v;\n\t\t\t\tv += step;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\t/**\n\t\t * 重複を削除したリストを生成する\n\t\t * @param list 入力配列\n\t\t * @returns {T[]} 出力配列\n\t\t */\n\t\tpublic static unique<T>(list:T[]):T[] {\n\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\treturn self.indexOf(x) === i;\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * 重複のみを抽出したリストを生成する\n\t\t * @param list 入力配列\n\t\t * @param unique trueの場合は、重複したものの中を重複しないようにする\n\t\t * @returns {T[]} 出力配列\n\t\t */\n\t\tpublic static duplicated<T>(list:T[], unique:boolean = false):T[] {\n\n\t\t\tif (unique) {\n\t\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\t\treturn self.indexOf(x) !== self.lastIndexOf(x);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn list.filter(function (x:T, i:number, self:T[]) {\n\t\t\t\t\treturn (self.indexOf(x) === i) && (self.lastIndexOf(x) !== i);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * 2つの入力配列に対して総当たり戦をおこなう\n\t\t * @param {T[]} list1 入力配列1\n\t\t * @param {T[]} list2 入力配列2\n\t\t * @param {(count: number, index1: number, index2: number, element1: T, element2: T) => void} callback コールバック関数\n\t\t * @param callback.count コールバックの呼ばれた回数\n\t\t * @param callback.index1 入力配列1の現在のインデックス\n\t\t * @param callback.index2 入力配列2の現在のインデックス\n\t\t * @param callback.element1 入力配列1の現在の要素\n\t\t * @param callback.element2 入力配列2の現在の要素\n\t\t */\n\t\tpublic static roundRobin<T>(list1:T[], list2:T[], callback:(count:number, index1:number, index2:number, element1:T, element2:T) => void):void {\n\t\t\tlet i:number, j:number, p:number = 1;\n\t\t\tconst m:number = list1.length;\n\t\t\tconst n:number = list2.length;\n\t\t\tfor (i = 0; i < m; ++i) {\n\t\t\t\tfor (j = i + 1; j < n; ++j) {\n\t\t\t\t\tcallback(p++, i, j, list1[i], list2[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Num {\n\n\t\t/**\n\t\t * 値を特定の範囲内にマッピングする\n\t\t * @param {number} value 入力値\n\t\t * @param {number} srcMin マッピング元の最小値\n\t\t * @param {number} srcMax マッピング元の最大値\n\t\t * @param {number} dstMin マッピング先の最小値\n\t\t * @param {number} dstMax マッピング先の最大値\n\t\t * @param {boolean} clamp trueの場合は入力値をsrcMin, srcMaxの範囲内に丸める\n\t\t * @returns {number} 出力値\n\t\t */\n\t\tpublic static map(value:number, srcMin:number, srcMax:number, dstMin:number, dstMax:number, clamp:boolean = true):number {\n\t\t\tif (srcMin == srcMax) return dstMin;\n\t\t\tif (clamp) {\n\t\t\t\tif (srcMin < srcMax) {\n\t\t\t\t\tif (value < srcMin) value = srcMin;\n\t\t\t\t\telse if (value > srcMax) value = srcMax;\n\t\t\t\t} else {\n\t\t\t\t\tif (value < srcMax) value = srcMax;\n\t\t\t\t\telse if (value > srcMin) value = srcMin;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn (value - srcMin) * (dstMax - dstMin) / (srcMax - srcMin) + dstMin;\n\t\t}\n\n\t\t/**\n\t\t * 乱数（小数）を取得する\n\t\t * @param {number} min 最小値\n\t\t * @param {number} max 最大値\n\t\t * @returns {number} 出力値\n\t\t */\n\t\tpublic static random(min:number = 0, max:number = 1):number {\n\t\t\treturn min + (max - min) * Math.random();\n\t\t}\n\n\t\t/**\n\t\t * 乱数（整数）を取得する\n\t\t * @param {number} min 最小値\n\t\t * @param {number} max 最大値\n\t\t * @returns {number} 出力値\n\t\t */\n\t\tpublic static randomInt(min:number = 0, max:number = 1):number {\n\t\t\treturn Math.floor(Num.random(min, max));\n\t\t}\n\n\t\t/**\n\t\t * 値を特定範囲内に丸める\n\t\t * @param {number} value 入力値\n\t\t * @param {number} min 最小値\n\t\t * @param {number} max 最大値\n\t\t * @returns {number} 出力値\n\t\t */\n\t\tpublic static clamp(value:number, min:number, max:number):number {\n\t\t\treturn value < min ? min : (value > max ? max : value);\n\t\t}\n\n\t\t/**\n\t\t * 2点間の距離を取得する\n\t\t * @param {number} x1 点1のx座標\n\t\t * @param {number} y1 点1のy座標\n\t\t * @param {number} x2 点2のx座標\n\t\t * @param {number} y2 点2のy座標\n\t\t * @param {boolean} squared trueの場合は2乗の値を取得する\n\t\t * @returns {number} 距離\n\t\t */\n\t\tpublic static dist(x1:number, y1:number, x2:number, y2:number, squared:boolean = false):number {\n\t\t\tconst dx:number = x2 - x1;\n\t\t\tconst dy:number = y2 - y1;\n\t\t\treturn squared ? (dx * dx + dy * dy) : Math.sqrt(dx * dx + dy * dy);\n\t\t}\n\n\t\t/**\n\t\t * 値をラジアン法から弧度法に変換する\n\t\t * @param {number} radian ラジアン法\n\t\t * @returns {number} 弧度法\n\t\t */\n\t\tpublic static radToDeg(radian:number):number {\n\t\t\treturn radian * Num.RAD2DEG;\n\t\t}\n\n\t\t/**\n\t\t * 値を弧度法からラジアン法に変換する\n\t\t * @param {number} radian 弧度法\n\t\t * @returns {number} ラジアン法\n\t\t */\n\t\tpublic static degToRad(degree:number):number {\n\t\t\treturn degree * Num.DEG2RAD;\n\t\t}\n\n\t\t/**\n\t\t * ある角度からある角度への回転角度を取得する\n\t\t * @param {number} from 元の角度\n\t\t * @param {number} to 目標の角度\n\t\t * @param {boolean} radian trueの場合はラジアン法で計算する\n\t\t * @returns {number} 回転角度\n\t\t */\n\t\tpublic static turn(from:number, to:number, radian:boolean = true):number {\n\t\t\treturn radian ? ((to - from + Num.PI3) % Num.PI2 - Math.PI) : ((to - from + 540) % 360 - 180);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONST\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static PI2:number = Math.PI * 2;\n\t\tpublic static PI3:number = Math.PI * 3;\n\t\tpublic static PI4:number = Math.PI * 4;\n\t\tpublic static PI5:number = Math.PI * 5;\n\t\tpublic static PI6:number = Math.PI * 6;\n\t\tpublic static PI_2:number = Math.PI / 2;\n\t\tpublic static PI_3:number = Math.PI / 3;\n\t\tpublic static PI_4:number = Math.PI / 4;\n\t\tpublic static PI_6:number = Math.PI / 6;\n\n\t\tprivate static RAD2DEG:number = 180 / Math.PI;\n\t\tprivate static DEG2RAD:number = Math.PI / 180;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Str {\n\n\t\t/**\n\t\t * 時間を h:mm:ss の形式で取得する\n\t\t * @param {number} hours 時\n\t\t * @param {number} minutes 分\n\t\t * @param {number} seconds 秒\n\t\t * @returns {string} h:mm:ss 形式の文字列\n\t\t */\n\t\tpublic static toTimeString(hours:number = 0, minutes:number = 0, seconds:number = 0):string {\n\t\t\tseconds += minutes * 60 + hours * 3600;\n\t\t\tlet h:string = Math.floor(seconds / 3600).toString();\n\t\t\tlet m:string = Math.floor((seconds / 60) % 60).toString();\n\t\t\tlet s:string = ('0' + Math.floor(seconds % 60)).substr(-2, 2);\n\t\t\tif (h != '0') {\n\t\t\t\treturn h + ':' + ('0' + m).substr(-2, 2) + ':' + s;\n\t\t\t} else {\n\t\t\t\treturn m + ':' + s;\n\t\t\t}\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Loc {\n\n\t\tpublic static getQuery():Hash<string> {\n\t\t\tconst query:Hash<string> = {};\n\t\t\tconst pairs:string[] = location.search.substring(1).split('&');\n\t\t\tlet pair:string[];\n\t\t\tfor(let i:number = 0; pairs[i]; ++i) {\n\t\t\t\tpair = pairs[i].split('=');\n\t\t\t\tquery[pair[0]] = pair[1];\n\t\t\t}\n\t\t\treturn query;\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport enum Align {\n\t\tTop_Left,\n\t\tTop_Center,\n\t\tTop_Right,\n\t\tMiddle_Left,\n\t\tMiddle_Center,\n\t\tMiddle_Right,\n\t\tBottom_Left,\n\t\tBottom_Center,\n\t\tBottom_Right\n\t}\n\n\texport enum ScaleMode {\n\t\tExactFit,\n\t\tShowAll,\n\t\tNoBorder,\n\t\tNoScale,\n\t}\n\n\texport class Boxer {\n\n\t\tpublic static resize(target:geom.Rectangle, bounds:geom.Rectangle, scaleMode:ScaleMode = ScaleMode.ShowAll, align:Align = Align.Middle_Center):geom.Rectangle {\n\t\t\tlet tx:number = target.x;\n\t\t\tlet ty:number = target.y;\n\t\t\tlet tw:number = target.width;\n\t\t\tlet th:number = target.height;\n\n\t\t\tconst bx:number = bounds.x;\n\t\t\tconst by:number = bounds.y;\n\t\t\tconst bw:number = bounds.width;\n\t\t\tconst bh:number = bounds.height;\n\n\t\t\tswitch (scaleMode) {\n\t\t\t\tcase ScaleMode.ShowAll:\n\t\t\t\tcase ScaleMode.NoBorder:\n\t\t\t\t\tconst ratioW:number = bw / tw;\n\t\t\t\t\tconst ratioH:number = bh / th;\n\t\t\t\t\tconst ratio:number = scaleMode == ScaleMode.ShowAll ? (ratioW < ratioH ? ratioW : ratioH) : (ratioW > ratioH ? ratioW : ratioH);\n\t\t\t\t\ttw *= ratio;\n\t\t\t\t\tth *= ratio;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ScaleMode.ExactFit:\n\t\t\t\t\treturn new geom.Rectangle(bx, by, bw, bh);\n\t\t\t}\n\n\t\t\ttx = bx + ((align == Align.Top_Left || align == Align.Middle_Left || align == Align.Bottom_Left) ? 0 :\n\t\t\t\t(align == Align.Top_Right || align == Align.Middle_Right || align == Align.Bottom_Right) ? (bw - tw) : (bw - tw) / 2);\n\t\t\tty = by + ((align == Align.Top_Left || align == Align.Top_Center || align == Align.Top_Right) ? 0 :\n\t\t\t\t(align == Align.Bottom_Left || align == Align.Bottom_Center || align == Align.Bottom_Right) ? (bh - th) : (bh - th) / 2);\n\n\t\t\treturn new geom.Rectangle(tx, ty, tw, th);\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Raffle<T = any> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(values:T[] = null) {\n\t\t\tif (values) {\n\t\t\t\tthis.set(values);\n\t\t\t} else {\n\t\t\t\tthis.initValues = this.restValues = null;\n\t\t\t\tthis.restCount = this.restValues.length;\n\t\t\t\tthis.isEmpty = true;\n\t\t\t}\n\t\t\tthis.onCheck = null;\n\t\t\tthis.isAutoResetEnabled = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic set(values:T[]):void {\n\t\t\tthis.initValues = values.concat();\n\t\t\tthis.reset();\n\t\t}\n\n\t\tpublic get():T {\n\t\t\tif (this.isEmpty && this.isAutoResetEnabled) {\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t\tconst index:number = Math.floor(Math.random() * this.restCount);\n\t\t\tconst value:T = this.restValues[index];\n\t\t\tlet result:boolean = true;\n\t\t\tif (this.onCheck) result = this.onCheck(value);\n\t\t\tif (result) {\n\t\t\t\tthis.restValues.splice(index, 1);\n\t\t\t\tthis.restCount = this.restValues.length;\n\t\t\t\tthis.isEmpty = this.restCount == 0;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tpublic reset():void {\n\t\t\tthis.restValues = this.initValues.concat();\n\t\t\tthis.restCount = this.restValues.length;\n\t\t\tthis.isEmpty = this.restCount == 0;\n\t\t}\n\n\t\tpublic getRestCount():number {\n\t\t\treturn this.restCount;\n\t\t}\n\n\t\tpublic getIsEmply():boolean {\n\t\t\treturn this.isEmpty;\n\t\t}\n\n\t\tpublic getIsAutoResetEnabled():boolean {\n\t\t\treturn this.isAutoResetEnabled;\n\t\t}\n\n\t\tpublic setIsAutoResetEnabled(enabled:boolean):void {\n\t\t\tthis.isAutoResetEnabled = enabled;\n\t\t}\n\n\t\tpublic static createIndices(count:number):Raffle<number> {\n\t\t\tconst values:number[] = new Array(count);\n\t\t\tfor (let i:number = 0; i < count; ++i) values[i] = i;\n\t\t\treturn new Raffle<number>(values);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic onCheck:(value:T) => boolean;\n\n\t\tprivate isAutoResetEnabled:boolean;\n\t\tprivate isEmpty:boolean;\n\t\tprivate restCount:number;\n\t\tprivate restValues:T[];\n\t\tprivate initValues:T[];\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Rotator {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(angle:number = 0, velocity:number = 0, radian:boolean = true) {\n\t\t\tthis.setAngle(angle, radian);\n\t\t\tthis.setVelocity(velocity, radian);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getAngle(radian:boolean = true):number {\n\t\t\treturn radian ? this.angle : (this.angle * 180 / Math.PI);\n\t\t}\n\n\t\tpublic setAngle(angle:number, radian:boolean = true):void {\n\t\t\tthis.angle = radian ? angle : (angle * Math.PI / 180);\n\t\t}\n\n\t\tpublic getVelocity(radian:boolean = true):number {\n\t\t\treturn radian ? this.velocity : (this.velocity * 180 / Math.PI);\n\t\t}\n\n\t\tpublic setVelocity(velocity:number, radian:boolean = true):void {\n\t\t\tthis.velocity = radian ? velocity : (velocity * Math.PI / 180);\n\t\t}\n\n\t\tpublic update():void {\n\t\t\tthis.angle += this.velocity;\n\t\t}\n\n\t\tpublic getSin(length:number = 1):number {\n\t\t\treturn length * Math.sin(this.angle);\n\t\t}\n\n\t\tpublic getCos(length:number = 1):number {\n\t\t\treturn length * Math.cos(this.angle);\n\t\t}\n\n\t\tpublic getTan(length:number = 1):number {\n\t\t\treturn length * Math.tan(this.angle);\n\t\t}\n\n\t\tpublic getMagnitude(length:number = 1):number {\n\t\t\treturn length * (1 + Math.sin(this.angle)) / 2;\n\t\t}\n\n\t\tpublic getVector(length:number = 1, xy:{ x:number, y:number } = null):{ x:number, y:number } {\n\t\t\tif (xy != null) {\n\t\t\t\txy.x = this.getCos(length);\n\t\t\t\txy.y = this.getSin(length);\n\t\t\t} else {\n\t\t\t\treturn { x: this.getCos(length), y: this.getSin(length) };\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate angle:number;\n\t\tprivate velocity:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport enum LoggerLevel {\n\t\tVerbose = 0,\n\t\tInfo = 1,\n\t\tWarn = 2,\n\t\tError = 3,\n\t\tSilent = 4,\n\t}\n\n\n\n\n\n\texport interface ILogging {\n\n\t\tverbose(messages:any[]):void;\n\t\tinfo(messages:any[]):void;\n\t\twarn(messages:any[]):void;\n\t\terror(messages:any[]):void;\n\t}\n\n\n\n\n\n\texport class NullLogging implements ILogging {\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t}\n\t}\n\n\n\n\n\n\texport class ConsoleLogging implements ILogging {\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t\tconsole.debug.apply(console, Array.prototype.slice.call(['[Verbose] '].concat(messages)));\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t\tconsole.log.apply(console, Array.prototype.slice.call(['[Info   ] '].concat(messages)));\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t\tconsole.warn.apply(console, Array.prototype.slice.call(['[Warn   ] '].concat(messages)));\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t\tconsole.error.apply(console, Array.prototype.slice.call(['[Error  ] '].concat(messages)));\n\t\t}\n\t}\n\n\n\n\n\n\texport class DOMLogging implements ILogging {\n\n\t\tconstructor(dom:HTMLElement, html:boolean) {\n\t\t\tthis.dom = dom;\n\t\t\tthis.html = html;\n\t\t}\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t\tthis.print('[Verbose] ', messages);\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t\tthis.print('[Info   ] ', messages);\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t\tthis.print('[Warn   ] ', messages);\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t\tthis.print('[Error  ] ', messages);\n\t\t}\n\n\t\tprivate print(prefix:string, messages:any[]):void {\n\t\t\tconst line:string = messages.join(', ') + '\\n';\n\t\t\tif (this.html) {\n\t\t\t\tthis.dom.innerHTML = line + this.dom.innerHTML;\n\t\t\t} else {\n\t\t\t\tthis.dom.innerText = line + this.dom.innerText;\n\t\t\t}\n\t\t}\n\n\t\tprivate dom:HTMLElement;\n\t\tprivate html:boolean;\n\t}\n\n\n\n\n\n\texport class ParallelLogging implements ILogging {\n\n\t\tconstructor(loggers:ILogging[]) {\n\t\t\tthis.loggers = loggers;\n\t\t}\n\n\t\tpublic verbose(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].verbose.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic info(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].info.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic warn(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].warn.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tpublic error(messages:any[]):void {\n\t\t\tconst n:number = this.loggers.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tthis.loggers[i].error.apply(this, messages);\n\t\t\t}\n\t\t}\n\n\t\tprivate loggers:ILogging[];\n\t}\n\n\n\n\n\n\texport class Logger {\n\n\t\tpublic static level:number = LoggerLevel.Verbose;\n\t\tpublic static logger:ILogging = new ConsoleLogging();\n\n\t\tpublic static verbose(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Verbose) Logger.logger.verbose(messages);\n\t\t}\n\n\t\tpublic static info(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Info) Logger.logger.info(messages);\n\t\t}\n\n\t\tpublic static warn(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Warn) Logger.logger.warn(messages);\n\t\t}\n\n\t\tpublic static error(...messages:any[]):void {\n\t\t\tif (Logger.level <= LoggerLevel.Error) Logger.logger.error(messages);\n\t\t}\n\n\t\tpublic static warnIf(target:any, message:string, condition:boolean = true):void {\n\t\t\tif (Logger.level <= LoggerLevel.Warn && condition) Logger.logger.warn([message + ' : ' + target]);\n\t\t}\n\n\t\tpublic static errorIf(target:any, message: string, condition:boolean = true):void {\n\t\t\tif (Logger.level <= LoggerLevel.Error && condition) Logger.logger.error([message + ' : ' + target]);\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}\n\nfunction trace(...messages:any[]):void {\n\talm.util.Logger.info.apply(trace.caller, arguments);\n}\n\nfunction throwWarn(target:any, message:string, condition:boolean = true):void {\n\talm.util.Logger.warnIf.apply(null, arguments);\n}\n\nfunction throwError(target:any, message:string, condition:boolean = true):void {\n\talm.util.Logger.errorIf.apply(null, arguments);\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class Pager extends alm.event.EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\n\t\t\tthis.isLoopEnabled = true;\n\n\t\t\tthis.itemCount = 0;\n\t\t\tthis.itemIds = null;\n\t\t\tthis.itemIndexById = null;\n\n\t\t\tthis.onChange = null;\n\t\t\tthis.onPrev = null;\n\t\t\tthis.onNext = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic setupById(ids:string[]):void {\n\t\t\tthis.itemCount = ids.length;\n\t\t\tthis.itemIds = ids;\n\n\t\t\tthis.itemIndexById = {};\n\t\t\tfor (let i:number = 0; i < this.itemCount; ++i) {\n\t\t\t\tthis.itemIndexById[this.itemIds[i]] = i;\n\t\t\t}\n\n\t\t\tthis.setup();\n\t\t}\n\n\t\tpublic setupByCount(itemCount:number):void {\n\t\t\tthis.itemCount = itemCount;\n\n\t\t\tthis.itemIds = null;\n\t\t\tthis.itemIndexById = null;\n\n\t\t\tthis.setup();\n\t\t}\n\n\t\tprivate setup():void {\n\t\t\tthis.newItemIndex = -1;\n\t\t\tthis.oldItemIndex = -1;\n\n\t\t\tthis.newItemId = null;\n\t\t\tthis.oldItemId = null;\n\t\t}\n\n\t\tpublic gotoByIndex(itemIndex:number, useTransition:boolean = true):boolean {\n\t\t\tif (itemIndex < 0 || itemIndex >= this.itemCount) itemIndex = -1;\n\t\t\tif (itemIndex == this.newItemIndex) return false;\n\n\t\t\tthis.oldItemIndex = this.newItemIndex;\n\t\t\tthis.newItemIndex = itemIndex;\n\n\t\t\tif (this.itemIds) {\n\t\t\t\tthis.oldItemId = this.oldItemIndex != -1 ? this.itemIds[this.oldItemIndex] : null;\n\t\t\t\tthis.newItemId = this.newItemIndex != -1 ? this.itemIds[this.newItemIndex] : null;\n\t\t\t}\n\n\t\t\tthis.dispatchPagerEvent(PagerEvent.CHANGE, this.onChange, useTransition);\n\n\t\t\treturn true;\n\t\t}\n\n\t\tpublic gotoById(itemId:string, useTransition:boolean = true):boolean {\n\t\t\tconst itemIndex:number = this.itemIndexById.hasOwnProperty(itemId) ? this.itemIndexById[itemId] : -1;\n\t\t\treturn this.gotoByIndex(itemIndex, useTransition);\n\t\t}\n\n\t\tpublic prev(useTransition:boolean = true):boolean {\n\t\t\tlet itemIndex = this.newItemIndex - 1;\n\t\t\tif (this.isLoopEnabled && itemIndex < 0) itemIndex = this.itemCount - 1;\n\n\t\t\tconst result:boolean = this.gotoByIndex(itemIndex, useTransition);\n\t\t\tif (result) {\n\t\t\t\tthis.dispatchPagerEvent(PagerEvent.PREV, this.onPrev, useTransition);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tpublic next(useTransition:boolean = true):boolean {\n\t\t\tlet itemIndex = this.newItemIndex + 1;\n\t\t\tif (this.isLoopEnabled && itemIndex >= this.itemCount) itemIndex = 0;\n\n\t\t\tconst result:boolean = this.gotoByIndex(itemIndex, useTransition);\n\t\t\tif (result) {\n\t\t\t\tthis.dispatchPagerEvent(PagerEvent.NEXT, this.onNext, useTransition);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tprivate dispatchPagerEvent(eventType:string, callback:(event:PagerEvent) => void, useTransition:boolean):void {\n\t\t\tconst oldItemId:string = (this.itemIds && this.oldItemIndex != -1) ? this.itemIds[this.oldItemIndex] : null;\n\t\t\tconst newItemId:string = (this.itemIds && this.newItemIndex != -1) ? this.itemIds[this.newItemIndex] : null;\n\n\t\t\tconst event:PagerEvent = new PagerEvent(eventType, this, this.newItemIndex, this.oldItemIndex, this.newItemId, this.oldItemId, useTransition);\n\t\t\tif (callback) {\n\t\t\t\tcallback(event);\n\t\t\t}\n\t\t\tthis.dispatchEvent(event);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsLoopEnabled():boolean { return this.isLoopEnabled; }\n\t\tpublic setIsLoopEnabled(value:boolean):void { this.isLoopEnabled = value; }\n\t\tprivate isLoopEnabled:boolean;\n\n\t\tpublic getNewItemIndex():number { return this.newItemIndex; }\n\t\tprivate newItemIndex:number;\n\n\t\tpublic getOldItemIndex():number { return this.oldItemIndex; }\n\t\tprivate oldItemIndex:number;\n\n\t\tpublic getItemCount():number { return this.itemCount; }\n\t\tprivate itemCount:number;\n\n\t\tpublic getNewItemId():string { return this.newItemId; }\n\t\tprivate newItemId:string;\n\n\t\tpublic getOldItemId():string { return this.oldItemId; }\n\t\tprivate oldItemId:string;\n\n\t\tpublic getItemIds():string[] { return this.itemIds; }\n\t\tprivate itemIds:string[];\n\n\t\tprivate itemIndexById:Hash<number>;\n\n\t\tpublic onChange:(event:PagerEvent) => void;\n\t\tpublic onPrev:(event:PagerEvent) => void;\n\t\tpublic onNext:(event:PagerEvent) => void;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class PagerEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static CHANGE:string = 'change';\n\t\tpublic static PREV:string = 'prev';\n\t\tpublic static NEXT:string = 'next';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any, newItemIndex:number, oldItemIndex:number, newItemId:string, oldItemId:string, useTransition:boolean) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.newItemIndex = newItemIndex;\n\t\t\tthis.oldItemIndex = oldItemIndex;\n\t\t\tthis.newItemId = newItemId;\n\t\t\tthis.oldItemId = oldItemId;\n\t\t\tthis.useTransition = useTransition;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():PagerEvent {\n\t\t\treturn new PagerEvent(this.getType(), this.getTarget(), this.newItemIndex, this.oldItemIndex, this.newItemId, this.oldItemId, this.useTransition);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[PagerEvent] type = ' + this.getType() + ', ' + this.oldItemIndex + ' -> ' + this.newItemIndex + ', transition = ' + this.useTransition;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic newItemIndex:number;\n\t\tpublic oldItemIndex:number;\n\t\tpublic newItemId:string;\n\t\tpublic oldItemId:string;\n\t\tpublic useTransition:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Timer extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(interval:number = 1000, repeatCount:number = 0) {\n\t\t\tsuper();\n\t\t\tthis.interval = interval;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tId = -1;\n\t\t\tthis.reset();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\tthis.startInterval(this.tRestTime != -1 ? this.tRestTime : this.interval);\n\t\t}\n\n\t\tpublic stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tRestTime = this.getCurrentTime() - this.tStartTime;\n\t\t\tthis.stopInterval();\n\t\t}\n\n\t\tpublic reset():void {\n\t\t\tthis.stop();\n\t\t\tthis.elapsedCount = 0;\n\t\t\tthis.tRestTime = -1;\n\t\t}\n\n\t\tpublic restart():void {\n\t\t\tthis.reset();\n\t\t\tthis.start();\n\t\t}\n\n\n\n\n\n\t\tprivate getCurrentTime():number {\n\t\t\treturn new Date().valueOf();\n\t\t}\n\n\t\tprivate startInterval(interval:number):void {\n\t\t\tthis.stopInterval();\n\t\t\tthis.tInterval = interval;\n\t\t\tthis.tId = window.setInterval(this.timerHandler, this.tInterval);\n\t\t}\n\n\t\tprivate stopInterval():void {\n\t\t\tif (this.tId != -1) {\n\t\t\t\tclearInterval(this.tId);\n\t\t\t\tthis.tId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate dispatch(eventType:string):void {\n\t\t\tthis.dispatchEvent(new TimerEvent(eventType, this, this.elapsedCount, this.repeatCount, this.getRestCount()));\n\t\t}\n\n\t\tprivate timerHandler = ():void => {\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\t++this.elapsedCount;\n\t\t\tlet isCompleted:boolean = false;\n\t\t\tif (this.repeatCount > 0 && this.elapsedCount >= this.repeatCount) {\n\t\t\t\tisCompleted = true;\n\t\t\t\tthis.stop();\n\t\t\t} else if (this.tInterval != this.interval) {\n\t\t\t\tthis.startInterval(this.interval);\n\t\t\t}\n\t\t\tthis.dispatch(TimerEvent.TICK);\n\t\t\tif (isCompleted) {\n\t\t\t\tthis.dispatch(TimerEvent.COMPLETE);\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsRunning():boolean { return this.isRunning; }\n\t\tprivate isRunning:boolean;\n\n\t\tpublic getInterval():number { return this.interval; }\n\t\tpublic setInterval(interval:number):void { this.interval = interval; }\n\t\tprivate interval:number;\n\n\t\tpublic getElapsedTime():number { return this.getCurrentTime() - this.tStartTime; }\n\n\t\tpublic getRestTime():number { return this.interval - this.getElapsedTime(); }\n\n\t\tpublic getElapsedCount():number { return this.elapsedCount; }\n\t\tprivate elapsedCount:number;\n\n\t\tpublic getRepeatCount():number { return this.repeatCount; }\n\t\tpublic setRepeatCount(count:number):void { this.repeatCount = count; }\n\t\tprivate repeatCount:number;\n\n\t\tpublic getRestCount():number { return this.repeatCount - this.elapsedCount; }\n\n\t\tprivate tStartTime:number;\n\t\tprivate tRestTime:number;\n\t\tprivate tInterval:number;\n\t\tprivate tId:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\timport Event = alm.event.Event;\n\n\texport class TimerEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static TICK:string = 'tick';\n\t\tpublic static COMPLETE:string = 'complete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, elapsedCount:number = 0, repeatCount:number = 0, restCount:number = 0) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.elapsedCount = elapsedCount;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.restCount = restCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():TimerEvent {\n\t\t\treturn new TimerEvent(this.getType(), this.getTarget(), this.elapsedCount, this.repeatCount, this.restCount);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[TimerEvent] type = ' + this.getType() + ', elapsedCount = ' + this.elapsedCount + ', repeatCount=' + this.repeatCount + ', restCount=' + this.restCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic elapsedCount:number;\n\t\tpublic repeatCount:number;\n\t\tpublic restCount:number;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class ObjectPool<T> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * ObjectPool class.\n\t\t * @class\n\t\t * @param {function} onRequireItem This callback function is called when new item is required.\n\t\t * @param {function} onDestroyItem This callback function is called when item is disposed.\n\t\t * @param {number} initCount Init item count.\n\t\t * @param {number} growthCount Growth item count.\n\t\t *\n\t\t * @property {number} initCount Init item count.\n\t\t * @property {number} growthCount Growth item count.\n\t\t * @property {function} onRequireItem This callback function is called when new item is required.\n\t\t * @property {function} onDestroyItem This callback function is called when item is disposed.\n\t\t * @property {Array} items Array of items.\n\t\t * @property {number} index Current index of items.\n\t\t *\n\t\t * @return void\n\t\t */\n\t\tconstructor(onRequireItem:() => T, onDestroyItem:(item:T) => void, initCount:number = 100, growthCount:number = 50) {\n\t\t\tthis.onRequireItem = onRequireItem;\n\t\t\tthis.onDestroyItem = onDestroyItem;\n\t\t\tthis.growthCount = growthCount;\n\t\t\tthis.items = new Array(initCount);\n\t\t\tfor (let i = 0; i < initCount; ++i) {\n\t\t\t\tthis.items[i] = this.onRequireItem();\n\t\t\t}\n\t\t\tthis.index = initCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * Get item from object pool.\n\t\t * @return {T} Item\n\t\t */\n\t\tpublic getItem():T {\n\t\t\tif (this.index > 0) {\n\t\t\t\treturn this.items[--this.index];\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.growthCount; ++i) {\n\t\t\t\tthis.items.unshift(this.onRequireItem());\n\t\t\t}\n\t\t\tthis.index = this.growthCount;\n\t\t\treturn this.getItem();\n\t\t}\n\n\t\t/**\n\t\t * Return item to object pool.\n\t\t * @param {T} Item.\n\t\t * @return void\n\t\t */\n\t\tpublic returnItem(item:T):void {\n\t\t\tthis.items[this.index++] = item;\n\t\t}\n\n\t\t/**\n\t\t * Optimize object pool size.\n\t\t * @return void\n\t\t */\n\t\tpublic reduce():void {\n\t\t\tconst n = this.index;\n\t\t\tfor (let i = 0; i < n; ++i) {\n\t\t\t\tthis.onDestroyItem(this.items.shift());\n\t\t\t}\n\t\t\tthis.index = 0;\n\t\t}\n\n\t\t/**\n\t\t * Destroy object pool.\n\t\t * @return void\n\t\t */\n\t\tpublic destroy():void {\n\t\t\tconst n = this.items.length;\n\t\t\tfor (let i = 0; i < n; ++i) {\n\t\t\t\tthis.onDestroyItem(this.items[i]);\n\t\t\t}\n\t\t\tthis.index = 0;\n\t\t\tthis.items = null;\n\t\t\tthis.onRequireItem = null;\n\t\t\tthis.onDestroyItem = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate items:T[];\n\t\tprivate index:number;\n\t\tprivate growthCount:number;\n\n\t\tpublic onRequireItem:() => T;\n\t\tpublic onDestroyItem:(item:T) => void;\n\t}\n}\n","/// <reference path='../../include.ts' />\n\nnamespace alm.util {\n\n\texport class CommandUtil {\n\n\t\tpublic static stop(command:cmd.Command):any {\n\t\t\tif (command) command.interrupt();\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic static sequence(execute:boolean, ...commands:(cmd.Command|Function)[]):cmd.Serial {\n\t\t\tconst c:cmd.Serial = new cmd.Serial();\n\t\t\tc.addCommand(...commands);\n\t\t\tif (execute) c.execute();\n\t\t\treturn c;\n\t\t}\n\n\t\tpublic static single(execute:boolean, command:cmd.Command):cmd.Command {\n\t\t\tif (execute && command) command.execute();\n\t\t\treturn command;\n\t\t}\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport type CompleteFunction = (content:any) => void;\n\texport type ErrorFunction = (message:string) => void;\n\n\texport class AssetLoader {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tthis.isLoading_ = false;\n\n\t\t\tthis.currentCount = 0;\n\t\t\tthis.totalCount = 0;\n\n\t\t\tthis.loadingQueries = [];\n\t\t\tthis.loadingQueryIndex = -1;\n\n\t\t\tthis.queriesByQueryId = {};\n\t\t\tthis.queriesByUrl = {};\n\n\t\t\tthis.handlersByType = {};\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic require(url:string, type:string):string {\n\t\t\treturn this.addQuery(type, url, {});\n\t\t}\n\n\t\tprivate addQuery(type:string, url:string, param:any):string {\n\t\t\tif (this.queriesByUrl[url]) return this.queriesByUrl[url].id;\n\n\t\t\tconst query:FileQuery = new FileQuery();\n\t\t\tquery.id = String(AssetLoader.id);\n\t\t\tquery.type = type;\n\t\t\tquery.url = url;\n\t\t\tquery.param = param;\n\t\t\tthis.loadingQueries.push(query);\n\t\t\tthis.queriesByQueryId[query.id] = query;\n\t\t\tthis.queriesByUrl[query.url] = query;\n\t\t\t++AssetLoader.id;\n\t\t\treturn query.id;\n\t\t}\n\n\t\tpublic load():void {\n\t\t\tif (this.isLoading_) return;\n\t\t\tthis.isLoading_ = true;\n\t\t\tthis.loadingQueryIndex = -1;\n\t\t\tthis.next();\n\t\t}\n\n\t\tprivate next():void {\n\t\t\tthis.currentCount = this.loadingQueryIndex + 1;\n\t\t\tthis.totalCount = this.loadingQueries.length;\n\n\t\t\tif (this.currentCount > 0) {\n\t\t\t\tthis.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.PROGRESS, this, this.currentCount / this.totalCount, this.currentCount, this.totalCount));\n\t\t\t}\n\n\t\t\tif (this.currentCount < this.totalCount) {\n\t\t\t\tthis.loadingQueryIndex++;\n\t\t\t\tconst query:FileQuery = this.loadingQueries[this.loadingQueryIndex];\n\t\t\t\tquery.isLoading = true;\n\t\t\t\tquery.isLoadComplete = false;\n\t\t\t\ttrace('[AssetLoader] loading... ' + '\\'' + query.url + '' as '' + query.type + '\\'');\n\n\t\t\t\tconst handler:IFileHandler = this.handlersByType[query.type];\n\t\t\t\tif (handler) {\n\t\t\t\t\thandler.load(query.url, (content:any):void => {\n\t\t\t\t\t\tthis.fileLoadCompleteHandler(query, content);\n\t\t\t\t\t},(message:string = ''):void => {\n\t\t\t\t\t\tthis.fileLoadErrorHandler(query, message);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\ttrace('[AssetLoader] handler is not found \\'' + query.type + '\\'');\n\t\t\t\t\tthis.next();\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tthis.isLoading_ = false;\n\t\t\t\tthis.loadingQueries = [];\n\t\t\t\tthis.loadingQueryIndex = -1;\n\t\t\t\tthis.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.COMPLETE, this, this.currentCount / this.totalCount, this.currentCount, this.totalCount));\n\t\t\t}\n\t\t}\n\n\t\tpublic addHandler(handler:IFileHandler):void {\n\t\t\tthis.handlersByType[handler.getType()] = handler;\n\t\t}\n\n\t\tprivate fileLoadCompleteHandler = (query:FileQuery, content:any):void => {\n\t\t\tquery.isLoading = false;\n\t\t\tquery.isLoadComplete = true;\n\t\t\tquery.content = content;\n\t\t\tif (query.param.onLoad) {\n\t\t\t\tquery.param.onLoad(content);\n\t\t\t}\n\t\t\tthis.next();\n\t\t};\n\n\t\tprivate fileLoadErrorHandler = (query:FileQuery, message:string):void => {\n\t\t\tquery.isLoading = false;\n\t\t\tquery.isLoadComplete = true;\n\t\t\tif (query.param.onError) {\n\t\t\t\tquery.param.onError(message);\n\t\t\t}\n\t\t\tthis.next();\n\t\t};\n\n\t\tpublic addLoadUpdateListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.addEventListener(AssetLoaderEvent.PROGRESS, listener);\n\t\t}\n\n\t\tpublic removeLoadUpdateListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.removeEventListener(AssetLoaderEvent.PROGRESS, listener);\n\t\t}\n\n\t\tpublic addLoadCompleteListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.addEventListener(AssetLoaderEvent.COMPLETE, listener);\n\t\t}\n\n\t\tpublic removeLoadCompleteListener(listener:(event:AssetLoaderEvent) => void):void {\n\t\t\tthis.eventDispatcher.removeEventListener(AssetLoaderEvent.COMPLETE, listener);\n\t\t}\n\n\t\tpublic getQueryByQueryId(queryId:string):FileQuery {\n\t\t\treturn this.queriesByQueryId[queryId];\n\t\t}\n\n\n\t\tpublic getQueryByUrl(url:string):FileQuery {\n\t\t\treturn this.queriesByUrl[url];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic isLoading():boolean { return this.isLoading_; }\n\t\tprivate isLoading_:boolean;\n\n\t\tpublic getCurrentCount():number { return this.currentCount; }\n\t\tprivate currentCount:number;\n\n\t\tpublic getTotalCount():number { return this.totalCount; }\n\t\tprivate totalCount:number;\n\n\t\tpublic getContentByUrl<T = any>(url:string):T { return this.queriesByUrl[url].content; }\n\t\tpublic getContentByQueryId<T = any>(textureId:string):T { return this.queriesByQueryId[textureId].content; }\n\n\t\tprivate loadingQueries:FileQuery[];\n\t\tprivate loadingQueryIndex:number;\n\n\t\tprivate queriesByQueryId:util.Hash<FileQuery>;\n\t\tprivate queriesByUrl:util.Hash<FileQuery>;\n\n\t\tprivate handlersByType:util.Hash<IFileHandler>;\n\n\t\tprivate eventDispatcher:alm.event.EventDispatcher;\n\n\t\tprivate static id:number = 0;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport class AssetLoaderEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic PROGRESS:string = 'progress';\n\t\tstatic COMPLETE:string = 'complete';\n\t\tstatic ERROR:string = 'error';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, progress:number = 0, loadedCount:number = 0, totalCount:number = 0, content:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.progress = progress;\n\t\t\tthis.loadedCount = loadedCount;\n\t\t\tthis.totalCount = totalCount;\n\t\t\tthis.content = content;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():AssetLoaderEvent {\n\t\t\treturn new AssetLoaderEvent(this.getType(), this.getTarget(), this.progress, this.loadedCount, this.totalCount, this.content);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[AssetLoaderEvent] type = ' + this.getType() + ', progress = ' + this.progress + ', loadedCount = ' + this.loadedCount + ', totalCount = ' + this.totalCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic progress:number;\n\t\tpublic loadedCount:number;\n\t\tpublic totalCount:number;\n\t\tpublic content:any;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport class FileQuery {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoadComplete = false;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic id:string;\n\t\tpublic type:string;\n\t\tpublic url:string;\n\t\tpublic param:any;\n\t\tpublic content:any;\n\t\tpublic isLoading:boolean;\n\t\tpublic isLoadComplete:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.loader {\n\n\texport interface IFileHandler {\n\n\t\tgetType():string;\n\t\tload(url:string, onComplete:CompleteFunction, onError:ErrorFunction):void;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport abstract class View<T = any> extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(view:T = null) {\n\t\t\tsuper();\n\t\t\tthis.id = View.id;\n\t\t\tthis.view = view;\n\t\t\tthis.name = '';\n\t\t\tthis.autoHideWithInit = true;\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = false;\n\t\t\tthis.isReadying = false;\n\t\t\tthis.isReadied = false;\n\t\t\tthis.isShowing = false;\n\t\t\tthis.isShown = true;\n\t\t\tthis.isHiding = false;\n\n\t\t\tView.viewsById[View.id] = this;\n\t\t\t++View.id;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic initialize():void {\n\t\t\tif (this.isInitializing || this.isInitialized) return;\n\t\t\tthis.isInitializing = true;\n\n\t\t\tif (View.viewsById[this.id] == null) {\n\t\t\t\tView.viewsById[this.id] = this;\n\t\t\t}\n\n\t\t\tthis.view = this.implInitialize();\n\t\t\tif (this.isInitializing) {\n\t\t\t\tthrowError(this.name || this, 'view is null', !this.view);\n\t\t\t\tthis.hide(false);\n\t\t\t\tthis.isInitializing = false;\n\t\t\t\tthis.isInitialized = true;\n\t\t\t} else {\n\t\t\t\t// finalized while initializing\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t}\n\n\t\tpublic ready():void {\n\t\t\tif (this.isReadying || this.isReadied) return;\n\t\t\tthis.isReadying = true;\n\t\t\tthrowError(this.name || this, 'ready() was called without being initialized', !this.isInitialized);\n\t\t\tthis.implReady();\n\t\t\tthis.isReadying = false;\n\t\t\tthis.isReadied = true;\n\t\t}\n\n\t\tpublic finalize():void {\n\t\t\tif (!this.isInitializing && !this.isInitialized) return;\n\t\t\tthis.implFinalize();\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = false;\n\n\t\t\tdelete View.viewsById[this.id];\n\t\t\tView.viewsById[this.id] = null;\n\t\t}\n\n\t\tpublic show(useTransition:boolean = true):void {\n\t\t\tif (this.isShown) return;\n\t\t\tthis.getShowCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic hide(useTransition:boolean = true):void {\n\t\t\tif (!this.isShown) return;\n\t\t\tthis.getHideCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic getShowCommand(useTransition:boolean = true):cmd.Command {\n\t\t\tconst command:cmd.Serial = new cmd.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tif (this.isShown) return;\n\t\t\t\t\tthrowError(this.name || this, 'getShowCommand() was called without being initialized', this.isInitializing || !this.isInitialized);\n\t\t\t\t\tthrowWarn(this.name || this, 'getShowCommand() was called without being ready', this.isReadying|| !this.isReadied);\n\t\t\t\t\tthis.isShown = true;\n\t\t\t\t\tthis.isShowing = true;\n\t\t\t\t\tthis.isHiding = false;\n\n\t\t\t\t\tif (this.showCommand) {\n\t\t\t\t\t\tthis.showCommand.interrupt();\n\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.hideCommand) {\n\t\t\t\t\t\tthis.hideCommand.interrupt();\n\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.showCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implShow(this.view, useTransition),\n\t\t\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic getHideCommand(useTransition:boolean = true):cmd.Command {\n\t\t\tconst command:cmd.Serial = new cmd.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tif (!this.isShown) return;\n\t\t\t\t\tif (!this.isInitializing) {\n\t\t\t\t\t\tthrowError(this.name || this, 'getHideCommand() was called without being initialized', this.isInitializing || !this.isInitialized);\n\t\t\t\t\t\tthrowWarn(this.name || this, 'getHideCommand() was called without being ready', this.isReadying || !this.isReadied);\n\t\t\t\t\t}\n\t\t\t\t\tthis.isShown = false;\n\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\tthis.isHiding = true;\n\n\t\t\t\t\tif (this.showCommand) {\n\t\t\t\t\t\tthis.showCommand.interrupt();\n\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.hideCommand) {\n\t\t\t\t\t\tthis.hideCommand.interrupt();\n\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.hideCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implHide(this.view, useTransition),\n\t\t\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t\t\tthis.isHiding = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic getIsInitializing():boolean {\n\t\t\treturn this.isInitializing;\n\t\t}\n\n\t\tpublic getIsInitialized():boolean {\n\t\t\treturn this.isInitialized;\n\t\t}\n\n\t\tpublic getIsReadying():boolean {\n\t\t\treturn this.isReadying;\n\t\t}\n\n\t\tpublic getIsReadied():boolean {\n\t\t\treturn this.isReadied;\n\t\t}\n\n\t\tpublic getIsShowing():boolean {\n\t\t\treturn this.isShowing;\n\t\t}\n\n\t\tpublic getIsShown():boolean {\n\t\t\treturn this.isShown;\n\t\t}\n\n\t\tpublic getIsHiding():boolean {\n\t\t\treturn this.isHiding;\n\t\t}\n\n\t\tpublic getIsHidden():boolean {\n\t\t\treturn !this.isShown;\n\t\t}\n\n\t\tpublic getId():number {\n\t\t\treturn this.id;\n\t\t}\n\n\t\tpublic getView():T {\n\t\t\treturn this.view;\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic setName(value:string):void {\n\t\t\tthis.name = value;\n\t\t}\n\n\t\tpublic getAutoHideWithInit():boolean {\n\t\t\treturn this.autoHideWithInit;\n\t\t}\n\n\t\tpublic setAutoHideWithInit(value:boolean):void {\n\t\t\tthis.autoHideWithInit = value;\n\t\t}\n\n\n\n\n\n\t\tprotected abstract implInitialize():T;\n\t\tprotected abstract implReady():void;\n\t\tprotected abstract implFinalize():void;\n\t\tprotected abstract implShow(view:T, useTransition:boolean):cmd.Command;\n\t\tprotected abstract implHide(view:T, useTransition:boolean):cmd.Command;\n\n\n\n\n\n\t\tpublic static getViewById(id:number):View {\n\t\t\treturn View.viewsById[id];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate id:number;\n\t\tprivate view:T;\n\t\tprivate name:string;\n\t\tprivate autoHideWithInit:boolean;\n\t\tprivate showCommand:cmd.Command;\n\t\tprivate hideCommand:cmd.Command;\n\t\tprivate isInitializing:boolean;\n\t\tprivate isInitialized:boolean;\n\t\tprivate isReadying:boolean;\n\t\tprivate isReadied:boolean;\n\t\tprivate isShowing:boolean;\n\t\tprivate isShown:boolean;\n\t\tprivate isHiding:boolean;\n\n\t\tprivate static id:number = 0;\n\t\tprivate static viewsById:util.Hash<View> = {};\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\texport class ButtonBehavior {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:IButton, hitArea:HTMLElement = null, isHoverCursorEnabled:boolean = true, isPreventDefaultEnabled:boolean = true, isStopPropagationEnabled:boolean = true) {\n\t\t\tthis.target = target;\n\t\t\tthis.hitArea = null;\n\t\t\tthis.isHoverCursorEnabled = isHoverCursorEnabled;\n\t\t\tthis.isPreventDefaultEnabled = isPreventDefaultEnabled;\n\t\t\tthis.isStopPropagationEnabled = isStopPropagationEnabled;\n\t\t\tthis.isOver = false;\n\t\t\tthis.isDown = false;\n\t\t\tthis.defaultMouseCursor = '';\n\n\t\t\tthis.setHitArea(hitArea);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic over(useTransition:boolean = true):void {\n\t\t\tif (this.isOver) return;\n\t\t\tthis.isOver = true;\n\t\t\tthis.target.implButtonOver(useTransition);\n\t\t}\n\n\t\tpublic out(useTransition:boolean = true):void {\n\t\t\tif (!this.isOver) return;\n\t\t\tthis.isOver = false;\n\t\t\tthis.target.implButtonOut(useTransition);\n\t\t}\n\n\t\tpublic down(useTransition:boolean = true):void {\n\t\t\tif (this.isDown) return;\n\t\t\tthis.isDown = true;\n\t\t\tthis.target.implButtonDown(useTransition);\n\t\t}\n\n\t\tpublic up(useTransition:boolean = true):void {\n\t\t\tif (!this.isDown) return;\n\t\t\tthis.isDown = false;\n\t\t\tthis.target.implButtonUp(useTransition);\n\t\t}\n\n\t\tpublic click(useTransition:boolean = true):void {\n\t\t\tthis.target.implButtonClick(useTransition);\n\t\t}\n\n\t\tprivate on():void {\n\t\t\tthis.hitArea.addEventListener('mouseover', this.mouseOverHandler);\n\t\t\tthis.hitArea.addEventListener('mouseout', this.mouseOutHandler);\n\t\t\tthis.hitArea.addEventListener('mousedown', this.mouseDownHandler);\n\t\t\tthis.hitArea.addEventListener('mouseup', this.mouseUpHandler);\n\t\t\tthis.hitArea.addEventListener('click', this.clickHandler);\n\n\t\t\tthis.hitArea.addEventListener('touchstart', this.touchStartHandler);\n\t\t\tthis.hitArea.addEventListener('touchend', this.touchEndHandler);\n\t\t\tthis.hitArea.addEventListener('touchcancel', this.touchCancelHandler);\n\t\t}\n\n\t\tprivate off():void {\n\t\t\tthis.hitArea.removeEventListener('mouseover', this.mouseOverHandler);\n\t\t\tthis.hitArea.removeEventListener('mouseout', this.mouseOutHandler);\n\t\t\tthis.hitArea.removeEventListener('mousedown', this.mouseDownHandler);\n\t\t\tthis.hitArea.removeEventListener('mouseup', this.mouseUpHandler);\n\t\t\tthis.hitArea.removeEventListener('click', this.clickHandler);\n\n\t\t\tthis.hitArea.removeEventListener('touchstart', this.touchStartHandler);\n\t\t\tthis.hitArea.removeEventListener('touchend', this.touchEndHandler);\n\t\t\tthis.hitArea.removeEventListener('touchcancel', this.touchCancelHandler);\n\t\t}\n\n\t\tpublic getIsOver():boolean {\n\t\t\treturn this.isOver;\n\t\t}\n\n\t\tpublic getIsDown():boolean {\n\t\t\treturn this.isDown;\n\t\t}\n\n\t\tpublic getHitArea():HTMLElement {\n\t\t\treturn this.hitArea;\n\t\t}\n\n\t\tpublic setHitArea(hitArea:HTMLElement):void {\n\t\t\tif (this.hitArea !== hitArea) {\n\t\t\t\tif (this.hitArea !== null) {\n\t\t\t\t\tthis.off();\n\t\t\t\t}\n\t\t\t\tthis.hitArea = hitArea;\n\t\t\t\tif (this.hitArea !== null) {\n\t\t\t\t\tthis.on();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic clearHitArea():void {\n\t\t\tthis.setHitArea(null);\n\t\t}\n\n\t\tpublic getIsPreventDefaultEnabled():boolean {\n\t\t\treturn this.isPreventDefaultEnabled;\n\t\t}\n\n\t\tpublic setIsPreventDefaultEnabled(enabled:boolean):void {\n\t\t\tthis.isPreventDefaultEnabled = enabled;\n\t\t}\n\n\t\tpublic getIsStopPropagationEnabled():boolean {\n\t\t\treturn this.isStopPropagationEnabled;\n\t\t}\n\n\t\tpublic setIsStopPropagationEnabled(enabled:boolean):void {\n\t\t\tthis.isStopPropagationEnabled = enabled;\n\t\t}\n\n\t\tpublic getIsHoverCursorEnabled():boolean {\n\t\t\treturn this.isHoverCursorEnabled;\n\t\t}\n\n\t\tpublic setIsHoverCursorEnabled(enabled:boolean):void {\n\t\t\tthis.isHoverCursorEnabled = enabled;\n\t\t}\n\n\t\t// --------------------------------------------------\n\t\t// Mouse Event\n\n\t\tprivate mouseOverHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tif (this.isHoverCursorEnabled) {\n\t\t\t\tthis.defaultMouseCursor = this.hitArea.style.cursor;\n\t\t\t\tthis.hitArea.style.cursor = 'pointer';\n\t\t\t}\n\t\t\tthis.over();\n\t\t};\n\n\t\tprivate mouseOutHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tif (this.isHoverCursorEnabled) {\n\t\t\t\tthis.hitArea.style.cursor = this.defaultMouseCursor != '' ? this.defaultMouseCursor : 'pointer';\n\t\t\t}\n\t\t\tthis.out();\n\t\t};\n\n\t\tprivate mouseDownHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.down();\n\t\t};\n\n\t\tprivate mouseUpHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.up();\n\t\t};\n\n\t\tprivate clickHandler = (event:MouseEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.click();\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Touch Event\n\n\t\tprivate touchStartHandler = (event:TouchEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.down();\n\t\t};\n\n\t\tprivate touchEndHandler = (event:TouchEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.up();\n\t\t};\n\n\t\tprivate touchCancelHandler = (event:TouchEvent):void => {\n\t\t\tif (this.isPreventDefaultEnabled) event.preventDefault();\n\t\t\tif (this.isStopPropagationEnabled) event.stopPropagation();\n\t\t\tthis.out();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:IButton;\n\t\tprivate hitArea:HTMLElement;\n\t\tprivate isOver:boolean;\n\t\tprivate isDown:boolean;\n\t\tprivate isPreventDefaultEnabled:boolean;\n\t\tprivate isStopPropagationEnabled:boolean;\n\t\tprivate isHoverCursorEnabled:boolean;\n\t\tprivate defaultMouseCursor:string;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\texport interface IButton {\n\n\t\timplButtonOver(useTransition:boolean):void;\n\t\timplButtonOut(useTransition:boolean):void;\n\t\timplButtonDown(useTransition:boolean):void;\n\t\timplButtonUp(useTransition:boolean):void;\n\t\timplButtonClick(useTransition:boolean):void;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\texport class SelectionBehavior {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(target:ISelection) {\n\t\t\tthis.target = target;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic select(useTransition:boolean = true):void {\n\t\t\tif (this.isSelected) return;\n\t\t\tthis.isSelected = true;\n\t\t\tthis.target.implSelectionChanged(this.isSelected, useTransition);\n\t\t}\n\n\t\tpublic deselect(useTransition:boolean = true):void {\n\t\t\tif (!this.isSelected) return;\n\t\t\tthis.isSelected = false;\n\t\t\tthis.target.implSelectionChanged(this.isSelected, useTransition);\n\t\t}\n\n\t\tpublic getIsSelected():boolean {\n\t\t\treturn this.isSelected;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate target:ISelection;\n\t\tprivate isSelected:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.view {\n\n\texport interface ISelection {\n\n\t\timplSelectionChanged(isSelected:boolean, useTransition:boolean):void;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class DeviceInfo {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tconst u:string = window.navigator.userAgent.toLowerCase();\n\n\t\t\t// Device\n\t\t\tthis.isTablet = (u.indexOf('windows') != -1 && u.indexOf('touch') != -1)\n\t\t\t\t|| u.indexOf('ipad') != -1\n\t\t\t\t|| (u.indexOf('android') != -1 && u.indexOf('mobile') == -1)\n\t\t\t\t|| (u.indexOf('firefox') != -1 && u.indexOf('tablet') != -1)\n\t\t\t\t|| u.indexOf('kindle') != -1\n\t\t\t\t|| u.indexOf('silk') != -1\n\t\t\t\t|| u.indexOf('playbook') != -1;\n\n\t\t\tthis.isMobile = (u.indexOf('windows') != -1 && u.indexOf('phone') != -1)\n\t\t\t\t|| u.indexOf('iphone') != -1\n\t\t\t\t|| u.indexOf('ipod') != -1\n\t\t\t\t|| (u.indexOf('android') != -1 && u.indexOf('mobile') != -1)\n\t\t\t\t|| (u.indexOf('firefox') != -1 && u.indexOf('mobile') != -1)\n\t\t\t\t|| u.indexOf('blackberry') != -1;\n\n\t\t\tthis.isDesktop = !this.isTablet && !this.isMobile;\n\n\t\t\t// OS\n\t\t\tthis.isIOS = u.indexOf('ipad') != -1 || u.indexOf('iphone') != -1 || u.indexOf('ipod') != -1;\n\t\t\tthis.isAndroid = u.indexOf('android') != -1 && u.indexOf('mobile') != -1;\n\n\t\t\t// Browser\n\t\t\tif(u.indexOf('msie') != -1 || u.indexOf('trident') != -1) {\n\t\t\t\tthis.isIE = true;\n\t\t\t} else if(u.indexOf('edge') != -1) {\n\t\t\t\tthis.isEdge = true;\n\t\t\t} else if(u.indexOf('chrome') != -1) {\n\t\t\t\tthis.isChrome = true;\n\t\t\t} else if(u.indexOf('safari') != -1) {\n\t\t\t\tthis.isSafari = true;\n\t\t\t} else if(u.indexOf('firefox') != -1) {\n\t\t\t\tthis.isFireFox = true;\n\t\t\t} else if(u.indexOf('opera') != -1) {\n\t\t\t\tthis.isOpera = true;\n\t\t\t} else {\n\t\t\t\tthis.isUnknownBrowser = true;\n\t\t\t}\n\n\t\t\t// Function\n\t\t\tthis.isTouchEnabled = (typeof window.ontouchstart) !== 'undefined';\n\t\t\tthis.isDownloadEnabled = !this.isIOS;\n\n\t\t\t// Resolution\n\t\t\tthis.isRetina = Math.round(window.devicePixelRatio) == 2;\n\t\t}\n\n\t\t// --------------------\n\t\t// Device\n\n\t\tpublic static getIsDesktop():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isDesktop;\n\t\t}\n\n\t\tpublic static getIsTablet():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isTablet;\n\t\t}\n\n\t\tpublic static getIsMobile():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isMobile;\n\t\t}\n\n\t\t// --------------------\n\t\t// OS\n\n\t\tpublic static getIsIOS():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isIOS;\n\t\t}\n\n\t\tpublic static getIsAndroid():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isAndroid;\n\t\t}\n\n\t\tpublic static getIsRetina():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isRetina;\n\t\t}\n\n\t\t// --------------------\n\t\t// Browser\n\n\t\tpublic static getIsIE():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isIE;\n\t\t}\n\n\t\tpublic static getIsEdge():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isEdge;\n\t\t}\n\n\t\tpublic static getIsChrome():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isChrome;\n\t\t}\n\n\t\tpublic static getIsSafari():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isSafari;\n\t\t}\n\n\t\tpublic static getIsFireFox():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isFireFox;\n\t\t}\n\n\t\tpublic static getIsOpera():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isOpera;\n\t\t}\n\n\t\tpublic static getIsUnknownBrowser():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isUnknownBrowser;\n\t\t}\n\n\t\t// --------------------\n\t\t// Function\n\n\t\tpublic static getIsTouchEnabled():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isTouchEnabled;\n\t\t}\n\n\t\tpublic static getIsDownloadEnabled():boolean {\n\t\t\tthis.initialize();\n\t\t\treturn this.isDownloadEnabled;\n\t\t}\n\n\t\t// --------------------\n\t\t// Resolution\n\n\t\tpublic static getDpi():number {\n\t\t\tif (this.dpi == -1) {\n\t\t\t\tconst div:HTMLElement = document.createElement('div');\n\t\t\t\tdiv.setAttribute('style', 'height:1in;left:-100%;top:-100%;position:absolute;width:1in;');\n\t\t\t\tdocument.body.appendChild(div);\n\t\t\t\tthis.dpi = div.offsetHeight;\n\t\t\t\tdocument.body.removeChild(div);\n\t\t\t}\n\t\t\treturn this.dpi;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static isDesktop:boolean = false;\n\t\tprivate static isTablet:boolean = false;\n\t\tprivate static isMobile:boolean = false;\n\n\t\tprivate static isIOS:boolean = false;\n\t\tprivate static isAndroid:boolean = false;\n\n\t\tprivate static isIE:boolean = false;\n\t\tprivate static isEdge:boolean = false;\n\t\tprivate static isChrome:boolean = false;\n\t\tprivate static isSafari:boolean = false;\n\t\tprivate static isFireFox:boolean = false;\n\t\tprivate static isOpera:boolean = false;\n\t\tprivate static isUnknownBrowser:boolean = false;\n\n\t\tprivate static isTouchEnabled:boolean = false;\n\t\tprivate static isDownloadEnabled:boolean = false;\n\n\t\tprivate static isRetina:boolean = false;\n\t\tprivate static dpi:number = -1;\n\n\t\tprivate static isInitialized:boolean = false;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class LocalStorage {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t/**\n\t\t * データをLocalStorageに保存する\n\t\t * @param key 保存するキー\n\t\t * @param value 保存するデータ\n\t\t * @param expiredAt 有効期限（UNIXミリ秒）\n\t\t * @returns {boolean} 保存に成功した場合trueが返る\n\t\t */\n\t\tpublic static save(key:string, value:any, expiredAt:number = -1):boolean {\n\t\t\tif (!LocalStorage.isAvailable()) return false;\n\t\t\tconst record:{ value:string; expiredAt:number } = { value:JSON.stringify(value), expiredAt: expiredAt };\n\t\t\tlocalStorage.setItem(key, JSON.stringify(record));\n\t\t\treturn true;\n\t\t}\n\t\t/**\n\t\t * データをLocalStorageに保存する\n\t\t * @param key 保存するキー\n\t\t * @param value 保存するデータ\n\t\t * @param minutes 保存期間（分）\n\t\t * @returns {boolean} 保存に成功した場合trueが返る\n\t\t */\n\t\tpublic static saveWithTerm(key:string, value:any, milliseconds:number = -1):boolean {\n\t\t\tconst expiredAt:number = milliseconds > 0 ? new Date().getTime() + milliseconds :-1;\n\t\t\treturn LocalStorage.save(key, value, expiredAt);\n\t\t}\n\n\t\t/**\n\t\t * 保存したデータをLocalStorageから読み込む\n\t\t * @param key 保存したキー\n\t\t * @returns {any} 読み込まれたデータ\n\t\t */\n\t\tpublic static load(key:string, defaultValue:any = null):any {\n\t\t\tif (!LocalStorage.isAvailable()) return defaultValue;\n\t\t\tconst record:{ value:string; expiredAt:number } = JSON.parse(localStorage.getItem(key));\n\t\t\tif (record) {\n\t\t\t\t// データが見つかった\n\t\t\t\tif (record.expiredAt > 0) {\n\t\t\t\t\t// 期限付きデータ\n\t\t\t\t\tif (new Date().getTime() < record.expiredAt) {\n\t\t\t\t\t\t// 有効期限内\n\t\t\t\t\t\treturn JSON.parse(record.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 有効期限を過ぎているので破棄\n\t\t\t\t\t\tlocalStorage.removeItem(key);\n\t\t\t\t\t\treturn defaultValue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// 永続データ\n\t\t\t\t\treturn JSON.parse(record.value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// データが見つからなかった\n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * 保存したデータをLocalStorageから削除する\n\t\t * @param key 保存したキー\n\t\t */\n\t\tpublic static remove(key:string):void {\n\t\t\tif (!LocalStorage.isAvailable()) return;\n\t\t\tlocalStorage.removeItem(key);\n\t\t}\n\n\t\t/**\n\t\t * LocalStorageが使用可能かどうか確認する\n\t\t * @returns {boolean} 使用可能な場合はtrueが返る\n\t\t */\n\t\tpublic static isAvailable():boolean {\n\t\t\tif (LocalStorage.isAvailable_ == null) {\n\t\t\t\ttry {\n\t\t\t\t\tlocalStorage.setItem('__CKECK__', '__CKECK__');\n\t\t\t\t\tlocalStorage.removeItem('__CKECK__');\n\t\t\t\t\tLocalStorage.isAvailable_ = true;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tLocalStorage.isAvailable_ = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn LocalStorage.isAvailable_;\n\t\t}\n\n\t\t/**\n\t\t * 各時間の尺度ミリ秒で合算する\n\t\t * @param dates 日\n\t\t * @param hours 時\n\t\t * @param minutes 分\n\t\t * @param seconds 秒\n\t\t * @param milliseconds ミリ秒\n\t\t * @returns {number} 合算されたミリ秒\n\t\t */\n\t\tpublic static toMilliseconds(dates:number = 0, hours:number = 0, minutes:number = 0, seconds:number = 0, milliseconds:number = 0):number {\n\t\t\treturn milliseconds + (seconds + (minutes + (hours + dates * 24) * 60) * 60) * 1000;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static isAvailable_:boolean = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\t// https://github.com/nfriend/ts-keycode-enum\n\texport enum KeyCode {\n\t\tBackspace = 8,\n\t\tTab = 9,\n\t\tEnter = 13,\n\t\tShift = 16,\n\t\tCtrl = 17,\n\t\tAlt = 18,\n\t\tPauseBreak = 19,\n\t\tCapsLock = 20,\n\t\tEscape = 27,\n\t\tSpace = 32,\n\t\tPageUp = 33,\n\t\tPageDown = 34,\n\t\tEnd = 35,\n\t\tHome = 36,\n\n\t\tLeftArrow = 37,\n\t\tUpArrow = 38,\n\t\tRightArrow = 39,\n\t\tDownArrow = 40,\n\n\t\tInsert = 45,\n\t\tDelete = 46,\n\n\t\tKey0 = 48,\n\t\tKey1 = 49,\n\t\tKey2 = 50,\n\t\tKey3 = 51,\n\t\tKey4 = 52,\n\t\tKey5 = 53,\n\t\tKey6 = 54,\n\t\tKey7 = 55,\n\t\tKey8 = 56,\n\t\tKey9 = 57,\n\n\t\tClosedParen = Key0,\n\t\tExclamationMark = Key1,\n\t\tAtSign = Key2,\n\t\tPoundSign = Key3,\n\t\tHash = PoundSign,\n\t\tDollarSign = Key4,\n\t\tPercentSign = Key5,\n\t\tCaret = Key6,\n\t\tHat = Caret,\n\t\tAmpersand = Key7,\n\t\tStar = Key8,\n\t\tAsterik = Star,\n\t\tOpenParen = Key9,\n\n\t\tA = 65,\n\t\tB = 66,\n\t\tC = 67,\n\t\tD = 68,\n\t\tE = 69,\n\t\tF = 70,\n\t\tG = 71,\n\t\tH = 72,\n\t\tI = 73,\n\t\tJ = 74,\n\t\tK = 75,\n\t\tL = 76,\n\t\tM = 77,\n\t\tN = 78,\n\t\tO = 79,\n\t\tP = 80,\n\t\tQ = 81,\n\t\tR = 82,\n\t\tS = 83,\n\t\tT = 84,\n\t\tU = 85,\n\t\tV = 86,\n\t\tW = 87,\n\t\tX = 88,\n\t\tY = 89,\n\t\tZ = 90,\n\n\t\tLeftWindowKey = 91,\n\t\tRightWindowKey = 92,\n\t\tSelectKey = 93,\n\n\t\tNumpad0 = 96,\n\t\tNumpad1 = 97,\n\t\tNumpad2 = 98,\n\t\tNumpad3 = 99,\n\t\tNumpad4 = 100,\n\t\tNumpad5 = 101,\n\t\tNumpad6 = 102,\n\t\tNumpad7 = 103,\n\t\tNumpad8 = 104,\n\t\tNumpad9 = 105,\n\n\t\tMultiply = 106,\n\t\tAdd = 107,\n\t\tSubtract = 109,\n\t\tDecimalPoint = 110,\n\t\tDivide = 111,\n\n\t\tF1 = 112,\n\t\tF2 = 113,\n\t\tF3 = 114,\n\t\tF4 = 115,\n\t\tF5 = 116,\n\t\tF6 = 117,\n\t\tF7 = 118,\n\t\tF8 = 119,\n\t\tF9 = 120,\n\t\tF10 = 121,\n\t\tF11 = 122,\n\t\tF12 = 123,\n\n\t\tNumLock = 144,\n\t\tScrollLock = 145,\n\n\t\tSemiColon = 186,\n\t\tEquals = 187,\n\t\tComma = 188,\n\t\tDash = 189,\n\t\tPeriod = 190,\n\t\tUnderScore = Dash,\n\t\tPlusSign = Equals,\n\t\tForwardSlash = 191,\n\t\tTilde = 192,\n\t\tGraveAccent = Tilde,\n\n\t\tOpenBracket = 219,\n\t\tClosedBracket = 221,\n\t\tQuote = 222\n\t}\n\n\n\n\n\n\texport class KeyWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[KeyWatcher] start');\n\n\t\t\twindow.addEventListener('keydown', this.windowKeyDownHandler);\n\t\t\twindow.addEventListener('keyup', this.windowKeyUpHandler);\n\t\t}\n\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[KeyWatcher] stop');\n\n\t\t\twindow.removeEventListener('keydown', this.windowKeyDownHandler);\n\t\t\twindow.removeEventListener('keyup', this.windowKeyUpHandler);\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener);\n\t\t}\n\n\n\n\n\n\t\tprivate static windowKeyDownHandler = (event:KeyboardEvent):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] == null) {\n\t\t\t\tKeyWatcher.isKeyPressedByKeyCode[keyCode] = true;\n\t\t\t\t++KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_DOWN, KeyWatcher, event));\n\t\t\t} else if (KeyWatcher.isContinuousPressEnabled) {\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_DOWN, KeyWatcher, event));\n\t\t\t}\n\t\t};\n\n\t\tprivate static windowKeyUpHandler = (event:KeyboardEvent):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] != null) {\n\t\t\t\tdelete KeyWatcher.isKeyPressedByKeyCode[keyCode];\n\t\t\t\t--KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_UP, KeyWatcher, event));\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getIsAnyKeyPressed():boolean { return this.pressedKeyCount > 0; }\n\t\tprivate static pressedKeyCount:number = 0;\n\n\t\tpublic static getIsKeyPressed(keyCode:number):boolean { return this.isKeyPressedByKeyCode[keyCode] != null; }\n\t\tprivate static isKeyPressedByKeyCode:util.Hash<boolean> = {};\n\n\n\t\tpublic static getIsContinuousPressEnabled():boolean { return this.isContinuousPressEnabled; }\n\t\tpublic static setIsContinuousPressEnabled(enabled:boolean):void { this.isContinuousPressEnabled = enabled; }\n\t\tprivate static isContinuousPressEnabled:boolean = false;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static isLongPressed:boolean = false;\n\t\tprivate static eventDispatcher:alm.event.EventDispatcher = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class KeyWatcherEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic KEY_UP:string = 'keyUp';\n\t\tstatic KEY_DOWN:string = 'keyDown';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, originalEvent:KeyboardEvent = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.originalEvent = originalEvent;\n\t\t\tthis.key = this.originalEvent.key;\n\t\t\tthis.keyCode = this.originalEvent.keyCode;\n\t\t\tthis.altKey = this.originalEvent.altKey;\n\t\t\tthis.ctrlKey = this.originalEvent.ctrlKey;\n\t\t\tthis.shiftKey = this.originalEvent.shiftKey;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():KeyWatcherEvent {\n\t\t\treturn new KeyWatcherEvent(this.getType(), this.getTarget(), this.originalEvent);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[KeyWatcherEvent] type = ' + this.getType() + ', key = ' + this.key + ', keyCode = ' + this.keyCode + ', altKey = ' + this.altKey + ', ctrlKey = ' + this.ctrlKey + ', shiftKey = ' + this.shiftKey;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic originalEvent:KeyboardEvent;\n\t\tpublic key:string;\n\t\tpublic keyCode:number;\n\t\tpublic altKey:boolean;\n\t\tpublic ctrlKey:boolean;\n\t\tpublic shiftKey:boolean;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class WindowWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new alm.event.EventDispatcher();\n\t\t}\n\n\t\tpublic static start(target:Window = null):void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[WindowWatcher] start');\n\n\t\t\tthis.window = target || window;\n\n\t\t\tif (DeviceInfo.getIsDesktop()) {\n\t\t\t\tthis.window.addEventListener('resize', this.windowResizeHandler);\n\t\t\t} else {\n\t\t\t\tthis.window.addEventListener('orientationchange', this.windowResizeHandler);\n\t\t\t}\n\t\t\tthis.window.addEventListener('scroll', this.windowScrollHandler);\n\t\t\tthis.apply();\n\t\t}\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace('[WindowWatcher] stop');\n\n\t\t\tif (DeviceInfo.getIsDesktop()) {\n\t\t\t\tthis.window.removeEventListener('resize', this.windowResizeHandler);\n\t\t\t} else {\n\t\t\t\tthis.window.removeEventListener('orientationchange', this.windowResizeHandler);\n\t\t\t}\n\t\t\tthis.window.removeEventListener('scroll', this.windowScrollHandler);\n\t\t}\n\n\t\tpublic static apply():void {\n\t\t\tthis.windowWidth = this.window.innerWidth;\n\t\t\tthis.windowHeight = this.window.innerHeight;\n\n\t\t\tthis.scrollTop = (this.window.pageYOffset !== undefined) ? this.window.pageYOffset : document.documentElement.scrollTop;\n\t\t\tthis.scrollBottom = this.scrollTop + this.windowHeight;\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:WindowWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:WindowWatcherEvent) => void):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener);\n\t\t}\n\n\t\tpublic static calcScrolledPosition(y:number):number {\n\t\t\treturn y - this.scrollTop;\n\t\t};\n\n\t\tpublic static calcScrolledPositionRatio(y:number):number {\n\t\t\treturn this.calcScrolledPosition(y) / this.windowHeight;\n\t\t}\n\n\n\n\n\n\t\tprivate static windowResizeHandler = (event:Event):void => {\n\t\t\tWindowWatcher.apply();\n\t\t\tWindowWatcher.eventDispatcher.dispatchEvent(new WindowWatcherEvent(WindowWatcherEvent.RESIZE, WindowWatcher, event, WindowWatcher.scrollTop, WindowWatcher.scrollBottom, WindowWatcher.windowWidth, WindowWatcher.windowHeight));\n\t\t};\n\n\t\tprivate static windowScrollHandler = (event:Event):void => {\n\t\t\tWindowWatcher.apply();\n\t\t\tWindowWatcher.eventDispatcher.dispatchEvent(new WindowWatcherEvent(WindowWatcherEvent.SCROLL, WindowWatcher, event, WindowWatcher.scrollTop, WindowWatcher.scrollBottom, WindowWatcher.windowWidth, WindowWatcher.windowHeight));\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getWindow():Window { return this.window; }\n\t\tprivate static window:Window = null;\n\n\t\tpublic static getScrollTop():number { return this.scrollTop; }\n\t\tprivate static scrollTop:number;\n\n\t\tpublic static getScrollBottom():number { return this.scrollBottom; }\n\t\tprivate static scrollBottom:number;\n\n\t\tpublic static getWindowWidth():number { return this.windowWidth; }\n\t\tprivate static windowWidth:number = 0;\n\n\t\tpublic static getWindowHeight():number { return this.windowHeight; }\n\t\tprivate static windowHeight:number = 0;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:alm.event.EventDispatcher = null;\n\n\n\n\n\n\t\tprivate constructor() {}\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace alm.browser {\n\n\texport class WindowWatcherEvent extends alm.event.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic SCROLL:string = 'scroll';\n\t\tstatic RESIZE:string = 'resize';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null, originalEvent:Event = null, scrollTop:number = 0, scrollBottom:number = 0, windowWidth:number = 0, windowHeight:number = 0) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t\tthis.originalEvent = originalEvent;\n\t\t\tthis.scrollTop = scrollTop;\n\t\t\tthis.scrollBottom = scrollBottom;\n\t\t\tthis.windowWidth = windowWidth;\n\t\t\tthis.windowHeight = windowHeight;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():WindowWatcherEvent {\n\t\t\treturn new WindowWatcherEvent(this.getType(), this.getTarget(), this.originalEvent, this.scrollTop, this.scrollBottom, this.windowWidth, this.windowHeight);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[WindowWatcherEvent] type = ' + this.getType() + ', scrollTop = ' + this.scrollTop + ', scrollBottom = ' + this.scrollBottom + ', windowWidth = ' + this.windowWidth + ', windowHeight = ' + this.windowHeight;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic originalEvent:Event;\n\t\tpublic scrollTop:number;\n\t\tpublic scrollBottom:number;\n\t\tpublic windowWidth:number;\n\t\tpublic windowHeight:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Logger = alm.util.Logger;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class Scene extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(name:string) {\n\t\t\tsuper();\n\t\t\tthis.name = name;\n\t\t\tthis.state = SceneState.Idling;\n\t\t\tthis.parent = null;\n\t\t\tthis.childrenByName = {};\n\t\t\tthis.numChildren = 0;\n\t\t\tthis.isEntered = false;\n\t\t\tthis.onLoad = null;\n\t\t\tthis.onUnload = null;\n\t\t\tthis.onArrive = null;\n\t\t\tthis.onLeave = null;\n\t\t\tthis.onAscend = null;\n\t\t\tthis.onDescend = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic addChild(child:Scene):Scene {\n\t\t\tif (child) {\n\t\t\t\tconst childName:string = child.name;\n\t\t\t\tif (this.childrenByName[childName]) {\n\t\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] addChild was failed, because child name \\'' + childName + '\\' is already contained.');\n\t\t\t\t} else {\n\t\t\t\t\t++this.numChildren;\n\t\t\t\t\tchild.parent = this;\n\t\t\t\t\tthis.childrenByName[childName] = child;\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] addChild was failed, because child is null.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic removeChild(child:Scene):Scene {\n\t\t\tif (child) {\n\t\t\t\tconst childName:string = child.name;\n\t\t\t\tif (this.childrenByName[childName]) {\n\t\t\t\t\t--this.numChildren;\n\t\t\t\t\tchild.parent = null;\n\t\t\t\t\tdelete this.childrenByName[childName];\n\t\t\t\t\treturn child;\n\t\t\t\t} else {\n\t\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] removeChild was failed, because child name \\'' + childName + '\\' is not contained.');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] removeChild was failed, because child is null.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic addChildren(children:Scene[]):Scene[] {\n\t\t\tconst addedChildren:Scene[] = [];\n\t\t\tconst n:number = children.length;\n\t\t\tlet c:Scene;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tc = this.addChild(children[i]);\n\t\t\t\tif (c) {\n\t\t\t\t\taddedChildren.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn addedChildren;\n\t\t}\n\n\t\tpublic removeChildren(children:Scene[]):Scene[] {\n\t\t\tconst removedChildren:Scene[] = [];\n\t\t\tconst n:number = children.length;\n\t\t\tlet c:Scene;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tc = this.removeChild(children[i]);\n\t\t\t\tif (c) {\n\t\t\t\t\tremovedChildren.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn removedChildren;\n\t\t}\n\n\t\tpublic removeAllChildren():Scene[] {\n\t\t\tconst children:Scene[] = [];\n\t\t\tlet child:Scene;\n\t\t\tfor (let name in this.childrenByName) {\n\t\t\t\tchild = this.childrenByName[name];\n\t\t\t\tchild.parent = null;\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\t\t\tthis.childrenByName = {};\n\t\t\tthis.numChildren = 0;\n\t\t\treturn children;\n\t\t}\n\n\t\tpublic contains(child:Scene|string):boolean {\n\t\t\tif (child) {\n\t\t\t\treturn this.childrenByName[typeof child == 'string' ? child : child.name] != null;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic getState():SceneState {\n\t\t\treturn this.state;\n\t\t}\n\n\t\tpublic getLastState():SceneState {\n\t\t\treturn this.lastState;\n\t\t}\n\n\t\tpublic getParent():Scene {\n\t\t\treturn this.parent;\n\t\t}\n\n\t\tpublic getChildByName(name:string):Scene {\n\t\t\treturn this.childrenByName[name];\n\t\t}\n\n\t\tpublic getNumChildren():number {\n\t\t\treturn this.numChildren;\n\t\t}\n\n\t\tpublic getManager():SceneManager {\n\t\t\tif (this.parent) {\n\t\t\t\treturn this.parent.getManager();\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] getManager was failed, check whether if scene is connected to root.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic getPath():string {\n\t\t\tconst manager:SceneManager = this.getManager();\n\t\t\tif (manager) {\n\t\t\t\tconst names:string[] = [this.name];\n\t\t\t\tlet scene:Scene = this;\n\t\t\t\twhile (scene = scene.parent) {\n\t\t\t\t\tnames.unshift(scene.name);\n\t\t\t\t}\n\t\t\t\treturn manager.getScenePathByNames(names);\n\t\t\t} else {\n\t\t\t\tLogger.warn('[Scene \\'' + this.name + '\\'] getPath was failed, check whether if scene is connected to root.');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic gotoScene(path:string):void {\n\t\t\tthis.getManager().goto(path);\n\t\t}\n\n\n\n\n\n\t\tpublic _load(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Loading;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LOAD, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onLoad) == 'function' ? this.onLoad() : this.implOnLoad();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LOAD_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _unload(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Unloading;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.UNLOAD, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onUnload) == 'function' ? this.onUnload() : this.implOnUnload();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.UNLOAD_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _arrive(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Arriving;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ARRIVE, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onArrive) == 'function' ? this.onArrive() : this.implOnArrive();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ARRIVE_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _leave(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Leaving;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LEAVE, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onLeave) == 'function' ? this.onLeave() : this.implOnLeave();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.LEAVE_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _ascend(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Ascending;\n\t\t\tthis.isEntered = true;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ASCEND, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onAscend) == 'function' ? this.onAscend() : this.implOnAscend();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.ASCEND_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\t\tpublic _descend(transferInfo:SceneTransferInfo):void {\n\t\t\tthis.transferInfo = transferInfo;\n\t\t\tthis.state = SceneState.Descending;\n\t\t\tthis.isEntered = false;\n\t\t\tconst command:cmd.Serial = new cmd.Serial(\n\t\t\t\t():void => {\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.DESCEND, this));\n\t\t\t\t\tconst c:cmd.Command = typeof(this.onDescend) == 'function' ? this.onDescend() : this.implOnDescend();\n\t\t\t\t\tif (c) command.insertCommand(c);\n\t\t\t\t},\n\t\t\t\t():void => {\n\t\t\t\t\tthis.lastState = this.state;\n\t\t\t\t\tthis.state = SceneState.Idling;\n\t\t\t\t\tthis.dispatchEvent(new SceneEvent(SceneEvent.DESCEND_COMPLETE, this));\n\t\t\t\t}\n\t\t\t);\n\t\t\tcommand.execute();\n\t\t}\n\n\n\n\n\n\t\tprotected implOnLoad():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnUnload():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnArrive():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnLeave():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnAscend():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\t\tprotected implOnDescend():cmd.Command {\n\t\t\treturn new cmd.Command();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\t// The callback function is called preferentially over the override\n\t\tpublic onLoad:() => cmd.Command;\n\t\tpublic onUnload:() => cmd.Command;\n\t\tpublic onArrive:() => cmd.Command;\n\t\tpublic onLeave:() => cmd.Command;\n\t\tpublic onAscend:() => cmd.Command;\n\t\tpublic onDescend:() => cmd.Command;\n\n\t\tprivate isEntered:boolean;\n\t\tprivate name:string;\n\t\tprivate state:SceneState;\n\t\tprivate lastState:SceneState;\n\t\tprivate parent:Scene;\n\t\tprivate childrenByName:alm.util.Hash<Scene>;\n\t\tprivate numChildren:number;\n\t\tprivate transferInfo:SceneTransferInfo;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Event = alm.event.Event;\n\n\texport class SceneEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static LOAD:string = 'load';\n\t\tpublic static UNLOAD:string = 'unload';\n\t\tpublic static ARRIVE:string = 'arrive';\n\t\tpublic static LEAVE:string = 'leave';\n\t\tpublic static ASCEND:string = 'ascend';\n\t\tpublic static DESCEND:string = 'descend';\n\n\t\tpublic static LOAD_COMPLETE:string = 'loadComplete';\n\t\tpublic static UNLOAD_COMPLETE:string = 'unloadComplete';\n\t\tpublic static ARRIVE_COMPLETE:string = 'arriveComplete';\n\t\tpublic static LEAVE_COMPLETE:string = 'leaveComplete';\n\t\tpublic static ASCEND_COMPLETE:string = 'ascendComplete';\n\t\tpublic static DESCEND_COMPLETE:string = 'descendComplete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():SceneEvent {\n\t\t\treturn new SceneEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[SceneEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Logger = alm.util.Logger;\n\timport LoggerLevel = alm.util.LoggerLevel;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class SceneManager extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(name:string = '') {\n\t\t\tsuper();\n\t\t\tthis.name = name;\n\t\t\tthis.root = new core.RootScene(this);\n\t\t\tthis.currentScene = null;\n\n\t\t\tthis.waypoints = [];\n\t\t\tthis.waypointIndex = -1;\n\t\t\tthis.lastState = SceneState.Idling;\n\t\t\tthis.eventIndex = -1;\n\t\t\tthis.transferId = -1;\n\t\t\tthis.transferInfo = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tLogger.verbose('----- scene manager start -----');\n\t\t\tthis.goto('/');\n\t\t}\n\n\t\tpublic goto(path:string):void {\n\t\t\tpath = this.resolvePath(path);\n\n\t\t\t// Return if current destination and new destination is same.\n\t\t\tif (this.transferInfo && this.transferInfo.getDestinationPath() == path) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Build waypoints\n\t\t\tlet newWaypoints:core.Waypoint[] = [];\n\t\t\tif (this.waypointIndex != -1) {\n\t\t\t\tnewWaypoints = this.createWaypoints(this.waypoints[this.waypointIndex].getPath(), path);\n\t\t\t} else {\n\t\t\t\t// Init\n\t\t\t\tnewWaypoints = [new core.Waypoint('/', 0)];\n\t\t\t}\n\n\t\t\t// Transfer\n\t\t\tif (newWaypoints.length > 0) {\n\t\t\t\tconst isDestinationChanged:boolean = this.transferInfo != null;\n\n\t\t\t\tif (!isDestinationChanged) {\n\t\t\t\t\tthis.waypointIndex = 0;\n\t\t\t\t\tthis.eventIndex = 0;\n\t\t\t\t\t++this.transferId;\n\t\t\t\t\tthis.waypoints = newWaypoints;\n\t\t\t\t} else {\n\t\t\t\t\tLogger.verbose('destination is changed');\n\t\t\t\t\tLogger.verbose('waypoint index : ' + this.waypointIndex);\n\t\t\t\t\tthis.waypoints = this.waypoints.slice(0, this.waypointIndex + 1).concat(newWaypoints.slice(1));\n\t\t\t\t\tthis.setDirection(this.waypoints);\n\t\t\t\t\tthis.printWaypoint(this.waypoints);\n\t\t\t\t}\n\n\t\t\t\tthis.transferInfo = new SceneTransferInfo(this.transferId, this.waypoints[this.waypointIndex].getPath(), this.waypoints[this.waypoints.length - 1].getPath());\n\n\t\t\t\tif (!isDestinationChanged) {\n\t\t\t\t\tthis.dispatchEvent(new SceneManagerEvent(SceneManagerEvent.TRANSFER_START, this));\n\t\t\t\t}\n\n\t\t\t\tthis.checkState();\n\t\t\t}\n\t\t}\n\n\t\tpublic resolvePath(path:string):string {\n\t\t\t// Relative to absolute\n\t\t\tif (path[0] != '/') {\n\t\t\t\tif (this.currentScene) {\n\t\t\t\t\tpath = this.currentScene.getPath() + '/' + path;\n\t\t\t\t} else {\n\t\t\t\t\tpath = '/' + path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Normalize\n\t\t\tconst names:string[] = path.split('/');\n\t\t\tconst normalized:string[] = [];\n\t\t\tfor (let i:number = 0; i < names.length; ++i) {\n\t\t\t\tconst name:string = names[i];\n\t\t\t\tif (name == '') continue;\n\t\t\t\tif (name == '.') continue;\n\t\t\t\tif (name == '..') {\n\t\t\t\t\tnormalized.pop();\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tnormalized.push(name);\n\t\t\t}\n\n\t\t\treturn '/' + normalized.join('/');\n\t\t}\n\n\t\tpublic addSceneAt(path:string, createScene:boolean = false):Scene {\n\t\t\tlet success:boolean = false;\n\t\t\tconst names:string[] = this.getSceneNamesByPath(path);\n\t\t\tconst n:number = names.length;\n\t\t\tlet scene:Scene = this.root;\n\t\t\tfor (let i:number = 1; i < n; ++i) {\n\t\t\t\tconst name:string = names[i];\n\t\t\t\tif (i == n - 1) {\n\t\t\t\t\tif (scene.contains(name)) {\n\t\t\t\t\t\tLogger.warn('[SceneManager \\'' + this.name + '\\'] addSceneAt was failed, because path \\'' + path + '\\' is already exist.');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscene = scene.addChild(new Scene(name));\n\t\t\t\t\t\tsuccess = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (scene.contains(name)) {\n\t\t\t\t\t\tscene = scene.getChildByName(name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscene = scene.addChild(new Scene(name));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn success ? scene : null;\n\t\t}\n\n\t\tpublic getName():string {\n\t\t\treturn this.name;\n\t\t}\n\n\t\tpublic getRoot():Scene {\n\t\t\treturn this.root;\n\t\t}\n\n\t\tpublic getSceneByPath(path:string):Scene {\n\t\t\tconst names:string[] = this.getSceneNamesByPath(path);\n\t\t\tconst n:number = names.length;\n\t\t\tlet scene:Scene = this.root;\n\t\t\tfor (let i:number = 1; i < n; ++i) {\n\t\t\t\tscene = scene.getChildByName(names[i]);\n\t\t\t}\n\t\t\treturn scene;\n\t\t}\n\n\t\tpublic getSceneNamesByPath(path:string):string[] {\n\t\t\treturn path == '/' ? [''] : this.resolvePath(path).split('/');\n\t\t}\n\n\t\tpublic getSceneLevelByNames(names:string[]):number {\n\t\t\treturn names.length - 1;\n\t\t}\n\n\t\tpublic getScenePathByNames(names:string[]):string {\n\t\t\treturn names.length == 0 ? '/' : names.length == 1 ? ('/' + names[0]) : names.join('/');\n\t\t}\n\n\t\tprivate createWaypoints(departurePath:string, destinationPath:string):core.Waypoint[] {\n\t\t\tif (departurePath == destinationPath) {\n\t\t\t\tLogger.warn('[SceneManager] departure path and destination path is same, path = \\'' + departurePath + '\\'');\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tLogger.verbose('----- scene flow -----');\n\n\t\t\tconst waypoints:core.Waypoint[] = [\n\t\t\t\tnew core.Waypoint(departurePath, this.getSceneLevelByNames(this.getSceneNamesByPath(departurePath)))\n\t\t\t];\n\n\t\t\tconst departureNames:string[] = this.getSceneNamesByPath(departurePath);\n\t\t\tconst destinationNames:string[] = this.getSceneNamesByPath(destinationPath);\n\n\t\t\tLogger.verbose('    path');\n\t\t\tLogger.verbose('        current    : \\'' + departurePath + '\\'');\n\t\t\tLogger.verbose('        destination: \\'' + destinationPath + '\\'');\n\n\t\t\tLogger.verbose('    names');\n\t\t\tLogger.verbose('        current(' + departureNames.length + ')    : \\'' + departureNames + '\\'');\n\t\t\tLogger.verbose('        destination(' + destinationNames.length + '): \\'' + destinationNames + '\\'');\n\n\t\t\t// 折り返しを見つける\n\t\t\tlet turningLevel:number = 0;\n\t\t\tlet turningNames:string[] = [];\n\t\t\tlet turningPath:string;\n\t\t\tif (destinationPath == '/') {\n\t\t\t\tturningLevel = -1;\n\t\t\t\tturningNames = [];\n\t\t\t\tturningPath = '/';\n\t\t\t} else {\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (departureNames[turningLevel] == destinationNames[turningLevel]) {\n\t\t\t\t\t\tturningNames.push(departureNames[turningLevel]);\n\t\t\t\t\t\t++turningLevel;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t--turningLevel;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tturningPath = this.getScenePathByNames(turningNames);\n\t\t\t}\n\n\t\t\tLogger.verbose('    turning');\n\t\t\tLogger.verbose('        path     : ' + turningPath);\n\t\t\tLogger.verbose('        level    : ' + turningLevel);\n\t\t\tLogger.verbose('        names(' + turningNames.length + ') : \\'' + turningNames + '\\'');\n\n\t\t\t// 出発シーンから折り返しまで\n\t\t\t{\n\t\t\t\tconst names:string[] = departureNames.concat();\n\t\t\t\tlet prevPath:string = departurePath;\n\t\t\t\tfor (let i:number = departureNames.length - 1; i > turningLevel + 1; --i) {\n\t\t\t\t\tnames.pop();\n\t\t\t\t\tconst path:string = this.getScenePathByNames(names);\n\t\t\t\t\tif (path != prevPath) {\n\t\t\t\t\t\tconst level:number = this.getSceneLevelByNames(names);\n\t\t\t\t\t\twaypoints.push(new core.Waypoint(path, level));\n\t\t\t\t\t\tprevPath = path;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (turningPath == destinationPath && turningLevel > 0) {\n\t\t\t\t// 折り返しと到着シーンが同一\n\t\t\t\tconst from:core.Direction = turningLevel == waypoints[waypoints.length - 1].getLevel() ? core.Direction.Sibling : core.Direction.Ascend;\n\t\t\t\twaypoints.push(new core.Waypoint(turningPath, turningLevel));\n\t\t\t} else {\n\n\t\t\t\t// 折り返しから到達シーンまで\n\t\t\t\tconst names:string[] = turningNames.concat();\n\t\t\t\tconst prev:core.Waypoint = waypoints[waypoints.length - 1];\n\t\t\t\tlet prevPath:string = prev.getPath();\n\t\t\t\tlet prevLevel:number = prev.getLevel();\n\t\t\t\tfor (let i:number = turningLevel + 1; i < destinationNames.length; ++i) {\n\t\t\t\t\tconst name:string = destinationNames[i];\n\t\t\t\t\tnames.push(name);\n\t\t\t\t\tconst path:string = this.getScenePathByNames(names);\n\t\t\t\t\tif (path != prevPath) {\n\t\t\t\t\t\tconst level:number = this.getSceneLevelByNames(names);\n\t\t\t\t\t\twaypoints.push(new core.Waypoint(path, level));\n\t\t\t\t\t\tprevLevel = level;\n\t\t\t\t\t\tprevPath = path;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 進行方向\n\t\t\tthis.setDirection(waypoints);\n\n\t\t\tif (Logger.level <= LoggerLevel.Verbose) {\n\t\t\t\tthis.printWaypoint(waypoints);\n\t\t\t}\n\n\t\t\treturn waypoints;\n\t\t}\n\n\t\tprivate setDirection(waypoints:core.Waypoint[]):void {\n\t\t\tconst n:number = waypoints.length;\n\t\t\tlet prev:core.Waypoint = null;\n\t\t\tlet point:core.Waypoint;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tpoint = waypoints[i];\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tconst d:number = point.getLevel() - prev.getLevel();\n\t\t\t\t\tpoint._setFrom(d > 0 ? core.Direction.Descend : d < 0 ? core.Direction.Ascend : core.Direction.Sibling);\n\t\t\t\t\tprev._setTo(point.getFrom());\n\t\t\t\t}\n\t\t\t\tprev = point;\n\t\t\t}\n\t\t}\n\n\t\tprivate printWaypoint(waypoints:core.Waypoint[]):void {\n\t\t\tLogger.verbose('    waypoints');\n\t\t\tconst n:number = waypoints.length;\n\t\t\tfor (let i:number = 0; i < n; ++i) {\n\t\t\t\tLogger.verbose('        [' + i + '] ' + waypoints[i]);\n\t\t\t}\n\t\t\tLogger.verbose('');\n\t\t}\n\n\n\n\n\n\t\tprivate checkState():void {\n\t\t\ttrace('lastState : ' + scn.getSceneStateString(this.lastState));\n\n\t\t\t//trace(this.waypointIndex + ' / ' + this.waypoints.length);\n\n\t\t\tif (this.waypointIndex >= this.waypoints.length) {\n\t\t\t\tLogger.verbose('----- scene transfer complete -----');\n\t\t\t\tconst tmpTransferId:number = this.transferInfo.getTransferId();\n\t\t\t\tthis.waypointIndex = this.waypoints.length - 1;\n\t\t\t\tthis.dispatchEvent(new SceneManagerEvent(SceneManagerEvent.TRANSFER_COMPLETE, this));\n\t\t\t\tif (tmpTransferId == this.transferInfo.getTransferId()) {\n\t\t\t\t\tthis.lastState = SceneState.Idling;\n\t\t\t\t\tthis.transferInfo = null;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentScene) {\n\t\t\t\tconst currentWaypoint:core.Waypoint = this.waypoints[this.waypointIndex];\n\t\t\t\tthis.currentScene = this.getSceneByPath(currentWaypoint.getPath());\n\n\t\t\t\t// Departure scene\n\t\t\t\tif (this.waypoints.length > 1 && this.waypointIndex == 0) {\n\t\t\t\t\ttrace('Departure scene');\n\n\t\t\t\t\t// Leave\n\t\t\t\t\tif (this.lastState != SceneState.Leaving && this.currentScene.getLastState() == SceneState.Arriving) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Leave   : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LEAVE_COMPLETE, this.sceneLeaveCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._leave(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Unload\n\t\t\t\t\tif (this.lastState != SceneState.Unloading && (currentWaypoint.getTo() == core.Direction.Sibling || currentWaypoint.getTo() == core.Direction.Ascend)) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Unload  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._unload(this.transferInfo);\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Departure to child\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tthis.checkState();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Through scene\n\t\t\t\tif (this.waypointIndex > 0 && this.waypointIndex < this.waypoints.length - 1) {\n\t\t\t\t\ttrace('Through scene');\n\n\t\t\t\t\t// Load\n\t\t\t\t\tif (this.lastState != SceneState.Loading && (currentWaypoint.getFrom() == core.Direction.Sibling || currentWaypoint.getFrom() == core.Direction.Descend)) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ascend\n\t\t\t\t\tif (this.lastState != SceneState.Ascending && currentWaypoint.getFrom() == core.Direction.Ascend) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Ascend  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.ASCEND_COMPLETE, this.sceneAscendCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._ascend(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Unload\n\t\t\t\t\tif (this.lastState != SceneState.Unloading && (currentWaypoint.getTo() == core.Direction.Sibling || currentWaypoint.getTo() == core.Direction.Ascend)) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Unload  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._unload(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Descend\n\t\t\t\t\tif (this.lastState != SceneState.Descending && currentWaypoint.getTo() == core.Direction.Descend) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Descend : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.DESCEND_COMPLETE, this.sceneDescendCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._descend(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Destination scene\n\t\t\t\tif (this.waypointIndex == this.waypoints.length - 1) {\n\t\t\t\t\ttrace('Destination scene');\n\n\t\t\t\t\t// Load\n\t\t\t\t\tif (this.lastState != SceneState.Loading && (currentWaypoint.getFrom() == core.Direction.Sibling || currentWaypoint.getFrom() == core.Direction.Descend)) {\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Arrive\n\t\t\t\t\tif (this.lastState != SceneState.Arriving) {\n\t\t\t\t\t\t++this.waypointIndex;\n\t\t\t\t\t\tLogger.verbose(this.eventIndex + ' Arrive  : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\t\t\tthis.currentScene.addEventListener(SceneEvent.ARRIVE_COMPLETE, this.sceneArriveCompleteHandler);\n\t\t\t\t\t\tthis.currentScene._arrive(this.transferInfo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\ttrace('Init scene');\n\n\t\t\t\t// Init\n\t\t\t\tthis.lastState = SceneState.Idling;\n\t\t\t\tthis.currentScene = this.root;\n\t\t\t\tLogger.verbose(this.eventIndex + ' Load    : \\'' + this.currentScene.getPath() + '\\'');\n\t\t\t\tthis.currentScene.addEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\t\tthis.currentScene._load(this.transferInfo);\n\t\t\t}\n\t\t}\n\n\t\tprivate sceneLoadCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.LOAD_COMPLETE, this.sceneLoadCompleteHandler);\n\t\t\tthis.lastState = SceneState.Loading;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneUnloadCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.UNLOAD_COMPLETE, this.sceneUnloadCompleteHandler);\n\t\t\tthis.lastState = SceneState.Unloading;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneArriveCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.ARRIVE_COMPLETE, this.sceneArriveCompleteHandler);\n\t\t\tthis.lastState = SceneState.Arriving;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneLeaveCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.LEAVE_COMPLETE, this.sceneLeaveCompleteHandler);\n\t\t\tthis.lastState = SceneState.Leaving;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneAscendCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.ASCEND_COMPLETE, this.sceneAscendCompleteHandler);\n\t\t\tthis.lastState = SceneState.Ascending;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\t\tprivate sceneDescendCompleteHandler = (event:SceneEvent):void => {\n\t\t\tthis.currentScene.removeEventListener(SceneEvent.DESCEND_COMPLETE, this.sceneDescendCompleteHandler);\n\t\t\tthis.lastState = SceneState.Descending;\n\t\t\t++this.eventIndex;\n\t\t\tthis.checkState();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate name:string;\n\t\tprivate root:Scene;\n\t\tprivate currentScene:Scene;\n\n\t\tprivate waypoints:core.Waypoint[];\n\t\tprivate waypointIndex:number;\n\t\tprivate lastState:SceneState;\n\t\tprivate eventIndex:number;\n\t\tprivate transferInfo:SceneTransferInfo;\n\t\tprivate transferId:number;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\timport Event = alm.event.Event;\n\n\texport class SceneManagerEvent extends Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static TRANSFER_START:string = 'transferStart';\n\t\tpublic static TRANSFER_COMPLETE:string = 'transferComplete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, eventTarget:any = null) {\n\t\t\tsuper(eventType, eventTarget);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():SceneManagerEvent {\n\t\t\treturn new SceneManagerEvent(this.getType(), this.getTarget());\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[SceneManagerEvent] type = ' + this.getType();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\texport class SceneTransferInfo {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(transferId:number, departurePath:string, destinationPath:string) {\n\t\t\tthis.transferId = transferId;\n\t\t\tthis.departurePath = departurePath;\n\t\t\tthis.destinationPath = destinationPath;\n\t\t\tthis.relay = null;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getTransferId():number {\n\t\t\treturn this.transferId;\n\t\t}\n\n\t\tpublic getDeparturePath():string {\n\t\t\treturn this.departurePath;\n\t\t}\n\n\t\tpublic getDestinationPath():string {\n\t\t\treturn this.destinationPath;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic relay:any;\n\n\t\tprivate transferId:number;\n\t\tprivate departurePath:string;\n\t\tprivate destinationPath:string;\n\t}\n}","/// <reference path='../include.ts' />\n\nnamespace scn {\n\n\texport enum SceneState {\n\t\tIdling,\n\t\tLoading,\n\t\tUnloading,\n\t\tArriving,\n\t\tLeaving,\n\t\tAscending,\n\t\tDescending,\n\t}\n\n\texport function getSceneStateString(state:SceneState):string {\n\t\tswitch (state) {\n\t\t\tcase SceneState.Idling:\n\t\t\t\treturn 'idling';\n\t\t\tcase SceneState.Loading:\n\t\t\t\treturn 'loading';\n\t\t\tcase SceneState.Unloading:\n\t\t\t\treturn 'unloading';\n\t\t\tcase SceneState.Arriving:\n\t\t\t\treturn 'arriving';\n\t\t\tcase SceneState.Leaving:\n\t\t\t\treturn 'leaving';\n\t\t\tcase SceneState.Ascending:\n\t\t\t\treturn 'ascending';\n\t\t\tcase SceneState.Descending:\n\t\t\t\treturn 'descending';\n\t\t}\n\t\treturn '';\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport enum Direction {\n\t\tStatic,\n\t\tSibling,\n\t\tAscend,\n\t\tDescend,\n\t}\n\n\texport function getDirectionString(direction:Direction):string {\n\t\tswitch (direction) {\n\t\t\tcase Direction.Static:\n\t\t\t\treturn 'static';\n\t\t\tcase Direction.Sibling:\n\t\t\t\treturn 'sibling';\n\t\t\tcase Direction.Ascend:\n\t\t\t\treturn 'ascend';\n\t\t\tcase Direction.Descend:\n\t\t\t\treturn 'descend';\n\t\t}\n\t\treturn '';\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport class RootScene extends Scene {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(manager:SceneManager) {\n\t\t\tsuper('');\n\t\t\tthis.manager = manager;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getManager():SceneManager {\n\t\t\treturn this.manager;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate manager:SceneManager;\n\t}\n}","/// <reference path='../../include.ts' />\n\nnamespace scn.core {\n\n\texport class Waypoint {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(path:string, level:number) {\n\t\t\tthis.path = path;\n\t\t\tthis.level = level;\n\t\t\tthis.from = Direction.Static;\n\t\t\tthis.to = Direction.Static;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getPath():string {\n\t\t\treturn this.path;\n\t\t}\n\n\t\tpublic getLevel():number {\n\t\t\treturn this.level;\n\t\t}\n\n\t\tpublic getFrom():Direction {\n\t\t\treturn this.from;\n\t\t}\n\n\t\tpublic getTo():Direction {\n\t\t\treturn this.to;\n\t\t}\n\n\t\tpublic _setFrom(from:Direction):void {\n\t\t\tthis.from = from;\n\t\t}\n\n\t\tpublic _setTo(to:Direction):void {\n\t\t\tthis.to = to;\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn '[Waypoint] path = \\'' + this.path + '\\', level = ' + this.level + ', from = ' + getDirectionString(this.from) + ', to = ' + getDirectionString(this.to);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate path:string;\n\t\tprivate level:number;\n\t\tprivate from:Direction;\n\t\tprivate to:Direction;\n\t}\n}","/* ---------- dependency ---------- */\n\n/* ---------- project ---------- */\n/// <reference path='alm/util/Easing.ts' />\n/// <reference path='alm/event/Event.ts' />\n/// <reference path='alm/event/EventDispatcher.ts' />\n\n/// <reference path='cmd/CommandState.ts' />\n/// <reference path='cmd/CommandEvent.ts' />\n/// <reference path='cmd/Command.ts' />\n/// <reference path='cmd/CommandList.ts' />\n/// <reference path='cmd/Break.ts' />\n/// <reference path='cmd/Return.ts' />\n/// <reference path='cmd/Log.ts' />\n/// <reference path='cmd/Wait.ts' />\n/// <reference path='cmd/Func.ts' />\n/// <reference path='cmd/Listen.ts' />\n/// <reference path='cmd/Tween.ts' />\n/// <reference path='cmd/Serial.ts' />\n/// <reference path='cmd/Parallel.ts' />\n\n/// <reference path='alm/geom/Vector2.ts' />\n/// <reference path='alm/geom/Vector3.ts' />\n/// <reference path='alm/geom/Rectangle.ts' />\n/// <reference path='alm/util/Hash.ts' />\n/// <reference path='alm/util/Obj.ts' />\n/// <reference path='alm/util/Arr.ts' />\n/// <reference path='alm/util/Num.ts' />\n/// <reference path='alm/util/Str.ts' />\n/// <reference path='alm/util/Loc.ts' />\n/// <reference path='alm/util/Boxer.ts' />\n/// <reference path='alm/util/Raffle.ts' />\n/// <reference path='alm/util/Rotator.ts' />\n/// <reference path='alm/util/Logger.ts' />\n/// <reference path='alm/util/Pager.ts' />\n/// <reference path='alm/util/PagerEvent.ts' />\n/// <reference path='alm/util/Timer.ts' />\n/// <reference path='alm/util/TimerEvent.ts' />\n/// <reference path='alm/util/ObjectPool.ts' />\n/// <reference path='alm/util/CommandUtil.ts' />\n/// <reference path='alm/loader/AssetLoader.ts' />\n/// <reference path='alm/loader/AssetLoaderEvent.ts' />\n/// <reference path='alm/loader/FileQuery.ts' />\n/// <reference path='alm/loader/IFileHandler.ts' />\n/// <reference path='alm/view/View.ts' />\n/// <reference path='alm/view/ButtonBehavior.ts' />\n/// <reference path='alm/view/IButton.ts' />\n/// <reference path='alm/view/SelectionBehavior.ts' />\n/// <reference path='alm/view/ISelection.ts' />\n/// <reference path='alm/browser/DeviceInfo.ts' />\n/// <reference path='alm/browser/LocalStorage.ts' />\n/// <reference path='alm/browser/KeyWatcher.ts' />\n/// <reference path='alm/browser/KeyWatcherEvent.ts' />\n/// <reference path='alm/browser/WindowWatcher.ts' />\n/// <reference path='alm/browser/WindowWatcherEvent.ts' />\n\n/// <reference path='scn/Scene.ts' />\n/// <reference path='scn/SceneEvent.ts' />\n/// <reference path='scn/SceneManager.ts' />\n/// <reference path='scn/SceneManagerEvent.ts' />\n/// <reference path='scn/SceneTransferInfo.ts' />\n/// <reference path='scn/SceneState.ts' />\n/// <reference path='scn/core/Direction.ts' />\n/// <reference path='scn/core/RootScene.ts' />\n/// <reference path='scn/core/Waypoint.ts' />\n\nnamespace alm {\n\n\t// Library version info\n\texport function getVersion():string {\n\t\treturn '0.0.1';\n\t}\n\n\t// Credit info\n\tconst style:string = 'color:#999;';\n\tconst print:Function = console.debug;\n\tprint('%c+ + + + + + + + + + + + + + + + + + + + + + + + + +', style);\n\tprint('%c+ alumican.js', style);\n\tprint('%c+ version ' + getVersion(), style);\n\tprint('%c+ http://alumican.net', style);\n\tprint('%c+ https://github.com/alumican/alumican.js', style);\n\tprint('%c+ + + + + + + + + + + + + + + + + + + + + + + + + +', style);\n\tprint('');\n}"]}
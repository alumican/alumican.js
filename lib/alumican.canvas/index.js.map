{"version":3,"sources":["../src/alumican.canvas/alm/canvas/BaseApp.ts","../src/alumican.canvas/alm/canvas/Pointer.ts","../src/alumican.canvas/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/// <reference path=\"../../index.ts\" />\n\nnamespace alm.canvas {\n\n\timport EventDispatcher = alm.event.EventDispatcher;\n\timport DeviceInfo = alm.browser.DeviceInfo;\n\timport AnimationFrameTicker = alm.time.AnimationFrameTicker;\n\timport Time = alm.util.Time;\n\n\texport abstract class BaseApp extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(canvas:HTMLElement, isAutoResizeEnabled:boolean = true, isAutoUpdateEnabled:boolean = true, platformSetupOptions:any[] = null) {\n\t\t\tsuper();\n\n\t\t\tthis.window = jQuery(window);\n\n\t\t\tthis.canvas = <JQuery<HTMLCanvasElement>>jQuery(canvas);\n\t\t\tthis.isAutoResizeEnabled = isAutoResizeEnabled;\n\t\t\tthis.isAutoUpdateEnabled = isAutoUpdateEnabled;\n\t\t\tthis.isDefaultTouchEventEnabled = false;\n\n\t\t\tthis.pointerIds = [];\n\t\t\tthis.pointersById = {};\n\t\t\tthis.pointingCount = 0;\n\n\t\t\tthis.elapsedFrameCount = 0;\n\t\t\tthis.startTime = Time.now();\n\t\t\tthis.mousePointerId = 'mouse';\n\t\t\tthis.isTouchEnabled = DeviceInfo.getIsTouchEnabled();\n\t\t\tthis.isForceTouchEnabled = typeof canvas['ontouchforcechange'] !== 'undefined';\n\t\t\tthis.visibilityState = document.visibilityState;\n\n\t\t\ttrace(\"[BaseApp] canvas : \", canvas);\n\t\t\ttrace(\"[BaseApp] platformSetupOptions : \", platformSetupOptions);\n\t\t\ttrace(\"[BaseApp] isAutoResizeEnabled : \" + this.isAutoResizeEnabled);\n\t\t\ttrace(\"[BaseApp] isAutoUpdateEnabled : \" + this.isAutoUpdateEnabled);\n\t\t\ttrace(\"[BaseApp] isTouchEnabled : \" + this.isTouchEnabled);\n\t\t\ttrace(\"[BaseApp] isForceTouchEnabled : \" + this.isForceTouchEnabled);\n\n\t\t\tif (this.isTouchEnabled) {\n\t\t\t\tthis.canvas.on('touchstart', this.touchStartHandler);\n\t\t\t\tthis.canvas.on('touchend', this.touchEndHandler);\n\t\t\t\tthis.canvas.on('touchcancel', this.touchCancelHandler);\n\t\t\t\tthis.canvas.on('touchmove', this.touchMoveHandler);\n\t\t\t\tif (this.isForceTouchEnabled) {\n\t\t\t\t\tthis.canvas.on('touchforcechange', this.touchForceChangeHandler);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.canvas.on('mouseover', this.mouseOverHandler);\n\t\t\t\tthis.canvas.on('mouseout', this.mouseOutHandler);\n\t\t\t\tthis.canvas.on('mousedown', this.mouseDownHandler);\n\t\t\t\tthis.canvas.on('mouseup', this.mouseUpHandler);\n\t\t\t\tthis.canvas.on('mousemove', this.mouseMoveHandler);\n\t\t\t}\n\n\t\t\tthis.window.on('keydown', this.keyDownHandler);\n\t\t\tthis.window.on('keyup', this.keyUpHandler);\n\t\t\t//this.canvas.attr('tabindex', 1);\n\n\t\t\tjQuery(document).on('visibilitychange', this.visibilityStateChangeHandler);\n\n\t\t\tif (this.isAutoUpdateEnabled) {\n\t\t\t\t//this.animationFrameTicker = new AnimationFrameTicker();\n\t\t\t\t//this.animationFrameTicker.addEventListener(AnimationFrameTickerEvent.TICK, this.animationFrameTickerTickHandler);\n\t\t\t\t//this.animationFrameTicker.start();\n\t\t\t\twindow.requestAnimationFrame(this.requestAnimationFrameHandler);\n\t\t\t}\n\n\t\t\tthis.onPlatformSetup(platformSetupOptions || []);\n\t\t\tthis.onSetup();\n\n\t\t\tif (this.isAutoResizeEnabled) {\n\t\t\t\tthis.window.on('resize', this.resizeHandler);\n\t\t\t\tthis.resizeHandler(null);\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic onSetup():void {\n\t\t}\n\n\t\tpublic onUpdate():void {\n\t\t}\n\n\t\tpublic onPointerEnter(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onPointerLeave(pointer:Pointer,):void {\n\t\t}\n\n\t\tpublic onPointerTouch(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onPointerRelease(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onPointerMove(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onPointerDrag(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onPointerTouchForceChange(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onKeyDown(key:string):void {\n\t\t}\n\n\t\tpublic onKeyUp(key:string):void {\n\t\t}\n\n\t\tpublic onResize(stageWidth:number, stageHeight:number):void {\n\t\t}\n\n\t\tpublic onVisibilityStateChange(visibilityState:VisibilityState):void {\n\t\t}\n\n\t\tprotected onPlatformSetup(platformSetupOptions:any[]):void {\n\t\t}\n\n\t\tprotected onPlatformRender():void {\n\t\t}\n\n\t\tprotected onPlatformResize(stageWidth:number, stageHeight:number):void {\n\t\t}\n\n\t\tpublic update():void {\n\t\t\t++this.elapsedFrameCount;\n\t\t\tthis.elapsedTime = (Time.now() - this.startTime) / 1000;\n\t\t\tthis.onUpdate();\n\t\t\tthis.onPlatformRender();\n\t\t}\n\n\t\tpublic resize(width:number, height:number):void {\n\t\t\tthis.stageWidth = width;\n\t\t\tthis.stageHeight = height;\n\t\t\ttrace('[BaseApp] resize : width = ' + this.stageWidth + ', height = ' + this.stageHeight);\n\t\t\tthis.onPlatformResize(this.stageWidth, this.stageHeight);\n\t\t\tthis.onResize(this.stageWidth, this.stageHeight);\n\t\t}\n\n\t\t// --------------------------------------------------\n\t\t// Mouse Event\n\n\t\tprivate mouseOverHandler = (event:JQuery.MouseOverEvent):void => {\n\t\t\tconst pointer:Pointer = this.getMousePointer(event);\n\t\t};\n\n\t\tprivate mouseOutHandler = (event:JQuery.MouseOutEvent):void => {\n\t\t\tconst pointer:Pointer = this.getMousePointer(event);\n\t\t\tdelete this.pointersById[this.mousePointerId];\n\t\t\tconst pointerIndex = this.pointerIds.indexOf(this.mousePointerId);\n\t\t\tif (pointerIndex != -1) {\n\t\t\t\tthis.pointerIds.splice(pointerIndex, 1);\n\t\t\t}\n\t\t\t--this.pointingCount;\n\t\t\tpointer.notifyLeave();\n\t\t\tthis.onPointerLeave(pointer);\n\t\t};\n\n\t\tprivate mouseDownHandler = (event:JQuery.MouseDownEvent):void => {\n\t\t\tconst pointer:Pointer = this.getMousePointer(event);\n\t\t\tpointer.notifyTouch();\n\t\t\tthis.onPointerTouch(pointer);\n\t\t};\n\n\t\tprivate mouseUpHandler = (event:JQuery.MouseUpEvent):void => {\n\t\t\tconst pointer:Pointer = this.getMousePointer(event);\n\t\t\tpointer.notifyRelease();\n\t\t\tthis.onPointerRelease(pointer);\n\t\t};\n\n\t\tprivate mouseMoveHandler = (event:JQuery.MouseMoveEvent):void => {\n\t\t\tconst pointer:Pointer = this.getMousePointer(event);\n\t\t\tconst position:number[] = this.getMousePointerPosition(event);\n\t\t\tpointer.notifyMove(position[0], position[1]);\n\t\t\tthis.onPointerMove(pointer);\n\t\t\tif (pointer.isDragging) {\n\t\t\t\tthis.onPointerDrag(pointer);\n\t\t\t}\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Touch Event\n\n\t\tprivate touchStartHandler = (event:JQuery.TouchEventBase):void => {\n\t\t\tconst originalEvent:TouchEvent = event.originalEvent;\n\t\t\tconst touches:TouchList = originalEvent.changedTouches;\n\t\t\tconst touchCount:number = originalEvent.changedTouches.length;\n\t\t\tlet touch:Touch;\n\t\t\tlet id:string;\n\t\t\tlet pointer:Pointer;\n\t\t\tfor (let i:number = 0; i < touchCount; ++i) {\n\t\t\t\ttouch = touches.item(i);\n\t\t\t\tid = BaseApp.getPointerId(touch.identifier);\n\t\t\t\tpointer = new Pointer(id);\n\t\t\t\tthis.pointersById[id] = pointer;\n\t\t\t\tthis.pointerIds.push(id);\n\t\t\t\t++this.pointingCount;\n\t\t\t\tconst position:number[] = this.getTouchPointerPosition(touch);\n\t\t\t\tpointer.notifyEnter(position[0], position[1]);\n\t\t\t\tpointer.notifyTouch();\n\t\t\t\tthis.onPointerEnter(pointer);\n\t\t\t\tthis.onPointerTouch(pointer);\n\t\t\t}\n\t\t};\n\n\t\tprivate touchEndHandler = (event:JQuery.TouchEventBase):void => {\n\t\t\tconst originalEvent:TouchEvent = event.originalEvent;\n\t\t\tconst touches:TouchList = originalEvent.changedTouches;\n\t\t\tconst touchCount:number = originalEvent.changedTouches.length;\n\t\t\tlet touch:Touch;\n\t\t\tlet id:string;\n\t\t\tlet pointer:Pointer;\n\t\t\tfor (let i:number = 0; i < touchCount; ++i) {\n\t\t\t\ttouch = touches.item(i);\n\t\t\t\tid = BaseApp.getPointerId(touch.identifier);\n\t\t\t\tpointer = this.pointersById[id];\n\t\t\t\tdelete this.pointersById[id];\n\t\t\t\tconst pointerIndex = this.pointerIds.indexOf(id);\n\t\t\t\tif (pointerIndex != -1) {\n\t\t\t\t\tthis.pointerIds.splice(pointerIndex, 1);\n\t\t\t\t}\n\t\t\t\t--this.pointingCount;\n\t\t\t\tpointer.notifyRelease();\n\t\t\t\tpointer.notifyLeave();\n\t\t\t\tthis.onPointerRelease(pointer);\n\t\t\t\tthis.onPointerLeave(pointer);\n\t\t\t}\n\t\t};\n\n\t\tprivate touchCancelHandler = (event:JQuery.TouchEventBase):void => {\n\t\t\tthis.touchEndHandler(event);\n\t\t};\n\n\t\tprivate touchMoveHandler = (event:JQuery.TouchEventBase):void => {\n\t\t\tif (!this.isDefaultTouchEventEnabled) {\n\t\t\t\tevent.originalEvent.preventDefault();\n\t\t\t}\n\n\t\t\tconst originalEvent:TouchEvent = event.originalEvent;\n\t\t\tconst touches:TouchList = originalEvent.changedTouches;\n\t\t\tconst touchCount:number = originalEvent.changedTouches.length;\n\t\t\tlet touch:Touch;\n\t\t\tlet id:string;\n\t\t\tlet pointer:Pointer;\n\t\t\tfor (let i:number = 0; i < touchCount; ++i) {\n\t\t\t\ttouch = touches.item(i);\n\t\t\t\tid = BaseApp.getPointerId(touch.identifier);\n\t\t\t\tpointer = this.pointersById[id];\n\t\t\t\tconst position:number[] = this.getTouchPointerPosition(touch);\n\t\t\t\tpointer.notifyMove(position[0], position[1]);\n\t\t\t\tif (pointer.isDragging) {\n\t\t\t\t\tthis.onPointerDrag(pointer);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tprivate touchForceChangeHandler = (event:JQuery.TouchEventBase):void => {\n\t\t\tconst originalEvent:TouchEvent = event.originalEvent;\n\t\t\tconst touches:TouchList = originalEvent.changedTouches;\n\t\t\tconst touchCount:number = originalEvent.changedTouches.length;\n\t\t\tlet touch:Touch;\n\t\t\tlet id:string;\n\t\t\tlet pointer:Pointer;\n\t\t\tfor (let i:number = 0; i < touchCount; ++i) {\n\t\t\t\ttouch = touches.item(i);\n\t\t\t\tid = BaseApp.getPointerId(touch.identifier);\n\t\t\t\tpointer = this.pointersById[id];\n\t\t\t\tif (pointer) {\n\t\t\t\t\tpointer.notifyTouchForce(touch.force);\n\t\t\t\t\tthis.onPointerTouchForceChange(pointer);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Key Event\n\n\t\tprivate keyDownHandler = (event:JQuery.KeyDownEvent):void => {\n\t\t\tthis.onKeyDown(event.key);\n\t\t};\n\n\t\tprivate keyUpHandler = (event:JQuery.KeyUpEvent):void => {\n\t\t\tthis.onKeyUp(event.key);\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Other Event\n\n\t\t//private animationFrameTickerTickHandler = (event:AnimationFrameTickerEvent):void => {\n\t\t//\tthis.update();\n\t\t//};\n\n\t\tprivate requestAnimationFrameHandler = ():void => {\n\t\t\tthis.update();\n\t\t\twindow.requestAnimationFrame(this.requestAnimationFrameHandler);\n\t\t};\n\n\t\tprivate resizeHandler = (event:JQuery.ResizeEvent):void => {\n\t\t\tconst newStageWidth:number = this.canvas.width();\n\t\t\tconst newStageHeight:number = this.canvas.height();\n\t\t\tif (this.stageWidth != newStageWidth || this.stageHeight != newStageHeight) {\n\t\t\t\tthis.resize(newStageWidth, newStageHeight);\n\t\t\t}\n\t\t};\n\n\t\tprivate visibilityStateChangeHandler = (event:JQuery.Event):void => {\n\t\t\tthis.visibilityState = document.visibilityState;\n\t\t\tthis.onVisibilityStateChange(this.visibilityState);\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Util\n\n\t\tprivate getMousePointer(event:JQuery.Event):Pointer {\n\t\t\tlet pointer:Pointer = this.pointersById[this.mousePointerId];\n\t\t\tif (pointer == null) {\n\t\t\t\tpointer = new Pointer(this.mousePointerId);\n\t\t\t\tthis.pointersById[this.mousePointerId] = pointer;\n\t\t\t\tthis.pointerIds.push(this.mousePointerId);\n\t\t\t\t++this.pointingCount;\n\t\t\t\tconst position:number[] = this.getMousePointerPosition(event);\n\t\t\t\tpointer.notifyEnter(position[0], position[1]);\n\t\t\t\tthis.onPointerEnter(pointer);\n\t\t\t}\n\t\t\treturn pointer;\n\t\t}\n\n\t\tprivate getTouchPointerPosition(touch:Touch):number[] {\n\t\t\tconst offset:JQuery.Coordinates = this.getCanvas().offset();\n\t\t\t//trace(touch, touch.clientX, touch.clientY, touch.pageX, touch.pageY, offset.left, offset.top);\n\t\t\treturn [touch.pageX - offset.left, touch.pageY - offset.top];\n\t\t}\n\n\t\tprivate getMousePointerPosition(event:JQuery.Event):number[] {\n\t\t\tconst offset:JQuery.Coordinates = this.getCanvas().offset();\n\t\t\treturn [event.pageX - offset.left, event.pageY - offset.top];\n\t\t}\n\n\t\tpublic static getPointerId(touchId:number):string {\n\t\t\treturn 'touch_' + touchId;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// VARIABLE\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getPointerIds():string[] { return this.pointerIds; }\n\t\tprivate pointerIds:string[];\n\n\t\tpublic getFirstPointer():Pointer { return this.pointingCount > 0 ? this.getPointerById(this.pointerIds[0]) : null; }\n\t\tpublic getLastPointer():Pointer { return this.pointingCount > 0 ? this.getPointerById(this.pointerIds[this.pointingCount - 1]) : null; }\n\n\t\tpublic getPointerById(id:string):Pointer { return this.pointersById[id]; }\n\t\tprivate pointersById:alm.util.Hash<Pointer>;\n\n\t\tpublic getPointingCount():number { return this.pointingCount; }\n\t\tprivate pointingCount:number;\n\n\t\tpublic getStageWidth():number { return this.stageWidth; }\n\t\tprivate stageWidth:number;\n\n\t\tpublic getStageHeight():number { return this.stageHeight; }\n\t\tprivate stageHeight:number;\n\n\t\tpublic getElapsedFrameCount():number { return this.elapsedFrameCount; }\n\t\tprivate elapsedFrameCount:number;\n\n\t\tpublic getElapsedTime():number { return this.elapsedTime; }\n\t\tprivate elapsedTime:number;\n\n\t\tpublic getCanvas():JQuery<HTMLCanvasElement> { return this.canvas; }\n\t\tprivate canvas:JQuery<HTMLCanvasElement>;\n\n\t\tpublic getVisibilityState():VisibilityState { return this.visibilityState; }\n\t\tprivate visibilityState:VisibilityState;\n\n\t\tpublic getIsAutoResizeEnabled():boolean { return this.isAutoResizeEnabled; }\n\t\tprivate isAutoResizeEnabled:boolean;\n\n\t\tpublic getIsAutoUpdateEnabled():boolean { return this.isAutoUpdateEnabled; }\n\t\tprivate isAutoUpdateEnabled:boolean;\n\n\t\tpublic getIsForceTouchEnabled():boolean { return this.isForceTouchEnabled; }\n\t\tprivate isForceTouchEnabled:boolean;\n\n\t\tpublic getIsTouchEnabled():boolean { return this.isTouchEnabled; }\n\t\tprivate isTouchEnabled:boolean;\n\n\t\tpublic getIsDefaultTouchEventEnabled():boolean { return this.isDefaultTouchEventEnabled; }\n\t\tpublic setIsDefaultTouchEventEnabled(value:boolean):void { this.isDefaultTouchEventEnabled = value; }\n\t\tprivate isDefaultTouchEventEnabled:boolean;\n\n\t\tprivate startTime:number;\n\t\tprivate mousePointerId:string;\n\t\tprivate window:JQuery<Window>;\n\t\tprivate animationFrameTicker:AnimationFrameTicker;\n\t}\n}\n","/// <reference path=\"../../index.ts\" />\n\nnamespace alm.canvas {\n\n\texport class Pointer {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(id:string) {\n\t\t\tthis.id = id;\n\n\t\t\tthis.isHovering = false;\n\t\t\tthis.isTouching = false;\n\t\t\tthis.isDragging = false;\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\n\t\t\tthis.prevX = 0;\n\t\t\tthis.prevY = 0;\n\n\t\t\tthis.dragX = 0;\n\t\t\tthis.dragY = 0;\n\n\t\t\tthis.velocityX = 0;\n\t\t\tthis.velocityY = 0;\n\n\t\t\tthis.touchBeginX = 0;\n\t\t\tthis.touchBeginY = 0;\n\n\t\t\tthis.touchForce = 0;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic notifyEnter(x:number, y:number):void {\n\t\t\tthis.prevX = this.x = x;\n\t\t\tthis.prevY = this.y = y;\n\t\t\tthis.isHovering = true;\n\t\t}\n\n\t\tpublic notifyLeave():void {\n\t\t\tthis.isHovering = false;\n\t\t}\n\n\t\tpublic notifyTouch():void {\n\t\t\tthis.isTouching = true;\n\t\t\tthis.touchBeginX = this.x;\n\t\t\tthis.touchBeginY = this.y;\n\t\t}\n\n\t\tpublic notifyRelease():void {\n\t\t\tthis.isTouching = false;\n\t\t\tthis.isDragging = false;\n\t\t\tthis.dragX = 0;\n\t\t\tthis.dragY = 0;\n\t\t}\n\n\t\tpublic notifyMove(x:number, y:number):void {\n\t\t\tthis.prevX = this.x;\n\t\t\tthis.prevY = this.y;\n\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\n\t\t\tthis.velocityX = this.x - this.prevX;\n\t\t\tthis.velocityY = this.y - this.prevY;\n\n\t\t\tif (this.isTouching) {\n\t\t\t\tthis.isDragging = true;\n\t\t\t}\n\n\t\t\tif (this.isDragging) {\n\t\t\t\tthis.dragX = this.x - this.touchBeginX;\n\t\t\t\tthis.dragY = this.y - this.touchBeginY;\n\t\t\t}\n\t\t}\n\n\t\tpublic notifyTouchForce(force:number):void {\n\t\t\tthis.touchForce = force;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// VARIABLE\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic id:string;\n\t\tpublic isHovering:boolean;\n\t\tpublic isTouching:boolean;\n\t\tpublic isDragging:boolean;\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\n\t\tpublic prevX:number;\n\t\tpublic prevY:number;\n\n\t\tpublic dragX:number;\n\t\tpublic dragY:number;\n\n\t\tpublic velocityX:number;\n\t\tpublic velocityY:number;\n\n\t\tpublic touchBeginX:number;\n\t\tpublic touchBeginY:number;\n\n\t\tpublic touchForce:number;\n\t}\n}\n","/* ---------- project dependencies ---------- */\n\n/// <reference types='jquery' />\n/// <reference types='alumican' />\n\n\n/* ---------- project scripts ---------- */\n\n/// <reference path='alm/canvas/BaseApp.ts' />\n/// <reference path='alm/canvas/Pointer.ts' />\n"]}
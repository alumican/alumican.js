{"version":3,"sources":["../src/alumican.canvas/alm/canvas/BaseApp.ts","../src/alumican.canvas/alm/canvas/Pointer.ts","../src/alumican.canvas/include.ts"],"names":[],"mappings":"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","file":"alumican.canvas.js","sourcesContent":["/// <reference path=\"../../include.ts\" />\n\nnamespace alm.canvas {\n\n\texport abstract class BaseApp {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(canvasId:string, isAutoResizeEnabled:boolean = true, ...platformSetupOptions:any[]) {\n\t\t\tthis.canvas = <JQuery<HTMLCanvasElement>>jQuery(canvasId);\n\t\t\tthis.isAutoResizeEnabled = isAutoResizeEnabled;\n\n\t\t\ttrace(\"[BaseApp] canvasId : \" + canvasId);\n\t\t\ttrace(\"[BaseApp] isAutoResizeEnabled : \" + this.isAutoResizeEnabled);\n\n\t\t\tthis.pointerIds = [];\n\t\t\tthis.pointersById = {};\n\t\t\tthis.pointingCount = 0;\n\n\t\t\tthis.elapsedFrameCount = 0;\n\t\t\tthis.startTime = new Date().getTime();\n\t\t\tthis.mousePointerId = 'mouse';\n\n\t\t\tjQuery(window).on('mouseover', this.mouseOverHandler);\n\t\t\tjQuery(window).on('mouseout', this.mouseOutHandler);\n\t\t\tjQuery(window).on('mousedown', this.mouseDownHandler);\n\t\t\tjQuery(window).on('mouseup', this.mouseUpHandler);\n\t\t\tjQuery(window).on('mousemove', this.mouseMoveHandler);\n\t\t\tjQuery(window).on('touchstart', this.touchStartHandler);\n\t\t\tjQuery(window).on('touchend', this.touchEndHandler);\n\t\t\tjQuery(window).on('touchcancel', this.touchCancelHandler);\n\t\t\tjQuery(window).on('touchmove', this.touchMoveHandler);\n\t\t\tjQuery(window).on('keydown', this.keyDownHandler);\n\t\t\tjQuery(window).on('keyup', this.keyUpHandler);\n\t\t\tthis.canvas.on('touchmove', this.canvasTouchMoveHandler);\n\t\t\trequestAnimationFrame(this.requestAnimationFrame);\n\n\t\t\tthis.onPlatformSetup.apply(this, platformSetupOptions);\n\t\t\tthis.onSetup();\n\n\t\t\tif (this.isAutoResizeEnabled) {\n\t\t\t\tjQuery(window).on('resize', this.resizeHandler);\n\t\t\t\tthis.resizeHandler(null);\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic onSetup():void {\n\t\t}\n\n\t\tpublic onUpdate():void {\n\t\t}\n\n\t\tpublic onPointerEnter(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onPointerLeave(pointer:Pointer,):void {\n\t\t}\n\n\t\tpublic onPointerTouch(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onPointerRelease(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onPointerMove(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onPointerDrag(pointer:Pointer):void {\n\t\t}\n\n\t\tpublic onKeyDown(key:string):void {\n\t\t}\n\n\t\tpublic onKeyUp(key:string):void {\n\t\t}\n\n\t\tpublic onResize(stageWidth:number, stageHeight:number):void {\n\t\t}\n\n\t\tprotected onPlatformSetup(...platformSetupOptions:any[]):void {\n\t\t}\n\n\t\tprotected onPlatformRender():void {\n\t\t}\n\n\t\tprotected onPlatformResize(stageWidth:number, stageHeight:number):void {\n\t\t}\n\n\t\tpublic resize(width:number, height:number):void {\n\t\t\tthis.stageWidth = width;\n\t\t\tthis.stageHeight = height;\n\t\t\ttrace('[BaseApp] resize : width = ' + this.stageWidth + ', height = ' + this.stageHeight);\n\t\t\tthis.onPlatformResize(this.stageWidth, this.stageHeight);\n\t\t\tthis.onResize(this.stageWidth, this.stageHeight);\n\t\t}\n\n\t\t// --------------------------------------------------\n\t\t// Mouse Event\n\n\t\tprivate mouseOverHandler = (event:JQuery.Event):void => {\n\t\t\tconst pointer:Pointer = this.getMousePointer(event);\n\t\t};\n\n\t\tprivate mouseOutHandler = (event:JQuery.Event):void => {\n\t\t\tconst pointer:Pointer = this.getMousePointer(event);\n\t\t\tdelete this.pointersById[this.mousePointerId];\n\t\t\tconst pointerIndex = this.pointerIds.indexOf(this.mousePointerId);\n\t\t\tif (pointerIndex != -1) {\n\t\t\t\tthis.pointerIds.splice(pointerIndex, 1);\n\t\t\t}\n\t\t\t--this.pointingCount;\n\t\t\tpointer.notifyLeave();\n\t\t\tthis.onPointerLeave(pointer);\n\t\t};\n\n\t\tprivate mouseDownHandler = (event:JQuery.Event):void => {\n\t\t\tconst pointer:Pointer = this.getMousePointer(event);\n\t\t\tpointer.notifyTouch();\n\t\t\tthis.onPointerTouch(pointer);\n\t\t};\n\n\t\tprivate mouseUpHandler = (event:JQuery.Event):void => {\n\t\t\tconst pointer:Pointer = this.getMousePointer(event);\n\t\t\tpointer.notifyRelease();\n\t\t\tthis.onPointerRelease(pointer);\n\t\t};\n\n\t\tprivate mouseMoveHandler = (event:JQuery.Event):void => {\n\t\t\tconst pointer:Pointer = this.getMousePointer(event);\n\t\t\tpointer.notifyMove(event.clientX, event.clientY);\n\t\t\tthis.onPointerMove(pointer);\n\t\t\tif (pointer.isDragging) {\n\t\t\t\tthis.onPointerDrag(pointer);\n\t\t\t}\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Touch Event\n\n\t\tprivate touchStartHandler = (event:JQuery.Event):void => {\n\t\t\tconst touches:TouchList = event.changedTouches;\n\t\t\tconst touchCount:number = event.changedTouches.length;\n\t\t\tlet touch:Touch;\n\t\t\tlet id:string;\n\t\t\tlet pointer:Pointer;\n\t\t\tfor (let i:number = 0; i < touchCount; ++i) {\n\t\t\t\ttouch = touches.item(i);\n\t\t\t\tid = BaseApp.getPointerId(touch.identifier);\n\t\t\t\tpointer = new Pointer(id);\n\t\t\t\tthis.pointersById[id] = pointer;\n\t\t\t\tthis.pointerIds.push(id);\n\t\t\t\t++this.pointingCount;\n\t\t\t\tpointer.notifyEnter(touch.clientX, touch.clientY);\n\t\t\t\tpointer.notifyTouch();\n\t\t\t\tthis.onPointerEnter(pointer);\n\t\t\t\tthis.onPointerTouch(pointer);\n\t\t\t}\n\t\t};\n\n\t\tprivate touchEndHandler = (event:JQuery.Event):void => {\n\t\t\tconst touches:TouchList = event.changedTouches;\n\t\t\tconst touchCount:number = event.changedTouches.length;\n\t\t\tlet touch:Touch;\n\t\t\tlet id:string;\n\t\t\tlet pointer:Pointer;\n\t\t\tfor (let i:number = 0; i < touchCount; ++i) {\n\t\t\t\ttouch = touches.item(i);\n\t\t\t\tid = BaseApp.getPointerId(touch.identifier);\n\t\t\t\tpointer = this.pointersById[id];\n\t\t\t\tdelete this.pointersById[id];\n\t\t\t\tconst pointerIndex = this.pointerIds.indexOf(id);\n\t\t\t\tif (pointerIndex != -1) {\n\t\t\t\t\tthis.pointerIds.splice(pointerIndex, 1);\n\t\t\t\t}\n\t\t\t\t--this.pointingCount;\n\t\t\t\tpointer.notifyRelease();\n\t\t\t\tpointer.notifyLeave();\n\t\t\t\tthis.onPointerRelease(pointer);\n\t\t\t\tthis.onPointerLeave(pointer);\n\t\t\t}\n\t\t};\n\n\t\tprivate touchCancelHandler = (event:JQuery.Event):void => {\n\t\t\tthis.touchEndHandler(event);\n\t\t};\n\n\t\tprivate touchMoveHandler = (event:JQuery.Event):void => {\n\t\t\tconst touches:TouchList = event.changedTouches;\n\t\t\tconst touchCount:number = event.changedTouches.length;\n\t\t\tlet touch:Touch;\n\t\t\tlet id:string;\n\t\t\tlet pointer:Pointer;\n\t\t\tfor (let i:number = 0; i < touchCount; ++i) {\n\t\t\t\ttouch = touches.item(i);\n\t\t\t\tid = BaseApp.getPointerId(touch.identifier);\n\t\t\t\tpointer = this.pointersById[id];\n\t\t\t\tpointer.notifyMove(touch.clientX, touch.clientY);\n\t\t\t\tif (pointer.isDragging) {\n\t\t\t\t\tthis.onPointerDrag(pointer);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tprivate canvasTouchMoveHandler = (event:JQuery.Event):void => {\n\t\t\tevent.originalEvent.preventDefault();\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Key Event\n\n\t\tprivate keyDownHandler = (event:JQuery.Event):void => {\n\t\t\tthis.onKeyDown(event.key);\n\t\t};\n\n\t\tprivate keyUpHandler = (event:JQuery.Event):void => {\n\t\t\tthis.onKeyUp(event.key);\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Other Event\n\n\t\tprivate resizeHandler = (event:JQuery.Event):void => {\n\t\t\tthis.resize($(window).width(), $(window).height());\n\t\t};\n\n\t\tprivate requestAnimationFrame = ():void => {\n\t\t\t++this.elapsedFrameCount;\n\t\t\tthis.elapsedTime = (new Date().getTime() - this.startTime) / 1000;\n\t\t\tthis.onUpdate();\n\t\t\tthis.onPlatformRender();\n\t\t\trequestAnimationFrame(this.requestAnimationFrame);\n\t\t};\n\n\t\t// --------------------------------------------------\n\t\t// Util\n\n\t\tprivate getMousePointer(event:JQuery.Event):Pointer {\n\t\t\tlet pointer:Pointer = this.pointersById[this.mousePointerId];\n\t\t\tif (pointer == null) {\n\t\t\t\tpointer = new Pointer(this.mousePointerId);\n\t\t\t\tthis.pointersById[this.mousePointerId] = pointer;\n\t\t\t\tthis.pointerIds.push(this.mousePointerId);\n\t\t\t\t++this.pointingCount;\n\t\t\t\tpointer.notifyEnter(event.clientX, event.clientY);\n\t\t\t\tthis.onPointerEnter(pointer);\n\t\t\t}\n\t\t\treturn pointer;\n\t\t}\n\n\t\tpublic static getPointerId(touchId:number):string {\n\t\t\treturn 'touch_' + touchId;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getPointerIds():string[] { return this.pointerIds; }\n\t\tprivate pointerIds:string[];\n\n\t\tpublic getFirstPointer():Pointer { return this.pointingCount > 0 ? this.getPointerById(this.pointerIds[0]) : null; }\n\t\tpublic getLastPointer():Pointer { return this.pointingCount > 0 ? this.getPointerById(this.pointerIds[this.pointingCount - 1]) : null; }\n\n\t\tpublic getPointerById(id:string):Pointer { return this.pointersById[id]; }\n\t\tprivate pointersById:alm.util.Hash<Pointer>;\n\n\t\tpublic getPointingCount():number { return this.pointingCount; }\n\t\tprivate pointingCount:number;\n\n\t\tpublic getStageWidth():number { return this.stageWidth; }\n\t\tprivate stageWidth:number;\n\n\t\tpublic getStageHeight():number { return this.stageHeight; }\n\t\tprivate stageHeight:number;\n\n\t\tpublic getElapsedFrameCount():number { return this.elapsedFrameCount; }\n\t\tprivate elapsedFrameCount:number;\n\n\t\tpublic getElapsedTime():number { return this.elapsedTime; }\n\t\tprivate elapsedTime:number;\n\n\t\tpublic getCanvas():JQuery<HTMLCanvasElement> { return this.canvas; }\n\t\tprivate canvas:JQuery<HTMLCanvasElement>;\n\n\t\tpublic getIsAutoResizeEnabled():boolean { return this.isAutoResizeEnabled; }\n\t\tpublic setIsAutoResizeEnabled(value:boolean):void { this.isAutoResizeEnabled = value; }\n\t\tprivate isAutoResizeEnabled:boolean;\n\n\t\tprivate startTime:number;\n\t\tprivate mousePointerId:string;\n\t}\n}","/// <reference path=\"../../include.ts\" />\n\nnamespace alm.canvas {\n\n\texport class Pointer {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(id:string) {\n\t\t\tthis.id = id;\n\n\t\t\tthis.isHovering = false;\n\t\t\tthis.isTouching = false;\n\t\t\tthis.isDragging = false;\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\n\t\t\tthis.prevX = 0;\n\t\t\tthis.prevY = 0;\n\n\t\t\tthis.dragX = 0;\n\t\t\tthis.dragY = 0;\n\n\t\t\tthis.velocityX = 0;\n\t\t\tthis.velocityY = 0;\n\n\t\t\tthis.touchBeginX = 0;\n\t\t\tthis.touchBeginY = 0;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic notifyEnter(x:number, y:number):void {\n\t\t\tthis.prevX = this.x = x;\n\t\t\tthis.prevY = this.y = y;\n\t\t\tthis.isHovering = true;\n\t\t}\n\n\t\tpublic notifyLeave():void {\n\t\t\tthis.isHovering = false;\n\t\t}\n\n\t\tpublic notifyTouch():void {\n\t\t\tthis.isTouching = true;\n\t\t\tthis.touchBeginX = this.x;\n\t\t\tthis.touchBeginY = this.y;\n\t\t}\n\n\t\tpublic notifyRelease():void {\n\t\t\tthis.isTouching = false;\n\t\t\tthis.isDragging = false;\n\t\t\tthis.dragX = 0;\n\t\t\tthis.dragY = 0;\n\t\t}\n\n\t\tpublic notifyMove(x:number, y:number):void {\n\t\t\tthis.prevX = this.x;\n\t\t\tthis.prevY = this.y;\n\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\n\t\t\tthis.velocityX = this.x - this.prevX;\n\t\t\tthis.velocityY = this.y - this.prevY;\n\n\t\t\tif (this.isTouching) {\n\t\t\t\tthis.isDragging = true;\n\t\t\t}\n\n\t\t\tif (this.isDragging) {\n\t\t\t\tthis.dragX = this.x - this.touchBeginX;\n\t\t\t\tthis.dragY = this.y - this.touchBeginY;\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic id:string;\n\t\tpublic isHovering:boolean;\n\t\tpublic isTouching:boolean;\n\t\tpublic isDragging:boolean;\n\n\t\tpublic x:number;\n\t\tpublic y:number;\n\n\t\tpublic prevX:number;\n\t\tpublic prevY:number;\n\n\t\tpublic dragX:number;\n\t\tpublic dragY:number;\n\n\t\tpublic velocityX:number;\n\t\tpublic velocityY:number;\n\n\t\tpublic touchBeginX:number;\n\t\tpublic touchBeginY:number;\n\t}\n}","/* ---------- dependency ---------- */\n/// <reference types='jquery' />\n/// <reference path='../../lib/alumican.d.ts' />\n\n/* ---------- project ---------- */\n/// <reference path='alm/canvas/BaseApp.ts' />\n/// <reference path='alm/canvas/Pointer.ts' />\n"]}
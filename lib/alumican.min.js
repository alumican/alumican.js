var cmd,scn,alm,__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();function trace(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];alm.io.Logger.info.apply(trace.caller,arguments)}function throwWarn(t,e,n){void 0===n&&(n=!0),alm.io.Logger.warnIf.apply(null,arguments)}function throwError(t,e,n){void 0===n&&(n=!0),alm.io.Logger.errorIf.apply(null,arguments)}!function(t){var e,n;e=t.browser||(t.browser={}),n=function(){function t(t){void 0===t&&(t=""),this.set(t)}return t.prototype.set=function(t){void 0===t&&(t="");var e="";if(""!=t){var n=t.indexOf("?");-1!=n&&(e=t.substring(n))}else e=location.search;this.hash={};for(var i,o=e.substring(1).split("&"),r=0;o[r];++r)i=o[r].split("="),this.hash[i[0]]=i[1]},t.prototype.getString=function(t,e){var n=this.hash[t];return void 0===n?e:n},t.prototype.getInt=function(t,e){var n=parseInt(this.hash[t]);return isNaN(n)?e:n},t.prototype.getFloat=function(t,e){var n=parseFloat(this.hash[t]);return isNaN(n)?e:n},t.prototype.getBool=function(t,e){var n=this.hash[t];return void 0===n?e:1==n},t.prototype.getHash=function(){return this.hash},t}(),e.QueryString=n}(alm||(alm={})),function(h){!function(t){var o,e,n=h.browser.QueryString;(e=o=t.LoggerLevel||(t.LoggerLevel={}))[e.Verbose=0]="Verbose",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Silent=4]="Silent";var i=function(){function t(){}return t.prototype.verbose=function(t,e){},t.prototype.info=function(t,e){},t.prototype.warn=function(t,e){},t.prototype.error=function(t,e){},t}();t.NullLogging=i;var r=function(){function t(){}return t.prototype.verbose=function(t,e){console.debug.apply(console,Array.prototype.slice.call([t].concat(e)))},t.prototype.info=function(t,e){console.log.apply(console,Array.prototype.slice.call([t].concat(e)))},t.prototype.warn=function(t,e){console.warn.apply(console,Array.prototype.slice.call([t].concat(e)))},t.prototype.error=function(t,e){console.error.apply(console,Array.prototype.slice.call([t].concat(e)))},t}();t.ConsoleLogging=r;var s=function(){function t(t,e){this.dom=t,this.html=e}return t.prototype.verbose=function(t,e){this.print(t,e)},t.prototype.info=function(t,e){this.print(t,e)},t.prototype.warn=function(t,e){this.print(t,e)},t.prototype.error=function(t,e){this.print(t,e)},t.prototype.print=function(t,e){var n=t+e.join(", ");this.html?this.dom.innerHTML=n+"<br>\n"+this.dom.innerHTML:this.dom.innerText=n+"\n"+this.dom.innerText},t}();t.DOMLogging=s;var a=function(){function t(t){this.loggers=t}return t.prototype.verbose=function(t,e){for(var n=this.loggers.length,i=0;i<n;++i)this.loggers[i].verbose(t,e)},t.prototype.info=function(t,e){for(var n=this.loggers.length,i=0;i<n;++i)this.loggers[i].info(t,e)},t.prototype.warn=function(t,e){for(var n=this.loggers.length,i=0;i<n;++i)this.loggers[i].warn(t,e)},t.prototype.error=function(t,e){for(var n=this.loggers.length,i=0;i<n;++i)this.loggers[i].error(t,e)},t}();t.ParallelLogging=a;var u=function(){function i(){}return i.setLevelByQuery=function(t){var e=(new n).getInt(t,o.Silent);i.level=isNaN(e)?o.Silent:e},i.setNamespace=function(t){i.namespace=""!=t?t+"#":""},i.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.level<=o.Verbose&&i.logger.verbose("["+i.namespace+"Verbose] ",t)},i.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.level<=o.Info&&i.logger.info("["+i.namespace+"Info   ] ",t)},i.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.level<=o.Warn&&(i.logger.warn("["+i.namespace+"Warn   ] ",t),i.stackTrace())},i.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.level<=o.Error&&(i.logger.error("["+i.namespace+"Error  ] ",t),i.stackTrace())},i.warnIf=function(t,e,n){void 0===n&&(n=!0),i.level<=o.Warn&&n&&(i.logger.warn("["+i.namespace+"Warn   ] ",[e+" : "+t]),i.stackTrace())},i.errorIf=function(t,e,n){void 0===n&&(n=!0),i.level<=o.Error&&n&&(i.logger.error("["+i.namespace+"Error  ] ",[e+" : "+t]),i.stackTrace())},i.stackTrace=function(){console.trace()},i.level=o.Verbose,i.logger=new r,i.namespace="",i}();t.Logger=u}(h.io||(h.io={}))}(alm||(alm={})),function(t){var e,n;e=t.math||(t.math={}),n=function(){function e(){}return e.linear=function(t){return t},e.easeInQuad=function(t){return(t/=1)*t},e.easeOutQuad=function(t){return-(t/=1)*(t-2)},e.easeInOutQuad=function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},e.easeInCubic=function(t){return(t/=1)*t*t},e.easeOutCubic=function(t){return(t-=1)*t*t+1},e.easeInOutCubic=function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},e.easeInQuart=function(t){return(t/=1)*t*t*t},e.easeOutQuart=function(t){return-((t-=1)*t*t*t-1)},e.easeInOutQuart=function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},e.easeInQuint=function(t){return(t/=1)*t*t*t*t},e.easeOutQuint=function(t){return(t-=1)*t*t*t*t+1},e.easeInOutQuint=function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},e.easeInSine=function(t){return 1-Math.cos(t*(Math.PI/2))},e.easeOutSine=function(t){return Math.sin(t*(Math.PI/2))},e.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.easeInExpo=function(t){return 0==t?0:Math.pow(2,10*(t-1))},e.easeOutExpo=function(t){return 1==t?1:1-Math.pow(2,-10*t)},e.easeInOutExpo=function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},e.easeInCirc=function(t){return-(Math.sqrt(1-(t/=1)*t)-1)},e.easeOutCirc=function(t){return Math.sqrt(1-(t-=1)*t)},e.easeInOutCirc=function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.createEaseInElastic=function(i){return void 0===i&&(i=1.70158),function(t){var e=0,n=1;return 0==t?0:1==(t/=1)?1:(0==e&&(e=.3),i=n<1?(n=1,e/4):e/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/e))}},e.createEaseOutElastic=function(i){return void 0===i&&(i=1.70158),function(t){var e=0,n=1;return 0==t?0:1==(t/=1)?1:(0==e&&(e=.3),i=n<1?(n=1,e/4):e/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/e)+1)}},e.createEaseInOutElastic=function(i){return void 0===i&&(i=1.70158),function(t){var e=0,n=1;return 0==t?0:2==(t/=.5)?1:(0==e&&(e=.3*1.5),i=n<1?(n=1,e/4):e/(2*Math.PI)*Math.asin(1/n),t<1?-.5*n*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/e):n*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/e)*.5+1)}},e.easeInElastic=function(t){return e.defaultEaseInElastic(t)},e.easeOutElastic=function(t){return e.defaultEaseOutElastic(t)},e.easeInOutElastic=function(t){return e.defaultEaseInOutElastic(t)},e.createEaseInBack=function(e){return void 0===e&&(e=1.70158),function(t){return(t/=1)*t*((e+1)*t-e)}},e.createEaseOutBack=function(e){return void 0===e&&(e=1.70158),function(t){return(t-=1)*t*((e+1)*t+e)+1}},e.createEaseInOutBack=function(e){return void 0===e&&(e=1.70158),function(t){return(t/=.5)<1?.5*t*t*((1+(e*=1.525))*t-e):.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)}},e.easeInBack=function(t){return e.defaultEaseInElastic(t)},e.easeOutBack=function(t){return e.defaultEaseOutBack(t)},e.easeInOutBack=function(t){return e.defaultEaseInOutBack(t)},e.easeInBounce=function(t){return 1-e.easeOutBounce(1-t)},e.easeOutBounce=function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.easeInOutBounce=function(t){return t<.5?.5*e.easeInBounce(2*t):.5*e.easeOutBounce(2*t-1)+.5},e.defaultEaseInElastic=e.createEaseInElastic(),e.defaultEaseOutElastic=e.createEaseOutElastic(),e.defaultEaseInOutElastic=e.createEaseInOutElastic(),e.defaultEaseInBack=e.createEaseInBack(),e.defaultEaseOutBack=e.createEaseOutBack(),e.defaultEaseInOutBack=e.createEaseInOutBack(),e}(),e.Easing=n}(alm||(alm={})),function(t){var e,n;e=t.event||(t.event={}),n=function(){function t(t,e,n){void 0===n&&(n=null),this.type=t,this.target=e,this.data=n}return t.prototype.getType=function(){return this.type},t.prototype.getTarget=function(){return this.target},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t}(),e.Event=n}(alm||(alm={})),function(t){var i,r,e;i=t.event||(t.event={}),r=t.io.Logger,e=function(){function t(t){void 0===t&&(t=null),this.target=t||this,this.listeners={}}return t.prototype.addEventListener=function(t,e){if("function"==typeof e){var n=this.listeners[t];if(n){for(var i=n.length,o=0;o<i;++o)if(e==n[o])return}else this.listeners[t]=n=[];n.push(e)}else r.warn("[EventDispatcher] addEventListener : listener is not function, eventType = '"+t+"', listener = "+e)},t.prototype.removeEventListener=function(t,e){if("function"==typeof e){var n=this.listeners[t];if(n){for(var i=n.length,o=0;o<i;++o)if(e==n[o]){n.splice(o,1);break}0==n.length&&delete this.listeners[t]}}else r.warn("[EventDispatcher] removeEventListener : listener is not function, eventType = '"+t+"', listener = "+e)},t.prototype.removeAllEventListener=function(t){void 0===t&&(t=null),t?delete this.listeners[t]:this.listeners={}},t.prototype.hasEventListener=function(t){return null!=this.listeners[t]},t.prototype.dispatchEvent=function(t){var e=this.listeners[t.getType()];if(e)for(var n=e.length,i=0;i<n;++i)e[i].call(this.target,t)},t.prototype.dispatchEventType=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.dispatchEvent(new i.Event(t,e,n))},t}(),i.EventDispatcher=e}(alm||(alm={})),function(t){var e;(e=t.CommandState||(t.CommandState={}))[e.Sleeping=0]="Sleeping",e[e.Executing=1]="Executing",e[e.Interrupting=2]="Interrupting"}(cmd||(cmd={})),function(t){var e=function(n){function t(t,e){return void 0===e&&(e=null),n.call(this,t,e)||this}return __extends(t,n),t.prototype.clone=function(){return new t(this.getType(),this.getTarget())},t.prototype.toString=function(){return"[CommandEvent] type = "+this.getType()},t.COMPLETE="complete",t}(alm.event.Event);t.CommandEvent=e}(cmd||(cmd={})),function(r){var t=function(o){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null);var i=o.call(this)||this;return i.setExecuteFunction(t),i.setInterruptFunction(e),i.setDestroyFunction(n),i.state=r.CommandState.Sleeping,(i.self=i).parent=null,i}return __extends(t,o),t.prototype.execute=function(){if(this.state>r.CommandState.Sleeping)throw new Error("[Command.execute] + Command is already executing.");this.state=r.CommandState.Executing,this.getExecuteFunction().call(this,this)},t.prototype.interrupt=function(){this.state==r.CommandState.Executing&&(this.state=r.CommandState.Interrupting,this.getInterruptFunction().call(this,this))},t.prototype.destroy=function(){this.state=r.CommandState.Sleeping,this.getDestroyFunction().call(this,this),this.parent=null,this.executeFunction=null,this.interruptFunction=null,this.destroyFunction=null},t.prototype.notifyComplete=function(){switch(this.state){case r.CommandState.Sleeping:break;case r.CommandState.Executing:case r.CommandState.Interrupting:this.dispatchEvent(new r.CommandEvent(r.CommandEvent.COMPLETE,this)),this.destroy()}},t.prototype.implExecuteFunction=function(t){this.notifyComplete()},t.prototype.implInterruptFunction=function(t){},t.prototype.implDestroyFunction=function(t){},t.prototype.getExecuteFunction=function(){return this.executeFunction||this.implExecuteFunction},t.prototype.setExecuteFunction=function(t){this.executeFunction=t},t.prototype.getInterruptFunction=function(){return this.interruptFunction||this.implInterruptFunction},t.prototype.setInterruptFunction=function(t){this.interruptFunction=t},t.prototype.getDestroyFunction=function(){return this.destroyFunction||this.implDestroyFunction},t.prototype.setDestroyFunction=function(t){this.destroyFunction=t},t.prototype.getState=function(){return this.state},t.prototype.getParent=function(){return this.parent},t.prototype.setParent=function(t){this.parent=t},t.prototype.getSelf=function(){return this.self},t}(alm.event.EventDispatcher);r.Command=t}(cmd||(cmd={})),function(o){var t=function(i){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=i.call(this)||this;return n.commands=[],n.addCommand.apply(n,t),n}return __extends(t,i),t.prototype.addCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0<t.length&&(this.preProcess(t),this.commands=this.getCommands().concat(t))},t.prototype.insertCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertCommandAt.apply(this,[0].concat(t))},t.prototype.insertCommandAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];0<e.length&&(this.preProcess(e),Array.prototype.splice.apply(this.getCommands(),[t,0].concat(e)))},t.prototype.addCommandArray=function(t){this.addCommand.apply(this,t)},t.prototype.insertCommandArray=function(t){this.insertCommand.apply(this,t)},t.prototype.insertCommandArrayAt=function(t,e){this.insertCommandAt.apply(this,[t].concat(e))},t.prototype.getLength=function(){return this.commands.length},t.prototype.getCommandByIndex=function(t){return this.commands[t]},t.prototype.getCommands=function(){return this.commands},t.prototype.preProcess=function(t){for(var e,n=t.length,i=0;i<n;++i)"function"==typeof(e=t[i])&&(t[i]=e=new o.Func(e)),e.setParent(this)},t.prototype.implExecuteFunction=function(t){this.notifyComplete()},t.prototype.implInterruptFunction=function(t){},t.prototype.implDestroyFunction=function(t){},t}(o.Command);o.CommandList=t}(cmd||(cmd={})),function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.implExecuteFunction=function(t){var e=this.getParent().notifyBreak;e&&e(),this.notifyComplete()},e.prototype.implInterruptFunction=function(t){},e.prototype.implDestroyFunction=function(t){},e}(t.Command);t.Break=e}(cmd||(cmd={})),function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.implExecuteFunction=function(t){var e=this.getParent().notifyReturn;e&&e(),this.notifyComplete()},e.prototype.implInterruptFunction=function(t){},e.prototype.implDestroyFunction=function(t){},e}(t.Command);t.Return=e}(cmd||(cmd={})),function(t){var e=function(i){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=i.call(this)||this;return n.messages=t,n}return __extends(t,i),t.prototype.implExecuteFunction=function(t){console.log.apply(console,Array.prototype.slice.call(this.messages)),this.notifyComplete()},t.prototype.implInterruptFunction=function(t){},t.prototype.implDestroyFunction=function(t){this.messages=null},t.prototype.getMessages=function(){return this.messages},t.prototype.setMessages=function(t){this.messages=t},t}(t.Command);t.Log=e}(cmd||(cmd={})),function(t){var e=function(n){function t(t){void 0===t&&(t=1e3);var e=n.call(this)||this;return e.completeHandler=function(t){e.notifyComplete()},e.time=t,e.timerId=-1,e}return __extends(t,n),t.prototype.implExecuteFunction=function(t){this.timerId=window.setTimeout(this.completeHandler,this.time)},t.prototype.implInterruptFunction=function(t){this.cancel()},t.prototype.implDestroyFunction=function(t){this.cancel()},t.prototype.cancel=function(){-1!=this.timerId&&(clearTimeout(this.timerId),this.timerId=-1)},t.prototype.getTime=function(){return this.time},t.prototype.setTime=function(t){this.time=t},t}(t.Command);t.Wait=e}(cmd||(cmd={})),function(t){var e=function(r){function t(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===n&&(n=null),void 0===i&&(i=null);var o=r.call(this)||this;return o.completeHandler=function(t){o.notifyComplete()},o.func=t,o.args=e,o.eventDispatcher=n,o.eventType=i,o}return __extends(t,r),t.prototype.implExecuteFunction=function(t){this.eventDispatcher&&this.eventType?(this.eventDispatcher.addEventListener(this.eventType,this.completeHandler),this.func.apply(this,this.args)):(this.func.apply(this,this.args),this.notifyComplete())},t.prototype.implInterruptFunction=function(t){this.eventDispatcher&&this.eventType&&this.eventDispatcher.removeEventListener(this.eventType,this.completeHandler)},t.prototype.implDestroyFunction=function(t){this.eventDispatcher&&this.eventType&&this.eventDispatcher.removeEventListener(this.eventType,this.completeHandler),this.func=null,this.args=null,this.eventDispatcher=null,this.eventType=null},t.prototype.getFunction=function(){return this.func},t.prototype.setFunction=function(t){this.func=t},t.prototype.getArguments=function(){return this.args},t.prototype.setArguments=function(t){this.args=t},t.prototype.getEventDispatcher=function(){return this.eventDispatcher},t.prototype.setEventDispatcher=function(t){this.eventDispatcher=t},t.prototype.getEventType=function(){return this.eventType},t.prototype.setEventType=function(t){this.eventType=t},t}(t.Command);t.Func=e}(cmd||(cmd={})),function(t){var e=function(i){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var n=i.call(this)||this;return n.completeHandler=function(t){n.notifyComplete()},n.eventDispatcher=t,n.eventType=e,n}return __extends(t,i),t.prototype.implExecuteFunction=function(t){this.eventDispatcher&&this.eventType&&this.eventDispatcher.addEventListener(this.eventType,this.completeHandler)},t.prototype.implInterruptFunction=function(t){this.eventDispatcher&&this.eventType&&this.eventDispatcher.removeEventListener(this.eventType,this.completeHandler)},t.prototype.implDestroyFunction=function(t){this.eventDispatcher&&this.eventType&&this.eventDispatcher.removeEventListener(this.eventType,this.completeHandler),this.eventType=null,this.eventDispatcher=null},t.prototype.getEventDispatcher=function(){return this.eventDispatcher},t.prototype.setEventDispatcher=function(t){this.eventDispatcher=t},t.prototype.getEventType=function(){return this.eventType},t.prototype.setEventType=function(t){this.eventType=t},t}(t.Command);t.Listen=e}(cmd||(cmd={})),function(t){var c=alm.math.Easing,e=function(h){function n(t,e,n,i,o,r,s,a){void 0===n&&(n=null),void 0===i&&(i=1e3),void 0===o&&(o=c.linear),void 0===r&&(r=null),void 0===s&&(s=null),void 0===a&&(a=null);var u=h.call(this)||this;return u.intervalHandler=function(){var t=(new Date).getTime()-u.startTime;t<u.duration?(u.apply(t/u.duration),u.onUpdate&&u.onUpdate(u.progressTime,u.progressValue)):(u.apply(1),u.cancel(),u.onUpdate&&u.onUpdate(u.progressTime,u.progressValue),u.onComplete&&u.onComplete(u.progressTime,u.progressValue),u.notifyComplete())},u.tweenTarget=t,u.to=e,u.from=n,u.duration=i,u.easing=o,u.onStart=r,u.onUpdate=s,u.onComplete=a,u.progressTime=0,u.progressValue=0,u.startTime=0,u.timerId=-1,u}return __extends(n,h),n.prototype.implExecuteFunction=function(t){for(var e in this.internalFrom={},this.to)this.to[e],this.from&&null!=this.from[e]?this.internalFrom[e]=this.from[e]:this.internalFrom[e]=this.tweenTarget[e];0<this.duration?(this.timerId=window.setInterval(this.intervalHandler,n.updateInterval),this.startTime=(new Date).getTime(),this.apply(0),this.onStart&&this.onStart(this.progressTime,this.progressValue)):(this.apply(0),this.onStart&&this.onStart(this.progressTime,this.progressValue),this.apply(1),this.onUpdate&&this.onUpdate(this.progressTime,this.progressValue),this.onComplete&&this.onComplete(this.progressTime,this.progressValue),this.notifyComplete())},n.prototype.implInterruptFunction=function(t){this.cancel()},n.prototype.implDestroyFunction=function(t){this.cancel(),this.tweenTarget=null,this.to=null,this.from=null,this.easing=null,this.onStart=null,this.onUpdate=null,this.onComplete=null,this.internalFrom=null},n.prototype.cancel=function(){-1!=this.timerId&&(clearInterval(this.timerId),this.timerId=-1)},n.prototype.apply=function(t){var e;for(var n in this.progressTime=t,this.progressValue=this.easing(this.progressTime),this.to)e=this.internalFrom[n],this.tweenTarget[n]=e+(this.to[n]-e)*this.progressValue},n.prototype.getTarget=function(){return this.tweenTarget},n.prototype.setTarget=function(t){this.tweenTarget=t},n.prototype.getDuration=function(){return this.duration},n.prototype.setDuration=function(t){this.duration=t},n.prototype.getTo=function(){return this.to},n.prototype.setTo=function(t){this.to=t},n.prototype.getFrom=function(){return this.from},n.prototype.setFrom=function(t){this.from=t},n.prototype.getEasing=function(){return this.easing},n.prototype.setEasing=function(t){this.easing=t},n.prototype.getOnStart=function(){return this.onStart},n.prototype.setOnStart=function(t){this.onStart=t},n.prototype.getOnUpdate=function(){return this.onUpdate},n.prototype.setOnUpdate=function(t){this.onUpdate=t},n.prototype.getOnComplete=function(){return this.onComplete},n.prototype.setOnComplete=function(t){this.onComplete=t},n.prototype.getProgressTime=function(){return this.progressTime},n.prototype.getProgressValue=function(){return this.progressValue},n.prototype.getUpdateInterval=function(){return n.updateInterval},n.prototype.setUpdateInterval=function(t){n.updateInterval=t},n.updateInterval=1e3/60,n}(t.Command);t.Tween=e}(cmd||(cmd={})),function(o){var t=function(i){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=i.apply(this,t)||this;return n.completeHandler=function(t){n.currentCommand.removeEventListener(o.CommandEvent.COMPLETE,n.completeHandler),n.currentCommand=null,++n.position>=n.getLength()?n.notifyComplete():n.next()},n.currentCommand=null,n.position=-1,n.isPaused=!1,n.isCompleteOnPaused=!1,n}return __extends(t,i),t.prototype.addCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.addCommand.apply(this,t)},t.prototype.insertCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.insertCommandAt.apply(this,[this.position+1].concat(t))},t.prototype.addCommandArray=function(t){this.addCommand.apply(this,t)},t.prototype.insertCommandArray=function(t){this.insertCommand.apply(this,t)},t.prototype.next=function(){this.currentCommand=this.getCommandByIndex(this.position),this.currentCommand.addEventListener(o.CommandEvent.COMPLETE,this.completeHandler),this.currentCommand.execute()},t.prototype.implExecuteFunction=function(t){(this.position=0)<this.getLength()?this.next():this.notifyComplete()},t.prototype.implInterruptFunction=function(t){this.currentCommand&&(this.currentCommand.removeEventListener(o.CommandEvent.COMPLETE,this.completeHandler),this.currentCommand.interrupt(),this.currentCommand=null),this.position=-1,i.prototype.implInterruptFunction.call(this,t)},t.prototype.implDestroyFunction=function(t){this.currentCommand&&(this.currentCommand.removeEventListener(o.CommandEvent.COMPLETE,this.completeHandler),this.currentCommand.destroy(),this.currentCommand=null),this.position=-1,this.isPaused=!1,this.isCompleteOnPaused=!1,i.prototype.implDestroyFunction.call(this,t)},t.prototype.implNotifyBreak=function(){this.currentCommand.getState()==o.CommandState.Executing&&(this.currentCommand.removeEventListener(o.CommandEvent.COMPLETE,this.completeHandler),this.currentCommand.interrupt()),this.notifyComplete()},t.prototype.implNotifyReturn=function(){this.currentCommand.getState()==o.CommandState.Executing&&(this.currentCommand.removeEventListener(o.CommandEvent.COMPLETE,this.completeHandler),this.currentCommand.interrupt());var t=this.getParent().notifyReturn;t&&t(),this.destroy()},t.prototype.getPosition=function(){return this.position},t}(o.CommandList);o.Serial=t}(cmd||(cmd={})),function(s){var t=function(r){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r.apply(this,t)||this;return n.completeHandler=function(t){++n.completeCount>=n.getLength()&&n.notifyComplete()},n.completeCount=0,n}return __extends(t,r),t.prototype.addCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.addCommand.apply(this,t)},t.prototype.insertCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addCommand.apply(this,t)},t.prototype.addCommandArray=function(t){this.addCommand.apply(this,t)},t.prototype.insertCommandArray=function(t){this.addCommand.apply(this,t)},t.prototype.implExecuteFunction=function(t){this.completeCount=0;var e=this.getLength();if(0<e)for(var n,i=this.getCommands(),o=0;o<e;++o)(n=i[o]).addEventListener(s.CommandEvent.COMPLETE,this.completeHandler),n.execute();else this.notifyComplete()},t.prototype.implInterruptFunction=function(t){var e=this.getLength();if(0<e)for(var n,i=this.getCommands(),o=0;o<e;++o)(n=i[o]).removeEventListener(s.CommandEvent.COMPLETE,this.completeHandler),n.interrupt();r.prototype.implInterruptFunction.call(this,t)},t.prototype.implDestroyFunction=function(t){var e=this.getLength();if(0<e)for(var n,i=this.getCommands(),o=0;o<e;++o)(n=i[o]).removeEventListener(s.CommandEvent.COMPLETE,this.completeHandler),n.destroy();r.prototype.implDestroyFunction.call(this,t)},t.prototype.implNotifyBreak=function(){var t=this.getLength();if(0<t)for(var e=this.getCommands(),n=void 0,i=0;i<t;++i)(n=e[i]).getState()==s.CommandState.Executing&&(n.removeEventListener(s.CommandEvent.COMPLETE,this.completeHandler),n.interrupt());this.notifyComplete()},t.prototype.implNotifyReturn=function(){var t=this.getLength();if(0<t)for(var e=this.getCommands(),n=void 0,i=0;i<t;++i)(n=e[i]).getState()==s.CommandState.Executing&&(n.removeEventListener(s.CommandEvent.COMPLETE,this.completeHandler),n.interrupt());var o=this.getParent().notifyReturn;o&&o(),this.destroy()},t.prototype.getCompleteCount=function(){return this.completeCount},t}(s.CommandList);s.Parallel=t}(cmd||(cmd={})),function(t){var e,n;e=t.geom||(t.geom={}),n=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.set(t,e)}return t.prototype.set=function(t,e){this.x=t,this.y=e},t.prototype.copyTo=function(t){t.set(this.x,this.y)},t.prototype.getClone=function(){return new t(this.x,this.y)},t.prototype.zero=function(){this.set(0,0)},t.prototype.normalize=function(){var t=this.getLength();this.x/=t,this.y/=t},t.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.getSquareDistance=function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},t.prototype.getDistance=function(t){return Math.sqrt(this.getSquareDistance(t))},t}(),e.Vector2=n}(alm||(alm={})),function(t){var e,n;e=t.geom||(t.geom={}),n=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.set(t,e,n)}return t.prototype.set=function(t,e,n){this.x=t,this.y=e,this.z=n},t.prototype.copyTo=function(t){t.set(this.x,this.y,this.z)},t.prototype.getClone=function(){return new t(this.x,this.y,this.z)},t.prototype.zero=function(){this.set(0,0,0)},t.prototype.normalize=function(){var t=this.getLength();this.x/=t,this.y/=t,this.z/=t},t.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.getSquareDistance=function(t){var e=t.x-this.x,n=t.y-this.y,i=t.z-this.z;return e*e+n*n+i*i},t.prototype.getDistance=function(t){return Math.sqrt(this.getSquareDistance(t))},t}(),e.Vector3=n}(alm||(alm={})),function(t){var e,n;e=t.geom||(t.geom={}),n=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.set(t,e,n,i)}return t.prototype.set=function(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i},t.prototype.copyTo=function(t){t.set(this.x,this.y,this.width,this.height)},t.prototype.getClone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.getTop=function(){return this.y},t.prototype.getBottom=function(){return this.y+this.height},t.prototype.getLeft=function(){return this.x},t.prototype.getRight=function(){return this.x+this.width},t.prototype.getTopLeft=function(){return new e.Vector2(this.getLeft(),this.getTop())},t.prototype.getTopRight=function(){return new e.Vector2(this.getRight(),this.getTop())},t.prototype.getBottomLeft=function(){return new e.Vector2(this.getLeft(),this.getBottom())},t.prototype.getBottomRight=function(){return new e.Vector2(this.getRight(),this.getBottom())},t}(),e.Rectangle=n}(alm||(alm={})),function(t){!function(m){var v,t,g,e;(t=v=m.Align||(m.Align={}))[t.Top_Left=0]="Top_Left",t[t.Top_Center=1]="Top_Center",t[t.Top_Right=2]="Top_Right",t[t.Middle_Left=3]="Middle_Left",t[t.Middle_Center=4]="Middle_Center",t[t.Middle_Right=5]="Middle_Right",t[t.Bottom_Left=6]="Bottom_Left",t[t.Bottom_Center=7]="Bottom_Center",t[t.Bottom_Right=8]="Bottom_Right",(e=g=m.ScaleMode||(m.ScaleMode={}))[e.ExactFit=0]="ExactFit",e[e.ShowAll=1]="ShowAll",e[e.NoBorder=2]="NoBorder",e[e.NoScale=3]="NoScale";var n=function(){function t(){}return t.resize=function(t,e,n,i){void 0===n&&(n=g.ShowAll),void 0===i&&(i=v.Middle_Center);var o=t.x,r=t.y,s=t.width,a=t.height,u=e.x,h=e.y,c=e.width,l=e.height;switch(n){case g.ShowAll:case g.NoBorder:var d=c/s,p=l/a,f=n==g.ShowAll?d<p?d:p:p<d?d:p;s*=f,a*=f;break;case g.ExactFit:return new m.Rectangle(u,h,c,l)}return o=u+(i==v.Top_Left||i==v.Middle_Left||i==v.Bottom_Left?0:i==v.Top_Right||i==v.Middle_Right||i==v.Bottom_Right?c-s:(c-s)/2),r=h+(i==v.Top_Left||i==v.Top_Center||i==v.Top_Right?0:i==v.Bottom_Left||i==v.Bottom_Center||i==v.Bottom_Right?l-a:(l-a)/2),new m.Rectangle(o,r,s,a)},t}();m.Boxer=n}(t.geom||(t.geom={}))}(alm||(alm={})),function(t){var e,n;e=t.util||(t.util={}),n=function(){function t(){}return t.each=function(e,n){null!=e&&Object.keys(e).forEach(function(t){n(t,e[t])})},t}(),e.Obj=n}(alm||(alm={})),function(t){var e,n;e=t.util||(t.util={}),n=function(){function t(){}return t.sequence=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=1);for(var i=new Array(t),o=e,r=0;r<t;++r)i[r]=o,o+=n;return i},t.unique=function(t){return t.filter(function(t,e,n){return n.indexOf(t)===e})},t.duplicated=function(t,e){return void 0===e&&(e=!1),e?t.filter(function(t,e,n){return n.indexOf(t)!==n.lastIndexOf(t)}):t.filter(function(t,e,n){return n.indexOf(t)===e&&n.lastIndexOf(t)!==e})},t.roundRobin=function(t,e,n){var i,o,r=1,s=t.length,a=e.length;for(i=0;i<s;++i)for(o=i+1;o<a;++o)n(r++,i,o,t[i],e[o])},t}(),e.Arr=n}(alm||(alm={})),function(t){var e,n;e=t.util||(t.util={}),n=function(){function i(){}return i.map=function(t,e,n,i,o,r){return void 0===r&&(r=!0),e==n?i:(r&&(e<n?t<e?t=e:n<t&&(t=n):t<n?t=n:e<t&&(t=e)),(t-e)*(o-i)/(n-e)+i)},i.ease=function(t,e,n,i,o,r){return e==n?i:e<n?(t<e?t=e:n<t&&(t=n),r((t-e)/(n-e))*(o-i)+i):(t<n?t=n:e<t&&(t=e),r((t-n)/(e-n))*(o-i)+i)},i.random=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),t+(e-t)*Math.random()},i.randomInt=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.floor(i.random(t,e))},i.clamp=function(t,e,n){return t<e?e:n<t?n:t},i.dist=function(t,e,n,i,o){void 0===o&&(o=!1);var r=n-t,s=i-e;return o?r*r+s*s:Math.sqrt(r*r+s*s)},i.radToDeg=function(t){return t*i.RAD2DEG},i.degToRad=function(t){return t*i.DEG2RAD},i.turn=function(t,e,n){return void 0===n&&(n=!0),n?(e-t+i.PI3)%i.PI2-Math.PI:(e-t+540)%360-180},i.PI2=2*Math.PI,i.PI3=3*Math.PI,i.PI4=4*Math.PI,i.PI5=5*Math.PI,i.PI6=6*Math.PI,i.PI_2=Math.PI/2,i.PI_3=Math.PI/3,i.PI_4=Math.PI/4,i.PI_6=Math.PI/6,i.RAD2DEG=180/Math.PI,i.DEG2RAD=Math.PI/180,i}(),e.Num=n}(alm||(alm={})),function(t){var e,n;e=t.util||(t.util={}),n=function(){function t(){}return t.toTimeString=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),n+=60*e+3600*t;var i=Math.floor(n/3600).toString(),o=Math.floor(n/60%60).toString(),r=("0"+Math.floor(n%60)).substr(-2,2);return"0"!=i?i+":"+("0"+o).substr(-2,2)+":"+r:o+":"+r},t}(),e.Str=n}(alm||(alm={})),function(t){var e,n;e=t.util||(t.util={}),n=function(){function t(){}return t.stop=function(t){return t&&t.interrupt(),null},t.sequence=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=new cmd.Serial;return i.addCommand.apply(i,e),t&&i.execute(),i},t.single=function(t,e){return t&&e&&e.execute(),e},t}(),e.Cmd=n}(alm||(alm={})),function(t){var e,n;e=t.resource||(t.resource={}),n=function(){function t(t,e,n,i){void 0===n&&(n=100),void 0===i&&(i=50),this.onRequireItem=t,this.onDestroyItem=e,this.growthCount=i,this.items=new Array(n);for(var o=0;o<n;++o)this.items[o]=this.onRequireItem();this.index=n}return t.prototype.getItem=function(){if(0<this.index)return this.items[--this.index];for(var t=0;t<this.growthCount;++t)this.items.unshift(this.onRequireItem());return this.index=this.growthCount,this.getItem()},t.prototype.returnItem=function(t){this.items[this.index++]=t},t.prototype.reduce=function(){for(var t=this.index,e=0;e<t;++e)this.onDestroyItem(this.items.shift());this.index=0},t.prototype.destroy=function(){for(var t=this.items.length,e=0;e<t;++e)this.onDestroyItem(this.items[e]);this.index=0,this.items=null,this.onRequireItem=null,this.onDestroyItem=null},t}(),e.ObjectPool=n}(alm||(alm={})),function(t){var o,e;o=t.state||(t.state={}),e=function(e){function t(){var t=e.call(this)||this;return t.isLoopEnabled=!0,t.itemCount=0,t.itemIds=null,t.itemIndexById=null,t.onChange=null,t.onPrev=null,t.onNext=null,t}return __extends(t,e),t.prototype.setupById=function(t){this.itemCount=t.length,this.itemIds=t,this.itemIndexById={};for(var e=0;e<this.itemCount;++e)this.itemIndexById[this.itemIds[e]]=e;this.setup()},t.prototype.setupByCount=function(t){this.itemCount=t,this.itemIds=null,this.itemIndexById=null,this.setup()},t.prototype.setup=function(){this.newItemIndex=-1,this.oldItemIndex=-1,this.newItemId=null,this.oldItemId=null},t.prototype.gotoByIndex=function(t,e){return void 0===e&&(e=!0),(t<0||t>=this.itemCount)&&(t=-1),t!=this.newItemIndex&&(this.oldItemIndex=this.newItemIndex,this.newItemIndex=t,this.itemIds&&(this.oldItemId=-1!=this.oldItemIndex?this.itemIds[this.oldItemIndex]:null,this.newItemId=-1!=this.newItemIndex?this.itemIds[this.newItemIndex]:null),this.dispatchPagerEvent(o.SwitcherEvent.CHANGE,this.onChange,e),!0)},t.prototype.gotoById=function(t,e){void 0===e&&(e=!0);var n=this.itemIndexById.hasOwnProperty(t)?this.itemIndexById[t]:-1;return this.gotoByIndex(n,e)},t.prototype.prev=function(t){void 0===t&&(t=!0);var e=this.newItemIndex-1;this.isLoopEnabled&&e<0&&(e=this.itemCount-1);var n=this.gotoByIndex(e,t);return n&&this.dispatchPagerEvent(o.SwitcherEvent.PREV,this.onPrev,t),n},t.prototype.next=function(t){void 0===t&&(t=!0);var e=this.newItemIndex+1;this.isLoopEnabled&&e>=this.itemCount&&(e=0);var n=this.gotoByIndex(e,t);return n&&this.dispatchPagerEvent(o.SwitcherEvent.NEXT,this.onNext,t),n},t.prototype.dispatchPagerEvent=function(t,e,n){this.itemIds&&-1!=this.oldItemIndex&&this.itemIds[this.oldItemIndex],this.itemIds&&-1!=this.newItemIndex&&this.itemIds[this.newItemIndex];var i=new o.SwitcherEvent(t,this,this.newItemIndex,this.oldItemIndex,this.newItemId,this.oldItemId,n);e&&e(i),this.dispatchEvent(i)},t.prototype.getIsLoopEnabled=function(){return this.isLoopEnabled},t.prototype.setIsLoopEnabled=function(t){this.isLoopEnabled=t},t.prototype.getNewItemIndex=function(){return this.newItemIndex},t.prototype.getOldItemIndex=function(){return this.oldItemIndex},t.prototype.getItemCount=function(){return this.itemCount},t.prototype.getNewItemId=function(){return this.newItemId},t.prototype.getOldItemId=function(){return this.oldItemId},t.prototype.getItemIds=function(){return this.itemIds},t}(t.event.EventDispatcher),o.Switcher=e}(alm||(alm={})),function(t){var e,n;e=t.state||(t.state={}),n=function(u){function t(t,e,n,i,o,r,s){var a=u.call(this,t,e)||this;return a.newItemIndex=n,a.oldItemIndex=i,a.newItemId=o,a.oldItemId=r,a.useTransition=s,a}return __extends(t,u),t.prototype.clone=function(){return new t(this.getType(),this.getTarget(),this.newItemIndex,this.oldItemIndex,this.newItemId,this.oldItemId,this.useTransition)},t.prototype.toString=function(){return"[SwitcherEvent] type = "+this.getType()+", "+this.oldItemIndex+" -> "+this.newItemIndex+", transition = "+this.useTransition},t.CHANGE="change",t.PREV="prev",t.NEXT="next",t}(t.event.Event),e.SwitcherEvent=n}(alm||(alm={})),function(t){var e,n;e=t.state||(t.state={}),n=function(){function i(t){void 0===t&&(t=null),t?this.set(t):(this.initValues=this.restValues=null,this.restCount=this.restValues.length,this.isEmpty=!0),this.onCheck=null,this.isAutoResetEnabled=!1}return i.prototype.set=function(t){this.initValues=t.concat(),this.reset()},i.prototype.get=function(){this.isEmpty&&this.isAutoResetEnabled&&this.reset();var t=Math.floor(Math.random()*this.restCount),e=this.restValues[t],n=!0;return this.onCheck&&(n=this.onCheck(e)),n&&(this.restValues.splice(t,1),this.restCount=this.restValues.length,this.isEmpty=0==this.restCount),e},i.prototype.add=function(t,e){void 0===e&&(e=!1),this.initValues.push(t),this.restValues.push(t),this.restCount=this.restValues.length,this.isEmpty=0==this.restCount,e&&this.reset()},i.prototype.reset=function(){this.restValues=this.initValues.concat(),this.restCount=this.restValues.length,this.isEmpty=0==this.restCount},i.prototype.getRestCount=function(){return this.restCount},i.prototype.getIsEmply=function(){return this.isEmpty},i.prototype.getIsAutoResetEnabled=function(){return this.isAutoResetEnabled},i.prototype.setIsAutoResetEnabled=function(t){this.isAutoResetEnabled=t},i.createIndices=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return new i(e)},i}(),e.Lottery=n}(alm||(alm={})),function(t){var e,n;e=t.math||(t.math={}),n=function(){function e(t,e,n){void 0===e&&(e=.1),void 0===n&&(n=0),this.value=this.target=t,this.easing=e,this.tolerance=n}return e.prototype.update=function(t){if(void 0===t&&(t=!0),t){var e=this.target-this.value;0<this.tolerance&&Math.abs(e)<=this.tolerance?this.value=this.target:this.value+=e*this.easing}else this.value=this.target;return this.value},e.prototype.clone=function(){var t=new e(this.value,this.easing,this.tolerance);return t.target=this.target,t},e}(),e.EasingValue=n}(alm||(alm={})),function(t){var e,n;e=t.math||(t.math={}),n=function(){function e(t,e,n){void 0===e&&(e=.1),void 0===n&&(n=.9),this.acceleration=0,this.velocity=0,this.value=this.target=t,this.spring=e,this.friction=n}return e.prototype.update=function(t){return void 0===t&&(t=!0),t?(this.acceleration=(this.target-this.value)*this.spring,this.velocity+=this.acceleration,this.velocity*=this.friction,this.value+=this.velocity):(this.acceleration=0,this.velocity=0,this.value=this.target),this.value},e.prototype.clone=function(){var t=new e(this.value,this.spring,this.friction);return t.acceleration=this.acceleration,t.velocity=this.velocity,t.target=this.target,t},e}(),e.SpringValue=n}(alm||(alm={})),function(t){var e,n;e=t.math||(t.math={}),n=function(){function t(){this.value=this._value=0,this.count=this._count=0}return t.prototype.add=function(t){return this._value=(this._value*this._count+t)/++this._count,this.value=this._value,this.count=this._count,this._value},t}(),e.SimpleAverage=n}(alm||(alm={})),function(t){var e,n;e=t.math||(t.math={}),n=function(){function t(t){this.maxCount=this._maxCount=t,this.value=this._value=0,this.count=this._count=0,this.values=[]}return t.prototype.add=function(t){if(++this._count>this._maxCount){this._count=this._maxCount;var e=this.values.shift();this._value-=e;var n=t/this._maxCount;this._value+=n,this.values.push(n)}else this._value*=this._count-1,this._value+=t,this._value/=this._count,this.values.push(t/this._maxCount);return this.value=this._value,this.count=this._count,this._value},t}(),e.SimpleMovingAverage=n}(alm||(alm={})),function(t){var e,n;e=t.math||(t.math={}),n=function(){function t(t){void 0===t&&(t=0),this.maxLatestCount=this._maxLatestCount=t,this.value=this._value=-Number.MAX_VALUE,this.count=this._count=0,this.values=[]}return t.prototype.add=function(t){if(0<this._maxLatestCount)if(++this._count>this._maxLatestCount){this._count=this._maxLatestCount,this.values.push(t);var e=this.values.shift();if(this._value>e)this._value<t&&(this._value=t);else{this._value=-Number.MAX_VALUE;for(var n=0;n<this._count;++n){var i=this.values[n];this._value<i&&(this._value=i)}}}else this.values.push(t),this._value<t&&(this._value=t);else++this._count,this._value<t&&(this._value=t);return this.value=this._value,this.count=this._count,this._value},t}(),e.MaxValue=n}(alm||(alm={})),function(t){var e,n;e=t.math||(t.math={}),n=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!0),this.setAngle(t,n),this.setVelocity(e,n)}return t.prototype.getAngle=function(t){return void 0===t&&(t=!0),t?this.angle:180*this.angle/Math.PI},t.prototype.setAngle=function(t,e){void 0===e&&(e=!0),this.angle=e?t:t*Math.PI/180},t.prototype.getVelocity=function(t){return void 0===t&&(t=!0),t?this.velocity:180*this.velocity/Math.PI},t.prototype.setVelocity=function(t,e){void 0===e&&(e=!0),this.velocity=e?t:t*Math.PI/180},t.prototype.update=function(){this.angle+=this.velocity},t.prototype.getSin=function(t){return void 0===t&&(t=1),t*Math.sin(this.angle)},t.prototype.getCos=function(t){return void 0===t&&(t=1),t*Math.cos(this.angle)},t.prototype.getTan=function(t){return void 0===t&&(t=1),t*Math.tan(this.angle)},t.prototype.getMagnitude=function(t){return void 0===t&&(t=1),t*(1+Math.sin(this.angle))/2},t.prototype.getVector=function(t,e){if(void 0===t&&(t=1),void 0===e&&(e=null),null==e)return{x:this.getCos(t),y:this.getSin(t)};e.x=this.getCos(t),e.y=this.getSin(t)},t}(),e.Circular=n}(alm||(alm={})),function(t){var o,e;o=t.time||(t.time={}),e=function(i){function t(t,e){void 0===t&&(t=1e3),void 0===e&&(e=0);var n=i.call(this)||this;return n.timerHandler=function(){n.tStartTime=n.getCurrentTime(),++n.elapsedCount;var t=!1;0<n.repeatCount&&n.elapsedCount>=n.repeatCount?(t=!0,n.stop()):n.tInterval!=n.interval&&n.startInterval(n.interval),n.dispatch(o.TimerEvent.TICK),t&&n.dispatch(o.TimerEvent.COMPLETE)},n.interval=t,n.repeatCount=e,n.isRunning=!1,n.tId=-1,n.reset(),n}return __extends(t,i),t.prototype.start=function(){this.isRunning||(this.isRunning=!0,this.tStartTime=this.getCurrentTime(),this.startInterval(-1!=this.tRestTime?this.tRestTime:this.interval))},t.prototype.stop=function(){this.isRunning&&(this.isRunning=!1,this.tRestTime=this.getCurrentTime()-this.tStartTime,this.stopInterval())},t.prototype.reset=function(){this.stop(),this.elapsedCount=0,this.tRestTime=-1},t.prototype.restart=function(){this.reset(),this.start()},t.prototype.getCurrentTime=function(){return(new Date).valueOf()},t.prototype.startInterval=function(t){this.stopInterval(),this.tInterval=t,this.tId=window.setInterval(this.timerHandler,this.tInterval)},t.prototype.stopInterval=function(){-1!=this.tId&&(clearInterval(this.tId),this.tId=-1)},t.prototype.dispatch=function(t){this.dispatchEvent(new o.TimerEvent(t,this,this.elapsedCount,this.repeatCount,this.getRestCount()))},t.prototype.getIsRunning=function(){return this.isRunning},t.prototype.getInterval=function(){return this.interval},t.prototype.setInterval=function(t){this.interval=t},t.prototype.getElapsedTime=function(){return this.getCurrentTime()-this.tStartTime},t.prototype.getRestTime=function(){return this.interval-this.getElapsedTime()},t.prototype.getElapsedCount=function(){return this.elapsedCount},t.prototype.getRepeatCount=function(){return this.repeatCount},t.prototype.setRepeatCount=function(t){this.repeatCount=t},t.prototype.getRestCount=function(){return this.repeatCount-this.elapsedCount},t}(t.event.EventDispatcher),o.Timer=e}(alm||(alm={})),function(t){var e,n;e=t.time||(t.time={}),n=function(s){function t(t,e,n,i,o){void 0===e&&(e=null),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0);var r=s.call(this,t,e)||this;return r.elapsedCount=n,r.repeatCount=i,r.restCount=o,r}return __extends(t,s),t.prototype.clone=function(){return new t(this.getType(),this.getTarget(),this.elapsedCount,this.repeatCount,this.restCount)},t.prototype.toString=function(){return"[TimerEvent] type = "+this.getType()+", elapsedCount = "+this.elapsedCount+", repeatCount="+this.repeatCount+", restCount="+this.restCount},t.TICK="tick",t.COMPLETE="complete",t}(t.event.Event),e.TimerEvent=n}(alm||(alm={})),function(t){var s,e;s=t.io||(t.io={}),e=function(t){function r(){var n=t.call(this)||this;return n.fileLoadCompleteHandler=function(t,e){--n.currentThreadCount,t.isLoading=!1,t.isLoadComplete=!0,t.content=e,t.param.onLoad&&t.param.onLoad(e),n.next()},n.fileLoadErrorHandler=function(t,e){--n.currentThreadCount,t.isLoading=!1,t.isLoadComplete=!0,t.param.onError&&t.param.onError(e),n.next()},n.isLoading_=!1,n.currentCount=0,n.totalCount=0,n.currentThreadCount=0,n.totalThreadCount=3,n.loadingQueries=[],n.loadingQueryIndex=-1,n.queriesByQueryId={},n.queriesByUrl={},n.handlersByType={},n}return __extends(r,t),r.prototype.require=function(t,e,n){return void 0===n&&(n=""),this.addQuery(e,t,{},n)},r.prototype.addQuery=function(t,e,n,i){if(void 0===i&&(i=""),this.queriesByUrl[e])return this.queriesByUrl[e].id;var o=new s.FileQuery;return o.type=t,o.url=e,o.param=n,""!=i?o.id=i:(o.id=String(r.id),++r.id),this.loadingQueries.push(o),this.queriesByQueryId[o.id]=o,(this.queriesByUrl[o.url]=o).id},r.prototype.load=function(){this.isLoading_||(this.isLoading_=!0,this.loadingQueryIndex=-1,this.next())},r.prototype.next=function(){var n=this;this.currentCount=this.loadingQueryIndex+1,this.totalCount=this.loadingQueries.length,0<this.currentCount&&this.dispatchEvent(new s.FileLoaderEvent(s.FileLoaderEvent.PROGRESS,this,this.currentCount/this.totalCount,this.currentCount,this.totalCount));for(var t=function(){if(!(i.loadingQueryIndex+1<i.totalCount))return i.isLoading_=!1,i.loadingQueries=[],i.loadingQueryIndex=-1,i.dispatchEvent(new s.FileLoaderEvent(s.FileLoaderEvent.COMPLETE,i,i.currentCount/i.totalCount,i.currentCount,i.totalCount)),"break";++i.currentThreadCount,++i.loadingQueryIndex;var e=i.loadingQueries[i.loadingQueryIndex];e.isLoading=!0,e.isLoadComplete=!1,trace("[FileLoader] loading... '"+e.url+"' as '"+e.type+"'");var t=i.handlersByType[e.type];t?t.load(e.url,function(t){n.fileLoadCompleteHandler(e,t)},function(t){void 0===t&&(t=""),n.fileLoadErrorHandler(e,t)}):(trace("[FileLoader] handler is not found '"+e.type+"'"),--i.currentThreadCount)},i=this;this.currentThreadCount<this.totalThreadCount;){if("break"===t())break}},r.prototype.addHandler=function(t){this.handlersByType[t.getType()]=t},r.prototype.getQueryByQueryId=function(t){return this.queriesByQueryId[t]},r.prototype.getQueryByUrl=function(t){return this.queriesByUrl[t]},r.prototype.isLoading=function(){return this.isLoading_},r.prototype.getCurrentCount=function(){return this.currentCount},r.prototype.getTotalCount=function(){return this.totalCount},r.prototype.getContentByUrl=function(t){return this.queriesByUrl[t].content},r.prototype.getContentByQueryId=function(t){return this.queriesByQueryId[t].content},r.prototype.getCurrentThreadCount=function(){return this.currentThreadCount},r.prototype.getTotalThreadCount=function(){return this.totalThreadCount},r.id=0,r}(t.event.EventDispatcher),s.FileLoader=e}(alm||(alm={})),function(t){var e,n;e=t.io||(t.io={}),n=function(a){function t(t,e,n,i,o,r){void 0===e&&(e=null),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=null);var s=a.call(this,t,e)||this;return s.progress=n,s.loadedCount=i,s.totalCount=o,s.content=r,s}return __extends(t,a),t.prototype.clone=function(){return new t(this.getType(),this.getTarget(),this.progress,this.loadedCount,this.totalCount,this.content)},t.prototype.toString=function(){return"[FileLoaderEvent] type = "+this.getType()+", progress = "+this.progress+", loadedCount = "+this.loadedCount+", totalCount = "+this.totalCount},t.PROGRESS="progress",t.COMPLETE="complete",t.ERROR="error",t}(t.event.Event),e.FileLoaderEvent=n}(alm||(alm={})),function(t){var e;e=function(){this.isLoading=!1,this.isLoadComplete=!1},(t.io||(t.io={})).FileQuery=e}(alm||(alm={})),function(t){var e,n,r,i;e=t.view||(t.view={}),n=t.event.EventDispatcher,r=t.io.Logger,i=function(i){function o(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var n=i.call(this)||this;return n.id=null!=e?e:String(o.viewCount),n.view=t,n.name="",n.autoHideWithInit=!0,n.isInitializing=!1,n.isInitialized=!1,n.isReadying=!1,n.isReadied=!1,n.isShowing=!1,n.isShown=!0,n.isHiding=!1,o.viewsById[n.id]&&r.warn("view id '"+n.id+"' is duplicate"),o.viewsById[n.id]=n,++o.viewCount,n}return __extends(o,i),o.prototype.initialize=function(){this.isInitializing||this.isInitialized||(this.isInitializing=!0,this.view=this.implInitialize(),this.isInitializing?(throwError(this.name||this,"view is not assigned",!this.view),this.autoHideWithInit&&this.hide(!1),this.isInitializing=!1,this.isInitialized=!0):this.view=null)},o.prototype.ready=function(){this.isReadying||this.isReadied||(this.isReadying=!0,throwError(this.name||this,"ready() must be called after initialize()",!this.isInitialized),this.implReady(),this.isReadying=!1,this.isReadied=!0)},o.prototype.finalize=function(){(this.isInitializing||this.isInitialized)&&(this.implFinalize(),this.isInitializing=!1,this.isInitialized=!1,delete o.viewsById[this.id],o.viewsById[this.id]=null)},o.prototype.show=function(t){void 0===t&&(t=!0),this.isShown||this.getShowCommand(t).execute()},o.prototype.hide=function(t){void 0===t&&(t=!0),this.isShown&&this.getHideCommand(t).execute()},o.prototype.getShowCommand=function(t){var e=this;void 0===t&&(t=!0);var n=new cmd.Serial;return n.addCommand(new cmd.Func(function(){e.isShown||(throwError(e.name||e,"getShowCommand() is must be called after initialize()",e.isInitializing||!e.isInitialized),throwWarn(e.name||e,"getShowCommand() is must be called after ready()",e.isReadying||!e.isReadied),e.isShown=!0,e.isShowing=!0,e.isHiding=!1,e.showCommand&&(e.showCommand.interrupt(),e.showCommand=null),e.hideCommand&&(e.hideCommand.interrupt(),e.hideCommand=null),(e.showCommand=n).insertCommand(e.implShow(e.view,t),new cmd.Func(function(){e.showCommand=null,e.isShowing=!1})))})),n},o.prototype.getHideCommand=function(t){var e=this;void 0===t&&(t=!0);var n=new cmd.Serial;return n.addCommand(new cmd.Func(function(){e.isShown&&(e.isInitializing||(throwError(e.name||e,"getHideCommand() is must be called after initialize()",e.isInitializing||!e.isInitialized),throwWarn(e.name||e,"getHideCommand() is must be called after ready()",e.isReadying||!e.isReadied)),e.isShown=!1,e.isShowing=!1,e.isHiding=!0,e.showCommand&&(e.showCommand.interrupt(),e.showCommand=null),e.hideCommand&&(e.hideCommand.interrupt(),e.hideCommand=null),(e.hideCommand=n).insertCommand(e.implHide(e.view,t),new cmd.Func(function(){e.hideCommand=null,e.isHiding=!1})))})),n},o.prototype.getIsInitializing=function(){return this.isInitializing},o.prototype.getIsInitialized=function(){return this.isInitialized},o.prototype.getIsReadying=function(){return this.isReadying},o.prototype.getIsReadied=function(){return this.isReadied},o.prototype.getIsShowing=function(){return this.isShowing},o.prototype.getIsShown=function(){return this.isShown},o.prototype.getIsHiding=function(){return this.isHiding},o.prototype.getIsHidden=function(){return!this.isShown},o.prototype.getId=function(){return this.id},o.prototype.getView=function(){return this.view},o.prototype.getName=function(){return this.name},o.prototype.setName=function(t){this.name=t},o.prototype.getAutoHideWithInit=function(){return this.autoHideWithInit},o.prototype.setAutoHideWithInit=function(t){this.autoHideWithInit=t},o.getViewById=function(t){return o.viewsById[t]},o.viewCount=0,o.viewsById={},o}(n),e.View=i}(alm||(alm={})),function(t){var e,n;e=t.view||(t.view={}),n=function(){function t(t,e,n,i,o){void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===o&&(o=!0);var r=this;this.mouseOverHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.over(),r.applyMouseCursor()},this.mouseOutHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.out(),r.applyMouseCursor()},this.mouseDownHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.down()},this.mouseUpHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.up()},this.clickHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.click()},this.touchStartHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.down()},this.touchEndHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.up(),r.click()},this.touchCancelHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.up()},this.target=t,this.hitArea=null,this.isHoverCursorEnabled=n,this.isPreventDefaultEnabled=i,this.isStopPropagationEnabled=o,this.isEnabled=!0,this.isOver=!1,this.isDown=!1,this.isOverInternal=!1,this.isDownInternal=!1,this.defaultMouseCursor="",this.setHitArea(e)}return t.prototype.over=function(t){if(void 0===t&&(t=!0),this.isOverInternal=!0,this.isEnabled){if(this.isOver)return;this.isOver=!0,this.target.implButtonOver(t)}},t.prototype.out=function(t){void 0===t&&(t=!0),this._out(!0,t)},t.prototype._out=function(t,e){if(void 0===e&&(e=!0),this.isOverInternal=!1,this.isEnabled||!t){if(!this.isOver)return;this.isOver=!1,this.target.implButtonOut(e)}},t.prototype.down=function(t){if(void 0===t&&(t=!0),this.isDownInternal=!0,this.isEnabled){if(this.isDown)return;this.isDown=!0,this.target.implButtonDown(t)}},t.prototype.up=function(t){void 0===t&&(t=!0),this._up(!0,t)},t.prototype._up=function(t,e){if(void 0===e&&(e=!0),this.isDownInternal=!1,this.isEnabled||!t){if(!this.isDown)return;this.isDown=!1,this.target.implButtonUp(e)}},t.prototype.click=function(t){void 0===t&&(t=!0),this.isEnabled&&this.target.implButtonClick(t)},t.prototype.on=function(){null!=this.hitArea&&(this.hitArea.addEventListener("mouseover",this.mouseOverHandler),this.hitArea.addEventListener("mouseout",this.mouseOutHandler),this.hitArea.addEventListener("mousedown",this.mouseDownHandler),this.hitArea.addEventListener("mouseup",this.mouseUpHandler),this.hitArea.addEventListener("click",this.clickHandler),this.hitArea.addEventListener("touchstart",this.touchStartHandler),this.hitArea.addEventListener("touchend",this.touchEndHandler),this.hitArea.addEventListener("touchcancel",this.touchCancelHandler))},t.prototype.off=function(){null!=this.hitArea&&(this.hitArea.removeEventListener("mouseover",this.mouseOverHandler),this.hitArea.removeEventListener("mouseout",this.mouseOutHandler),this.hitArea.removeEventListener("mousedown",this.mouseDownHandler),this.hitArea.removeEventListener("mouseup",this.mouseUpHandler),this.hitArea.removeEventListener("click",this.clickHandler),this.hitArea.removeEventListener("touchstart",this.touchStartHandler),this.hitArea.removeEventListener("touchend",this.touchEndHandler),this.hitArea.removeEventListener("touchcancel",this.touchCancelHandler))},t.prototype.getIsEnabled=function(){return this.isEnabled},t.prototype.setIsEnabled=function(t,e){void 0===e&&(e=!0),this.isEnabled!=t&&(this.isEnabled=t,this.isEnabled?(this.isOverInternal&&this.over(),this.isDownInternal&&this.down()):(this.isOver&&(this._out(!1),this.isOverInternal=!0),this.isDown&&(this._up(!1),this.isDownInternal=!0)),this.target.implButtonChangeEnabled(this.isEnabled,e))},t.prototype.getIsOver=function(){return this.isOver},t.prototype.getIsDown=function(){return this.isDown},t.prototype.getHitArea=function(){return this.hitArea},t.prototype.setHitArea=function(t){this.hitArea!==t&&(this.off(),this.hitArea=t,this.on())},t.prototype.clearHitArea=function(){this.setHitArea(null)},t.prototype.getIsPreventDefaultEnabled=function(){return this.isPreventDefaultEnabled},t.prototype.setIsPreventDefaultEnabled=function(t){this.isPreventDefaultEnabled=t},t.prototype.getIsStopPropagationEnabled=function(){return this.isStopPropagationEnabled},t.prototype.setIsStopPropagationEnabled=function(t){this.isStopPropagationEnabled=t},t.prototype.getIsHoverCursorEnabled=function(){return this.isHoverCursorEnabled},t.prototype.setIsHoverCursorEnabled=function(t){this.isHoverCursorEnabled=t},t.prototype.applyMouseCursor=function(){this.isHoverCursorEnabled&&(this.isOverInternal&&this.isEnabled&&null!=this.hitArea?(this.defaultMouseCursor=this.hitArea.style.cursor,this.hitArea.style.cursor="pointer"):this.hitArea.style.cursor=""!=this.defaultMouseCursor?this.defaultMouseCursor:"auto")},t}(),e.ButtonBehavior=n}(alm||(alm={})),function(t){var e,n;e=t.view||(t.view={}),n=function(){function t(t){this.target=t}return t.prototype.select=function(t){void 0===t&&(t=!0),this.isSelected||(this.isSelected=!0,this.target.implSelectionChanged(this.isSelected,t))},t.prototype.deselect=function(t){void 0===t&&(t=!0),this.isSelected&&(this.isSelected=!1,this.target.implSelectionChanged(this.isSelected,t))},t.prototype.getIsSelected=function(){return this.isSelected},t}(),e.SelectionBehavior=n}(alm||(alm={})),function(t){var e,n;e=t.browser||(t.browser={}),n=function(){function t(){}return t.initialize=function(){if(!this.isInitialized){this.isInitialized=!0;var t=window.navigator.userAgent.toLowerCase();this.isTablet=-1!=t.indexOf("windows")&&-1!=t.indexOf("touch")||-1!=t.indexOf("ipad")||-1!=t.indexOf("android")&&-1==t.indexOf("mobile")||-1!=t.indexOf("firefox")&&-1!=t.indexOf("tablet")||-1!=t.indexOf("kindle")||-1!=t.indexOf("silk")||-1!=t.indexOf("playbook"),this.isMobile=-1!=t.indexOf("windows")&&-1!=t.indexOf("phone")||-1!=t.indexOf("iphone")||-1!=t.indexOf("ipod")||-1!=t.indexOf("android")&&-1!=t.indexOf("mobile")||-1!=t.indexOf("firefox")&&-1!=t.indexOf("mobile")||-1!=t.indexOf("blackberry"),this.isDesktop=!this.isTablet&&!this.isMobile,this.isIOS=-1!=t.indexOf("ipad")||-1!=t.indexOf("iphone")||-1!=t.indexOf("ipod"),this.isAndroid=-1!=t.indexOf("android")&&-1!=t.indexOf("mobile"),-1!=t.indexOf("msie")||-1!=t.indexOf("trident")?this.isIE=!0:-1!=t.indexOf("edge")?this.isEdge=!0:-1!=t.indexOf("chrome")?this.isChrome=!0:-1!=t.indexOf("safari")?this.isSafari=!0:-1!=t.indexOf("firefox")?this.isFireFox=!0:-1!=t.indexOf("opera")?this.isOpera=!0:this.isUnknownBrowser=!0,this.isTouchEnabled=void 0!==window.ontouchstart,this.isDownloadEnabled=!this.isIOS,this.devicePixelRatio=window.devicePixelRatio,this.isRetina=1<this.devicePixelRatio}},t.getIsDesktop=function(){return this.initialize(),this.isDesktop},t.getIsTablet=function(){return this.initialize(),this.isTablet},t.getIsMobile=function(){return this.initialize(),this.isMobile},t.getIsIOS=function(){return this.initialize(),this.isIOS},t.getIsAndroid=function(){return this.initialize(),this.isAndroid},t.getIsIE=function(){return this.initialize(),this.isIE},t.getIsEdge=function(){return this.initialize(),this.isEdge},t.getIsChrome=function(){return this.initialize(),this.isChrome},t.getIsSafari=function(){return this.initialize(),this.isSafari},t.getIsFireFox=function(){return this.initialize(),this.isFireFox},t.getIsOpera=function(){return this.initialize(),this.isOpera},t.getIsUnknownBrowser=function(){return this.initialize(),this.isUnknownBrowser},t.getIsTouchEnabled=function(){return this.initialize(),this.isTouchEnabled},t.getIsDownloadEnabled=function(){return this.initialize(),this.isDownloadEnabled},t.getIsRetina=function(){return this.initialize(),this.isRetina},t.getDevicePixelRatio=function(){return this.initialize(),this.devicePixelRatio},t.getDpi=function(){if(-1==this.dpi){var t=document.createElement("div");t.setAttribute("style","height:1in;left:-100%;top:-100%;position:absolute;width:1in;"),document.body.appendChild(t),this.dpi=t.offsetHeight,document.body.removeChild(t)}return this.dpi},t.isDesktop=!1,t.isTablet=!1,t.isMobile=!1,t.isIOS=!1,t.isAndroid=!1,t.isIE=!1,t.isEdge=!1,t.isChrome=!1,t.isSafari=!1,t.isFireFox=!1,t.isOpera=!1,t.isUnknownBrowser=!1,t.isTouchEnabled=!1,t.isDownloadEnabled=!1,t.isRetina=!1,t.devicePixelRatio=1,t.dpi=-1,t.isInitialized=!1,t}(),e.DeviceInfo=n}(alm||(alm={})),function(t){var e,n;e=t.browser||(t.browser={}),n=function(){function o(){}return o.save=function(t,e,n){if(void 0===n&&(n=-1),!o.isAvailable())return!1;var i={value:JSON.stringify(e),expiredAt:n};return localStorage.setItem(t,JSON.stringify(i)),!0},o.saveWithTerm=function(t,e,n){void 0===n&&(n=-1);var i=0<n?(new Date).getTime()+n:-1;return o.save(t,e,i)},o.load=function(t,e){if(void 0===e&&(e=null),!o.isAvailable())return e;var n=JSON.parse(localStorage.getItem(t));return n?0<n.expiredAt?(new Date).getTime()<n.expiredAt?JSON.parse(n.value):(localStorage.removeItem(t),e):JSON.parse(n.value):e},o.remove=function(t){o.isAvailable()&&localStorage.removeItem(t)},o.isAvailable=function(){if(null==o.isAvailable_)try{localStorage.setItem("__CKECK__","__CKECK__"),localStorage.removeItem("__CKECK__"),o.isAvailable_=!0}catch(t){o.isAvailable_=!1}return o.isAvailable_},o.toMilliseconds=function(t,e,n,i,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),o+1e3*(i+60*(n+60*(e+24*t)))},o.isAvailable_=null,o}(),e.LocalStorage=n}(alm||(alm={})),function(o){!function(i){var t;(t=i.KeyCode||(i.KeyCode={}))[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Alt=18]="Alt",t[t.PauseBreak=19]="PauseBreak",t[t.CapsLock=20]="CapsLock",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.LeftArrow=37]="LeftArrow",t[t.UpArrow=38]="UpArrow",t[t.RightArrow=39]="RightArrow",t[t.DownArrow=40]="DownArrow",t[t.Insert=45]="Insert",t[t.Delete=46]="Delete",t[t.Key0=48]="Key0",t[t.Key1=49]="Key1",t[t.Key2=50]="Key2",t[t.Key3=51]="Key3",t[t.Key4=52]="Key4",t[t.Key5=53]="Key5",t[t.Key6=54]="Key6",t[t.Key7=55]="Key7",t[t.Key8=56]="Key8",t[t.Key9=57]="Key9",t[t.ClosedParen=48]="ClosedParen",t[t.ExclamationMark=49]="ExclamationMark",t[t.AtSign=50]="AtSign",t[t.PoundSign=51]="PoundSign",t[t.Hash=51]="Hash",t[t.DollarSign=52]="DollarSign",t[t.PercentSign=53]="PercentSign",t[t.Caret=54]="Caret",t[t.Hat=54]="Hat",t[t.Ampersand=55]="Ampersand",t[t.Star=56]="Star",t[t.Asterik=56]="Asterik",t[t.OpenParen=57]="OpenParen",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.LeftWindowKey=91]="LeftWindowKey",t[t.RightWindowKey=92]="RightWindowKey",t[t.SelectKey=93]="SelectKey",t[t.Numpad0=96]="Numpad0",t[t.Numpad1=97]="Numpad1",t[t.Numpad2=98]="Numpad2",t[t.Numpad3=99]="Numpad3",t[t.Numpad4=100]="Numpad4",t[t.Numpad5=101]="Numpad5",t[t.Numpad6=102]="Numpad6",t[t.Numpad7=103]="Numpad7",t[t.Numpad8=104]="Numpad8",t[t.Numpad9=105]="Numpad9",t[t.Multiply=106]="Multiply",t[t.Add=107]="Add",t[t.Subtract=109]="Subtract",t[t.DecimalPoint=110]="DecimalPoint",t[t.Divide=111]="Divide",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.NumLock=144]="NumLock",t[t.ScrollLock=145]="ScrollLock",t[t.SemiColon=186]="SemiColon",t[t.Equals=187]="Equals",t[t.Comma=188]="Comma",t[t.Dash=189]="Dash",t[t.Period=190]="Period",t[t.UnderScore=189]="UnderScore",t[t.PlusSign=187]="PlusSign",t[t.ForwardSlash=191]="ForwardSlash",t[t.Tilde=192]="Tilde",t[t.GraveAccent=192]="GraveAccent",t[t.OpenBracket=219]="OpenBracket",t[t.ClosedBracket=221]="ClosedBracket",t[t.Quote=222]="Quote";var e=function(){function n(){}return n.initialize=function(){this.isInitialized||(this.isInitialized=!0,this.eventDispatcher=new o.event.EventDispatcher)},n.start=function(){this.isRunning||(this.isRunning=!0,this.initialize(),trace("[KeyWatcher] start"),window.addEventListener("keydown",this.windowKeyDownHandler),window.addEventListener("keyup",this.windowKeyUpHandler))},n.stop=function(){this.isRunning&&(this.isRunning=!1,this.initialize(),trace("[KeyWatcher] stop"),window.removeEventListener("keydown",this.windowKeyDownHandler),window.removeEventListener("keyup",this.windowKeyUpHandler))},n.addEventListener=function(t,e){this.initialize(),this.eventDispatcher.addEventListener(t,e)},n.removeEventListener=function(t,e){this.initialize(),this.eventDispatcher.removeEventListener(t,e)},n.getIsRunning=function(){return this.isRunning},n.getIsAnyKeyPressed=function(){return 0<this.pressedKeyCount},n.getIsKeyPressed=function(t){return null!=this.isKeyPressedByKeyCode[t]},n.getIsContinuousPressEnabled=function(){return this.isContinuousPressEnabled},n.setIsContinuousPressEnabled=function(t){this.isContinuousPressEnabled=t},n.windowKeyDownHandler=function(t){var e=t.keyCode;null==n.isKeyPressedByKeyCode[e]?(n.isKeyPressedByKeyCode[e]=!0,++n.pressedKeyCount,n.eventDispatcher.dispatchEvent(new i.KeyWatcherEvent(i.KeyWatcherEvent.KEY_DOWN,n,t))):n.isContinuousPressEnabled&&n.eventDispatcher.dispatchEvent(new i.KeyWatcherEvent(i.KeyWatcherEvent.KEY_DOWN,n,t))},n.windowKeyUpHandler=function(t){var e=t.keyCode;null!=n.isKeyPressedByKeyCode[e]&&(delete n.isKeyPressedByKeyCode[e],--n.pressedKeyCount,n.eventDispatcher.dispatchEvent(new i.KeyWatcherEvent(i.KeyWatcherEvent.KEY_UP,n,t)))},n.isRunning=!1,n.pressedKeyCount=0,n.isKeyPressedByKeyCode={},n.isContinuousPressEnabled=!1,n.isInitialized=!1,n.isLongPressed=!1,n.eventDispatcher=null,n}();i.KeyWatcher=e}(o.browser||(o.browser={}))}(alm||(alm={})),function(t){var e,n;e=t.browser||(t.browser={}),n=function(o){function t(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=o.call(this,t,e)||this;return i.originalEvent=n,i.key=i.originalEvent.key,i.keyCode=i.originalEvent.keyCode,i.altKey=i.originalEvent.altKey,i.ctrlKey=i.originalEvent.ctrlKey,i.shiftKey=i.originalEvent.shiftKey,i}return __extends(t,o),t.prototype.clone=function(){return new t(this.getType(),this.getTarget(),this.originalEvent)},t.prototype.toString=function(){return"[KeyWatcherEvent] type = "+this.getType()+", key = "+this.key+", keyCode = "+this.keyCode+", altKey = "+this.altKey+", ctrlKey = "+this.ctrlKey+", shiftKey = "+this.shiftKey},t.KEY_UP="keyUp",t.KEY_DOWN="keyDown",t}(t.event.Event),e.KeyWatcherEvent=n}(alm||(alm={})),function(t){var n,e;n=t.browser||(t.browser={}),e=function(){function e(){}return e.initialize=function(){this.isInitialized||(this.isInitialized=!0,this.eventDispatcher=new t.event.EventDispatcher)},e.start=function(t){void 0===t&&(t=null),this.isRunning||(this.isRunning=!0,this.initialize(),trace("[WindowWatcher] start"),this.window=t||window,this.window.addEventListener("resize",this.windowResizeHandler),this.window.addEventListener("orientationchange",this.windowResizeHandler),this.window.addEventListener("scroll",this.windowScrollHandler),this.apply())},e.stop=function(){this.isRunning&&(this.isRunning=!1,this.initialize(),trace("[WindowWatcher] stop"),this.window.removeEventListener("resize",this.windowResizeHandler),this.window.removeEventListener("orientationchange",this.windowResizeHandler),this.window.removeEventListener("scroll",this.windowScrollHandler))},e.apply=function(){this.windowWidth=this.window.innerWidth,this.windowHeight=this.window.innerHeight,this.scrollTop=void 0!==this.window.pageYOffset?this.window.pageYOffset:document.documentElement.scrollTop,this.scrollBottom=this.scrollTop+this.windowHeight},e.addEventListener=function(t,e){this.initialize(),this.eventDispatcher.addEventListener(t,e)},e.removeEventListener=function(t,e){this.initialize(),this.eventDispatcher.removeEventListener(t,e)},e.calcScrolledPosition=function(t){return t-this.scrollTop},e.calcScrolledPositionRatio=function(t){return this.calcScrolledPosition(t)/this.windowHeight},e.resize=function(t){e.apply(),e.eventDispatcher.dispatchEvent(new n.WindowWatcherEvent(n.WindowWatcherEvent.RESIZE,e,t,e.scrollTop,e.scrollBottom,e.windowWidth,e.windowHeight))},e.getIsRunning=function(){return this.isRunning},e.getWindow=function(){return this.window},e.getScrollTop=function(){return this.scrollTop},e.getScrollBottom=function(){return this.scrollBottom},e.getWindowWidth=function(){return this.windowWidth},e.getWindowHeight=function(){return this.windowHeight},e.getIsMobileOrientationResize=function(){return this.isMobileOrientationResize},e.setIsMobileOrientationResize=function(t){this.isMobileOrientationResize=t},e.windowResizeHandler=function(t){!n.DeviceInfo.getIsDesktop()&&e.isMobileOrientationResize||(trace("[WindowWatcher] resize by window.resize"),e.resize(t))},e.windowOrientationChangeHandler=function(t){!n.DeviceInfo.getIsDesktop()&&e.isMobileOrientationResize&&(trace("[WindowWatcher] resize by window.orientationchange"),e.resize(t))},e.windowScrollHandler=function(t){e.apply(),e.eventDispatcher.dispatchEvent(new n.WindowWatcherEvent(n.WindowWatcherEvent.SCROLL,e,t,e.scrollTop,e.scrollBottom,e.windowWidth,e.windowHeight))},e.isRunning=!1,e.window=null,e.windowWidth=0,e.windowHeight=0,e.isMobileOrientationResize=!0,e.isInitialized=!1,e.eventDispatcher=null,e}(),n.WindowWatcher=e}(alm||(alm={})),function(t){var e,n;e=t.browser||(t.browser={}),n=function(u){function t(t,e,n,i,o,r,s){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=0);var a=u.call(this,t,e)||this;return a.originalEvent=n,a.scrollTop=i,a.scrollBottom=o,a.windowWidth=r,a.windowHeight=s,a}return __extends(t,u),t.prototype.clone=function(){return new t(this.getType(),this.getTarget(),this.originalEvent,this.scrollTop,this.scrollBottom,this.windowWidth,this.windowHeight)},t.prototype.toString=function(){return"[WindowWatcherEvent] type = "+this.getType()+", scrollTop = "+this.scrollTop+", scrollBottom = "+this.scrollBottom+", windowWidth = "+this.windowWidth+", windowHeight = "+this.windowHeight},t.SCROLL="scroll",t.RESIZE="resize",t}(t.event.Event),e.WindowWatcherEvent=n}(alm||(alm={})),function(i){var o=alm.io.Logger,t=function(n){function t(t){var e=n.call(this)||this;return e.name=t,e.state=i.SceneState.Idling,e.parent=null,e.childrenByName={},e.numChildren=0,e.isEntered=!1,e.onLoad=null,e.onUnload=null,e.onArrive=null,e.onLeave=null,e.onAscend=null,e.onDescend=null,e}return __extends(t,n),t.prototype.addChild=function(t){if(t){var e=t.name;if(!this.childrenByName[e])return++this.numChildren,(t.parent=this).childrenByName[e]=t;o.warn("[Scene '"+this.name+"'] addChild was failed, because child name '"+e+"' is already contained.")}else o.warn("[Scene '"+this.name+"'] addChild was failed, because child is null.");return null},t.prototype.removeChild=function(t){if(t){var e=t.name;if(this.childrenByName[e])return--this.numChildren,t.parent=null,delete this.childrenByName[e],t;o.warn("[Scene '"+this.name+"'] removeChild was failed, because child name '"+e+"' is not contained.")}else o.warn("[Scene '"+this.name+"'] removeChild was failed, because child is null.");return null},t.prototype.addChildren=function(t){for(var e,n=[],i=t.length,o=0;o<i;++o)(e=this.addChild(t[o]))&&n.push(e);return n},t.prototype.removeChildren=function(t){for(var e,n=[],i=t.length,o=0;o<i;++o)(e=this.removeChild(t[o]))&&n.push(e);return n},t.prototype.removeAllChildren=function(){var t,e=[];for(var n in this.childrenByName)(t=this.childrenByName[n]).parent=null,e.push(t);return this.childrenByName={},this.numChildren=0,e},t.prototype.contains=function(t){return!!t&&null!=this.childrenByName["string"==typeof t?t:t.name]},t.prototype.getName=function(){return this.name},t.prototype.getState=function(){return this.state},t.prototype.getLastState=function(){return this.lastState},t.prototype.getParent=function(){return this.parent},t.prototype.getChildByName=function(t){return this.childrenByName[t]},t.prototype.getNumChildren=function(){return this.numChildren},t.prototype.getManager=function(){return this.parent?this.parent.getManager():(o.warn("[Scene '"+this.name+"'] getManager was failed, check whether if scene is connected to root."),null)},t.prototype.getPath=function(){var t=this.getManager();if(t){for(var e=[this.name],n=this;n=n.parent;)e.unshift(n.name);return t.getScenePathByNames(e)}return o.warn("[Scene '"+this.name+"'] getPath was failed, check whether if scene is connected to root."),null},t.prototype.gotoScene=function(t){this.getManager().goto(t)},t.prototype._load=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Loading,this.isEntered=!0;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.LOAD,e));var t="function"==typeof e.onLoad?e.onLoad():e.implOnLoad();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.LOAD_COMPLETE,e))});n.execute()},t.prototype._unload=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Unloading,this.isEntered=!1;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.UNLOAD,e));var t="function"==typeof e.onUnload?e.onUnload():e.implOnUnload();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.UNLOAD_COMPLETE,e))});n.execute()},t.prototype._arrive=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Arriving,this.isEntered=!0;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.ARRIVE,e));var t="function"==typeof e.onArrive?e.onArrive():e.implOnArrive();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.ARRIVE_COMPLETE,e))});n.execute()},t.prototype._leave=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Leaving,this.isEntered=!1;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.LEAVE,e));var t="function"==typeof e.onLeave?e.onLeave():e.implOnLeave();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.LEAVE_COMPLETE,e))});n.execute()},t.prototype._ascend=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Ascending,this.isEntered=!0;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.ASCEND,e));var t="function"==typeof e.onAscend?e.onAscend():e.implOnAscend();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.ASCEND_COMPLETE,e))});n.execute()},t.prototype._descend=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Descending,this.isEntered=!1;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.DESCEND,e));var t="function"==typeof e.onDescend?e.onDescend():e.implOnDescend();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.DESCEND_COMPLETE,e))});n.execute()},t.prototype.implOnLoad=function(){return new cmd.Command},t.prototype.implOnUnload=function(){return new cmd.Command},t.prototype.implOnArrive=function(){return new cmd.Command},t.prototype.implOnLeave=function(){return new cmd.Command},t.prototype.implOnAscend=function(){return new cmd.Command},t.prototype.implOnDescend=function(){return new cmd.Command},t}(alm.event.EventDispatcher);i.Scene=t}(scn||(scn={})),function(t){var e=function(n){function t(t,e){return void 0===e&&(e=null),n.call(this,t,e)||this}return __extends(t,n),t.prototype.clone=function(){return new t(this.getType(),this.getTarget())},t.prototype.toString=function(){return"[SceneEvent] type = "+this.getType()},t.LOAD="load",t.UNLOAD="unload",t.ARRIVE="arrive",t.LEAVE="leave",t.ASCEND="ascend",t.DESCEND="descend",t.LOAD_COMPLETE="loadComplete",t.UNLOAD_COMPLETE="unloadComplete",t.ARRIVE_COMPLETE="arriveComplete",t.LEAVE_COMPLETE="leaveComplete",t.ASCEND_COMPLETE="ascendComplete",t.DESCEND_COMPLETE="descendComplete",t}(alm.event.Event);t.SceneEvent=e}(scn||(scn={})),function(m){var v=alm.io.Logger,g=alm.io.LoggerLevel,t=function(n){function t(t){void 0===t&&(t="");var e=n.call(this)||this;return e.sceneLoadCompleteHandler=function(t){e.currentScene.removeEventListener(m.SceneEvent.LOAD_COMPLETE,e.sceneLoadCompleteHandler),e.lastState=m.SceneState.Loading,++e.eventIndex,e.checkState()},e.sceneUnloadCompleteHandler=function(t){e.currentScene.removeEventListener(m.SceneEvent.UNLOAD_COMPLETE,e.sceneUnloadCompleteHandler),e.lastState=m.SceneState.Unloading,++e.eventIndex,e.checkState()},e.sceneArriveCompleteHandler=function(t){e.currentScene.removeEventListener(m.SceneEvent.ARRIVE_COMPLETE,e.sceneArriveCompleteHandler),e.lastState=m.SceneState.Arriving,++e.eventIndex,e.checkState()},e.sceneLeaveCompleteHandler=function(t){e.currentScene.removeEventListener(m.SceneEvent.LEAVE_COMPLETE,e.sceneLeaveCompleteHandler),e.lastState=m.SceneState.Leaving,++e.eventIndex,e.checkState()},e.sceneAscendCompleteHandler=function(t){e.currentScene.removeEventListener(m.SceneEvent.ASCEND_COMPLETE,e.sceneAscendCompleteHandler),e.lastState=m.SceneState.Ascending,++e.eventIndex,e.checkState()},e.sceneDescendCompleteHandler=function(t){e.currentScene.removeEventListener(m.SceneEvent.DESCEND_COMPLETE,e.sceneDescendCompleteHandler),e.lastState=m.SceneState.Descending,++e.eventIndex,e.checkState()},e.name=t,e.root=new m.core.RootScene(e),e.currentScene=null,e.waypoints=[],e.waypointIndex=-1,e.lastState=m.SceneState.Idling,e.eventIndex=-1,e.transferId=-1,e.transferInfo=null,e}return __extends(t,n),t.prototype.start=function(){v.verbose("----- scene manager start -----"),this.goto("/")},t.prototype.goto=function(t){if(t=this.resolvePath(t),!this.transferInfo||this.transferInfo.getDestinationPath()!=t){var e=[];if(0<(e=-1!=this.waypointIndex?this.createWaypoints(this.waypoints[this.waypointIndex].getPath(),t):[new m.core.Waypoint("/",0)]).length){var n=null!=this.transferInfo;n?(v.verbose("destination is changed"),v.verbose("waypoint index : "+this.waypointIndex),this.waypoints=this.waypoints.slice(0,this.waypointIndex+1).concat(e.slice(1)),this.setDirection(this.waypoints),this.printWaypoint(this.waypoints)):(this.waypointIndex=0,this.eventIndex=0,++this.transferId,this.waypoints=e),this.transferInfo=new m.SceneTransferInfo(this.transferId,this.waypoints[this.waypointIndex].getPath(),this.waypoints[this.waypoints.length-1].getPath()),n||this.dispatchEvent(new m.SceneManagerEvent(m.SceneManagerEvent.TRANSFER_START,this)),this.checkState()}}},t.prototype.resolvePath=function(t){"/"!=t[0]&&(t=this.currentScene?this.currentScene.getPath()+"/"+t:"/"+t);for(var e=t.split("/"),n=[],i=0;i<e.length;++i){var o=e[i];""!=o&&("."!=o&&(".."!=o?n.push(o):n.pop()))}return"/"+n.join("/")},t.prototype.addSceneAt=function(t,e){void 0===e&&(e=!1);for(var n=!1,i=this.getSceneNamesByPath(t),o=i.length,r=this.root,s=1;s<o;++s){var a=i[s];s==o-1?r.contains(a)?v.warn("[SceneManager '"+this.name+"'] addSceneAt was failed, because path '"+t+"' is already exist."):(r=r.addChild(new m.Scene(a)),n=!0):r=r.contains(a)?r.getChildByName(a):r.addChild(new m.Scene(a))}return n?r:null},t.prototype.getName=function(){return this.name},t.prototype.getRoot=function(){return this.root},t.prototype.getSceneByPath=function(t){for(var e=this.getSceneNamesByPath(t),n=e.length,i=this.root,o=1;o<n;++o)i=i.getChildByName(e[o]);return i},t.prototype.getSceneNamesByPath=function(t){return"/"==t?[""]:this.resolvePath(t).split("/")},t.prototype.getSceneLevelByNames=function(t){return t.length-1},t.prototype.getScenePathByNames=function(t){return 0==t.length?"/":1==t.length?"/"+t[0]:t.join("/")},t.prototype.createWaypoints=function(t,e){if(t==e)return v.warn("[SceneManager] departure path and destination path is same, path = '"+t+"'"),[];v.verbose("----- scene flow -----");var n=[new m.core.Waypoint(t,this.getSceneLevelByNames(this.getSceneNamesByPath(t)))],i=this.getSceneNamesByPath(t),o=this.getSceneNamesByPath(e);v.verbose("    path"),v.verbose("        current    : '"+t+"'"),v.verbose("        destination: '"+e+"'"),v.verbose("    names"),v.verbose("        current("+i.length+")    : '"+i+"'"),v.verbose("        destination("+o.length+"): '"+o+"'");var r,s=0,a=[];if("/"==e)s=-1,a=[],r="/";else{for(;;){if(i[s]!=o[s]){--s;break}a.push(i[s]),++s}r=this.getScenePathByNames(a)}v.verbose("    turning"),v.verbose("        path     : "+r),v.verbose("        level    : "+s),v.verbose("        names("+a.length+") : '"+a+"'");for(var u=i.concat(),h=t,c=i.length-1;s+1<c;--c){if(u.pop(),(p=this.getScenePathByNames(u))!=h){var l=this.getSceneLevelByNames(u);n.push(new m.core.Waypoint(p,l)),h=p}}if(r==e&&0<s){s==n[n.length-1].getLevel()?m.core.Direction.Sibling:m.core.Direction.Ascend;n.push(new m.core.Waypoint(r,s))}else{u=a.concat();var d=n[n.length-1];for(h=d.getPath(),d.getLevel(),c=s+1;c<o.length;++c){var p,f=o[c];if(u.push(f),(p=this.getScenePathByNames(u))!=h){l=this.getSceneLevelByNames(u);n.push(new m.core.Waypoint(p,l)),l,h=p}}}return this.setDirection(n),v.level<=g.Verbose&&this.printWaypoint(n),n},t.prototype.setDirection=function(t){for(var e,n=t.length,i=null,o=0;o<n;++o){if(e=t[o],0<o){var r=e.getLevel()-i.getLevel();e._setFrom(0<r?m.core.Direction.Descend:r<0?m.core.Direction.Ascend:m.core.Direction.Sibling),i._setTo(e.getFrom())}i=e}},t.prototype.printWaypoint=function(t){v.verbose("    waypoints");for(var e=t.length,n=0;n<e;++n)v.verbose("        ["+n+"] "+t[n]);v.verbose("")},t.prototype.checkState=function(){if(trace("lastState : "+m.getSceneStateString(this.lastState)),this.waypointIndex>=this.waypoints.length){v.verbose("----- scene transfer complete -----");var t=this.transferInfo.getTransferId();return this.waypointIndex=this.waypoints.length-1,this.dispatchEvent(new m.SceneManagerEvent(m.SceneManagerEvent.TRANSFER_COMPLETE,this)),void(t==this.transferInfo.getTransferId()&&(this.lastState=m.SceneState.Idling,this.transferInfo=null))}if(this.currentScene){var e=this.waypoints[this.waypointIndex];if(this.currentScene=this.getSceneByPath(e.getPath()),1<this.waypoints.length&&0==this.waypointIndex)return trace("Departure scene"),this.lastState!=m.SceneState.Leaving&&this.currentScene.getLastState()==m.SceneState.Arriving?(v.verbose(this.eventIndex+" Leave   : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(m.SceneEvent.LEAVE_COMPLETE,this.sceneLeaveCompleteHandler),void this.currentScene._leave(this.transferInfo)):this.lastState==m.SceneState.Unloading||e.getTo()!=m.core.Direction.Sibling&&e.getTo()!=m.core.Direction.Ascend?(++this.waypointIndex,void this.checkState()):(++this.waypointIndex,v.verbose(this.eventIndex+" Unload  : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(m.SceneEvent.UNLOAD_COMPLETE,this.sceneUnloadCompleteHandler),void this.currentScene._unload(this.transferInfo));if(0<this.waypointIndex&&this.waypointIndex<this.waypoints.length-1){if(trace("Through scene"),this.lastState!=m.SceneState.Loading&&(e.getFrom()==m.core.Direction.Sibling||e.getFrom()==m.core.Direction.Descend))return v.verbose(this.eventIndex+" Load    : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(m.SceneEvent.LOAD_COMPLETE,this.sceneLoadCompleteHandler),void this.currentScene._load(this.transferInfo);if(this.lastState!=m.SceneState.Ascending&&e.getFrom()==m.core.Direction.Ascend)return v.verbose(this.eventIndex+" Ascend  : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(m.SceneEvent.ASCEND_COMPLETE,this.sceneAscendCompleteHandler),void this.currentScene._ascend(this.transferInfo);if(this.lastState!=m.SceneState.Unloading&&(e.getTo()==m.core.Direction.Sibling||e.getTo()==m.core.Direction.Ascend))return++this.waypointIndex,v.verbose(this.eventIndex+" Unload  : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(m.SceneEvent.UNLOAD_COMPLETE,this.sceneUnloadCompleteHandler),void this.currentScene._unload(this.transferInfo);if(this.lastState!=m.SceneState.Descending&&e.getTo()==m.core.Direction.Descend)return++this.waypointIndex,v.verbose(this.eventIndex+" Descend : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(m.SceneEvent.DESCEND_COMPLETE,this.sceneDescendCompleteHandler),void this.currentScene._descend(this.transferInfo)}if(this.waypointIndex==this.waypoints.length-1){if(trace("Destination scene"),this.lastState!=m.SceneState.Loading&&(e.getFrom()==m.core.Direction.Sibling||e.getFrom()==m.core.Direction.Descend))return v.verbose(this.eventIndex+" Load    : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(m.SceneEvent.LOAD_COMPLETE,this.sceneLoadCompleteHandler),void this.currentScene._load(this.transferInfo);if(this.lastState!=m.SceneState.Arriving)return++this.waypointIndex,v.verbose(this.eventIndex+" Arrive  : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(m.SceneEvent.ARRIVE_COMPLETE,this.sceneArriveCompleteHandler),void this.currentScene._arrive(this.transferInfo)}}else trace("Init scene"),this.lastState=m.SceneState.Idling,this.currentScene=this.root,v.verbose(this.eventIndex+" Load    : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(m.SceneEvent.LOAD_COMPLETE,this.sceneLoadCompleteHandler),this.currentScene._load(this.transferInfo)},t}(alm.event.EventDispatcher);m.SceneManager=t}(scn||(scn={})),function(t){var e=function(n){function t(t,e){return void 0===e&&(e=null),n.call(this,t,e)||this}return __extends(t,n),t.prototype.clone=function(){return new t(this.getType(),this.getTarget())},t.prototype.toString=function(){return"[SceneManagerEvent] type = "+this.getType()},t.TRANSFER_START="transferStart",t.TRANSFER_COMPLETE="transferComplete",t}(alm.event.Event);t.SceneManagerEvent=e}(scn||(scn={})),function(t){var e=function(){function t(t,e,n){this.transferId=t,this.departurePath=e,this.destinationPath=n,this.relay=null}return t.prototype.getTransferId=function(){return this.transferId},t.prototype.getDeparturePath=function(){return this.departurePath},t.prototype.getDestinationPath=function(){return this.destinationPath},t}();t.SceneTransferInfo=e}(scn||(scn={})),function(t){var e,n;(n=e=t.SceneState||(t.SceneState={}))[n.Idling=0]="Idling",n[n.Loading=1]="Loading",n[n.Unloading=2]="Unloading",n[n.Arriving=3]="Arriving",n[n.Leaving=4]="Leaving",n[n.Ascending=5]="Ascending",n[n.Descending=6]="Descending",t.getSceneStateString=function(t){switch(t){case e.Idling:return"idling";case e.Loading:return"loading";case e.Unloading:return"unloading";case e.Arriving:return"arriving";case e.Leaving:return"leaving";case e.Ascending:return"ascending";case e.Descending:return"descending"}return""}}(scn||(scn={})),function(t){var e,n,i;e=t.core||(t.core={}),(i=n=e.Direction||(e.Direction={}))[i.Static=0]="Static",i[i.Sibling=1]="Sibling",i[i.Ascend=2]="Ascend",i[i.Descend=3]="Descend",e.getDirectionString=function(t){switch(t){case n.Static:return"static";case n.Sibling:return"sibling";case n.Ascend:return"ascend";case n.Descend:return"descend"}return""}}(scn||(scn={})),function(t){var e,n;e=t.core||(t.core={}),n=function(n){function t(t){var e=n.call(this,"")||this;return e.manager=t,e}return __extends(t,n),t.prototype.getManager=function(){return this.manager},t}(t.Scene),e.RootScene=n}(scn||(scn={})),function(t){var n,e;n=t.core||(t.core={}),e=function(){function t(t,e){this.path=t,this.level=e,this.from=n.Direction.Static,this.to=n.Direction.Static}return t.prototype.getPath=function(){return this.path},t.prototype.getLevel=function(){return this.level},t.prototype.getFrom=function(){return this.from},t.prototype.getTo=function(){return this.to},t.prototype._setFrom=function(t){this.from=t},t.prototype._setTo=function(t){this.to=t},t.prototype.toString=function(){return"[Waypoint] path = '"+this.path+"', level = "+this.level+", from = "+n.getDirectionString(this.from)+", to = "+n.getDirectionString(this.to)},t}(),n.Waypoint=e}(scn||(scn={})),function(t){function e(){return"0.0.1"}(alm||(alm={})).getVersion=e;var n="color:#999;",i=console.debug;i("%c+ + + + + + + + + + + + + + + + + + + + + + + + + +",n),i("%c+ alumican.js",n),i("%c+ version 0.0.1",n),i("%c+ http://alumican.net",n),i("%c+ https://github.com/alumican/alumican.js",n),i("%c+ + + + + + + + + + + + + + + + + + + + + + + + + +",n),i("")}();
//# sourceMappingURL=alumican.min.js.map

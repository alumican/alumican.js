var cmd,scn,alm,__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),__spreadArray=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||((i=i||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};function trace(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];alm.debug.Logger.info.apply(trace.caller,arguments)}function throwWarn(t,e,n){void 0===n&&(n=!0),alm.debug.Logger.warnIf.apply(null,arguments)}function throwError(t,e,n){void 0===n&&(n=!0),alm.debug.Logger.errorIf.apply(null,arguments)}!function(t){function e(){}t=t.util||(t.util={}),e.now=function(){return(window.performance||Date).now()},t.Time=e}(alm=alm||{}),function(t){function e(){}t=t.math||(t.math={}),e.linear=function(t){return t},e.easeInQuad=function(t){return(t/=1)*t},e.easeOutQuad=function(t){return-(t/=1)*(t-2)},e.easeInOutQuad=function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},e.easeInCubic=function(t){return(t/=1)*t*t},e.easeOutCubic=function(t){return(t-=1)*t*t+1},e.easeInOutCubic=function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},e.easeInQuart=function(t){return(t/=1)*t*t*t},e.easeOutQuart=function(t){return-((t-=1)*t*t*t-1)},e.easeInOutQuart=function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},e.easeInQuint=function(t){return(t/=1)*t*t*t*t},e.easeOutQuint=function(t){return(t-=1)*t*t*t*t+1},e.easeInOutQuint=function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},e.easeInSine=function(t){return 1-Math.cos(t*(Math.PI/2))},e.easeOutSine=function(t){return Math.sin(t*(Math.PI/2))},e.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.easeInExpo=function(t){return 0==t?0:Math.pow(2,10*(t-1))},e.easeOutExpo=function(t){return 1==t?1:1-Math.pow(2,-10*t)},e.easeInOutExpo=function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},e.easeInCirc=function(t){return-(Math.sqrt(1-(t/=1)*t)-1)},e.easeOutCirc=function(t){return Math.sqrt(1-(t-=1)*t)},e.easeInOutCirc=function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.createEaseInElastic=function(i){return void 0===i&&(i=1.70158),function(t){var e=0,n=1;return 0==t?0:1==(t/=1)?1:(0==e&&(e=.3),i=n<1?(n=1,e/4):e/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*--t)*Math.sin((t-i)*(2*Math.PI)/e))}},e.createEaseOutElastic=function(i){return void 0===i&&(i=1.70158),function(t){var e=0,n=1;return 0==t?0:1==(t/=1)?1:(0==e&&(e=.3),i=n<1?(n=1,e/4):e/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/e)+1)}},e.createEaseInOutElastic=function(i){return void 0===i&&(i=1.70158),function(t){var e=0,n=1;return 0==t?0:2==(t/=.5)?1:(0==e&&(e=.3*1.5),i=n<1?(n=1,e/4):e/(2*Math.PI)*Math.asin(1/n),t<1?-.5*n*Math.pow(2,10*--t)*Math.sin((t-i)*(2*Math.PI)/e):n*Math.pow(2,-10*--t)*Math.sin((t-i)*(2*Math.PI)/e)*.5+1)}},e.easeInElastic=function(t){return e.defaultEaseInElastic(t)},e.easeOutElastic=function(t){return e.defaultEaseOutElastic(t)},e.easeInOutElastic=function(t){return e.defaultEaseInOutElastic(t)},e.createEaseInBack=function(e){return void 0===e&&(e=1.70158),function(t){return(t/=1)*t*((e+1)*t-e)}},e.createEaseOutBack=function(e){return void 0===e&&(e=1.70158),function(t){return(t-=1)*t*((e+1)*t+e)+1}},e.createEaseInOutBack=function(e){return void 0===e&&(e=1.70158),function(t){return(t/=.5)<1?.5*t*t*((1+(e*=1.525))*t-e):.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)}},e.easeInBack=function(t){return e.defaultEaseInElastic(t)},e.easeOutBack=function(t){return e.defaultEaseOutBack(t)},e.easeInOutBack=function(t){return e.defaultEaseInOutBack(t)},e.easeInBounce=function(t){return 1-e.easeOutBounce(1-t)},e.easeOutBounce=function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.easeInOutBounce=function(t){return t<.5?.5*e.easeInBounce(2*t):.5*e.easeOutBounce(2*t-1)+.5},e.defaultEaseInElastic=e.createEaseInElastic(),e.defaultEaseOutElastic=e.createEaseOutElastic(),e.defaultEaseInOutElastic=e.createEaseInOutElastic(),e.defaultEaseInBack=e.createEaseInBack(),e.defaultEaseOutBack=e.createEaseOutBack(),e.defaultEaseInOutBack=e.createEaseInOutBack(),t.Easing=e}(alm=alm||{}),function(t){function n(t){this.set(t=void 0===t?"":t)}t=t.browser||(t.browser={}),n.prototype.set=function(t){var e,n="";""!=(t=void 0===t?"":t)?-1!=(e=t.indexOf("?"))&&(n=t.substring(e)):n=location.search,this.hash={};for(var i,o=n.substring(1).split("&"),r=0;o[r];++r)i=o[r].split("="),this.hash[i[0]]=i[1]},n.prototype.getString=function(t,e){t=this.hash[t];return void 0===t?e:t},n.prototype.getInt=function(t,e){t=parseInt(this.hash[t]);return isNaN(t)?e:t},n.prototype.getFloat=function(t,e){t=parseFloat(this.hash[t]);return isNaN(t)?e:t},n.prototype.getBool=function(t,e){t=this.hash[t];return void 0===t?e:1==t},n.prototype.getHash=function(){return this.hash},n.prototype.setHash=function(t){this.hash=t},n.prototype.setParam=function(t,e){this.hash[t]=e},n.prototype.removeParam=function(t){delete this.hash[t]},n.prototype.hasParam=function(t){return void 0!==this.hash[t]},n.getReplacedQueryStringUrl=function(t,e,n){var i=new RegExp("([?&])"+e+"=.*?(&|$)","i"),o=-1!==t.indexOf("?")?"&":"?";return t.match(i)?t.replace(i,"$1"+e+"="+n+"$2"):t+o+e+"="+n},n.replaceQueryString=function(t,e){e=n.getReplacedQueryStringUrl(window.location.href,t,e).match(/^https?:\/{2,}.*?(\/.*)/)[1];window.history.replaceState(null,null,e)},t.QueryString=n}(alm=alm||{}),function(c){!function(t){var i,e=c.browser.QueryString;(r=i=t.LoggerLevel||(t.LoggerLevel={}))[r.Verbose=0]="Verbose",r[r.Info=1]="Info",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Silent=4]="Silent";var n=(o.prototype.verbose=function(t,e){},o.prototype.info=function(t,e){},o.prototype.warn=function(t,e){},o.prototype.error=function(t,e){},o);function o(){}t.NullLogging=n;var r=(s.prototype.verbose=function(t,e){console.debug.apply(console,Array.prototype.slice.call([t].concat(e)))},s.prototype.info=function(t,e){console.log.apply(console,Array.prototype.slice.call([t].concat(e)))},s.prototype.warn=function(t,e){console.warn.apply(console,Array.prototype.slice.call([t].concat(e)))},s.prototype.error=function(t,e){console.error.apply(console,Array.prototype.slice.call([t].concat(e)))},s);function s(){}t.ConsoleLogging=r;a.prototype.verbose=function(t,e){this.print(t,e)},a.prototype.info=function(t,e){this.print(t,e)},a.prototype.warn=function(t,e){this.print(t,e)},a.prototype.error=function(t,e){this.print(t,e)},a.prototype.print=function(t,e){e=t+e.join(", ");this.html?this.dom.innerHTML=e+"<br>\n"+this.dom.innerHTML:this.dom.innerText=e+"\n"+this.dom.innerText},n=a;function a(t,e){this.dom=t,this.html=e}t.DOMLogging=n;u.prototype.verbose=function(t,e){for(var n=this.loggers.length,i=0;i<n;++i)this.loggers[i].verbose(t,e)},u.prototype.info=function(t,e){for(var n=this.loggers.length,i=0;i<n;++i)this.loggers[i].info(t,e)},u.prototype.warn=function(t,e){for(var n=this.loggers.length,i=0;i<n;++i)this.loggers[i].warn(t,e)},u.prototype.error=function(t,e){for(var n=this.loggers.length,i=0;i<n;++i)this.loggers[i].error(t,e)},n=u;function u(t){this.loggers=t}t.ParallelLogging=n;h.setLevelByQuery=function(t){t=(new e).getInt(t,i.Silent);h.level=isNaN(t)?i.Silent:t},h.setNamespace=function(t){h.namespace=""!=t?t+"#":""},h.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.level<=i.Verbose&&h.logger.verbose("["+h.namespace+"Verbose] ",t)},h.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.level<=i.Info&&h.logger.info("["+h.namespace+"Info   ] ",t)},h.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.level<=i.Warn&&h.logger.warn("["+h.namespace+"Warn   ] ",t)},h.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.level<=i.Error&&h.logger.error("["+h.namespace+"Error  ] ",t)},h.warnIf=function(t,e,n){void 0===n&&(n=!0),h.level<=i.Warn&&n&&h.logger.warn("["+h.namespace+"Warn   ] ",[e+" : "+t])},h.errorIf=function(t,e,n){void 0===n&&(n=!0),h.level<=i.Error&&n&&h.logger.error("["+h.namespace+"Error  ] ",[e+" : "+t])},h.stackTrace=function(){console.trace()},h.level=i.Verbose,h.logger=new r,h.namespace="",r=h;function h(){}t.Logger=r}(c.debug||(c.debug={}))}(alm=alm||{}),function(t){var e,n;function i(){this.reset()}e=t.debug||(t.debug={}),n=t.util.Time,i.prototype.reset=function(){this.frameRate=0,this.frameCount=0,this.startTime=n.now(),this.actualFrameRate=-1,this.dummyFrameRate=-1},i.prototype.update=function(){++this.frameCount;var t=n.now(),e=t-this.startTime;1e3<=e&&(this.actualFrameRate=1e3*this.frameCount/e,this.frameCount=0,this.startTime=t,this.dummyFrameRate<0&&(this.frameRate=this.actualFrameRate))},i.prototype.setDummyFrameRate=function(t){this.dummyFrameRate=t,this.frameRate=this.dummyFrameRate},i.prototype.clearDummyFrameRate=function(){this.dummyFrameRate=-1,this.frameRate=this.actualFrameRate},i.prototype.getFrameRate=function(){return this.frameRate},e.FpsMonitor=i}(alm=alm||{}),function(t){function e(t,e,n){void 0===n&&(n=null),this.type=t,this.target=e,this.data=n}(t.event||(t.event={})).Event=e}(alm=alm||{}),function(t){var i,r;function e(t){this.target=(t=void 0===t?null:t)||this,this.listeners={}}i=t.event||(t.event={}),r=t.debug.Logger,e.prototype.addEventListener=function(t,e){if("function"==typeof e){var n=this.listeners[t];if(n){for(var i=n.length,o=0;o<i;++o)if(e==n[o])return}else this.listeners[t]=n=[];n.push(e)}else r.warn("[EventDispatcher] addEventListener : listener is not function, eventType = '"+t+"', listener = "+e)},e.prototype.removeEventListener=function(t,e){if("function"==typeof e){var n=this.listeners[t];if(n){for(var i=n.length,o=0;o<i;++o)if(e==n[o]){n.splice(o,1);break}0==n.length&&delete this.listeners[t]}}else r.warn("[EventDispatcher] removeEventListener : listener is not function, eventType = '"+t+"', listener = "+e)},e.prototype.removeAllEventListener=function(t){(t=void 0===t?null:t)?delete this.listeners[t]:this.listeners={}},e.prototype.hasEventListener=function(t){return null!=this.listeners[t]},e.prototype.dispatchEvent=function(t){var e=this.listeners[t.type];if(e)for(var n=e.length,i=0;i<n;++i)e[i].call(this.target,t)},e.prototype.dispatchEventType=function(t,e,n){this.dispatchEvent(new i.Event(t,e=void 0===e?null:e,n=void 0===n?null:n))},i.EventDispatcher=e}(alm=alm||{}),function(t){(t=t.CommandState||(t.CommandState={}))[t.Sleeping=0]="Sleeping",t[t.Executing=1]="Executing",t[t.Interrupting=2]="Interrupting"}(cmd=cmd||{}),function(t){var n,e=alm.event.Event,e=(__extends(i,n=e),i.prototype.clone=function(){return new i(this.type,this.target)},i.prototype.toString=function(){return"[CommandEvent] type = "+this.type},i.COMPLETE="complete",i);function i(t,e){return n.call(this,t,e)||this}t.CommandEvent=e}(cmd=cmd||{}),function(o){var r,t=alm.event.EventDispatcher,t=(__extends(e,r=t),e.prototype.execute=function(){if(this.state>o.CommandState.Sleeping)throw new Error("[Command.execute] + Command is already executing.");this.state=o.CommandState.Executing,this.getExecuteFunction().call(this,this)},e.prototype.interrupt=function(){this.state==o.CommandState.Executing&&(this.state=o.CommandState.Interrupting,this.getInterruptFunction().call(this,this))},e.prototype.destroy=function(){this.state=o.CommandState.Sleeping,this.getDestroyFunction().call(this,this),this.parent=null,this.executeFunction=null,this.interruptFunction=null,this.destroyFunction=null},e.prototype.notifyComplete=function(){switch(this.state){case o.CommandState.Sleeping:break;case o.CommandState.Executing:case o.CommandState.Interrupting:this.dispatchEvent(new o.CommandEvent(o.CommandEvent.COMPLETE,this)),this.destroy()}},e.prototype.implExecuteFunction=function(t){this.notifyComplete()},e.prototype.implInterruptFunction=function(t){},e.prototype.implDestroyFunction=function(t){},e.prototype.getExecuteFunction=function(){return this.executeFunction||this.implExecuteFunction},e.prototype.setExecuteFunction=function(t){this.executeFunction=t},e.prototype.getInterruptFunction=function(){return this.interruptFunction||this.implInterruptFunction},e.prototype.setInterruptFunction=function(t){this.interruptFunction=t},e.prototype.getDestroyFunction=function(){return this.destroyFunction||this.implDestroyFunction},e.prototype.setDestroyFunction=function(t){this.destroyFunction=t},e.prototype.getState=function(){return this.state},e.prototype.getParent=function(){return this.parent},e.prototype.setParent=function(t){this.parent=t},e.prototype.getSelf=function(){return this.self},e);function e(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null);var i=r.call(this)||this;return i.setExecuteFunction(t),i.setInterruptFunction(e),i.setDestroyFunction(n),i.state=o.CommandState.Sleeping,(i.self=i).parent=null,i}o.Command=t}(cmd=cmd||{}),function(o){var i,t=(i=o.Command,__extends(e,i),e.prototype.addCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0<t.length&&(this.preProcess(t),this.commands=this.getCommands().concat(t))},e.prototype.insertCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertCommandAt.apply(this,__spreadArray([0],t,!1))},e.prototype.insertCommandAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];0<e.length&&(this.preProcess(e),Array.prototype.splice.apply(this.getCommands(),[t,0].concat(e)))},e.prototype.addCommandArray=function(t){this.addCommand.apply(this,t)},e.prototype.insertCommandArray=function(t){this.insertCommand.apply(this,t)},e.prototype.insertCommandArrayAt=function(t,e){this.insertCommandAt.apply(this,__spreadArray([t],e,!1))},e.prototype.getLength=function(){return this.commands.length},e.prototype.getCommandByIndex=function(t){return this.commands[t]},e.prototype.getCommands=function(){return this.commands},e.prototype.preProcess=function(t){for(var e,n=t.length,i=0;i<n;++i)"function"==typeof(e=t[i])&&(t[i]=e=new o.Func(e)),e.setParent(this)},e.prototype.implExecuteFunction=function(t){this.notifyComplete()},e.prototype.implInterruptFunction=function(t){},e.prototype.implDestroyFunction=function(t){},e);function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=i.call(this)||this;return n.commands=[],n.addCommand.apply(n,t),n}o.CommandList=t}(cmd=cmd||{}),function(t){var e,n=(e=t.Command,__extends(i,e),i.prototype.implExecuteFunction=function(t){var e=this.getParent().notifyBreak;e&&e(),this.notifyComplete()},i.prototype.implInterruptFunction=function(t){},i.prototype.implDestroyFunction=function(t){},i);function i(){return e.call(this)||this}t.Break=n}(cmd=cmd||{}),function(t){var e,n=(e=t.Command,__extends(i,e),i.prototype.implExecuteFunction=function(t){var e=this.getParent().notifyReturn;e&&e(),this.notifyComplete()},i.prototype.implInterruptFunction=function(t){},i.prototype.implDestroyFunction=function(t){},i);function i(){return e.call(this)||this}t.Return=n}(cmd=cmd||{}),function(t){var i,e=(i=t.Command,__extends(n,i),n.prototype.implExecuteFunction=function(t){console.log.apply(console,Array.prototype.slice.call(this.messages)),this.notifyComplete()},n.prototype.implInterruptFunction=function(t){},n.prototype.implDestroyFunction=function(t){this.messages=null},n.prototype.getMessages=function(){return this.messages},n.prototype.setMessages=function(t){this.messages=t},n);function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=i.call(this)||this;return n.messages=t,n}t.Log=e}(cmd=cmd||{}),function(t){var n,e=(n=t.Command,__extends(i,n),i.prototype.implExecuteFunction=function(t){this.timerId=window.setTimeout(this.completeHandler,this.time)},i.prototype.implInterruptFunction=function(t){this.cancel()},i.prototype.implDestroyFunction=function(t){this.cancel()},i.prototype.cancel=function(){-1!=this.timerId&&(clearTimeout(this.timerId),this.timerId=-1)},i.prototype.getTime=function(){return this.time},i.prototype.setTime=function(t){this.time=t},i);function i(t){void 0===t&&(t=1e3);var e=n.call(this)||this;return e.completeHandler=function(){e.notifyComplete()},e.time=t,e.timerId=-1,e}t.Wait=e}(cmd=cmd||{}),function(t){var r,e=(r=t.Command,__extends(n,r),n.prototype.implExecuteFunction=function(t){this.eventDispatcher&&this.eventType?(this.eventDispatcher.addEventListener(this.eventType,this.completeHandler),this.func.apply(this,this.args)):(this.func.apply(this,this.args),this.notifyComplete())},n.prototype.implInterruptFunction=function(t){this.eventDispatcher&&this.eventType&&this.eventDispatcher.removeEventListener(this.eventType,this.completeHandler)},n.prototype.implDestroyFunction=function(t){this.eventDispatcher&&this.eventType&&this.eventDispatcher.removeEventListener(this.eventType,this.completeHandler),this.func=null,this.args=null,this.eventDispatcher=null,this.eventType=null},n.prototype.getFunction=function(){return this.func},n.prototype.setFunction=function(t){this.func=t},n.prototype.getArguments=function(){return this.args},n.prototype.setArguments=function(t){this.args=t},n.prototype.getEventDispatcher=function(){return this.eventDispatcher},n.prototype.setEventDispatcher=function(t){this.eventDispatcher=t},n.prototype.getEventType=function(){return this.eventType},n.prototype.setEventType=function(t){this.eventType=t},n);function n(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===n&&(n=null),void 0===i&&(i=null);var o=r.call(this)||this;return o.completeHandler=function(t){o.notifyComplete()},o.func=t,o.args=e,o.eventDispatcher=n,o.eventType=i,o}t.Func=e}(cmd=cmd||{}),function(t){var i,e=(i=t.Command,__extends(n,i),n.prototype.implExecuteFunction=function(t){this.eventDispatcher&&this.eventType&&this.eventDispatcher.addEventListener(this.eventType,this.completeHandler)},n.prototype.implInterruptFunction=function(t){this.eventDispatcher&&this.eventType&&this.eventDispatcher.removeEventListener(this.eventType,this.completeHandler)},n.prototype.implDestroyFunction=function(t){this.eventDispatcher&&this.eventType&&this.eventDispatcher.removeEventListener(this.eventType,this.completeHandler),this.eventType=null,this.eventDispatcher=null},n.prototype.getEventDispatcher=function(){return this.eventDispatcher},n.prototype.setEventDispatcher=function(t){this.eventDispatcher=t},n.prototype.getEventType=function(){return this.eventType},n.prototype.setEventType=function(t){this.eventType=t},n);function n(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var n=i.call(this)||this;return n.completeHandler=function(t){n.notifyComplete()},n.eventDispatcher=t,n.eventType=e,n}t.Listen=e}(cmd=cmd||{}),function(t){var h,c=alm.math.Easing,l=alm.util.Time,e=(h=t.Command,__extends(n,h),n.prototype.implExecuteFunction=function(t){for(var e in this.internalFrom={},this.to)this.to[e],this.from&&null!=this.from[e]?this.internalFrom[e]=this.from[e]:this.internalFrom[e]=this.tweenTarget[e];0<this.duration?(this.timerId=window.setInterval(this.intervalHandler,n.updateInterval),this.startTime=l.now(),this.apply(0),this.onStart&&this.onStart(this.progressTime,this.progressValue)):(this.apply(0),this.onStart&&this.onStart(this.progressTime,this.progressValue),this.apply(1),this.onUpdate&&this.onUpdate(this.progressTime,this.progressValue),this.onComplete&&this.onComplete(this.progressTime,this.progressValue),this.notifyComplete())},n.prototype.implInterruptFunction=function(t){this.cancel()},n.prototype.implDestroyFunction=function(t){this.cancel(),this.tweenTarget=null,this.to=null,this.from=null,this.easing=null,this.onStart=null,this.onUpdate=null,this.onComplete=null,this.internalFrom=null},n.prototype.cancel=function(){-1!=this.timerId&&(clearInterval(this.timerId),this.timerId=-1)},n.prototype.apply=function(t){var e,n;for(n in this.progressTime=t,this.progressValue=this.easing(this.progressTime),this.to)e=this.internalFrom[n],this.tweenTarget[n]=e+(this.to[n]-e)*this.progressValue},n.prototype.getTarget=function(){return this.tweenTarget},n.prototype.setTarget=function(t){this.tweenTarget=t},n.prototype.getDuration=function(){return this.duration},n.prototype.setDuration=function(t){this.duration=t},n.prototype.getTo=function(){return this.to},n.prototype.setTo=function(t){this.to=t},n.prototype.getFrom=function(){return this.from},n.prototype.setFrom=function(t){this.from=t},n.prototype.getEasing=function(){return this.easing},n.prototype.setEasing=function(t){this.easing=t},n.prototype.getOnStart=function(){return this.onStart},n.prototype.setOnStart=function(t){this.onStart=t},n.prototype.getOnUpdate=function(){return this.onUpdate},n.prototype.setOnUpdate=function(t){this.onUpdate=t},n.prototype.getOnComplete=function(){return this.onComplete},n.prototype.setOnComplete=function(t){this.onComplete=t},n.prototype.getProgressTime=function(){return this.progressTime},n.prototype.getProgressValue=function(){return this.progressValue},n.prototype.getUpdateInterval=function(){return n.updateInterval},n.prototype.setUpdateInterval=function(t){n.updateInterval=t},n.updateInterval=1e3/60,n);function n(t,e,n,i,o,r,s,a){void 0===n&&(n=null),void 0===i&&(i=1e3),void 0===o&&(o=c.linear),void 0===r&&(r=null),void 0===s&&(s=null),void 0===a&&(a=null);var u=h.call(this)||this;return u.intervalHandler=function(){var t=l.now()-u.startTime;t<u.duration?(u.apply(t/u.duration),u.onUpdate&&u.onUpdate(u.progressTime,u.progressValue)):(u.apply(1),u.cancel(),u.onUpdate&&u.onUpdate(u.progressTime,u.progressValue),u.onComplete&&u.onComplete(u.progressTime,u.progressValue),u.notifyComplete())},u.tweenTarget=t,u.to=e,u.from=n,u.duration=i,u.easing=o,u.onStart=r,u.onUpdate=s,u.onComplete=a,u.progressTime=0,u.progressValue=0,u.startTime=0,u.timerId=-1,u}t.Tween=e}(cmd=cmd||{}),function(i){var o,t=(o=i.CommandList,__extends(e,o),e.prototype.addCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.addCommand.apply(this,t)},e.prototype.insertCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.insertCommandAt.apply(this,__spreadArray([this.position+1],t,!1))},e.prototype.addCommandArray=function(t){this.addCommand.apply(this,t)},e.prototype.insertCommandArray=function(t){this.insertCommand.apply(this,t)},e.prototype.next=function(){this.currentCommand=this.getCommandByIndex(this.position),this.currentCommand.addEventListener(i.CommandEvent.COMPLETE,this.completeHandler),this.currentCommand.execute()},e.prototype.implExecuteFunction=function(t){(this.position=0)<this.getLength()?this.next():this.notifyComplete()},e.prototype.implInterruptFunction=function(t){this.currentCommand&&(this.currentCommand.removeEventListener(i.CommandEvent.COMPLETE,this.completeHandler),this.currentCommand.interrupt(),this.currentCommand=null),this.position=-1,o.prototype.implInterruptFunction.call(this,t)},e.prototype.implDestroyFunction=function(t){this.currentCommand&&(this.currentCommand.removeEventListener(i.CommandEvent.COMPLETE,this.completeHandler),this.currentCommand.destroy(),this.currentCommand=null),this.position=-1,this.isPaused=!1,this.isCompleteOnPaused=!1,o.prototype.implDestroyFunction.call(this,t)},e.prototype.implNotifyBreak=function(){this.currentCommand.getState()==i.CommandState.Executing&&(this.currentCommand.removeEventListener(i.CommandEvent.COMPLETE,this.completeHandler),this.currentCommand.interrupt()),this.notifyComplete()},e.prototype.implNotifyReturn=function(){this.currentCommand.getState()==i.CommandState.Executing&&(this.currentCommand.removeEventListener(i.CommandEvent.COMPLETE,this.completeHandler),this.currentCommand.interrupt());var t=this.getParent().notifyReturn;t&&t(),this.destroy()},e.prototype.getPosition=function(){return this.position},e);function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=o.apply(this,t)||this;return n.completeHandler=function(t){n.currentCommand.removeEventListener(i.CommandEvent.COMPLETE,n.completeHandler),n.currentCommand=null,++n.position>=n.getLength()?n.notifyComplete():n.next()},n.currentCommand=null,n.position=-1,n.isPaused=!1,n.isCompleteOnPaused=!1,n}i.Serial=t}(cmd=cmd||{}),function(r){var s,t=(s=r.CommandList,__extends(e,s),e.prototype.addCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.addCommand.apply(this,t)},e.prototype.insertCommand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addCommand.apply(this,t)},e.prototype.addCommandArray=function(t){this.addCommand.apply(this,t)},e.prototype.insertCommandArray=function(t){this.addCommand.apply(this,t)},e.prototype.implExecuteFunction=function(t){this.completeCount=0;var e=this.getLength();if(0<e)for(var n,i=this.getCommands(),o=0;o<e;++o)(n=i[o]).addEventListener(r.CommandEvent.COMPLETE,this.completeHandler),n.execute();else this.notifyComplete()},e.prototype.implInterruptFunction=function(t){var e=this.getLength();if(0<e)for(var n,i=this.getCommands(),o=0;o<e;++o)(n=i[o]).removeEventListener(r.CommandEvent.COMPLETE,this.completeHandler),n.interrupt();s.prototype.implInterruptFunction.call(this,t)},e.prototype.implDestroyFunction=function(t){var e=this.getLength();if(0<e)for(var n,i=this.getCommands(),o=0;o<e;++o)(n=i[o]).removeEventListener(r.CommandEvent.COMPLETE,this.completeHandler),n.destroy();s.prototype.implDestroyFunction.call(this,t)},e.prototype.implNotifyBreak=function(){var t=this.getLength();if(0<t)for(var e=this.getCommands(),n=void 0,i=0;i<t;++i)(n=e[i]).getState()==r.CommandState.Executing&&(n.removeEventListener(r.CommandEvent.COMPLETE,this.completeHandler),n.interrupt());this.notifyComplete()},e.prototype.implNotifyReturn=function(){var t=this.getLength();if(0<t)for(var e=this.getCommands(),n=void 0,i=0;i<t;++i)(n=e[i]).getState()==r.CommandState.Executing&&(n.removeEventListener(r.CommandEvent.COMPLETE,this.completeHandler),n.interrupt());var o=this.getParent().notifyReturn;o&&o(),this.destroy()},e.prototype.getCompleteCount=function(){return this.completeCount},e);function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=s.apply(this,t)||this;return n.completeHandler=function(t){++n.completeCount>=n.getLength()&&n.notifyComplete()},n.completeCount=0,n}r.Parallel=t}(cmd=cmd||{}),function(t){function e(t,e){this.set(t=void 0===t?0:t,e=void 0===e?0:e)}t=t.geom||(t.geom={}),e.prototype.set=function(t,e){this.x=t,this.y=e},e.prototype.copyTo=function(t){t.set(this.x,this.y)},e.prototype.getClone=function(){return new e(this.x,this.y)},e.prototype.zero=function(){this.set(0,0)},e.prototype.normalize=function(){var t=this.getLength();this.x/=t,this.y/=t},e.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.getSquareDistance=function(t){var e=t.x-this.x,t=t.y-this.y;return e*e+t*t},e.prototype.getDistance=function(t){return Math.sqrt(this.getSquareDistance(t))},t.Vector2=e}(alm=alm||{}),function(t){function e(t,e,n){this.set(t=void 0===t?0:t,e=void 0===e?0:e,n=void 0===n?0:n)}t=t.geom||(t.geom={}),e.prototype.set=function(t,e,n){this.x=t,this.y=e,this.z=n},e.prototype.copyTo=function(t){t.set(this.x,this.y,this.z)},e.prototype.getClone=function(){return new e(this.x,this.y,this.z)},e.prototype.zero=function(){this.set(0,0,0)},e.prototype.normalize=function(){var t=this.getLength();this.x/=t,this.y/=t,this.z/=t},e.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.prototype.getSquareDistance=function(t){var e=t.x-this.x,n=t.y-this.y,t=t.z-this.z;return e*e+n*n+t*t},e.prototype.getDistance=function(t){return Math.sqrt(this.getSquareDistance(t))},t.Vector3=e}(alm=alm||{}),function(t){var e;function n(t,e,n,i){this.set(t=void 0===t?0:t,e=void 0===e?0:e,n=void 0===n?0:n,i=void 0===i?0:i)}e=t.geom||(t.geom={}),n.prototype.set=function(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i},n.prototype.copyTo=function(t){t.set(this.x,this.y,this.width,this.height)},n.prototype.getClone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.getTop=function(){return this.y},n.prototype.getBottom=function(){return this.y+this.height},n.prototype.getLeft=function(){return this.x},n.prototype.getRight=function(){return this.x+this.width},n.prototype.getTopLeft=function(){return new e.Vector2(this.getLeft(),this.getTop())},n.prototype.getTopRight=function(){return new e.Vector2(this.getRight(),this.getTop())},n.prototype.getBottomLeft=function(){return new e.Vector2(this.getLeft(),this.getBottom())},n.prototype.getBottomRight=function(){return new e.Vector2(this.getRight(),this.getBottom())},e.Rectangle=n}(alm=alm||{}),function(t){!function(f){var v,m;(t=v=f.Align||(f.Align={}))[t.Top_Left=0]="Top_Left",t[t.Top_Center=1]="Top_Center",t[t.Top_Right=2]="Top_Right",t[t.Middle_Left=3]="Middle_Left",t[t.Middle_Center=4]="Middle_Center",t[t.Middle_Right=5]="Middle_Right",t[t.Bottom_Left=6]="Bottom_Left",t[t.Bottom_Center=7]="Bottom_Center",t[t.Bottom_Right=8]="Bottom_Right",(t=m=f.ScaleMode||(f.ScaleMode={}))[t.ExactFit=0]="ExactFit",t[t.ShowAll=1]="ShowAll",t[t.NoBorder=2]="NoBorder",t[t.NoScale=3]="NoScale";var t=(e.resize=function(t,e,n,i){void 0===n&&(n=m.ShowAll),void 0===i&&(i=v.Middle_Center);t.x,t.y;var o,r,s=t.width,a=t.height,u=e.x,h=e.y,c=e.width,l=e.height;switch(n){case m.ShowAll:case m.NoBorder:var d=c/s,p=l/a,p=n==m.ShowAll?d<p?d:p:p<d?d:p;s*=p,a*=p;break;case m.ExactFit:return new f.Rectangle(u,h,c,l)}return o=u+(i==v.Top_Left||i==v.Middle_Left||i==v.Bottom_Left?0:i==v.Top_Right||i==v.Middle_Right||i==v.Bottom_Right?c-s:(c-s)/2),r=h+(i==v.Top_Left||i==v.Top_Center||i==v.Top_Right?0:i==v.Bottom_Left||i==v.Bottom_Center||i==v.Bottom_Right?l-a:(l-a)/2),new f.Rectangle(o,r,s,a)},e);function e(){}f.Boxer=t}(t.geom||(t.geom={}))}(alm=alm||{}),function(t){function e(){}t=t.util||(t.util={}),e.each=function(e,n){null!=e&&Object.keys(e).forEach(function(t){n(t,e[t])})},e.get=function(t,e,n){e=t[e];return void 0!==e?e:n},t.Obj=e}(alm=alm||{}),function(t){function n(){}t=t.util||(t.util={}),n.sequence=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=1);for(var i=new Array(t),o=e,r=0;r<t;++r)i[r]=o,o+=n;return i},n.unique=function(t){return t.filter(function(t,e,n){return n.indexOf(t)===e})},n.duplicated=function(t,e){return(e=void 0===e?!1:e)?t.filter(function(t,e,n){return n.indexOf(t)!==n.lastIndexOf(t)}):t.filter(function(t,e,n){return n.indexOf(t)===e&&n.lastIndexOf(t)!==e})},n.roundRobin=function(t,e,n){for(var i,o=1,r=t.length,s=e.length,a=0;a<r;++a)for(i=a+1;i<s;++i)n(o++,a,i,t[a],e[i])},n.swap=function(t,e,n){var i=t[e];t[e]=t[n],t[n]=i},n.shuffle=function(t){for(var e=t.length-1;0<e;--e)n.swap(t,e,Math.floor(Math.random()*(e+1)))},n.sort=function(t,e){t.sort((e=void 0===e?!0:e)?function(t,e){return t-e}:function(t,e){return e-t})},n.choose=function(t){return t[Math.floor(Math.random()*t.length)]},t.Arr=n}(alm=alm||{}),function(t){function i(){}t=t.util||(t.util={}),i.map=function(t,e,n,i,o,r){return e===n?i:((r=void 0===r?!0:r)&&(e<n?t<e?t=e:n<t&&(t=n):t<n?t=n:e<t&&(t=e)),(t-e)*(o-i)/(n-e)+i)},i.ease=function(t,e,n,i,o,r){return e===n?i:e<n?(t<e?t=e:n<t&&(t=n),r((t-e)/(n-e))*(o-i)+i):(t<n?t=n:e<t&&(t=e),r((t-n)/(e-n))*(o-i)+i)},i.clamp=function(t,e,n){return t<e?e:n<t?n:t},i.clampAbs=function(t,e,n){return 0<t?t<e?e:n<t?n:t:-((t=Math.abs(t))<e?e:n<t?n:t)},i.lerp=function(t,e,n,i){return(i=void 0===i?!0:i)&&(t<0?t=0:1<t&&(t=1)),e*(1-t)+n*t},i.random=function(t,e){return(t=void 0===t?0:t)+((e=void 0===e?1:e)-t)*Math.random()},i.randomInt=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.floor(i.random(t,e+1))},i.randomAbs=function(t,e){return i.random(t=void 0===t?0:t,e=void 0===e?1:e)*i.randomSign()},i.randomSign=function(){return Math.random()<.5?1:-1},i.dist=function(t,e,n,i,o){t=n-t,e=i-e;return(o=void 0===o?!1:o)?t*t+e*e:Math.sqrt(t*t+e*e)},i.radToDeg=function(t){return t*i.RAD2DEG},i.degToRad=function(t){return t*i.DEG2RAD},i.turn=function(t,e,n){return(n=void 0===n?!0:n)?(e-t+i.PI3)%i.PI2-Math.PI:(e-t+540)%360-180},i.PI2=2*Math.PI,i.PI3=3*Math.PI,i.PI4=4*Math.PI,i.PI5=5*Math.PI,i.PI6=6*Math.PI,i.PI_2=Math.PI/2,i.PI_3=Math.PI/3,i.PI_4=Math.PI/4,i.PI_6=Math.PI/6,i.RAD2DEG=180/Math.PI,i.DEG2RAD=Math.PI/180,t.Num=i}(alm=alm||{}),function(t){function e(){}t=t.util||(t.util={}),e.toTimeString=function(t,e,n){void 0===n&&(n=0),n+=60*(e=void 0===e?0:e)+3600*(t=void 0===t?0:t);e=Math.floor(n/3600).toString(),t=Math.floor(n/60%60).toString(),n=("0"+Math.floor(n%60)).substr(-2,2);return"0"!=e?e+":"+("0"+t).substr(-2,2)+":"+n:t+":"+n},t.Str=e}(alm=alm||{}),function(t){function e(){}t=t.util||(t.util={}),e.stop=function(t){return t&&t.interrupt(),null},e.sequence=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=new cmd.Serial;return i.addCommand.apply(i,e),t&&i.execute(),i},e.single=function(t,e){return t&&e&&e.execute(),e},t.Cmd=e}(alm=alm||{}),function(t){var n,i;function o(){}n=t.util||(t.util={}),i=t.math.Easing,o.instantiate=function(t,e){void 0===e&&(e=!0);t=document.getElementById(t).cloneNode(!0);return e&&t.removeAttribute("id"),t},o.addPointerDownListener=function(t,e){t.addEventListener("pointerdown",e)},o.addPointerMoveListener=function(t,e){t.addEventListener("pointermove",e)},o.addPointerUpListener=function(t,e){t.addEventListener("pointerup",e)},o.addPointerEnterListener=function(t,e){t.addEventListener("pointerenter",e)},o.addPointerLeaveListener=function(t,e){t.addEventListener("pointerleave",e)},o.addPointerOverListener=function(t,e){t.addEventListener("pointerover",e)},o.addPointerOutListener=function(t,e){t.addEventListener("pointerout",e)},o.removePointerDownListener=function(t,e){t.removeEventListener("pointerdown",e)},o.removePointerMoveListener=function(t,e){t.removeEventListener("pointermove",e)},o.removePointerUpListener=function(t,e){t.removeEventListener("pointerup",e)},o.removePointerEnterListener=function(t,e){t.removeEventListener("pointerenter",e)},o.removePointerLeaveListener=function(t,e){t.removeEventListener("pointerleave",e)},o.removePointerOverListener=function(t,e){t.removeEventListener("pointerover",e)},o.removePointerOutListener=function(t,e){t.removeEventListener("pointerout",e)},o.addRootClass=function(t){(o.root=null===o.root?document.documentElement:o.root).classList.add(t)},o.removeRootClass=function(t){(o.root=null===o.root?document.documentElement:o.root).classList.remove(t)},o.addRootAttribute=function(t,e){(o.root=null===o.root?document.documentElement:o.root).setAttribute(t,e)},o.removeRootAttribute=function(t,e){(o.root=null===o.root?document.documentElement:o.root).removeAttribute(t)},o.getRootCss=function(t){return(o.root=null===o.root?document.documentElement:o.root).style.getPropertyValue(t)},o.setRootCss=function(t,e){(o.root=null===o.root?document.documentElement:o.root).style.setProperty(t,e)},o.scrollTo=function(t,e){void 0===e&&(e=!0),o.scrollTween=n.Cmd.stop(o.scrollTween),e?(o.scrollTween=new cmd.Tween(o,{scrollPosition:t},null,1e3,i.easeOutQuart,null,function(){o.applyScrollPosition()})).execute():(o.scrollPosition=t,o.applyScrollPosition())},o.applyScrollPosition=function(){window.scroll(0,o.scrollPosition)},o.setupSmoothAnchorLink=function(){for(var t=document.getElementsByTagName("a"),e=t.length,n=0;n<e;++n)o.setAnchorLinkAction(t.item(n))},o.setAnchorLinkAction=function(t){var e=t.getAttribute("href");0!=e.indexOf("#")||t.hasAttribute("data-smooth-anchor-target")||(t.setAttribute("data-smooth-anchor-target",e.slice(1)),t.setAttribute("href","javascript:void(0)"),t.addEventListener("click",o.anchorLinkClickHandler))},o.anchorLinkClickHandler=function(t){var e=t.currentTarget,t=e.getAttribute("data-smooth-anchor-target"),t=document.getElementById(t),t=window.pageYOffset+t.getBoundingClientRect().top;e.hasAttribute("data-smooth-anchor-offset")&&(t+=parseFloat(e.getAttribute("data-smooth-anchor-offset"))),o.scrollTo(t)},o.root=null,o.scrollTween=null,n.Dom=o}(alm=alm||{}),function(t){var e,i,n,s;function o(t,e,n){this.reset(t,e=void 0===e?null:e,n=void 0===n?null:n)}e=t.util||(t.util={}),i=t.util.Dom,n=t.util.Cmd,s=t.math.Easing,o.prototype.reset=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.property=t,this.value=e,this.suffix=n,this.cancelAnimation(),null===this.value||null===this.suffix?(e=o.numberPattern.exec(i.getRootCss(this.property)),n=!1,null===this.value?(this.value=parseFloat(e[1]),isNaN(this.value)&&(this.value=0)):n=!0,null===this.value?this.suffix=""!==e[2]?e[2]:"":n=!0,n&&this.apply()):this.apply()},o.prototype.getProperty=function(){return this.property},o.prototype.setProperty=function(t){this.cancelAnimation(),this.property!==t&&(this.property=t,this.apply())},o.prototype.getValue=function(){return this.value},o.prototype.setValue=function(t){this.cancelAnimation(),this.value!==t&&(this.value=t,this.apply())},o.prototype.getSuffix=function(){return this.suffix},o.prototype.setSuffix=function(t){this.cancelAnimation(),this.suffix!==t&&(this.suffix=t,this.apply())},o.prototype.animate=function(t,e,n,i,o){var r=this;return void 0===n&&(n=1e3),void 0===i&&(i=s.linear),void 0===o&&(o=!0),this.cancelAnimation(),this.tween=new cmd.Tween(this,{value:t},null!==e?{value:e}:null,n,i,null,function(){r.apply()},function(){r.tween=null}),o&&this.tween.execute(),this.tween},o.prototype.cancelAnimation=function(){this.tween&&(this.tween=n.stop(this.tween))},o.prototype.animateTo=function(t,e,n,i){return void 0===n&&(n=s.linear),this.animate(t,null,e=void 0===e?1e3:e,n,i=void 0===i?!0:i)},o.prototype.apply=function(){i.setRootCss(this.property,this.value+this.suffix)},o.numberPattern=new RegExp(/([+-]?\d*\.?\d*)(.*)/),e.CssVar=o}(alm=alm||{}),function(t){function e(t,e,n,i){void 0===n&&(n=100),void 0===i&&(i=50),this.onRequireItem=t,this.onDestroyItem=e,this.growthCount=i,this.items=new Array(n);for(var o=0;o<n;++o)this.items[o]=this.onRequireItem();this.index=n}t=t.resource||(t.resource={}),e.prototype.getItem=function(){if(0<this.index)return this.items[--this.index];for(var t=0;t<this.growthCount;++t)this.items.unshift(this.onRequireItem());return this.index=this.growthCount,this.getItem()},e.prototype.returnItem=function(t){this.items[this.index++]=t},e.prototype.reduce=function(){for(var t=this.index,e=0;e<t;++e)this.onDestroyItem(this.items.shift());this.index=0},e.prototype.destroy=function(){for(var t=this.items.length,e=0;e<t;++e)this.onDestroyItem(this.items[e]);this.index=0,this.items=null,this.onRequireItem=null,this.onDestroyItem=null},t.ObjectPool=e}(alm=alm||{}),function(t){function i(t){(t=void 0===t?null:t)?this.set(t):(this.initValues=this.restValues=null,this.restCount=this.restValues.length,this.isEmpty=!0),this.onCheck=null,this.isAutoResetEnabled=!1}t=t.state||(t.state={}),i.prototype.set=function(t){this.initValues=t.concat(),this.reset()},i.prototype.get=function(){this.isEmpty&&this.isAutoResetEnabled&&this.reset();var t=Math.floor(Math.random()*this.restCount),e=this.restValues[t],n=!0;return(n=this.onCheck?this.onCheck(e):n)&&(this.restValues.splice(t,1),this.restCount=this.restValues.length,this.isEmpty=0==this.restCount),e},i.prototype.add=function(t,e){void 0===e&&(e=!1),this.initValues.push(t),this.restValues.push(t),this.restCount=this.restValues.length,this.isEmpty=0==this.restCount,e&&this.reset()},i.prototype.reset=function(){this.restValues=this.initValues.concat(),this.restCount=this.restValues.length,this.isEmpty=0==this.restCount},i.prototype.getRestCount=function(){return this.restCount},i.prototype.getIsEmply=function(){return this.isEmpty},i.prototype.getIsAutoResetEnabled=function(){return this.isAutoResetEnabled},i.prototype.setIsAutoResetEnabled=function(t){this.isAutoResetEnabled=t},i.createIndices=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return new i(e)},t.Lottery=i}(alm=alm||{}),function(t){var i,e;function n(){var t=e.call(this)||this;return t.isLoopEnabled=!0,t.itemCount=0,t.itemIds=null,t.itemIndexById=null,t.onChange=null,t.onPrev=null,t.onNext=null,t}i=t.state||(t.state={}),e=t.event.EventDispatcher,__extends(n,e),n.prototype.setupById=function(t){this.itemCount=t.length,this.itemIds=t,this.itemIndexById={};for(var e=0;e<this.itemCount;++e)this.itemIndexById[this.itemIds[e]]=e;this.setup()},n.prototype.setupByCount=function(t){this.itemCount=t,this.itemIds=null,this.itemIndexById=null,this.setup()},n.prototype.setup=function(){this.currentItemIndex=-1,this.currentItemId=null,this.oldItemIndex=-1,this.oldItemId=null},n.prototype.gotoByIndex=function(t,e){return void 0===e&&(e=!0),(t=t<0||t>=this.itemCount?-1:t)!=this.currentItemIndex&&(this.oldItemIndex=this.currentItemIndex,this.currentItemIndex=t,this.itemIds&&(this.oldItemId=-1!=this.oldItemIndex?this.itemIds[this.oldItemIndex]:null,this.currentItemId=-1!=this.currentItemIndex?this.itemIds[this.currentItemIndex]:null),this.dispatchPagerEvent(i.SwitcherEvent.CHANGE,this.onChange,e),!0)},n.prototype.gotoById=function(t,e){void 0===e&&(e=!0);t=this.itemIndexById.hasOwnProperty(t)?this.itemIndexById[t]:-1;return this.gotoByIndex(t,e)},n.prototype.prev=function(t){void 0===t&&(t=!0);var e=this.getPrevItemIndex(),e=this.gotoByIndex(e,t);return e&&this.dispatchPagerEvent(i.SwitcherEvent.PREV,this.onPrev,t),e},n.prototype.next=function(t){void 0===t&&(t=!0);var e=this.getNextItemIndex(),e=this.gotoByIndex(e,t);return e&&this.dispatchPagerEvent(i.SwitcherEvent.NEXT,this.onNext,t),e},n.prototype.getPrevItemIndex=function(){var t=this.currentItemIndex-1;return t=this.isLoopEnabled&&t<0?this.itemCount-1:t},n.prototype.getPrevItemId=function(){return this.itemIds[this.getPrevItemIndex()]},n.prototype.getNextItemIndex=function(){var t=this.currentItemIndex+1;return t=this.isLoopEnabled&&t>=this.itemCount?0:t},n.prototype.getNextItemId=function(){return this.itemIds[this.getNextItemIndex()]},n.prototype.dispatchPagerEvent=function(t,e,n){n=new i.SwitcherEvent(t,this,this.currentItemIndex,this.oldItemIndex,this.currentItemId,this.oldItemId,n);e&&e(n),this.dispatchEvent(n)},n.prototype.getIsLoopEnabled=function(){return this.isLoopEnabled},n.prototype.setIsLoopEnabled=function(t){this.isLoopEnabled=t},n.prototype.getItemCount=function(){return this.itemCount},n.prototype.getCurrentItemIndex=function(){return this.currentItemIndex},n.prototype.getOldItemIndex=function(){return this.oldItemIndex},n.prototype.getCurrentItemId=function(){return this.currentItemId},n.prototype.getOldItemId=function(){return this.oldItemId},n.prototype.getItemIds=function(){return this.itemIds},i.Switcher=n}(alm=alm||{}),function(t){var e,a;function n(t,e,n,i,o,r,s){e=a.call(this,t,e)||this;return e.currentItemIndex=n,e.oldItemIndex=i,e.currentItemId=o,e.oldItemId=r,e.useTransition=s,e}e=t.state||(t.state={}),a=t.event.Event,__extends(n,a),n.prototype.clone=function(){return new n(this.type,this.target,this.currentItemIndex,this.oldItemIndex,this.currentItemId,this.oldItemId,this.useTransition)},n.prototype.toString=function(){return"[SwitcherEvent] type = "+this.type+", "+this.oldItemIndex+" -> "+this.currentItemIndex+", transition = "+this.useTransition},n.CHANGE="change",n.PREV="prev",n.NEXT="next",e.SwitcherEvent=n}(alm=alm||{}),function(t){var n,o;function e(t,e,n){void 0===n&&(n=0);var i=o.call(this)||this;return i.lowThreshold=t,i.highThreshold=e,i.isHigh=!1,i._set(n,!1),i}n=t.state||(t.state={}),t=t.event.EventDispatcher,__extends(e,o=t),e.prototype.set=function(t){return this._set(t,!0)},e.prototype.getIsHigh=function(){return this.isHigh},e.prototype.getValue=function(){return this.value},e.prototype.getLowThreshold=function(){return this.lowThreshold},e.prototype.getHighThreshold=function(){return this.highThreshold},e.prototype.setLowThreshold=function(t){this.lowThreshold=t,this._set(this.value,!0)},e.prototype.setHighThreshold=function(t){this.highThreshold=t,this._set(this.value,!0)},e.prototype._set=function(t,e){return this.value=t,this.isHigh&&this.value<this.lowThreshold?(this.isHigh=!1,e&&(this.dispatchEvent(new n.LoHiEvent(n.LoHiEvent.LOW,this,this.isHigh)),this.dispatchEvent(new n.LoHiEvent(n.LoHiEvent.CHANGE,this,this.isHigh))),!0):!this.isHigh&&this.value>this.highThreshold&&(this.isHigh=!0,e&&(this.dispatchEvent(new n.LoHiEvent(n.LoHiEvent.HIGH,this,this.isHigh)),this.dispatchEvent(new n.LoHiEvent(n.LoHiEvent.CHANGE,this,this.isHigh))),!0)},t=e,n.LoHi=t}(alm=alm||{}),function(t){var e,i;function n(t,e,n){e=i.call(this,t,e)||this;return e.isHigh=n,e}e=t.state||(t.state={}),i=t.event.Event,__extends(n,i),n.prototype.clone=function(){return new n(this.type,this.target,this.isHigh)},n.prototype.toString=function(){return"[LoHiEvent] type = "+this.type+", isHigh = "+this.isHigh},n.CHANGE="change",n.LOW="low",n.HIGH="high",e.LoHiEvent=n}(alm=alm||{}),function(t){function e(t,e,n){void 0===e&&(e=.1),void 0===n&&(n=0),this.value=this.target=t,this.easing=e,this.tolerance=n}t=t.math||(t.math={}),e.prototype.update=function(t){return(t=void 0===t?!0:t)?(t=this.target-this.value,0<this.tolerance&&Math.abs(t)<=this.tolerance?this.value=this.target:this.value+=t*this.easing):this.value=this.target,this.value},e.prototype.clone=function(){var t=new e(this.value,this.easing,this.tolerance);return t.target=this.target,t},t.EasingValue=e}(alm=alm||{}),function(t){function e(t,e,n){void 0===e&&(e=.1),void 0===n&&(n=.9),this.acceleration=0,this.velocity=0,this.value=this.target=t,this.spring=e,this.friction=n}t=t.math||(t.math={}),e.prototype.update=function(t){return(t=void 0===t?!0:t)?(this.acceleration=(this.target-this.value)*this.spring,this.velocity+=this.acceleration,this.velocity*=this.friction,this.value+=this.velocity):(this.acceleration=0,this.velocity=0,this.value=this.target),this.value},e.prototype.clone=function(){var t=new e(this.value,this.spring,this.friction);return t.acceleration=this.acceleration,t.velocity=this.velocity,t.target=this.target,t},t.SpringValue=e}(alm=alm||{}),function(t){function e(){this.value=this._value=0,this.count=this._count=0}t=t.math||(t.math={}),e.prototype.add=function(t){return this._value=(this._value*this._count+t)/++this._count,this.value=this._value,this.count=this._count,this._value},t.SimpleAverage=e}(alm=alm||{}),function(t){function e(t){this.maxCount=this._maxCount=t,this.value=this._value=0,this.count=this._count=0,this.values=[]}t=t.math||(t.math={}),e.prototype.add=function(t){var e;return++this._count>this._maxCount?(this._count=this._maxCount,e=this.values.shift(),this._value-=e,e=t/this._maxCount,this._value+=e,this.values.push(e)):(this._value*=this._count-1,this._value+=t,this._value/=this._count,this.values.push(t/this._maxCount)),this.value=this._value,this.count=this._count,this._value},t.SimpleMovingAverage=e}(alm=alm||{}),function(t){function e(t){this.maxLatestCount=this._maxLatestCount=t=void 0===t?0:t,this.value=this._value=-Number.MAX_VALUE,this.count=this._count=0,this.values=[]}t=t.math||(t.math={}),e.prototype.add=function(t){if(0<this._maxLatestCount)if(++this._count>this._maxLatestCount){this._count=this._maxLatestCount,this.values.push(t);var e=this.values.shift();if(this._value>e)this._value<t&&(this._value=t);else{this._value=-Number.MAX_VALUE;for(var n=0;n<this._count;++n){var i=this.values[n];this._value<i&&(this._value=i)}}}else this.values.push(t),this._value<t&&(this._value=t);else++this._count,this._value<t&&(this._value=t);return this.value=this._value,this.count=this._count,this._value},t.MaxValue=e}(alm=alm||{}),function(t){function e(t,e,n){void 0===e&&(e=0),this.setAngle(t=void 0===t?0:t,n=void 0===n?!0:n),this.setVelocity(e,n)}t=t.math||(t.math={}),e.prototype.getAngle=function(t){return(t=void 0===t?!0:t)?this.angle:180*this.angle/Math.PI},e.prototype.setAngle=function(t,e){this.angle=(e=void 0===e?!0:e)?t:t*Math.PI/180},e.prototype.getVelocity=function(t){return(t=void 0===t?!0:t)?this.velocity:180*this.velocity/Math.PI},e.prototype.setVelocity=function(t,e){this.velocity=(e=void 0===e?!0:e)?t:t*Math.PI/180},e.prototype.update=function(){this.angle+=this.velocity},e.prototype.getSin=function(t){return(t=void 0===t?1:t)*Math.sin(this.angle)},e.prototype.getCos=function(t){return(t=void 0===t?1:t)*Math.cos(this.angle)},e.prototype.getTan=function(t){return(t=void 0===t?1:t)*Math.tan(this.angle)},e.prototype.getMagnitude=function(t){return(t=void 0===t?1:t)*(1+Math.sin(this.angle))/2},e.prototype.getVector=function(t,e){if(void 0===t&&(t=1),null==(e=void 0===e?null:e))return{x:this.getCos(t),y:this.getSin(t)};e.x=this.getCos(t),e.y=this.getSin(t)},t.Circular=e}(alm=alm||{}),function(t){function e(t){this.setList(t=void 0===t?null:t)}t=t.math||(t.math={}),e.prototype.setList=function(t){this.list=t},e.prototype.searchNearest=function(t){for(var e,n,i=0,o=this.list.length-1;i<=o;){if(e=Math.floor((i+o)/2),(n=this.list[e])==t)return e;t<n?o=e-1:i=e+1}return e},e.prototype.leapNearest=function(t){var e,n,i,o=this.searchNearest(t),r=this.list[o],r=r<=t?(n=r,(i=(e=o)+1)>=this.list.length&&(i=this.list.length-1),this.list[i]):(n=this.list[e=(e=o-1)<0?0:e],i=o,r);return 0<r-n?{index0:e,index1:i,ratio:(t-n)/(r-n)}:{index0:e,index1:i,ratio:0}},t.BinarySearch=e}(alm=alm||{}),function(t){function s(t){0==arguments.length&&(t=(new Date).getTime()),this._mt=new Array(624),this.setSeed(t)}t=t.math||(t.math={}),s._mulUint32=function(t,e){var n=65535&t,i=65535&e;return((t>>>16)*i+n*(e>>>16)<<16)+n*i>>>0},s._toNumber=function(t){return"number"!=typeof t||isNaN(t)?0:Math.ceil(t)},s.prototype.setSeed=function(t){var e=this._mt;if("number"==typeof t){e[0]=t>>>0;for(var n=1;n<e.length;n++){var i=e[n-1]^e[n-1]>>>30;e[n]=s._mulUint32(1812433253,i)+n}this._index=e.length}else{if(!(t instanceof Array))throw new TypeError("MersenneTwister: illegal seed.");var n=1,o=0;this.setSeed(19650218);for(var r=Math.max(e.length,t.length);0<r;r--){i=e[n-1]^e[n-1]>>>30;i=s._mulUint32(i,1664525),e[n]=(e[n]^i)+(t[o]>>>0)+o,++n>=e.length&&(e[0]=e[e.length-1],n=1),++o>=t.length&&(o=0)}for(r=e.length-1;0<r;r--){i=e[n-1]^e[n-1]>>>30;i=s._mulUint32(i,1566083941),e[n]=(e[n]^i)-n,++n>=e.length&&(e[0]=e[e.length-1],n=1)}e[0]=2147483648}},s.prototype._nextInt=function(){var t,e=this._mt;if(this._index>=e.length){for(var n=0,i=e.length;t=2147483648&e[n]|2147483647&e[n+1],e[n]=e[n+397]^t>>>1^(1&t?2567483615:0),++n<i-397;);for(;t=2147483648&e[n]|2147483647&e[n+1],e[n]=e[n+397-i]^t>>>1^(1&t?2567483615:0),++n<i-1;);t=2147483648&e[i-1]|2147483647&e[0],e[i-1]=e[396]^t>>>1^(1&t?2567483615:0),this._index=0}return t=e[this._index++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},s.prototype.getInt=function(){var t,e,n;switch(arguments.length){case 0:return this._nextInt();case 1:e=s._toNumber(arguments[t=0]);break;default:t=s._toNumber(arguments[0]),e=s._toNumber(arguments[1])-t}if(!(0<e&&e<4294967296))return this._nextInt()+t;if((e&1+~e)==e)return(e-1&this._nextInt())+t;for(;e>4294967296-((n=this._nextInt())-(n%=e)););return n+t},s.prototype.getFloat=function(){return(67108864*(this._nextInt()>>>5)+(this._nextInt()>>>6))/9007199254740992},t.MersenneTwister=s}(alm=alm||{}),function(t){var i,o,e,r;function n(t,e){void 0===t&&(t=0),void 0===e&&(e=.1);var n=o.call(this)||this;return n.updateHandler=function(){var t;n.requestId=window.requestAnimationFrame(n.updateHandler),0<n.targetFrameRate?(t=r.now())-n.frameStartTime>=n.interval-n.toleranceDuration&&(n.frameStartTime=t,n.dispatchEvent(new i.AnimationFrameTickerEvent(i.AnimationFrameTickerEvent.TICK,n))):n.dispatchEvent(new i.AnimationFrameTickerEvent(i.AnimationFrameTickerEvent.TICK,n))},n.targetFrameRate=t,n.interval=1e3/n.targetFrameRate,n.tolerance=e,n.toleranceDuration=n.interval*n.tolerance,n.isRunning=!1,n}i=t.time||(t.time={}),e=t.event.EventDispatcher,r=t.util.Time,__extends(n,o=e),n.prototype.start=function(){this.isRunning||(this.isRunning=!0,this.frameStartTime=r.now(),this.requestId=window.requestAnimationFrame(this.updateHandler))},n.prototype.stop=function(){this.isRunning&&(this.isRunning=!1,window.cancelAnimationFrame(this.requestId))},n.prototype.getIsRunning=function(){return this.isRunning},n.prototype.getTargetFrameRate=function(){return this.isRunning},n.prototype.setInterval=function(t){return window.setTimeout(t,1e3/60)},n.prototype.clearInterval=function(t){window.clearInterval(t)},e=n,i.AnimationFrameTicker=e}(alm=alm||{}),function(t){var e,n;function i(t,e){return n.call(this,t,e)||this}e=t.time||(t.time={}),t=t.event.Event,__extends(i,n=t),i.prototype.clone=function(){return new i(this.type,this.target)},i.prototype.toString=function(){return"[AnimationFrameTickerEvent] type = "+this.type},i.TICK="tick",t=i,e.AnimationFrameTickerEvent=t}(alm=alm||{}),function(t){var i,o,e,r;function n(t,e){void 0===t&&(t=1e3),void 0===e&&(e=0);var n=o.call(this)||this;return n.timerHandler=function(){n.tStartTime=r.now(),++n.elapsedCount;var t=!1;0<n.repeatCount&&n.elapsedCount>=n.repeatCount?(t=!0,n.stop()):n.tInterval!=n.interval&&n.startInterval(n.interval),n.dispatch(i.TimerEvent.TICK),t&&n.dispatch(i.TimerEvent.COMPLETE)},n.interval=t,n.repeatCount=e,n.isRunning=!1,n.tId=-1,n.reset(),n}i=t.time||(t.time={}),e=t.event.EventDispatcher,r=t.util.Time,__extends(n,o=e),n.prototype.start=function(){this.isRunning||(this.isRunning=!0,this.tStartTime=r.now(),this.startInterval(-1!=this.tRestTime?this.tRestTime:this.interval))},n.prototype.stop=function(){this.isRunning&&(this.isRunning=!1,this.tRestTime=r.now()-this.tStartTime,this.stopInterval())},n.prototype.reset=function(){this.stop(),this.elapsedCount=0,this.tRestTime=-1},n.prototype.restart=function(){this.reset(),this.start()},n.prototype.startInterval=function(t){this.stopInterval(),this.tInterval=t,this.tId=window.setInterval(this.timerHandler,this.tInterval)},n.prototype.stopInterval=function(){-1!=this.tId&&(clearInterval(this.tId),this.tId=-1)},n.prototype.dispatch=function(t){this.dispatchEvent(new i.TimerEvent(t,this,this.elapsedCount,this.repeatCount,this.getRestCount()))},n.prototype.getIsRunning=function(){return this.isRunning},n.prototype.getInterval=function(){return this.interval},n.prototype.setInterval=function(t){this.interval=t},n.prototype.getElapsedTime=function(){return r.now()-this.tStartTime},n.prototype.getRestTime=function(){return this.interval-this.getElapsedTime()},n.prototype.getElapsedCount=function(){return this.elapsedCount},n.prototype.getRepeatCount=function(){return this.repeatCount},n.prototype.setRepeatCount=function(t){this.repeatCount=t},n.prototype.getRestCount=function(){return this.repeatCount-this.elapsedCount},e=n,i.Timer=e}(alm=alm||{}),function(t){var e,r;function n(t,e,n,i,o){void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0);e=r.call(this,t,e)||this;return e.elapsedCount=n,e.repeatCount=i,e.restCount=o,e}e=t.time||(t.time={}),t=t.event.Event,__extends(n,r=t),n.prototype.clone=function(){return new n(this.type,this.target,this.elapsedCount,this.repeatCount,this.restCount)},n.prototype.toString=function(){return"[TimerEvent] type = "+this.type+", elapsedCount = "+this.elapsedCount+", repeatCount="+this.repeatCount+", restCount="+this.restCount},n.TICK="tick",n.COMPLETE="complete",t=n,e.TimerEvent=t}(alm=alm||{}),function(t){var r,e;function s(t){void 0===t&&(t=3);var i=e.call(this)||this;return i.fileLoadCompleteHandler=function(t,e,n){void 0===n&&(n=null),--i.currentThreadCount,t.isLoading=!1,t.isLoadComplete=!0,t.content=e,t.param.onLoad&&t.param.onLoad(e,n),i.dispatchEvent(new r.FileLoaderSuccessEvent(r.FileLoaderSuccessEvent.SUCCESS,i,e,n)),i.next()},i.fileLoadErrorHandler=function(t,e){void 0===e&&(e=null),--i.currentThreadCount,t.isLoading=!1,t.isLoadComplete=!0,t.param.onError&&t.param.onError(e),i.dispatchEvent(new r.FileLoaderErrorEvent(r.FileLoaderErrorEvent.ERROR,i,e)),i.next()},i.isLoading_=!1,i.currentCount=0,i.totalCount=0,i.currentThreadCount=0,i.totalThreadCount=t,i.loadingQueries=[],i.loadingQueryIndex=-1,i.queriesByQueryId={},i.queriesByUrl={},i.handlersByType={},trace("[FileLoader] totalThreadCount : "+i.totalThreadCount),i}r=t.io||(t.io={}),t=t.event.EventDispatcher,__extends(s,e=t),s.prototype.require=function(t,e,n){return this.addQuery(e,t,{},n=void 0===n?"":n)},s.prototype.addQuery=function(t,e,n,i){if(void 0===i&&(i=""),this.queriesByUrl[e])return this.queriesByUrl[e].id;var o=new r.FileQuery;return o.type=t,o.url=e,o.param=n,""!=i?o.id=i:(o.id=String(s.id),++s.id),this.loadingQueries.push(o),this.queriesByQueryId[o.id]=o,(this.queriesByUrl[o.url]=o).id},s.prototype.load=function(){this.isLoading_||(this.isLoading_=!0,this.loadingQueryIndex=-1,this.next())},s.prototype.next=function(){var i=this;this.currentCount=this.loadingQueryIndex+1,this.totalCount=this.loadingQueries.length;var e=this.currentCount/this.totalCount;0==this.currentCount?this.dispatchEvent(new r.FileLoaderProgressEvent(r.FileLoaderProgressEvent.START,this,e,this.currentCount,this.totalCount)):this.dispatchEvent(new r.FileLoaderProgressEvent(r.FileLoaderProgressEvent.PROGRESS,this,e,this.currentCount,this.totalCount));for(var o=this;this.currentThreadCount<this.totalThreadCount;)if("break"===function(){if(!(o.loadingQueryIndex+1<o.totalCount))return o.isLoading_=!1,o.loadingQueries=[],o.loadingQueryIndex=-1,o.dispatchEvent(new r.FileLoaderProgressEvent(r.FileLoaderProgressEvent.COMPLETE,o,e,o.currentCount,o.totalCount)),"break";++o.currentThreadCount,++o.loadingQueryIndex;var n=o.loadingQueries[o.loadingQueryIndex];n.isLoading=!0,n.isLoadComplete=!1,trace("[FileLoader] loading... '"+n.url+"' as '"+n.type+"'");var t=o.handlersByType[n.type];t?t.load(n.url,function(t,e){i.fileLoadCompleteHandler(n,t,e=void 0===e?null:e)},function(t){i.fileLoadErrorHandler(n,t=void 0===t?null:t)}):(trace("[FileLoader] handler is not found '"+n.type+"'"),--o.currentThreadCount)}())break},s.prototype.addHandler=function(t){this.handlersByType[t.getType()]=t},s.prototype.getQueryByQueryId=function(t){return this.queriesByQueryId[t]},s.prototype.getQueryByUrl=function(t){return this.queriesByUrl[t]},s.prototype.isLoading=function(){return this.isLoading_},s.prototype.getCurrentCount=function(){return this.currentCount},s.prototype.getTotalCount=function(){return this.totalCount},s.prototype.getContentByUrl=function(t){return this.queriesByUrl[t].content},s.prototype.getContentByQueryId=function(t){return this.queriesByQueryId[t].content},s.prototype.getCurrentThreadCount=function(){return this.currentThreadCount},s.prototype.getTotalThreadCount=function(){return this.totalThreadCount},s.id=0,t=s,r.FileLoader=t}(alm=alm||{}),function(t){var e,r;function n(t,e,n,i,o){void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0);e=r.call(this,t,e)||this;return e.progress=n,e.loadedCount=i,e.totalCount=o,e}e=t.io||(t.io={}),r=t.event.Event,__extends(n,r),n.prototype.clone=function(){return new n(this.type,this.target,this.progress,this.loadedCount,this.totalCount)},n.prototype.toString=function(){return"[FileLoaderProgressEvent] type = "+this.type+", progress = "+this.progress+", loadedCount = "+this.loadedCount+", totalCount = "+this.totalCount},n.START="start",n.PROGRESS="progress",n.COMPLETE="complete",e.FileLoaderProgressEvent=n}(alm=alm||{}),function(t){var e,o;function n(t,e,n,i){void 0===i&&(i=null);e=o.call(this,t,e)||this;return e.content=n,e.info=i,e}e=t.io||(t.io={}),o=t.event.Event,__extends(n,o),n.prototype.clone=function(){return new n(this.type,this.target,this.content,this.info)},n.prototype.toString=function(){return"[FileLoaderSuccessEvent] type = "+this.type+", info = "+this.info},n.SUCCESS="success",e.FileLoaderSuccessEvent=n}(alm=alm||{}),function(t){var e,i;function n(t,e,n){void 0===n&&(n=null);e=i.call(this,t,e)||this;return e.info=n,e}e=t.io||(t.io={}),i=t.event.Event,__extends(n,i),n.prototype.clone=function(){return new n(this.type,this.target,this.info)},n.prototype.toString=function(){return"[FileLoaderErrorEvent] type = "+this.type+", info = "+this.info},n.ERROR="error",e.FileLoaderErrorEvent=n}(alm=alm||{}),function(t){(t.io||(t.io={})).FileQuery=function(){this.isLoading=!1,this.isLoadComplete=!1}}(alm=alm||{}),function(t){function e(t){this.crossOrigin=t=void 0===t?null:t}t=t.io||(t.io={}),e.prototype.getType=function(){return e.TYPE},e.prototype.load=function(t,e,n){var i=new Image;i.crossOrigin=this.crossOrigin,i.src=t,i.onabort=function(){n("load abort : "+t)},i.onerror=function(){n("load error : "+t)},i.onload=function(){e(i)}},e.TYPE="image",t.ImageFileHandler=e}(alm=alm||{}),function(t){var e,o,r;function n(t,e,n,i){void 0===n&&(n=""),void 0===i&&(i=1),this.context=t,this.masterVolume=i,this.buffer=null,this.sourceNode=null,this.isAvailable=!1,this.duration=0,this.gainNode=this.context.createGain(),this.gainNode.connect(e),this.volume=1,this.applyVolume(),""!=n&&this.load(n)}e=t.audio||(t.audio={}),o=t.util.Cmd,r=t.math.Easing,n.prototype.load=function(e){var n=this,t=new XMLHttpRequest;t.responseType="arraybuffer",t.onreadystatechange=function(){4==t.readyState&&(0!=t.status&&200!=t.status||n.context.decodeAudioData(t.response,function(t){trace("[AudioClip] load complete :",e),n.isAvailable=!0,n.buffer=t,n.duration=n.buffer.duration},function(t){trace("[AudioClip] load error :",t),trace(t)}))},t.open("GET",e,!0),t.send("")},n.prototype.play=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),this.isAvailable&&(!e&&this.sourceNode||(this.stop(),this.sourceNode=this.context.createBufferSource(),this.sourceNode.buffer=this.buffer,this.sourceNode.loop=t,this.sourceNode.connect(this.gainNode),this.sourceNode.start(0)))},n.prototype.stop=function(){this.sourceNode&&(this.sourceNode.stop(),this.sourceNode.disconnect(this.gainNode),this.sourceNode=null)},n.prototype.getVolume=function(){return this.volume},n.prototype.setVolume=function(t){o.stop(this.volumeTween),this.volume!=t&&(this.volume=t,this.applyVolume())},n.prototype.fadeTo=function(t,e,n){var i=this;void 0===e&&(e=1e3),void 0===n&&(n=null),o.stop(this.volumeTween),this.volumeTween=new cmd.Tween(this,{volume:t},null,e,r.linear,null,function(){i.applyVolume()},function(){n&&n()}),this.volumeTween.execute()},n.prototype.fadeIn=function(t){this.fadeTo(1,t=void 0===t?1e3:t)},n.prototype.fadeOut=function(t,e){var n=this;void 0===e&&(e=!0),this.fadeTo(0,t=void 0===t?1e3:t,function(){e&&n.stop()})},n.prototype.applyVolume=function(){this.gainNode.gain.value=this.volume*this.masterVolume},n.prototype.getIsAvailable=function(){return this.isAvailable},n.prototype.getDuration=function(){return this.duration},n.prototype.getCurrentTime=function(){return this.context.currentTime},e.AudioClip=n}(alm=alm||{}),function(t){var i,n;function e(){var t=n.call(this)||this,e=window.AudioContext||window.webkitAudioContext||null;return t.isAvailable=null!=e,t.isAvailable&&(t.context=new e,t.clipsById={},t.masterGainNode=t.context.createGain(),t.masterGainNode.connect(t.context.destination),t.masterVolume=1),t}i=t.audio||(t.audio={}),t=t.event.EventDispatcher,__extends(e,n=t),e.prototype.add=function(t,e,n){return!!this.isAvailable&&(!this.clipsById[n=""==(n=void 0===n?"":n)?t:n]&&(this.clipsById[n]=new i.AudioClip(this.context,this.masterGainNode,t,e=void 0===e?1:e),!0))},e.prototype.getClip=function(t){if(this.isAvailable)return this.clipsById[t]},e.prototype.getMasterVolume=function(){return this.isAvailable?this.masterVolume:0},e.prototype.setMasterVolume=function(t){this.isAvailable&&(this.masterVolume=t,this.masterGainNode.gain.value=this.masterVolume)},e.getInstance=function(){return e.instance||(e.instance=new e)},e.instance=null,t=e,i.AudioPlayer=t}(alm=alm||{}),function(t){var n;function e(t){var e=this;void 0===t&&(t=1),this.timerHandler=function(){++e.clipIndex==e.clipCount&&(e.clipIndex=0),e.playCurrent()},this.audioPlayer=n.AudioPlayer.getInstance(),this.clipCount=0,this.clipIndex=0,this.clipIds=[],this.clip=null,this.isPlaying=!1,this.volume=1,this.crossOverDuration=t,this.timeoutId=-1}n=t.audio||(t.audio={}),e.prototype.add=function(t,e){var n=t+"-"+this.clipCount;this.audioPlayer.add(t,e=void 0===e?1:e,n),this.clipIds.push(n),this.clipCount=this.clipIds.length},e.prototype.play=function(){this.isPlaying||(this.isPlaying=!0,this.playCurrent())},e.prototype.stop=function(){this.isPlaying&&(this.isPlaying=!1,this.stopCurrent())},e.prototype.setVolume=function(t){this.volume=t,this.clip&&this.clip.setVolume(this.volume)},e.prototype.playCurrent=function(){this.clip=this.audioPlayer.getClip(this.clipIds[this.clipIndex]),this.clip.setVolume(this.volume),this.clip.play(!1,!0);var t=1e3*(this.clip.getDuration()-this.crossOverDuration);this.timeoutId=window.setTimeout(this.timerHandler,t)},e.prototype.stopCurrent=function(){-1!=this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=-1),this.clip&&(this.clip.stop(),this.clip=null)},n.CrossOverLoopAudio=e}(alm=alm||{}),function(t){var i,e,n;function o(t,e){var n=this;void 0===t&&(t=.12),void 0===e&&(e=.6),this.timerHandler=function(){var t=n.isWaitingForFirstStep?.5*n.interval:n.interval,e=(new Date).getTime();e-n.startTime>=1e3*t&&(n.startTime=e,n.isWaitingForFirstStep=!1,++n.clipIndex>=n.clipCount&&(n.clipIndex=0),e=n.clipIds[n.clipIndex],n.audioPlayer.getClip(e).setVolume(n.volume),n.audioPlayer.getClip(e).play(!1,!0))},this.audioPlayer=i.AudioPlayer.getInstance(),this.intervalMin=t,this.intervalMax=e,this.intervalId=-1,this.interval=this.intervalMax,this.clipIndex=-1,this.clipCount=0,this.clipIds=[],this.isPlaying=!1,this.volume=1}i=t.audio||(t.audio={}),e=t.util.Num,n=t.math.Easing,o.prototype.add=function(t,e){var n=t+"-"+this.clipCount;this.audioPlayer.add(t,e=void 0===e?1:e,n),this.clipIds.push(n),this.clipCount=this.clipIds.length},o.prototype.play=function(t){void 0===t&&(t=!0),this.isPlaying||(this.isPlaying=!0,this.isWaitingForFirstStep=!0,this.startTime=t?0:(new Date).getTime(),this.intervalId=window.setInterval(this.timerHandler,1e3/60),this.timerHandler())},o.prototype.stop=function(){this.isPlaying&&(this.isPlaying=!1,window.clearInterval(this.intervalId))},o.prototype.setSpeed=function(t){this.interval=e.ease(t,0,1,this.intervalMax,this.intervalMin,n.easeOutSine)},o.prototype.setVolume=function(t){this.volume=t},i.FootstepAudio=o}(alm=alm||{}),function(t){var e,n;function i(t,e){return n.call(this,t,e)||this}e=t.view||(t.view={}),t=t.event.Event,__extends(i,n=t),i.prototype.clone=function(){return new i(this.type,this.target)},i.prototype.toString=function(){return"[ViewEvent] type = "+this.type},i.INITIALIZE_BEGIN="initializeBegin",i.INITIALIZE_END="initializeEnd",i.FINALIZE_BEGIN="finalizeBegin",i.FINALIZE_END="finalizeEnd",i.READY_BEGIN="readyBegin",i.READY_END="readyEnd",i.SHOW_BEGIN="showBegin",i.SHOW_END="showEnd",i.HIDE_BEGIN="hideBegin",i.HIDE_END="hideEnd",t=i,e.ViewEvent=t}(alm=alm||{}),function(t){var i,o,e,r;function s(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var n=o.call(this)||this;return n.id=null!=e?e:String(s.viewCount),n.view=t,n.name="",n.autoHideWithInit=!0,n.isInitializing=!1,n.isInitialized=!1,n.isFinalizing=!1,n.isFinalized=!1,n.isReadying=!1,n.isReadied=!1,n.isShowing=!1,n.isShown=!0,n.isHiding=!1,s.viewsById[n.id]&&r.warn("view id '"+n.id+"' is duplicate"),s.viewsById[n.id]=n,++s.viewCount,n}i=t.view||(t.view={}),e=t.event.EventDispatcher,r=t.debug.Logger,__extends(s,o=e),s.prototype.initialize=function(){this.isInitializing||this.isInitialized||(this.isInitializing=!0,this.dispatchEvent(new i.ViewEvent(i.ViewEvent.INITIALIZE_BEGIN,this)),this.view=this.implInitialize(),this.isInitializing?(throwError(this.name||this,"view is not assigned",!this.view),this.autoHideWithInit&&this.hide(!1),this.isInitializing=!1,this.isInitialized=!0,this.dispatchEvent(new i.ViewEvent(i.ViewEvent.INITIALIZE_END,this))):this.view=null)},s.prototype.ready=function(){this.isReadying||this.isReadied||(this.isReadying=!0,throwError(this.name||this,"ready() must be called after initialize()",!this.isInitialized),this.dispatchEvent(new i.ViewEvent(i.ViewEvent.READY_BEGIN,this)),this.implReady(),this.isReadying=!1,this.isReadied=!0,this.dispatchEvent(new i.ViewEvent(i.ViewEvent.READY_END,this)))},s.prototype.finalize=function(){(this.isInitializing||this.isInitialized)&&(this.isFinalizing&&this.isFinalized||(this.isFinalizing=!0,this.dispatchEvent(new i.ViewEvent(i.ViewEvent.FINALIZE_BEGIN,this)),this.implFinalize(),this.isFinalizing=!1,this.isFinalized=!0,this.isInitializing=!1,this.isInitialized=!1,this.dispatchEvent(new i.ViewEvent(i.ViewEvent.FINALIZE_END,this)),delete s.viewsById[this.id],s.viewsById[this.id]=null))},s.prototype.show=function(t){void 0===t&&(t=!0),this.isShown||this.getShowCommand(t).execute()},s.prototype.hide=function(t){void 0===t&&(t=!0),this.isShown&&this.getHideCommand(t).execute()},s.prototype.getShowCommand=function(t){var e=this;void 0===t&&(t=!0);var n=new cmd.Serial;return n.addCommand(new cmd.Func(function(){e.isShown||(throwError(e.name||e,"getShowCommand() is must be called after initialize()",e.isInitializing||!e.isInitialized),throwWarn(e.name||e,"getShowCommand() is must be called after ready()",e.isReadying||!e.isReadied),e.isShown=!0,e.isShowing=!0,e.isHiding=!1,e.showCommand&&(e.showCommand.interrupt(),e.showCommand=null),e.hideCommand&&(e.hideCommand.interrupt(),e.hideCommand=null),e.showCommand=n,e.dispatchEvent(new i.ViewEvent(i.ViewEvent.SHOW_BEGIN,e)),n.insertCommand(e.implShow(e.view,t),new cmd.Func(function(){e.showCommand=null,e.isShowing=!1,e.dispatchEvent(new i.ViewEvent(i.ViewEvent.SHOW_END,e))})))})),n},s.prototype.getHideCommand=function(t){var e=this;void 0===t&&(t=!0);var n=new cmd.Serial;return n.addCommand(new cmd.Func(function(){e.isShown&&(e.isInitializing||(throwError(e.name||e,"getHideCommand() is must be called after initialize()",e.isInitializing||!e.isInitialized),throwWarn(e.name||e,"getHideCommand() is must be called after ready()",e.isReadying||!e.isReadied)),e.isShown=!1,e.isShowing=!1,e.isHiding=!0,e.showCommand&&(e.showCommand.interrupt(),e.showCommand=null),e.hideCommand&&(e.hideCommand.interrupt(),e.hideCommand=null),e.hideCommand=n,e.dispatchEvent(new i.ViewEvent(i.ViewEvent.HIDE_BEGIN,e)),n.insertCommand(e.implHide(e.view,t),new cmd.Func(function(){e.hideCommand=null,e.isHiding=!1,e.dispatchEvent(new i.ViewEvent(i.ViewEvent.HIDE_END,e))})))})),n},s.prototype.getIsInitializing=function(){return this.isInitializing},s.prototype.getIsInitialized=function(){return this.isInitialized},s.prototype.getIsReadying=function(){return this.isReadying},s.prototype.getIsReadied=function(){return this.isReadied},s.prototype.getIsShowing=function(){return this.isShowing},s.prototype.getIsShown=function(){return this.isShown},s.prototype.getIsHiding=function(){return this.isHiding},s.prototype.getIsHidden=function(){return!this.isShown},s.prototype.getIsFinalizing=function(){return this.isFinalizing},s.prototype.getIsFinalized=function(){return this.isFinalized},s.prototype.getId=function(){return this.id},s.prototype.getView=function(){return this.view},s.prototype.getName=function(){return this.name},s.prototype.setName=function(t){this.name=t},s.prototype.getAutoHideWithInit=function(){return this.autoHideWithInit},s.prototype.setAutoHideWithInit=function(t){this.autoHideWithInit=t},s.getViewById=function(t){return s.viewsById[t]},s.viewCount=0,s.viewsById={},e=s,i.View=e}(alm=alm||{}),function(t){function e(t,e,n,i,o){var r=this;void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this.mouseOverHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.over(),r.applyMouseCursor()},this.mouseOutHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.out(),r.applyMouseCursor()},this.mouseDownHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.down()},this.mouseUpHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.up()},this.clickHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.click()},this.touchStartHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.down()},this.touchEndHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.up(),r.click()},this.touchCancelHandler=function(t){r.isPreventDefaultEnabled&&t.preventDefault(),r.isStopPropagationEnabled&&t.stopPropagation(),r.up()},this.target=t,this.hitArea=null,this.isHoverCursorEnabled=n,this.isPreventDefaultEnabled=i,this.isStopPropagationEnabled=o,this.isEnabled=!0,this.isOver=!1,this.isDown=!1,this.isOverInternal=!1,this.isDownInternal=!1,this.defaultMouseCursor="",this.setHitArea(e)}t=t.view||(t.view={}),e.prototype.over=function(t){void 0===t&&(t=!0),this.isOverInternal=!0,this.isEnabled&&(this.isOver||(this.isOver=!0,this.target.implButtonOver(t)))},e.prototype.out=function(t){this._out(!0,t=void 0===t?!0:t)},e.prototype._out=function(t,e){void 0===e&&(e=!0),this.isOverInternal=!1,!this.isEnabled&&t||this.isOver&&(this.isOver=!1,this.target.implButtonOut(e))},e.prototype.down=function(t){void 0===t&&(t=!0),this.isDownInternal=!0,this.isEnabled&&(this.isDown||(this.isDown=!0,this.target.implButtonDown(t)))},e.prototype.up=function(t){this._up(!0,t=void 0===t?!0:t)},e.prototype._up=function(t,e){void 0===e&&(e=!0),this.isDownInternal=!1,!this.isEnabled&&t||this.isDown&&(this.isDown=!1,this.target.implButtonUp(e))},e.prototype.click=function(t){void 0===t&&(t=!0),this.isEnabled&&this.target.implButtonClick(t)},e.prototype.on=function(){null!=this.hitArea&&(this.hitArea.addEventListener("mouseover",this.mouseOverHandler),this.hitArea.addEventListener("mouseout",this.mouseOutHandler),this.hitArea.addEventListener("mousedown",this.mouseDownHandler),this.hitArea.addEventListener("mouseup",this.mouseUpHandler),this.hitArea.addEventListener("click",this.clickHandler),this.hitArea.addEventListener("touchstart",this.touchStartHandler),this.hitArea.addEventListener("touchend",this.touchEndHandler),this.hitArea.addEventListener("touchcancel",this.touchCancelHandler))},e.prototype.off=function(){null!=this.hitArea&&(this.hitArea.removeEventListener("mouseover",this.mouseOverHandler),this.hitArea.removeEventListener("mouseout",this.mouseOutHandler),this.hitArea.removeEventListener("mousedown",this.mouseDownHandler),this.hitArea.removeEventListener("mouseup",this.mouseUpHandler),this.hitArea.removeEventListener("click",this.clickHandler),this.hitArea.removeEventListener("touchstart",this.touchStartHandler),this.hitArea.removeEventListener("touchend",this.touchEndHandler),this.hitArea.removeEventListener("touchcancel",this.touchCancelHandler))},e.prototype.getIsEnabled=function(){return this.isEnabled},e.prototype.setIsEnabled=function(t,e){void 0===e&&(e=!0),this.isEnabled!=t&&(this.isEnabled=t,this.isEnabled?(this.isOverInternal&&this.over(),this.isDownInternal&&this.down()):(this.isOver&&(this._out(!1),this.isOverInternal=!0),this.isDown&&(this._up(!1),this.isDownInternal=!0)),this.target.implButtonChangeEnabled(this.isEnabled,e))},e.prototype.getIsOver=function(){return this.isOver},e.prototype.getIsDown=function(){return this.isDown},e.prototype.getHitArea=function(){return this.hitArea},e.prototype.setHitArea=function(t){this.hitArea!==t&&(this.off(),this.hitArea=t,this.on())},e.prototype.clearHitArea=function(){this.setHitArea(null)},e.prototype.getIsPreventDefaultEnabled=function(){return this.isPreventDefaultEnabled},e.prototype.setIsPreventDefaultEnabled=function(t){this.isPreventDefaultEnabled=t},e.prototype.getIsStopPropagationEnabled=function(){return this.isStopPropagationEnabled},e.prototype.setIsStopPropagationEnabled=function(t){this.isStopPropagationEnabled=t},e.prototype.getIsHoverCursorEnabled=function(){return this.isHoverCursorEnabled},e.prototype.setIsHoverCursorEnabled=function(t){this.isHoverCursorEnabled=t},e.prototype.applyMouseCursor=function(){this.isHoverCursorEnabled&&(this.isOverInternal&&this.isEnabled&&null!=this.hitArea?(this.defaultMouseCursor=this.hitArea.style.cursor,this.hitArea.style.cursor="pointer"):this.hitArea.style.cursor=""!=this.defaultMouseCursor?this.defaultMouseCursor:"auto")},t.ButtonBehavior=e}(alm=alm||{}),function(t){function e(t){this.target=t}t=t.view||(t.view={}),e.prototype.select=function(t){void 0===t&&(t=!0),this.isSelected||(this.isSelected=!0,this.target.implSelectionChanged(this.isSelected,t))},e.prototype.deselect=function(t){void 0===t&&(t=!0),this.isSelected&&(this.isSelected=!1,this.target.implSelectionChanged(this.isSelected,t))},e.prototype.getIsSelected=function(){return this.isSelected},t.SelectionBehavior=e}(alm=alm||{}),function(t){function e(){}t=t.browser||(t.browser={}),e.initialize=function(){if(!this.isInitialized){this.isInitialized=!0;var t=window.navigator.userAgent.toLowerCase();this.isTablet=-1!=t.indexOf("windows")&&-1!=t.indexOf("touch")||-1!=t.indexOf("ipad")||-1!=t.indexOf("android")&&-1==t.indexOf("mobile")||-1!=t.indexOf("firefox")&&-1!=t.indexOf("tablet")||-1!=t.indexOf("kindle")||-1!=t.indexOf("silk")||-1!=t.indexOf("playbook"),this.isMobile=-1!=t.indexOf("windows")&&-1!=t.indexOf("phone")||-1!=t.indexOf("iphone")||-1!=t.indexOf("ipod")||-1!=t.indexOf("android")&&-1!=t.indexOf("mobile")||-1!=t.indexOf("firefox")&&-1!=t.indexOf("mobile")||-1!=t.indexOf("blackberry"),this.isDesktop=!this.isTablet&&!this.isMobile,this.isIOS=-1!=t.indexOf("ipad")||-1!=t.indexOf("iphone")||-1!=t.indexOf("ipod"),this.isAndroid=-1!=t.indexOf("android")&&-1!=t.indexOf("mobile"),-1!=t.indexOf("msie")||-1!=t.indexOf("trident")?this.isIE=!0:-1!=t.indexOf("edge")?this.isEdge=!0:-1!=t.indexOf("chrome")?this.isChrome=!0:-1!=t.indexOf("safari")?this.isSafari=!0:-1!=t.indexOf("firefox")?this.isFireFox=!0:-1!=t.indexOf("opera")?this.isOpera=!0:this.isUnknownBrowser=!0;try{var e=window.navigator;this.isChrome?this.langFull=e.languages[0]||e.browserLanguage||e.language||e.userLanguage:this.langFull=e.browserLanguage||e.language||e.userLanguage,this.lang=this.langFull.substr(0,2)}catch(t){this.lang=void 0,this.langFull=void 0}this.isTouchEnabled=void 0!==window.ontouchstart,this.isDownloadEnabled=!this.isIOS;try{var n=document.createElement("canvas"),i=n.getContext("webgl")||n.getContext("experimental-webgl");this.isWebGlEnabled=!!(window.WebGLRenderingContext&&i&&i.getShaderPrecisionFormat)}catch(t){this.isWebGlEnabled=!1}this.devicePixelRatio=window.devicePixelRatio,this.isRetina=1<this.devicePixelRatio}},e.getIsDesktop=function(){return this.initialize(),this.isDesktop},e.getIsTablet=function(){return this.initialize(),this.isTablet},e.getIsMobile=function(){return this.initialize(),this.isMobile},e.getIsIOS=function(){return this.initialize(),this.isIOS},e.getIsAndroid=function(){return this.initialize(),this.isAndroid},e.getIsIE=function(){return this.initialize(),this.isIE},e.getIsEdge=function(){return this.initialize(),this.isEdge},e.getIsChrome=function(){return this.initialize(),this.isChrome},e.getIsSafari=function(){return this.initialize(),this.isSafari},e.getIsFireFox=function(){return this.initialize(),this.isFireFox},e.getIsOpera=function(){return this.initialize(),this.isOpera},e.getIsUnknownBrowser=function(){return this.initialize(),this.isUnknownBrowser},e.getLang=function(){return this.initialize(),this.lang},e.getLangFull=function(){return this.initialize(),this.langFull},e.getIsTouchEnabled=function(){return this.initialize(),this.isTouchEnabled},e.getIsDownloadEnabled=function(){return this.initialize(),this.isDownloadEnabled},e.getIsWebGlEnabled=function(){return this.initialize(),this.isWebGlEnabled},e.getIsRetina=function(){return this.initialize(),this.isRetina},e.getDevicePixelRatio=function(){return this.initialize(),this.devicePixelRatio},e.getDpi=function(){var t;return-1==this.dpi&&((t=document.createElement("div")).setAttribute("style","height:1in;left:-100%;top:-100%;position:absolute;width:1in;"),document.body.appendChild(t),this.dpi=t.offsetHeight,document.body.removeChild(t)),this.dpi},e.isDesktop=!1,e.isTablet=!1,e.isMobile=!1,e.isIOS=!1,e.isAndroid=!1,e.isIE=!1,e.isEdge=!1,e.isChrome=!1,e.isSafari=!1,e.isFireFox=!1,e.isOpera=!1,e.isUnknownBrowser=!1,e.isTouchEnabled=!1,e.isDownloadEnabled=!1,e.isWebGlEnabled=!1,e.isRetina=!1,e.devicePixelRatio=1,e.dpi=-1,e.isInitialized=!1,t.DeviceInfo=e}(alm=alm||{}),function(t){var e,i;function o(){}e=t.browser||(t.browser={}),i=t.util.Time,o.save=function(t,e,n){if(void 0===n&&(n=-1),!o.isAvailable())return!1;n={value:JSON.stringify(e),expiredAt:n};return localStorage.setItem(t,JSON.stringify(n)),!0},o.saveWithTerm=function(t,e,n){n=0<(n=void 0===n?-1:n)?i.now()+n:-1;return o.save(t,e,n)},o.load=function(t,e){if(void 0===e&&(e=null),!o.isAvailable())return e;var n=JSON.parse(localStorage.getItem(t));return n?!(0<n.expiredAt)||i.now()<n.expiredAt?JSON.parse(n.value):(localStorage.removeItem(t),e):e},o.remove=function(t){o.isAvailable()&&localStorage.removeItem(t)},o.isAvailable=function(){if(null==o.isAvailable_)try{localStorage.setItem("__CKECK__","__CKECK__"),localStorage.removeItem("__CKECK__"),o.isAvailable_=!0}catch(t){o.isAvailable_=!1}return o.isAvailable_},o.toMilliseconds=function(t,e,n,i,o){return(o=void 0===o?0:o)+1e3*((i=void 0===i?0:i)+60*((n=void 0===n?0:n)+60*((e=void 0===e?0:e)+24*(t=void 0===t?0:t))))},o.isAvailable_=null,e.LocalStorage=o}(alm=alm||{}),function(t){function n(){}t=t.browser||(t.browser={}),n.save=function(t,e){return!!n.isAvailable()&&(sessionStorage.setItem(t,JSON.stringify(e)),!0)},n.load=function(t,e){if(void 0===e&&(e=null),!n.isAvailable())return e;t=JSON.parse(sessionStorage.getItem(t));return t?JSON.parse(t.value):e},n.remove=function(t){n.isAvailable()&&sessionStorage.removeItem(t)},n.isAvailable=function(){if(null==n.isAvailable_)try{sessionStorage.setItem("__CKECK__","__CKECK__"),sessionStorage.removeItem("__CKECK__"),n.isAvailable_=!0}catch(t){n.isAvailable_=!1}return n.isAvailable_},n.isAvailable_=null,t.SessionStorage=n}(alm=alm||{}),function(e){!function(n){(t=n.KeyCode||(n.KeyCode={}))[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Alt=18]="Alt",t[t.PauseBreak=19]="PauseBreak",t[t.CapsLock=20]="CapsLock",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.LeftArrow=37]="LeftArrow",t[t.UpArrow=38]="UpArrow",t[t.RightArrow=39]="RightArrow",t[t.DownArrow=40]="DownArrow",t[t.Insert=45]="Insert",t[t.Delete=46]="Delete",t[t.Key0=48]="Key0",t[t.Key1=49]="Key1",t[t.Key2=50]="Key2",t[t.Key3=51]="Key3",t[t.Key4=52]="Key4",t[t.Key5=53]="Key5",t[t.Key6=54]="Key6",t[t.Key7=55]="Key7",t[t.Key8=56]="Key8",t[t.Key9=57]="Key9",t[t.ClosedParen=48]="ClosedParen",t[t.ExclamationMark=49]="ExclamationMark",t[t.AtSign=50]="AtSign",t[t.PoundSign=51]="PoundSign",t[t.Hash=51]="Hash",t[t.DollarSign=52]="DollarSign",t[t.PercentSign=53]="PercentSign",t[t.Caret=54]="Caret",t[t.Hat=54]="Hat",t[t.Ampersand=55]="Ampersand",t[t.Star=56]="Star",t[t.Asterik=56]="Asterik",t[t.OpenParen=57]="OpenParen",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.LeftWindowKey=91]="LeftWindowKey",t[t.RightWindowKey=92]="RightWindowKey",t[t.SelectKey=93]="SelectKey",t[t.Numpad0=96]="Numpad0",t[t.Numpad1=97]="Numpad1",t[t.Numpad2=98]="Numpad2",t[t.Numpad3=99]="Numpad3",t[t.Numpad4=100]="Numpad4",t[t.Numpad5=101]="Numpad5",t[t.Numpad6=102]="Numpad6",t[t.Numpad7=103]="Numpad7",t[t.Numpad8=104]="Numpad8",t[t.Numpad9=105]="Numpad9",t[t.Multiply=106]="Multiply",t[t.Add=107]="Add",t[t.Subtract=109]="Subtract",t[t.DecimalPoint=110]="DecimalPoint",t[t.Divide=111]="Divide",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.NumLock=144]="NumLock",t[t.ScrollLock=145]="ScrollLock",t[t.SemiColon=186]="SemiColon",t[t.Equals=187]="Equals",t[t.Comma=188]="Comma",t[t.Dash=189]="Dash",t[t.Period=190]="Period",t[t.UnderScore=189]="UnderScore",t[t.PlusSign=187]="PlusSign",t[t.ForwardSlash=191]="ForwardSlash",t[t.Tilde=192]="Tilde",t[t.GraveAccent=192]="GraveAccent",t[t.OpenBracket=219]="OpenBracket",t[t.ClosedBracket=221]="ClosedBracket",t[t.Quote=222]="Quote";var t=(i.initialize=function(){this.isInitialized||(this.isInitialized=!0,this.eventDispatcher=new e.event.EventDispatcher)},i.start=function(){this.isRunning||(this.isRunning=!0,this.initialize(),trace("[KeyWatcher] start"),window.addEventListener("keydown",this.windowKeyDownHandler),window.addEventListener("keyup",this.windowKeyUpHandler))},i.stop=function(){this.isRunning&&(this.isRunning=!1,this.initialize(),trace("[KeyWatcher] stop"),window.removeEventListener("keydown",this.windowKeyDownHandler),window.removeEventListener("keyup",this.windowKeyUpHandler))},i.addEventListener=function(t,e){this.initialize(),this.eventDispatcher.addEventListener(t,e)},i.removeEventListener=function(t,e){this.initialize(),this.eventDispatcher.removeEventListener(t,e)},i.getIsRunning=function(){return this.isRunning},i.getIsAnyKeyPressed=function(){return 0<this.pressedKeyCount},i.getIsKeyPressed=function(t){return null!=this.isKeyPressedByKeyCode[t]},i.getIsContinuousPressEnabled=function(){return this.isContinuousPressEnabled},i.setIsContinuousPressEnabled=function(t){this.isContinuousPressEnabled=t},i.windowKeyDownHandler=function(t){var e=t.keyCode;null==i.isKeyPressedByKeyCode[e]?(i.isKeyPressedByKeyCode[e]=!0,++i.pressedKeyCount,i.eventDispatcher.dispatchEvent(new n.KeyWatcherEvent(n.KeyWatcherEvent.KEY_DOWN,i,t))):i.isContinuousPressEnabled&&i.eventDispatcher.dispatchEvent(new n.KeyWatcherEvent(n.KeyWatcherEvent.KEY_DOWN,i,t))},i.windowKeyUpHandler=function(t){var e=t.keyCode;null!=i.isKeyPressedByKeyCode[e]&&(delete i.isKeyPressedByKeyCode[e],--i.pressedKeyCount,i.eventDispatcher.dispatchEvent(new n.KeyWatcherEvent(n.KeyWatcherEvent.KEY_UP,i,t)))},i.isRunning=!1,i.pressedKeyCount=0,i.isKeyPressedByKeyCode={},i.isContinuousPressEnabled=!1,i.isInitialized=!1,i.isLongPressed=!1,i.eventDispatcher=null,i);function i(){}n.KeyWatcher=t}(e.browser||(e.browser={}))}(alm=alm||{}),function(t){var e,i;function n(t,e,n){void 0===n&&(n=null);e=i.call(this,t,e)||this;return e.originalEvent=n,e.key=e.originalEvent.key,e.keyCode=e.originalEvent.keyCode,e.altKey=e.originalEvent.altKey,e.ctrlKey=e.originalEvent.ctrlKey,e.shiftKey=e.originalEvent.shiftKey,e}e=t.browser||(t.browser={}),i=t.event.Event,__extends(n,i),n.prototype.clone=function(){return new n(this.type,this.target,this.originalEvent)},n.prototype.toString=function(){return"[KeyWatcherEvent] type = "+this.type+", key = "+this.key+", keyCode = "+this.keyCode+", altKey = "+this.altKey+", ctrlKey = "+this.ctrlKey+", shiftKey = "+this.shiftKey},n.KEY_UP="keyUp",n.KEY_DOWN="keyDown",e.KeyWatcherEvent=n}(alm=alm||{}),function(t){var e;function n(){}e=t.browser||(t.browser={}),n.initialize=function(){this.isInitialized||(this.isInitialized=!0,this.eventDispatcher=new t.event.EventDispatcher)},n.start=function(t){void 0===t&&(t=null),this.isRunning||(this.isRunning=!0,this.initialize(),trace("[WindowWatcher] start"),this.window=t||window,this.window.addEventListener("resize",this.windowResizeHandler),this.window.addEventListener("orientationchange",this.windowResizeHandler),this.window.addEventListener("scroll",this.windowScrollHandler),this.apply())},n.stop=function(){this.isRunning&&(this.isRunning=!1,this.initialize(),trace("[WindowWatcher] stop"),this.window.removeEventListener("resize",this.windowResizeHandler),this.window.removeEventListener("orientationchange",this.windowResizeHandler),this.window.removeEventListener("scroll",this.windowScrollHandler))},n.apply=function(){this.windowWidth=this.window.innerWidth,this.windowHeight=this.window.innerHeight,this.scrollTop=void 0!==this.window.pageYOffset?this.window.pageYOffset:document.documentElement.scrollTop,this.scrollBottom=this.scrollTop+this.windowHeight},n.addEventListener=function(t,e){this.initialize(),this.eventDispatcher.addEventListener(t,e)},n.removeEventListener=function(t,e){this.initialize(),this.eventDispatcher.removeEventListener(t,e)},n.calcScrolledPosition=function(t){return t-this.scrollTop},n.calcScrolledPositionRatio=function(t){return this.calcScrolledPosition(t)/this.windowHeight},n.resize=function(t){n.apply(),n.eventDispatcher.dispatchEvent(new e.WindowWatcherEvent(e.WindowWatcherEvent.RESIZE,n,t,n.scrollTop,n.scrollBottom,n.windowWidth,n.windowHeight))},n.getIsRunning=function(){return this.isRunning},n.getWindow=function(){return this.window},n.getScrollTop=function(){return this.scrollTop},n.getScrollBottom=function(){return this.scrollBottom},n.getWindowWidth=function(){return this.windowWidth},n.getWindowHeight=function(){return this.windowHeight},n.getIsMobileOrientationResize=function(){return this.isMobileOrientationResize},n.setIsMobileOrientationResize=function(t){this.isMobileOrientationResize=t},n.windowResizeHandler=function(t){!e.DeviceInfo.getIsDesktop()&&n.isMobileOrientationResize||(trace("[WindowWatcher] resize by window.resize"),n.resize(t))},n.windowOrientationChangeHandler=function(t){!e.DeviceInfo.getIsDesktop()&&n.isMobileOrientationResize&&(trace("[WindowWatcher] resize by window.orientationchange"),n.resize(t))},n.windowScrollHandler=function(t){n.apply(),n.eventDispatcher.dispatchEvent(new e.WindowWatcherEvent(e.WindowWatcherEvent.SCROLL,n,t,n.scrollTop,n.scrollBottom,n.windowWidth,n.windowHeight))},n.isRunning=!1,n.window=null,n.windowWidth=0,n.windowHeight=0,n.isMobileOrientationResize=!0,n.isInitialized=!1,n.eventDispatcher=null,e.WindowWatcher=n}(alm=alm||{}),function(t){var e,a;function n(t,e,n,i,o,r,s){void 0===n&&(n=null),void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=0);e=a.call(this,t,e)||this;return e.originalEvent=n,e.scrollTop=i,e.scrollBottom=o,e.windowWidth=r,e.windowHeight=s,e}e=t.browser||(t.browser={}),a=t.event.Event,__extends(n,a),n.prototype.clone=function(){return new n(this.type,this.target,this.originalEvent,this.scrollTop,this.scrollBottom,this.windowWidth,this.windowHeight)},n.prototype.toString=function(){return"[WindowWatcherEvent] type = "+this.type+", scrollTop = "+this.scrollTop+", scrollBottom = "+this.scrollBottom+", windowWidth = "+this.windowWidth+", windowHeight = "+this.windowHeight},n.SCROLL="scroll",n.RESIZE="resize",e.WindowWatcherEvent=n}(alm=alm||{}),function(t){var e,o;function n(t,e,n,i){e=o.call(this,t,e)||this;return e.currentSectionIndex=n,e.prevSectionIndex=i,e}e=t.browser||(t.browser={}),o=t.event.Event,__extends(n,o),n.CHANGE="ScrollSectionTriggerEvent.CHANGE",e.ScrollSectionTriggerEvent=n}(alm=alm||{}),function(t){var u,n,h,e,i;function o(t){void 0===t&&(t=.5);var e=n.call(this)||this;return e.windowScrollHandler=function(t){e.updateScrollPosition(),e.check()},e.windowResizeHandler=function(t){e.updateThresholdPosition(),e.updateScrollPosition(),e.check()},e.isRunning=!1,e.scrollPosition=null,e.triggerPositions=[],e.thresholdRatio=t,e.thresholdPosition=null,e.currentSectionIndex=-1,e.prevSectionIndex=-1,e}u=t.browser||(t.browser={}),h=t.debug.Logger,e=t.browser.WindowWatcher,i=t.browser.WindowWatcherEvent,t=t.event.EventDispatcher,__extends(o,n=t),o.prototype.start=function(){this.isRunning||(this.isRunning=!0,e.addEventListener(i.SCROLL,this.windowScrollHandler),e.addEventListener(i.RESIZE,this.windowResizeHandler),e.start(),this.updateThresholdPosition(),this.updateScrollPosition(),this.check())},o.prototype.stop=function(){this.isRunning&&(this.isRunning=!1,e.removeEventListener(i.SCROLL,this.windowScrollHandler),e.removeEventListener(i.RESIZE,this.windowResizeHandler),e.stop())},o.prototype.getIsRunning=function(){return this.isRunning},o.prototype.getCurrentIndex=function(){return this.currentSectionIndex},o.prototype.getPrevIndex=function(){return this.prevSectionIndex},o.prototype.getTriggerPositions=function(){return this.triggerPositions.concat()},o.prototype.setTriggerPositions=function(t){this.triggerPositions=t.concat(),this.triggerPositions.sort(function(t,e){return t-e}),this.isRunning&&this.check()},o.prototype.getThreshold=function(){return this.thresholdRatio},o.prototype.setThreshold=function(t){this.thresholdRatio=t,this.updateThresholdPosition(),this.isRunning&&this.check()},o.prototype.check=function(){if(null!=this.scrollPosition){for(var t,e=-1,n=-1,i=Number.MAX_VALUE,o=this.triggerPositions.length,r=0;r<o;++r){var s=this.triggerPositions[r]-this.scrollPosition,a=Math.abs(s-this.thresholdPosition);a<i&&(i=a,e=r,n=s)}0<=e&&(t=-1,t=n>this.thresholdPosition?e:e+1,this.currentSectionIndex!=t&&(this.prevSectionIndex=this.currentSectionIndex,this.currentSectionIndex=t,this.dispatchEvent(new u.ScrollSectionTriggerEvent(u.ScrollSectionTriggerEvent.CHANGE,this,this.currentSectionIndex,this.prevSectionIndex))))}else h.warn("[RangeTrigger] current position is need set")},o.prototype.updateThresholdPosition=function(){this.thresholdPosition=e.getWindowHeight()*this.thresholdRatio},o.prototype.updateScrollPosition=function(){this.scrollPosition=e.getScrollTop()},t=o,u.ScrollSectionTrigger=t}(alm=alm||{}),function(t){var n,i,o,e;function r(){var e=i.call(this)||this;return e.windowResizeHandler=function(t){e.check()},e.breakPoints=[],e.breakPointCount=0,e.currentIndex=-1,e.prevIndex=-1,e}n=t.browser||(t.browser={}),o=t.browser.WindowWatcher,e=t.browser.WindowWatcherEvent,t=t.event.EventDispatcher,__extends(r,i=t),r.prototype.start=function(){this.isRunning||(this.isRunning=!0,o.addEventListener(e.RESIZE,this.windowResizeHandler),o.start(),this.check())},r.prototype.stop=function(){this.isRunning&&(this.isRunning=!1,o.removeEventListener(e.RESIZE,this.windowResizeHandler),o.stop())},r.prototype.setBreakpoints=function(t){this.breakPoints=t.concat(),this.breakPointCount=this.breakPoints.length,this.breakPoints.sort(function(t,e){return t-e}),this.isRunning&&this.check()},r.prototype.getIsRunning=function(){return this.isRunning},r.prototype.getCurrentIndex=function(){return this.currentIndex},r.prototype.getPrevIndex=function(){return this.prevIndex},r.prototype.getBreakPoints=function(){return this.breakPoints.concat()},r.prototype.getBreakPointCount=function(){return this.breakPointCount},r.prototype.check=function(){for(var t=o.getWindowWidth(),e=0;e<this.breakPointCount&&!(t<=this.breakPoints[e]);++e);this.currentIndex!=e&&(this.prevIndex=this.currentIndex,this.currentIndex=e,trace("[ResponsiveObserver] switch index :",this.prevIndex,"->",this.currentIndex,", window width =",t),this.dispatchEvent(new n.ResponsiveObserverEvent(n.ResponsiveObserverEvent.CHANGE,this,this.currentIndex,this.prevIndex)))},t=r,n.ResponsiveObserver=t}(alm=alm||{}),function(t){var e,o;function n(t,e,n,i){e=o.call(this,t,e)||this;return e.currentIndex=n,e.prevIndex=i,e}e=t.browser||(t.browser={}),o=t.event.Event,__extends(n,o),n.CHANGE="ResponsiveObserverEvent.CHANGE",e.ResponsiveObserverEvent=n}(alm=alm||{}),function(i){var n,o=alm.debug.Logger,t=alm.event.EventDispatcher,t=(__extends(e,n=t),e.prototype.addChild=function(t){if(t){var e=t.name;if(!this.childrenByName[e])return++this.numChildren,(t.parent=this).childrenByName[e]=t;o.warn("[Scene '"+this.name+"'] addChild was failed, because child name '"+e+"' is already contained.")}else o.warn("[Scene '"+this.name+"'] addChild was failed, because child is null.");return null},e.prototype.removeChild=function(t){if(t){var e=t.name;if(this.childrenByName[e])return--this.numChildren,t.parent=null,delete this.childrenByName[e],t;o.warn("[Scene '"+this.name+"'] removeChild was failed, because child name '"+e+"' is not contained.")}else o.warn("[Scene '"+this.name+"'] removeChild was failed, because child is null.");return null},e.prototype.addChildren=function(t){for(var e,n=[],i=t.length,o=0;o<i;++o)(e=this.addChild(t[o]))&&n.push(e);return n},e.prototype.removeChildren=function(t){for(var e,n=[],i=t.length,o=0;o<i;++o)(e=this.removeChild(t[o]))&&n.push(e);return n},e.prototype.removeAllChildren=function(){var t,e,n=[];for(e in this.childrenByName)(t=this.childrenByName[e]).parent=null,n.push(t);return this.childrenByName={},this.numChildren=0,n},e.prototype.contains=function(t){return!!t&&null!=this.childrenByName["string"==typeof t?t:t.name]},e.prototype.getName=function(){return this.name},e.prototype.getState=function(){return this.state},e.prototype.getLastState=function(){return this.lastState},e.prototype.getParent=function(){return this.parent},e.prototype.getChildByName=function(t){return this.childrenByName[t]||null},e.prototype.getChildrenByName=function(){return this.childrenByName},e.prototype.getNumChildren=function(){return this.numChildren},e.prototype.getManager=function(){return this.parent?this.parent.getManager():(o.warn("[Scene '"+this.name+"'] getManager was failed, check whether if scene is connected to root."),null)},e.prototype.getPath=function(){var t=this.getManager();if(t){for(var e=[this.name],n=this;n=n.parent;)e.unshift(n.name);return t.getScenePathByNames(e)}return o.warn("[Scene '"+this.name+"'] getPath was failed, check whether if scene is connected to root."),null},e.prototype.getTransferInfo=function(){return this.transferInfo||null},e.prototype.gotoScene=function(t,e){void 0===e&&(e=null),this.getManager().goto(t,e)},e.prototype._load=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Loading;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.LOAD,e));var t="function"==typeof e.onLoad?e.onLoad():e.implOnLoad();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.transferInfo=null,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.LOAD_COMPLETE,e))});n.execute()},e.prototype._unload=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Unloading;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.UNLOAD,e));var t="function"==typeof e.onUnload?e.onUnload():e.implOnUnload();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.transferInfo=null,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.UNLOAD_COMPLETE,e))});n.execute()},e.prototype._arrive=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Arriving;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.ARRIVE,e));var t="function"==typeof e.onArrive?e.onArrive():e.implOnArrive();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.transferInfo=null,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.ARRIVE_COMPLETE,e))});n.execute()},e.prototype._leave=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Leaving;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.LEAVE,e));var t="function"==typeof e.onLeave?e.onLeave():e.implOnLeave();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.transferInfo=null,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.LEAVE_COMPLETE,e))});n.execute()},e.prototype._ascend=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Ascending;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.ASCEND,e));var t="function"==typeof e.onAscend?e.onAscend():e.implOnAscend();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.transferInfo=null,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.ASCEND_COMPLETE,e))});n.execute()},e.prototype._descend=function(t){var e=this;this.transferInfo=t,this.state=i.SceneState.Descending;var n=new cmd.Serial(function(){e.dispatchEvent(new i.SceneEvent(i.SceneEvent.DESCEND,e));var t="function"==typeof e.onDescend?e.onDescend():e.implOnDescend();t&&n.insertCommand(t)},function(){e.lastState=e.state,e.state=i.SceneState.Idling,e.transferInfo=null,e.dispatchEvent(new i.SceneEvent(i.SceneEvent.DESCEND_COMPLETE,e))});n.execute()},e.prototype.implOnLoad=function(){return new cmd.Command},e.prototype.implOnUnload=function(){return new cmd.Command},e.prototype.implOnArrive=function(){return new cmd.Command},e.prototype.implOnLeave=function(){return new cmd.Command},e.prototype.implOnAscend=function(){return new cmd.Command},e.prototype.implOnDescend=function(){return new cmd.Command},e);function e(t){var e=n.call(this)||this;return e.name=t,e.state=i.SceneState.Idling,e.parent=null,e.childrenByName={},e.numChildren=0,e.transferInfo=null,e.onLoad=null,e.onUnload=null,e.onArrive=null,e.onLeave=null,e.onAscend=null,e.onDescend=null,e}i.Scene=t}(scn=scn||{}),function(t){var n,e=alm.event.Event,e=(__extends(i,n=e),i.prototype.clone=function(){return new i(this.type,this.target)},i.prototype.toString=function(){return"[SceneEvent] type = "+this.type},i.LOAD="SceneEvent.load",i.UNLOAD="SceneEvent.unload",i.ARRIVE="SceneEvent.arrive",i.LEAVE="SceneEvent.leave",i.ASCEND="SceneEvent.ascend",i.DESCEND="SceneEvent.descend",i.LOAD_COMPLETE="SceneEvent.loadComplete",i.UNLOAD_COMPLETE="SceneEvent.unloadComplete",i.ARRIVE_COMPLETE="SceneEvent.arriveComplete",i.LEAVE_COMPLETE="SceneEvent.leaveComplete",i.ASCEND_COMPLETE="SceneEvent.ascendComplete",i.DESCEND_COMPLETE="SceneEvent.descendComplete",i);function i(t,e){return n.call(this,t,e)||this}t.SceneEvent=e}(scn=scn||{}),function(t){var e=(n.prototype.getTransferId=function(){return this.transferId},n.prototype.getDeparturePath=function(){return this.departurePath},n.prototype.getDestinationPath=function(){return this.destinationPath},n);function n(t,e,n,i){void 0===i&&(i=null),this.transferId=t,this.departurePath=e,this.destinationPath=n,this.message=i}t.SceneTransferInfo=e}(scn=scn||{}),function(t){var e,n;(n=e=t.SceneState||(t.SceneState={}))[n.Idling=0]="Idling",n[n.Loading=1]="Loading",n[n.Unloading=2]="Unloading",n[n.Arriving=3]="Arriving",n[n.Leaving=4]="Leaving",n[n.Ascending=5]="Ascending",n[n.Descending=6]="Descending",t.getSceneStateString=function(t){switch(t){case e.Idling:return"idling";case e.Loading:return"loading";case e.Unloading:return"unloading";case e.Arriving:return"arriving";case e.Leaving:return"leaving";case e.Ascending:return"ascending";case e.Descending:return"descending"}return""}}(scn=scn||{}),function(t){var e,n;e=t.core||(t.core={}),(t=n=e.Direction||(e.Direction={}))[t.Static=0]="Static",t[t.Sibling=1]="Sibling",t[t.Ascend=2]="Ascend",t[t.Descend=3]="Descend",e.getDirectionString=function(t){switch(t){case n.Static:return"static";case n.Sibling:return"sibling";case n.Ascend:return"ascend";case n.Descend:return"descend"}return""}}(scn=scn||{}),function(t){var n;function e(t,e){this.path=t,this.level=e,this.from=n.Direction.Static,this.to=n.Direction.Static}n=t.core||(t.core={}),e.prototype.getPath=function(){return this.path},e.prototype.getLevel=function(){return this.level},e.prototype.getFrom=function(){return this.from},e.prototype.getTo=function(){return this.to},e.prototype._setFrom=function(t){this.from=t},e.prototype._setTo=function(t){this.to=t},e.prototype.toString=function(){return"[Waypoint] path = '"+this.path+"', level = "+this.level+", from = "+n.getDirectionString(this.from)+", to = "+n.getDirectionString(this.to)},n.Waypoint=e}(scn=scn||{}),function(t){var e,n;function i(t){var e=n.call(this,"")||this;return e.manager=t,e}e=t.core||(t.core={}),n=t.Scene,__extends(i,n),i.prototype.getManager=function(){return this.manager},e.RootScene=i}(scn=scn||{}),function(f){var i,v=alm.debug.Logger,m=alm.debug.LoggerLevel,t=alm.event.EventDispatcher,e=alm.util.Obj,o=f.core.RootScene,t=(__extends(n,i=t),n.prototype.start=function(t){void 0===t&&(t=null),v.verbose("----- scene manager start -----"),this.goto("/",t)},n.prototype.goto=function(t,e){var n;void 0===e&&(e=null),t=this.resolvePath(t),this.transferInfo&&this.transferInfo.getDestinationPath()==t||(n=[],0<(n=-1!=this.waypointIndex?this.createWaypoints(this.waypoints[this.waypointIndex].getPath(),t):[new f.core.Waypoint("/",0)]).length&&((t=null!=this.transferInfo)?(v.verbose("destination is changed"),v.verbose("waypoint index : "+this.waypointIndex),this.waypoints=this.waypoints.slice(0,this.waypointIndex+1).concat(n.slice(1)),this.setDirection(this.waypoints),this.dumpWaypoint(this.waypoints)):(this.waypointIndex=0,this.eventIndex=0,++this.transferId,this.waypoints=n),this.transferInfo=new f.SceneTransferInfo(this.transferId,this.waypoints[this.waypointIndex].getPath(),this.waypoints[this.waypoints.length-1].getPath(),e),t||this.dispatchEvent(new f.SceneManagerTransferEvent(f.SceneManagerTransferEvent.TRANSFER_START,this,this.transferInfo)),this.checkState()))},n.prototype.resolvePath=function(t){for(var e=(t="/"!=t[0]?this.currentScene?this.currentScene.getPath()+"/"+t:"/"+t:t).split("/"),n=[],i=0;i<e.length;++i){var o=e[i];""!=o&&"."!=o&&(".."!=o?n.push(o):n.pop())}return"/"+n.join("/")},n.prototype.addSceneAt=function(t){for(var e=!1,n=this.getSceneNamesByPath(t),i=n.length,o=this.root,r=1;r<i;++r){var s=n[r];r==i-1?o.contains(s)?v.warn("[SceneManager '"+this.name+"'] addSceneAt was failed, because path '"+t+"' is already exist."):(o=o.addChild(new f.Scene(s)),e=!0):o=o.contains(s)?o.getChildByName(s):o.addChild(new f.Scene(s))}return e?o:null},n.prototype.getName=function(){return this.name},n.prototype.getRoot=function(){return this.root},n.prototype.getSceneByPath=function(t){return this.getSceneBySceneNames(this.getSceneNamesByPath(t))},n.prototype.getParentSceneByPath=function(t){t=this.getSceneNamesByPath(t);return t.pop(),this.getSceneBySceneNames(t)},n.prototype.getSceneBySceneNames=function(t){for(var e=t.length,n=this.root,i=1;i<e;++i)n=n.getChildByName(t[i]);return n},n.prototype.getSceneNamesByPath=function(t){return"/"==t?[""]:this.resolvePath(t).split("/")},n.prototype.getSceneLevelByNames=function(t){return t.length-1},n.prototype.getScenePathByNames=function(t){return 0==t.length?"/":1==t.length?"/"+t[0]:t.join("/")},n.prototype.createWaypoints=function(t,e){if(t==e)return v.warn("[SceneManager] departure path and destination path is same, path = '"+t+"'"),[];v.verbose("----- scene flow -----");var n=[new f.core.Waypoint(t,this.getSceneLevelByNames(this.getSceneNamesByPath(t)))],i=this.getSceneNamesByPath(t),o=this.getSceneNamesByPath(e);v.verbose("    path"),v.verbose("        current    : '"+t+"'"),v.verbose("        destination: '"+e+"'"),v.verbose("    names"),v.verbose("        current("+i.length+")    : '"+i+"'"),v.verbose("        destination("+o.length+"): '"+o+"'");var r=0,s=[];if("/"==e)r=-1,s=[],c="/";else{for(;;){if(i[r]!=o[r]){--r;break}s.push(i[r]),++r}c=this.getScenePathByNames(s)}v.verbose("    turning"),v.verbose("        path     : "+c),v.verbose("        level    : "+r),v.verbose("        names("+s.length+") : '"+s+"'");for(var a=i.concat(),u=t,h=i.length-1;r+1<h;--h)a.pop(),(l=this.getScenePathByNames(a))!=u&&(d=this.getSceneLevelByNames(a),n.push(new f.core.Waypoint(l,d)),u=l);if(c==e&&0<r){r==n[n.length-1].getLevel()?f.core.Direction.Sibling:f.core.Direction.Ascend;n.push(new f.core.Waypoint(c,r))}else for(var a=s.concat(),c=n[n.length-1],u=c.getPath(),h=(c.getLevel(),r+1);h<o.length;++h){var l,d,p=o[h];a.push(p),(l=this.getScenePathByNames(a))!=u&&(d=this.getSceneLevelByNames(a),n.push(new f.core.Waypoint(l,d)),u=l)}return this.setDirection(n),v.level<=m.Verbose&&this.dumpWaypoint(n),n},n.prototype.setDirection=function(t){for(var e=t.length,n=null,i=0;i<e;++i){var o,r=t[i];0<i&&(o=r.getLevel()-n.getLevel(),r._setFrom(0<o?f.core.Direction.Descend:o<0?f.core.Direction.Ascend:f.core.Direction.Sibling),n._setTo(r.getFrom())),n=r}},n.prototype.dumpWaypoint=function(t){v.verbose("    waypoints");for(var e=t.length,n=0;n<e;++n)v.verbose("        ["+n+"] "+t[n]);v.verbose("")},n.prototype.dumpAllPath=function(){v.info("----- scene all path -----"),this._dumpAllPath(this.root)},n.prototype._dumpAllPath=function(t){var n=this,t=t.getChildrenByName();e.each(t,function(t,e){v.info(e.getPath()),n._dumpAllPath(e)})},n.prototype.checkState=function(){if(this.waypointIndex>=this.waypoints.length){v.verbose("----- scene transfer complete -----");var t=this.transferInfo.getTransferId();return this.waypointIndex=this.waypoints.length-1,this.dispatchEvent(new f.SceneManagerTransferEvent(f.SceneManagerTransferEvent.TRANSFER_COMPLETE,this,this.transferInfo)),void(t==this.transferInfo.getTransferId()&&(this.lastState=f.SceneState.Idling,this.transferInfo=null))}if(this.currentScene){var e=this.waypoints[this.waypointIndex],t=e.getPath();if(this.currentScene=this.getSceneByPath(t),this.currentScene||(this.dispatchEvent(new f.SceneManagerRequireSceneEvent(f.SceneManagerRequireSceneEvent.REQUIRE_SCENE,this,t)),this.currentScene=this.getSceneByPath(t)),this.currentScene||v.warn("[SceneManager] scene is null : scene path =",t),1<this.waypoints.length&&0==this.waypointIndex)return this.lastState!=f.SceneState.Leaving&&this.currentScene.getLastState()==f.SceneState.Arriving?(v.verbose(this.eventIndex+" Leave   : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(f.SceneEvent.LEAVE_COMPLETE,this.sceneLeaveCompleteHandler),void this.currentScene._leave(this.transferInfo)):this.lastState==f.SceneState.Unloading||e.getTo()!=f.core.Direction.Sibling&&e.getTo()!=f.core.Direction.Ascend?(++this.waypointIndex,void this.checkState()):(++this.waypointIndex,v.verbose(this.eventIndex+" Unload  : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(f.SceneEvent.UNLOAD_COMPLETE,this.sceneUnloadCompleteHandler),void this.currentScene._unload(this.transferInfo));if(0<this.waypointIndex&&this.waypointIndex<this.waypoints.length-1){if(this.lastState!=f.SceneState.Loading&&(e.getFrom()==f.core.Direction.Sibling||e.getFrom()==f.core.Direction.Descend))return v.verbose(this.eventIndex+" Load    : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(f.SceneEvent.LOAD_COMPLETE,this.sceneLoadCompleteHandler),void this.currentScene._load(this.transferInfo);if(this.lastState!=f.SceneState.Ascending&&e.getFrom()==f.core.Direction.Ascend)return v.verbose(this.eventIndex+" Ascend  : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(f.SceneEvent.ASCEND_COMPLETE,this.sceneAscendCompleteHandler),void this.currentScene._ascend(this.transferInfo);if(this.lastState!=f.SceneState.Unloading&&(e.getTo()==f.core.Direction.Sibling||e.getTo()==f.core.Direction.Ascend))return++this.waypointIndex,v.verbose(this.eventIndex+" Unload  : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(f.SceneEvent.UNLOAD_COMPLETE,this.sceneUnloadCompleteHandler),void this.currentScene._unload(this.transferInfo);if(this.lastState!=f.SceneState.Descending&&e.getTo()==f.core.Direction.Descend)return++this.waypointIndex,v.verbose(this.eventIndex+" Descend : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(f.SceneEvent.DESCEND_COMPLETE,this.sceneDescendCompleteHandler),void this.currentScene._descend(this.transferInfo)}if(this.waypointIndex==this.waypoints.length-1){if(this.lastState!=f.SceneState.Loading&&(e.getFrom()==f.core.Direction.Sibling||e.getFrom()==f.core.Direction.Descend))return v.verbose(this.eventIndex+" Load    : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(f.SceneEvent.LOAD_COMPLETE,this.sceneLoadCompleteHandler),void this.currentScene._load(this.transferInfo);this.lastState!=f.SceneState.Arriving&&(++this.waypointIndex,v.verbose(this.eventIndex+" Arrive  : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(f.SceneEvent.ARRIVE_COMPLETE,this.sceneArriveCompleteHandler),this.currentScene._arrive(this.transferInfo))}}else this.lastState=f.SceneState.Idling,this.currentScene=this.root,v.verbose(this.eventIndex+" Load    : '"+this.currentScene.getPath()+"'"),this.currentScene.addEventListener(f.SceneEvent.LOAD_COMPLETE,this.sceneLoadCompleteHandler),this.currentScene._load(this.transferInfo)},n);function n(t,e){void 0===t&&(t=""),void 0===e&&(e=o);var n=i.call(this)||this;return n.sceneLoadCompleteHandler=function(t){n.currentScene.removeEventListener(f.SceneEvent.LOAD_COMPLETE,n.sceneLoadCompleteHandler),n.lastState=f.SceneState.Loading,++n.eventIndex,n.checkState()},n.sceneUnloadCompleteHandler=function(t){n.currentScene.removeEventListener(f.SceneEvent.UNLOAD_COMPLETE,n.sceneUnloadCompleteHandler),n.lastState=f.SceneState.Unloading,++n.eventIndex,n.checkState()},n.sceneArriveCompleteHandler=function(t){n.currentScene.removeEventListener(f.SceneEvent.ARRIVE_COMPLETE,n.sceneArriveCompleteHandler),n.lastState=f.SceneState.Arriving,++n.eventIndex,n.checkState()},n.sceneLeaveCompleteHandler=function(t){n.currentScene.removeEventListener(f.SceneEvent.LEAVE_COMPLETE,n.sceneLeaveCompleteHandler),n.lastState=f.SceneState.Leaving,++n.eventIndex,n.checkState()},n.sceneAscendCompleteHandler=function(t){n.currentScene.removeEventListener(f.SceneEvent.ASCEND_COMPLETE,n.sceneAscendCompleteHandler),n.lastState=f.SceneState.Ascending,++n.eventIndex,n.checkState()},n.sceneDescendCompleteHandler=function(t){n.currentScene.removeEventListener(f.SceneEvent.DESCEND_COMPLETE,n.sceneDescendCompleteHandler),n.lastState=f.SceneState.Descending,++n.eventIndex,n.checkState()},n.name=t,n.root=new e(n),n.currentScene=null,n.waypoints=[],n.waypointIndex=-1,n.lastState=f.SceneState.Idling,n.eventIndex=-1,n.transferId=-1,n.transferInfo=null,n}f.SceneManager=t}(scn=scn||{}),function(t){var i,e=alm.event.Event,e=(__extends(n,i=e),n.prototype.clone=function(){return new n(this.type,this.target,this.transferInfo)},n.prototype.toString=function(){return"[SceneManagerTransferEvent] type = "+this.type},n.TRANSFER_START="SceneManagerTransferEvent.transferStart",n.TRANSFER_COMPLETE="SceneManagerTransferEvent.transferComplete",n);function n(t,e,n){e=i.call(this,t,e)||this;return e.transferInfo=n,e}t.SceneManagerTransferEvent=e}(scn=scn||{}),function(t){var i,e=alm.event.Event,e=(__extends(n,i=e),n.prototype.clone=function(){return new n(this.type,this.target,this.scenePath)},n.prototype.toString=function(){return"[SceneManagerRequireSceneEvent] type = "+this.type+", scenePath = "+this.scenePath},n.REQUIRE_SCENE="SceneManagerRequireSceneEvent.requireScene",n);function n(t,e,n){e=i.call(this,t,e)||this;return e.scenePath=n,e}t.SceneManagerRequireSceneEvent=e}(scn=scn||{}),function(){function t(){return"0.0.1"}(alm||(alm={})).getVersion=t;var e="color:#999;",n=console.debug;n("%c+ + + + + + + + + + + + + + + + + + + + + + + + + +",e),n("%c+ alumican.js",e),n("%c+ version 0.0.1",e),n("%c+ http://alumican.net",e),n("%c+ https://github.com/alumican/alumican.js",e),n("%c+ + + + + + + + + + + + + + + + + + + + + + + + + +",e),n("")}();
//# sourceMappingURL=index.min.js.map

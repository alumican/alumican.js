{"version":3,"sources":["../src/alumican.drawer/alm/drawer/Drawer.ts","../src/alumican.drawer/alm/drawer/view/DrawerBackground.ts","../src/alumican.drawer/alm/drawer/view/DrawerForeground.ts","../src/alumican.drawer/alm/drawer/view/DrawerContainer.ts","../src/alumican.drawer/alm/drawer/DrawerTransition.ts"],"names":["alm","drawer","view_1","_super","View","TweenCSS","Easing","DrawerBackground","transition","_this","call","this","clickHandler","window","closeDrawer","initialize","view","util","math","__extends","prototype","implInitialize","jQuery","addClass","customShowTransition","customHideTransition","implReady","implFinalize","implShow","useTransition","command","cmd","Serial","Func","on","addCommand","DrawerTransition","none","css","fadeIn","easeOutQuart","implHide","fadeOut","off","setCustomTransition","view_2","DrawerForeground","content","append","left","top","right","bottom","fade","easeOutCubic","prop","from","getWidth","getHeight","move","to","target","duration","easing","execute","o","value","tween","Tween","Math","round","getView","width","height","view_3","DrawerContainer","drawerId","attr","background","foreground","ready","finalize","Parallel","getShowCommand","getHideCommand","getContent","getDrawerId","setBackgroundCustomTransition","showCommand","hideCommand","setForegroundCustomTransition","Drawer","container","openDrawer","show","bind","hide","open","close","dispose","getContentView"],"mappings":"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","file":"index.min.js","sourcesContent":["/// <reference path=\"../../index.ts\" />\n\nnamespace alm.drawer {\n\n\timport DrawerContainer = alm.drawer.view.DrawerContainer;\n\n\texport class Drawer {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(content:JQuery, transition:DrawerTransition, drawerId:string = 'drawer') {\n\t\t\tthis.container = new DrawerContainer(content, transition, drawerId);\n\t\t\tthis.container.ready();\n\n\t\t\t(<any>window).openDrawer = this.container.show.bind(this.container);\n\t\t\t(<any>window).closeDrawer = this.container.hide.bind(this.container);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic open(useTransition:boolean = true):void {\n\t\t\tthis.container.show(useTransition);\n\t\t}\n\n\t\tpublic close(useTransition:boolean = true):void {\n\t\t\tthis.container.hide(useTransition);\n\t\t}\n\n\t\tpublic dispose():void {\n\t\t\tthis.container.finalize();\n\t\t\tthis.container = null;\n\n\t\t\tdelete (<any>window).openDrawer;\n\t\t\tdelete (<any>window).closeDrawer;\n\t\t}\n\n\t\tpublic getView():JQuery {\n\t\t\treturn this.container.getView();\n\t\t}\n\n\t\tpublic getContentView():JQuery {\n\t\t\treturn this.container.getContent();\n\t\t}\n\n\t\tpublic getDrawerId():string {\n\t\t\treturn this.getDrawerId();\n\t\t}\n\n\t\tpublic setBackgroundCustomTransition(showCommand:cmd.Serial, hideCommand:cmd.Serial):void {\n\t\t\tthis.container.setBackgroundCustomTransition(showCommand, hideCommand);\n\t\t}\n\n\t\tpublic setForegroundCustomTransition(showCommand:cmd.Serial, hideCommand:cmd.Serial):void {\n\t\t\tthis.container.setForegroundCustomTransition(showCommand, hideCommand);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// VARIABLE\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate container:DrawerContainer;\n\t}\n}\n","/// <reference path=\"../../../index.ts\" />\n\nnamespace alm.drawer.view {\n\n\timport View = alm.view.View;\n\timport TweenCSS = alm.util.TweenCSS;\n\timport Easing = alm.math.Easing;\n\n\texport class DrawerBackground extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(transition:DrawerTransition) {\n\t\t\tsuper();\n\n\t\t\tthis.transition = transition;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = jQuery('<div>');\n\t\t\tview.addClass('drawer-background');\n\n\t\t\tthis.customShowTransition = null;\n\t\t\tthis.customHideTransition = null;\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\tconst command = new cmd.Serial(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tview.on('click', this.clickHandler);\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tif (this.customShowTransition) {\n\t\t\t\t// custom effect\n\t\t\t\tcommand.addCommand(this.customShowTransition);\n\t\t\t} else if (this.transition == DrawerTransition.none) {\n\t\t\t\t// no effect\n\t\t\t\tcommand.addCommand(new cmd.Func(():void => {\n\t\t\t\t\tview.css('display', 'block');\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\t// fade effect\n\t\t\t\tcommand.addCommand(TweenCSS.fadeIn(view, useTransition ? 500 : 0, Easing.easeOutQuart, 'block', false, false));\n\t\t\t}\n\n\t\t\treturn command;\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\tconst command = new cmd.Serial();\n\n\t\t\tif (this.customHideTransition) {\n\t\t\t\t// custom effect\n\t\t\t\tcommand.addCommand(this.customHideTransition);\n\t\t\t} else if (this.transition == DrawerTransition.none) {\n\t\t\t\t// no effect\n\t\t\t\tcommand.addCommand(new cmd.Func(():void => {\n\t\t\t\t\tview.css('display', 'none');\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\t// fade effect\n\t\t\t\tcommand.addCommand(TweenCSS.fadeOut(view, useTransition ? 500 : 0, Easing.easeOutQuart, true, false, false));\n\t\t\t}\n\n\t\t\tcommand.addCommand(new cmd.Func(():void => {\n\t\t\t\tview.off('click', this.clickHandler);\n\t\t\t}));\n\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic setCustomTransition(customShowTransition:cmd.Serial, customHideTransition:cmd.Serial):void {\n\t\t\tthis.customShowTransition = customShowTransition;\n\t\t\tthis.customHideTransition = customHideTransition;\n\t\t}\n\n\t\tprivate clickHandler = ():void => {\n\t\t\t(<any>window).closeDrawer();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// VARIABLE\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate transition:DrawerTransition;\n\t\tprivate customShowTransition:cmd.Serial;\n\t\tprivate customHideTransition:cmd.Serial;\n\t}\n}\n","/// <reference path=\"../../../index.ts\" />\n\nnamespace alm.drawer.view {\n\n\timport View = alm.view.View;\n\timport Easing = alm.math.Easing;\n\timport EasingFunction = alm.math.EasingFunction;\n\timport TweenCSS = alm.util.TweenCSS;\n\n\texport class DrawerForeground extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(content:JQuery, transition:DrawerTransition) {\n\t\t\tsuper(content);\n\n\t\t\tthis.content = content;\n\t\t\tthis.transition = transition;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view = jQuery('<div>');\n\t\t\tview.addClass('drawer-foreground');\n\t\t\tview.append(this.content);\n\n\t\t\tthis.content.css('display', 'block');\n\n\t\t\tswitch (this.transition) {\n\t\t\t\tcase DrawerTransition.left:\n\t\t\t\t\tview.css({ top: 0, left: 0 });\n\t\t\t\t\tbreak;\n\t\t\t\tcase DrawerTransition.right:\n\t\t\t\t\tview.css({ top: 0, right: 0 });\n\t\t\t\t\tbreak;\n\t\t\t\tcase DrawerTransition.top:\n\t\t\t\t\tview.css({ top: 0, left: 0 });\n\t\t\t\t\tbreak;\n\t\t\t\tcase DrawerTransition.bottom:\n\t\t\t\t\tview.css({ bottom: 0, left: 0 });\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.customShowTransition = null;\n\t\t\tthis.customHideTransition = null;\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\tconst command = new cmd.Serial(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tview.css('visibility', 'visible');\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tif (this.customShowTransition) {\n\t\t\t\t// custom effect\n\t\t\t\tcommand.addCommand(this.customShowTransition);\n\t\t\t} else if (this.transition === DrawerTransition.none) {\n\t\t\t\t// no effect\n\t\t\t} else if (this.transition === DrawerTransition.fade) {\n\t\t\t\t// fade effect\n\t\t\t\tcommand.addCommand(TweenCSS.fadeIn(view, useTransition ? 500 : 0, Easing.easeOutCubic, null, false, false));\n\t\t\t} else {\n\t\t\t\t// move effect\n\t\t\t\tlet prop = '';\n\t\t\t\tlet from = 0;\n\t\t\t\tswitch (this.transition) {\n\t\t\t\t\tcase DrawerTransition.left:\n\t\t\t\t\t\tprop = 'left';\n\t\t\t\t\t\tfrom = -this.getWidth();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase DrawerTransition.right:\n\t\t\t\t\t\tprop = 'right';\n\t\t\t\t\t\tfrom = -this.getWidth();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase DrawerTransition.top:\n\t\t\t\t\t\tprop = 'top';\n\t\t\t\t\t\tfrom = -this.getHeight();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase DrawerTransition.bottom:\n\t\t\t\t\t\tprop = 'bottom';\n\t\t\t\t\t\tfrom = -this.getHeight();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (prop !== '') {\n\t\t\t\t\tview.css(prop, from);\n\t\t\t\t\tcommand.addCommand(this.move(view, prop, from, 0, useTransition ? 500 : 0, Easing.easeOutQuart, false));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn command;\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\tconst command = new cmd.Serial();\n\n\t\t\tif (this.customHideTransition) {\n\t\t\t\t// custom effect\n\t\t\t\tcommand.addCommand(this.customHideTransition);\n\t\t\t} else if (this.transition === DrawerTransition.none) {\n\t\t\t\t// no effect\n\t\t\t} else if (this.transition === DrawerTransition.fade) {\n\t\t\t\t// fade effect\n\t\t\t\tcommand.addCommand(TweenCSS.fadeOut(view, useTransition ? 500 : 0, Easing.easeOutCubic, false, false, false));\n\t\t\t} else {\n\t\t\t\t// move effect\n\t\t\t\tlet prop = '';\n\t\t\t\tlet to = 0;\n\t\t\t\tswitch (this.transition) {\n\t\t\t\t\tcase DrawerTransition.left:\n\t\t\t\t\t\tprop = 'left';\n\t\t\t\t\t\tto = -this.getWidth();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase DrawerTransition.right:\n\t\t\t\t\t\tprop = 'right';\n\t\t\t\t\t\tto = -this.getWidth();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase DrawerTransition.top:\n\t\t\t\t\t\tprop = 'top';\n\t\t\t\t\t\tto = -this.getHeight();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase DrawerTransition.bottom:\n\t\t\t\t\t\tprop = 'bottom';\n\t\t\t\t\t\tto = -this.getHeight();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (prop !== '') {\n\t\t\t\t\tcommand.addCommand(this.move(view, prop, 0, to, useTransition ? 500 : 0, Easing.easeOutQuart, false));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcommand.addCommand(new cmd.Func(():void => {\n\t\t\t\tview.css('visibility', 'hidden');\n\t\t\t}));\n\n\t\t\treturn command;\n\t\t}\n\n\t\tprivate move(target:JQuery, prop:string, from:number, to:number, duration:number = 500, easing:EasingFunction = Easing.easeOutQuart, execute:boolean = true):cmd.Tween {\n\t\t\tlet o:Object = { value: from };\n\t\t\tconst tween:cmd.Tween = new cmd.Tween(o, { value: to }, null, duration, easing, null, ():void => {\n\t\t\t\tconst value:number = o['value'];\n\t\t\t\ttarget.css(prop, value);\n\t\t\t}, null);\n\t\t\tif (execute) tween.execute();\n\t\t\treturn tween;\n\t\t}\n\n\t\tprivate getWidth():number {\n\t\t\treturn Math.round(this.getView().width());\n\t\t}\n\n\t\tprivate getHeight():number {\n\t\t\treturn Math.round(this.getView().height());\n\t\t}\n\n\t\tpublic setCustomTransition(customShowTransition:cmd.Serial, customHideTransition:cmd.Serial):void {\n\t\t\tthis.customShowTransition = customShowTransition;\n\t\t\tthis.customHideTransition = customHideTransition;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// VARIABLE\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate content:JQuery;\n\t\tprivate transition:DrawerTransition;\n\t\tprivate customShowTransition:cmd.Serial;\n\t\tprivate customHideTransition:cmd.Serial;\n\t}\n}\n","/// <reference path=\"../../../index.ts\" />\n\nnamespace alm.drawer.view {\n\n\timport View = alm.view.View;\n\n\texport class DrawerContainer extends View<JQuery> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(content:JQuery, transition:DrawerTransition, drawerId:string = 'drawer') {\n\t\t\tsuper(content);\n\n\t\t\tthis.content = content;\n\t\t\tthis.transition = transition;\n\t\t\tthis.drawerId = drawerId;\n\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():JQuery {\n\t\t\tconst view:JQuery = jQuery('<div>');\n\t\t\tview.attr('id', this.drawerId);\n\t\t\tview.addClass('drawer');\n\n\t\t\tthis.background = new DrawerBackground(this.transition);\n\t\t\tthis.foreground = new DrawerForeground(this.content, this.transition);\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t\tconst view = this.getView();\n\n\t\t\tthis.background.ready();\n\t\t\tview.append(this.background.getView());\n\n\t\t\tthis.foreground.ready();\n\t\t\tview.append(this.foreground.getView());\n\n\t\t\tjQuery('body').append(view);\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t\tthis.background.finalize();\n\t\t\tthis.background = null;\n\n\t\t\tthis.foreground.finalize();\n\t\t\tthis.foreground = null;\n\n\t\t\tthis.content = null;\n\t\t}\n\n\t\tprotected implShow(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Serial(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tview.css('display', 'block');\n\t\t\t\t}),\n\t\t\t\tnew cmd.Parallel(\n\t\t\t\t\tthis.background.getShowCommand(useTransition),\n\t\t\t\t\tthis.foreground.getShowCommand(useTransition),\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tprotected implHide(view:JQuery, useTransition:boolean):cmd.Command {\n\t\t\treturn new cmd.Serial(\n\t\t\t\tnew cmd.Parallel(\n\t\t\t\t\tthis.background.getHideCommand(useTransition),\n\t\t\t\t\tthis.foreground.getHideCommand(useTransition),\n\t\t\t\t),\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tview.css('display', 'none');\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tpublic getContent():JQuery {\n\t\t\treturn this.content;\n\t\t}\n\n\t\tpublic getDrawerId():string {\n\t\t\treturn this.drawerId;\n\t\t}\n\n\t\tpublic setBackgroundCustomTransition(showCommand:cmd.Serial, hideCommand:cmd.Serial):void {\n\t\t\tthis.background.setCustomTransition(showCommand, hideCommand);\n\t\t}\n\n\t\tpublic setForegroundCustomTransition(showCommand:cmd.Serial, hideCommand:cmd.Serial):void {\n\t\t\tthis.foreground.setCustomTransition(showCommand, hideCommand);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// VARIABLE\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate background:DrawerBackground;\n\t\tprivate foreground:DrawerForeground;\n\n\t\tprivate content:JQuery;\n\t\tprivate transition:DrawerTransition;\n\t\tprivate drawerId:string;\n\t}\n}\n","/// <reference path=\"../../index.ts\" />\n\nnamespace alm.drawer {\n\n\texport enum DrawerTransition {\n\t\tnone = 'none',\n\t\tfade = 'fade',\n\t\tleft = 'left',\n\t\tright = 'right',\n\t\ttop = 'top',\n\t\tbottom = 'bottom',\n\t}\n}\n"]}
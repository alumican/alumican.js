{"version":3,"sources":["../src/alumican.videoplayer/alm/video/core/VideoClip.ts","../src/alumican.videoplayer/alm/video/core/VideoClipEvent.ts","../src/alumican.videoplayer/alm/video/core/SimpleVideoClip.ts","../src/alumican.videoplayer/alm/video/core/LoopPointVideoClip.ts","../src/alumican.videoplayer/alm/video/core/StaticImageClip.ts","../src/alumican.videoplayer/alm/video/VideoPlayer.ts","../src/alumican.videoplayer/alm/video/VideoPlayerEvent.ts","../src/alumican.videoplayer/index.ts"],"names":[],"mappings":"AAEA,IAAU,GAAG,CA2NZ;AA3ND,WAAU,GAAG;IAAC,IAAA,KAAK,CA2NlB;IA3Na,WAAA,KAAK;QAElB,IAAO,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC;QAC1B,IAAO,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC;QAChC,IAAO,eAAe,GAAG,GAAG,CAAC,KAAK,CAAC,eAAe,CAAC;QAEnD,MAAa,SAAU,SAAQ,eAAe;YAQ7C,YAAY,MAAa;gBACxB,KAAK,EAAE,CAAC;gBACR,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;gBAC1C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC5B,CAAC;YASS,KAAK;gBACd,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjB,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC1C,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;gBACtC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;gBACvC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAChB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC7B,CAAC;YAEM,KAAK,CAAC,QAAe;gBAC3B,IAAI,IAAI,CAAC,SAAS;oBAAE,OAAO;gBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACrB,CAAC;YAEM,IAAI,CAAC,QAAe,EAAE,KAAY;gBACxC,IAAI,CAAC,IAAI,CAAC,SAAS;oBAAE,OAAO;gBAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YAC5B,CAAC;YAEM,MAAM;gBACZ,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC5B,CAAC;YAEM,OAAO;gBACb,IAAI,IAAI,CAAC,SAAS,EAAE;oBACnB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC3B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC1B;qBAAM;oBACN,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;iBACd;YACF,CAAC;YAEM,OAAO;gBACb,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBAChD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC5B,IAAI,IAAI,CAAC,IAAI,EAAE;oBACd,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;oBACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;iBACjB;YACF,CAAC;YAEO,IAAI,CAAC,QAAe;gBAC3B,IAAI,IAAI,CAAC,SAAS;oBAAE,OAAO;gBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBAEtB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;gBAC5B,IAAI,IAAI,CAAC,YAAY,EAAE;oBACtB,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;iBAChD;gBAED,IAAI,QAAQ,GAAG,CAAC,EAAE;oBAEjB,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,CAAC,WAAW,EAAE,GAAQ,EAAE;wBACrG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;wBAC7B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC3B,CAAC,EAAE,GAAQ,EAAE;wBACZ,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;wBAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;oBACpB,CAAC,EAAE,GAAQ,EAAE;wBACZ,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oBAC1B,CAAC,CAAC,CAAC;oBACH,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;iBAE5B;qBAAM;oBAEN,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;oBAC7B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC1B,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;oBACjB,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;oBAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;iBACnB;YACF,CAAC;YAEO,IAAI,CAAC,QAAe,EAAE,KAAY;gBACzC,IAAI,CAAC,IAAI,CAAC,SAAS;oBAAE,OAAO;gBAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBAEvB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;gBAC5B,IAAI,IAAI,CAAC,YAAY,EAAE;oBACtB,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;iBAChD;gBAED,IAAI,QAAQ,GAAG,CAAC,EAAE;oBAEjB,MAAM,KAAK,GAAG,IAAI,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,CAAC,WAAW,EAAE,IAAI,EAAE,GAAQ,EAAE;wBACrG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;wBAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;oBACpB,CAAC,EAAE,GAAQ,EAAE;wBACZ,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;wBAC5B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;wBACzB,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;4BACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;yBACzB;oBACF,CAAC,CAAC,CAAC;oBACH,IAAI,KAAK,GAAG,CAAC,EAAE;wBACd,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,CAAC,MAAM,CACjC,IAAI,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,EACnB,KAAK,CACL,CAAC;qBACF;yBAAM;wBACN,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;qBAC1B;oBACD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;iBAE5B;qBAAM;oBAEN,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;oBACjB,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;oBAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnB,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;oBAC5B,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;wBACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACzB;iBACD;YACF,CAAC;YAEO,WAAW;gBAClB,IAAI,IAAI,CAAC,aAAa,GAAG,CAAC,EAAE;oBAC3B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC;oBAChD,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBACnC;YACF,CAAC;YAES,kBAAkB,CAAC,SAAgB;gBAC5C,IAAI,CAAC,aAAa,CAAC,IAAI,MAAA,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC;YACzD,CAAC;YAEM,OAAO;gBACb,OAAO,IAAI,CAAC,IAAI,CAAC;YAClB,CAAC;YAEM,YAAY;gBAClB,OAAO,IAAI,CAAC,SAAS,CAAC;YACvB,CAAC;YAEM,gBAAgB;gBACtB,OAAO,IAAI,CAAC,aAAa,CAAC;YAC3B,CAAC;YAEM,SAAS;gBACf,OAAO,IAAI,CAAC,MAAM,CAAC;YACpB,CAAC;YAEM,UAAU;gBAChB,OAAO,IAAI,CAAC,OAAO,CAAC;YACrB,CAAC;YAMS,SAAS,CAAC,IAAgB,EAAE,MAAa;YACnD,CAAC;YAES,SAAS,CAAC,IAAgB;YACpC,CAAC;YAES,QAAQ,CAAC,IAAgB;YACnC,CAAC;YAES,UAAU,CAAC,IAAgB;YACrC,CAAC;YAES,WAAW,CAAC,IAAgB;YACtC,CAAC;YAES,gBAAgB,CAAC,MAAa;YACxC,CAAC;SAoBD;QApNY,eAAS,YAoNrB,CAAA;IACF,CAAC,EA3Na,KAAK,GAAL,SAAK,KAAL,SAAK,QA2NlB;AAAD,CAAC,EA3NS,GAAG,KAAH,GAAG,QA2NZ;AC3ND,IAAU,GAAG,CAwCZ;AAxCD,WAAU,GAAG;IAAC,IAAA,KAAK,CAwClB;IAxCa,WAAA,KAAK;QAElB,MAAa,cAAe,SAAQ,GAAG,CAAC,KAAK,CAAC,KAAK;YAclD,YAAY,SAAgB,EAAE,MAAa;gBAC1C,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YAC1B,CAAC;;QAdsB,uBAAQ,GAAU,yBAAyB,CAAC;QAFvD,oBAAc,iBAqC1B,CAAA;IACF,CAAC,EAxCa,KAAK,GAAL,SAAK,KAAL,SAAK,QAwClB;AAAD,CAAC,EAxCS,GAAG,KAAH,GAAG,QAwCZ;ACxCD,IAAU,GAAG,CAwIZ;AAxID,WAAU,GAAG;IAAC,IAAA,KAAK,CAwIlB;IAxIa,WAAA,KAAK;QAElB,MAAa,eAAgB,SAAQ,MAAA,SAAS;YAQ7C,YAAY,GAAU,EAAE,MAAa;gBACpC,KAAK,CAAC,MAAM,CAAC,CAAC;gBAqEP,+BAA0B,GAAG,CAAC,KAAW,EAAO,EAAE;oBACzD,IAAI,IAAI,CAAC,OAAO;wBAAE,OAAO;oBACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACrB,CAAC,CAAC;gBAEM,2BAAsB,GAAG,CAAC,KAAW,EAAO,EAAE;oBACrD,IAAI,CAAC,MAAM,EAAE,CAAC;gBACf,CAAC,CAAC;gBAEM,sBAAiB,GAAG,CAAC,KAAW,EAAO,EAAE;gBAKjD,CAAC,CAAC;gBAuBM,iBAAY,GAAG,GAAQ,EAAE;oBAChC,IAAI,CAAC,MAAM,EAAE,CAAC;gBACf,CAAC,CAAC;gBA3GD,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;gBACf,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,KAAK,EAAE,CAAC;YACd,CAAC;YAYS,SAAS,CAAC,IAAgB,EAAE,MAAa;gBAClD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBAErB,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;gBAC7C,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBAC1C,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;gBACxC,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;gBAC9B,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;gBACxB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;gBAC3B,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,KAAK,CAAC,CAAC;gBAChC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;gBAC1B,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,IAAI,CAAC,0BAA0B,CAAC,CAAC;gBAE/E,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;gBAC7D,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;gBAClB,IAAI,CAAC,OAAO,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACxC,CAAC;YAES,SAAS,CAAC,IAAgB;gBACnC,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;oBACtB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;iBAClB;gBACD,IAAI,CAAC,UAAU,EAAE,CAAC;YACnB,CAAC;YAES,QAAQ,CAAC,IAAgB;gBAClC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;oBACvB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;iBACnB;gBACD,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC;gBAC3B,IAAI,CAAC,SAAS,EAAE,CAAC;YAClB,CAAC;YAES,UAAU,CAAC,IAAgB;gBACpC,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC;YAC5B,CAAC;YAES,WAAW,CAAC,IAAgB;gBACrC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC7B,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;gBACnB,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;gBAClC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;gBAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,SAAS,EAAE,CAAC;YAClB,CAAC;YAES,gBAAgB,CAAC,MAAa;gBACvC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;YAC5B,CAAC;YAkBO,MAAM;gBACb,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;oBAClD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;wBACvB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;qBACnB;oBACD,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,IAAI,CAAC,kBAAkB,CAAC,MAAA,cAAc,CAAC,QAAQ,CAAC,CAAC;iBACjD;YACF,CAAC;YAEO,UAAU;gBACjB,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,CAAC;oBAAE,OAAO;gBACnC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;YACpE,CAAC;YAEO,SAAS;gBAChB,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,CAAC;oBAAE,OAAO;gBACnC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACtC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;YACtB,CAAC;SAoBD;QArIY,qBAAe,kBAqI3B,CAAA;IACF,CAAC,EAxIa,KAAK,GAAL,SAAK,KAAL,SAAK,QAwIlB;AAAD,CAAC,EAxIS,GAAG,KAAH,GAAG,QAwIZ;ACxID,IAAU,GAAG,CAqJZ;AArJD,WAAU,GAAG;IAAC,IAAA,KAAK,CAqJlB;IArJa,WAAA,KAAK;QAElB,MAAa,kBAAmB,SAAQ,MAAA,SAAS;YAQhD,YAAY,GAAU,EAAE,MAAa,EAAE,iBAAwB,EAAE,eAAsB;gBACtF,KAAK,CAAC,MAAM,CAAC,CAAC;gBAoEP,+BAA0B,GAAG,CAAC,KAAW,EAAO,EAAE;oBACzD,IAAI,IAAI,CAAC,OAAO;wBAAE,OAAO;oBACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACrB,CAAC,CAAC;gBAEM,2BAAsB,GAAG,CAAC,KAAW,EAAO,EAAE;oBACrD,IAAI,CAAC,MAAM,EAAE,CAAC;gBACf,CAAC,CAAC;gBAEM,sBAAiB,GAAG,CAAC,KAAW,EAAO,EAAE;gBACjD,CAAC,CAAC;gBAsCM,iBAAY,GAAG,GAAQ,EAAE;oBAChC,IAAI,CAAC,MAAM,EAAE,CAAC;gBACf,CAAC,CAAC;gBArHD,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;gBACf,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;gBAC3C,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;gBACvC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,KAAK,EAAE,CAAC;YACd,CAAC;YASS,SAAS,CAAC,IAAgB,EAAE,MAAa;gBAClD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;gBAEf,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;gBAC7C,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;gBACxC,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;gBAC9B,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;gBACxB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;gBAC3B,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,KAAK,CAAC,CAAC;gBAChC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;gBAC1B,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,IAAI,CAAC,0BAA0B,CAAC,CAAC;gBAE/E,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;gBAC7D,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;gBAClB,IAAI,CAAC,OAAO,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACxC,CAAC;YAES,SAAS,CAAC,IAAgB;gBACnC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;gBACf,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC;gBAC3B,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;oBACtB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;iBAClB;gBACD,IAAI,CAAC,UAAU,EAAE,CAAC;YACnB,CAAC;YAES,QAAQ,CAAC,IAAgB;gBAClC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;gBACf,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC;YAC/C,CAAC;YAES,UAAU,CAAC,IAAgB;gBACpC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;gBACf,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC;YAC5B,CAAC;YAES,gBAAgB,CAAC,MAAa;gBACvC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;YAC5B,CAAC;YAES,WAAW,CAAC,IAAgB;gBACrC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC7B,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;gBACnB,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;gBAClC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;gBAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,SAAS,EAAE,CAAC;YAClB,CAAC;YAcO,MAAM;gBACb,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;gBAE3C,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,WAAW,IAAI,IAAI,CAAC,iBAAiB,EAAE;oBAC9D,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;iBACf;gBAED,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,WAAW,IAAI,IAAI,CAAC,eAAe,EAAE;oBAC5D,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,iBAAiB,CAAC;oBAChD,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;wBACtB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;qBAClB;iBACD;gBAED,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;oBAC3D,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;oBACf,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;oBAC7C,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;wBACvB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;qBACnB;oBACD,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,IAAI,CAAC,kBAAkB,CAAC,MAAA,cAAc,CAAC,QAAQ,CAAC,CAAC;iBACjD;YACF,CAAC;YAEO,UAAU;gBACjB,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,CAAC;oBAAE,OAAO;gBACnC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;YACpE,CAAC;YAEO,SAAS;gBAChB,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,CAAC;oBAAE,OAAO;gBACnC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACtC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;YACtB,CAAC;SAuBD;QAlJY,wBAAkB,qBAkJ9B,CAAA;IACF,CAAC,EArJa,KAAK,GAAL,SAAK,KAAL,SAAK,QAqJlB;AAAD,CAAC,EArJS,GAAG,KAAH,GAAG,QAqJZ;ACrJD,IAAU,GAAG,CAsGZ;AAtGD,WAAU,GAAG;IAAC,IAAA,KAAK,CAsGlB;IAtGa,WAAA,KAAK;QAElB,MAAa,eAAgB,SAAQ,MAAA,SAAS;YAQ7C,YAAY,GAAU,EAAE,QAAe;gBACtC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAsDF,qBAAgB,GAAG,CAAC,KAAW,EAAO,EAAE;oBAC/C,IAAI,IAAI,CAAC,OAAO;wBAAE,OAAO;oBACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACrB,CAAC,CAAC;gBAxDD,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;gBACf,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBACzB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,KAAK,EAAE,CAAC;YACd,CAAC;YAYS,SAAS,CAAC,IAAgB,EAAE,MAAa;gBAClD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBAErB,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;gBACzB,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAC3D,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;gBACxC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;gBAE1B,IAAI,CAAC,OAAO,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACxC,CAAC;YAES,SAAS,CAAC,IAAgB;gBACnC,IAAI,CAAC,UAAU,EAAE,CAAC;YACnB,CAAC;YAES,QAAQ,CAAC,IAAgB;gBAClC,IAAI,CAAC,SAAS,EAAE,CAAC;YAClB,CAAC;YAES,UAAU,CAAC,IAAgB;gBACpC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACjB,IAAI,CAAC,UAAU,EAAE,CAAC;YACnB,CAAC;YAES,WAAW,CAAC,IAAgB;gBACrC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACjB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAE7B,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAC9D,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;gBACpB,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,EAAE,CAAC;gBACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YACnB,CAAC;YAES,gBAAgB,CAAC,MAAa;YACxC,CAAC;YAOO,UAAU;gBACjB,IAAI,IAAI,CAAC,OAAO,KAAK,CAAC,CAAC;oBAAE,OAAO;gBAChC,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE;oBACtB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,GAAQ,EAAE;wBAC1C,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;wBAClB,IAAI,CAAC,kBAAkB,CAAC,MAAA,cAAc,CAAC,QAAQ,CAAC,CAAC;oBAClD,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAClB;YACF,CAAC;YAEO,SAAS;gBAChB,IAAI,IAAI,CAAC,OAAO,KAAK,CAAC,CAAC;oBAAE,OAAO;gBAChC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAClC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;YACnB,CAAC;SAiBD;QAnGY,qBAAe,kBAmG3B,CAAA;IACF,CAAC,EAtGa,KAAK,GAAL,SAAK,KAAL,SAAK,QAsGlB;AAAD,CAAC,EAtGS,GAAG,KAAH,GAAG,QAsGZ;ACtGD,IAAU,GAAG,CAmPZ;AAnPD,WAAU,GAAG;IAAC,IAAA,KAAK,CAmPlB;IAnPa,WAAA,KAAK;QAGlB,IAAO,eAAe,GAAG,GAAG,CAAC,KAAK,CAAC,eAAe,CAAC;QAEnD,MAAa,WAAY,SAAQ,eAAe;YAQ/C,YAAY,YAAwB,IAAI,EAAE,YAAmB,cAAc;gBAC1E,KAAK,EAAE,CAAC;gBAmJD,wBAAmB,GAAG,CAAC,KAAoB,EAAO,EAAE;oBAC3D,IAAI,IAAI,CAAC,MAAM,EAAE;wBAChB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;qBACvD;yBAAM;wBACN,IAAI,CAAC,aAAa,CAAC,IAAI,MAAA,gBAAgB,CAAC,MAAA,gBAAgB,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;qBACxI;gBACF,CAAC,CAAC;gBAvJD,IAAI,CAAC,SAAS,GAAG,SAAS,IAAI,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC5D,IAAI,SAAS,KAAK,EAAE,EAAE;oBACrB,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;iBACxC;gBAED,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;gBAChB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;gBACpB,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;gBAC1B,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;gBACzB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;gBAEnB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;gBAC/B,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;gBAE7B,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;gBACxB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACrB,CAAC;YAYM,IAAI,CAAC,GAAU,EAAE,SAAgB,CAAC,EAAE,KAAY,EAAE;gBACxD,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,EAAE,EAAE,GAAa,EAAE;oBAChD,OAAO,IAAI,MAAA,eAAe,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;gBACzC,CAAC,CAAC,CAAC;YACJ,CAAC;YAEM,iBAAiB,CAAC,GAAU,EAAE,iBAAwB,EAAE,eAAsB,EAAE,SAAgB,CAAC,EAAE,KAAY,EAAE;gBACvH,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,EAAE,EAAE,GAAa,EAAE;oBAChD,OAAO,IAAI,MAAA,kBAAkB,CAAC,GAAG,EAAE,MAAM,EAAE,iBAAiB,EAAE,eAAe,CAAC,CAAC;gBAChF,CAAC,CAAC,CAAC;YACJ,CAAC;YAEM,SAAS,CAAC,GAAU,EAAE,WAAkB,CAAC,EAAE,KAAY,EAAE;gBAC/D,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,EAAE,EAAE,GAAa,EAAE;oBAChD,OAAO,IAAI,MAAA,eAAe,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;gBAC3C,CAAC,CAAC,CAAC;YACJ,CAAC;YAEO,YAAY,CAAC,GAAU,EAAE,EAAS,EAAE,WAA2B;gBACtE,IAAI,EAAE,KAAK,EAAE;oBAAE,EAAE,GAAG,GAAG,CAAC;gBACxB,IAAI,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC;oBAAE,OAAO,CAAC,CAAC,CAAC;gBAClC,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,GAAG,CAAC,CAAC;gBAE3C,MAAM,IAAI,GAAG,WAAW,EAAE,CAAC;gBAC3B,IAAI,CAAC,gBAAgB,CAAC,MAAA,cAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;gBACzE,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;gBAE3C,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC;gBAC7B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACtB,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;gBAC1B,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;gBACjC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;gBAChC,EAAE,IAAI,CAAC,SAAS,CAAC;gBAEjB,OAAO,KAAK,CAAC;YACd,CAAC;YAEM,MAAM,CAAC,EAAS;gBACtB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC;oBAAE,OAAO,KAAK,CAAC;gBACtC,IAAI,IAAI,CAAC,aAAa,KAAK,EAAE,EAAE;oBAC9B,IAAI,CAAC,IAAI,EAAE,CAAC;iBACZ;gBACD,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;gBAChC,IAAI,CAAC,mBAAmB,CAAC,MAAA,cAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;gBAC5E,IAAI,CAAC,OAAO,EAAE,CAAC;gBACf,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;gBAE3C,OAAO,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;gBAC1B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC;YAC7C,CAAC;YAEM,QAAQ,CAAC,EAAS,EAAE,SAAiB,KAAK,EAAE,OAAe,KAAK,EAAE,gBAAwB,IAAI;gBACpG,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC;YAClD,CAAC;YAEM,WAAW,CAAC,KAAY,EAAE,SAAiB,KAAK,EAAE,OAAe,KAAK,EAAE,gBAAwB,IAAI;gBAC1G,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC;YAC1E,CAAC;YAEM,IAAI,CAAC,gBAAwB,IAAI;gBACvC,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,aAAa,CAAC,CAAC;YAClD,CAAC;YAEM,OAAO;gBACb,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;gBAEzC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,EAAE;oBACxC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;oBAC3B,IAAI,IAAI,EAAE;wBACT,IAAI,CAAC,OAAO,EAAE,CAAC;qBACf;iBACD;gBACD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;gBAC5B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;gBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACvB,CAAC;YAMO,UAAU,CAAC,MAAa,EAAE,SAAiB,EAAE,MAAc,EAAE,aAAqB;gBACzF,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;oBAAE,MAAM,GAAG,EAAE,CAAC;gBAEzC,IAAI,MAAM,KAAK,IAAI,CAAC,aAAa,EAAE;oBAClC,IAAI,SAAS,IAAI,IAAI,CAAC,aAAa,KAAK,EAAE,EAAE;wBAC3C,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;wBAC5D,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;wBAChD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;wBACrB,IAAI,CAAC,OAAO,EAAE,CAAC;qBACf;oBACD,OAAO;iBACP;gBAED,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC;gBACpC,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;gBAC5B,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;gBAElF,IAAI,IAAI,CAAC,SAAS,KAAK,EAAE,EAAE;oBAC1B,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBAC5C,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,aAAa,IAAI,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACjK;gBAED,IAAI,IAAI,CAAC,aAAa,KAAK,EAAE,EAAE;oBAC9B,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;oBAChD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;oBACrB,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACvD;qBAAM;oBACN,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;iBACvB;YACF,CAAC;YAUM,YAAY;gBAClB,OAAO,IAAI,CAAC,SAAS,CAAC;YACvB,CAAC;YAEM,qBAAqB,CAAC,SAAiB;gBAC7C,IAAI,CAAC,kBAAkB,GAAG,SAAS,CAAC;YACrC,CAAC;YAEM,qBAAqB;gBAC3B,OAAO,IAAI,CAAC,kBAAkB,CAAC;YAChC,CAAC;YAEM,oBAAoB,CAAC,QAAe;gBAC1C,IAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC;YACnC,CAAC;YAEM,oBAAoB;gBAC1B,OAAO,IAAI,CAAC,iBAAiB,CAAC;YAC/B,CAAC;YAEM,YAAY;gBAClB,OAAO,IAAI,CAAC,SAAS,CAAC;YACvB,CAAC;YAEM,SAAS;gBACf,OAAO,IAAI,CAAC,MAAM,CAAC;YACpB,CAAC;YAEM,YAAY;gBAClB,OAAO,IAAI,CAAC,SAAS,CAAC;YACvB,CAAC;YAEM,gBAAgB;gBACtB,OAAO,IAAI,CAAC,aAAa,CAAC;YAC3B,CAAC;YAEM,YAAY;gBAClB,OAAO,IAAI,CAAC,SAAS,CAAC;YACvB,CAAC;YAEM,mBAAmB;gBACzB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YACjD,CAAC;YAEM,eAAe;gBACrB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC7C,CAAC;SA2BD;QA7OY,iBAAW,cA6OvB,CAAA;IACF,CAAC,EAnPa,KAAK,GAAL,SAAK,KAAL,SAAK,QAmPlB;AAAD,CAAC,EAnPS,GAAG,KAAH,GAAG,QAmPZ;ACnPD,IAAU,GAAG,CA6CZ;AA7CD,WAAU,GAAG;IAAC,IAAA,KAAK,CA6ClB;IA7Ca,WAAA,KAAK;QAElB,MAAa,gBAAiB,SAAQ,GAAG,CAAC,KAAK,CAAC,KAAK;YAcpD,YAAY,SAAgB,EAAE,MAAa,EAAE,MAAa,EAAE,SAAgB;gBAC3E,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;gBACzB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;gBACrB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;YAC5B,CAAC;;QAhBsB,yBAAQ,GAAU,2BAA2B,CAAC;QAFzD,sBAAgB,mBA0C5B,CAAA;IACF,CAAC,EA7Ca,KAAK,GAAL,SAAK,KAAL,SAAK,QA6ClB;AAAD,CAAC,EA7CS,GAAG,KAAH,GAAG,QA6CZ","file":"index.js","sourcesContent":["/// <reference path=\"../../../index.ts\" />\n\nnamespace alm.video {\n\n\timport Cmd = alm.util.Cmd;\n\timport Easing = alm.math.Easing;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class VideoClip extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(volume:number) {\n\t\t\tsuper();\n\t\t\tthis.volume = this.defaultVolume = volume;\n\t\t\tthis.isInitializing = true;\n\t\t}\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected setup():void {\n\t\t\tthis.isShowing = true;\n\t\t\tthis.isPlaying = false;\n\t\t\tthis.opacity = 1;\n\t\t\tthis.view = document.createElement('div');\n\t\t\tthis.view.classList.add('video-clip');\n\t\t\tthis.implSetup(this.view, this.volume);\n\t\t\tthis.hide(0, 0);\n\t\t\tthis.isInitializing = false;\n\t\t}\n\n\t\tpublic start(duration:number):void {\n\t\t\tif (this.isPlaying) return;\n\t\t\tthis.isPlaying = true;\n\t\t\tthis.show(duration);\n\t\t}\n\n\t\tpublic stop(duration:number, delay:number):void {\n\t\t\tif (!this.isPlaying) return;\n\t\t\tthis.isPlaying = false;\n\t\t\tthis.hide(duration, delay);\n\t\t}\n\n\t\tpublic rewind():void {\n\t\t\tthis.implRewind(this.view);\n\t\t}\n\n\t\tpublic restart():void {\n\t\t\tif (this.isPlaying) {\n\t\t\t\tthis.implRewind(this.view);\n\t\t\t\tthis.implStart(this.view);\n\t\t\t} else {\n\t\t\t\tthis.start(0);\n\t\t\t}\n\t\t}\n\n\t\tpublic dispose():void {\n\t\t\tthis.displayTween = Cmd.stop(this.displayTween);\n\t\t\tthis.implDispose(this.view);\n\t\t\tif (this.view) {\n\t\t\t\tthis.view.remove();\n\t\t\t\tthis.view = null;\n\t\t\t}\n\t\t}\n\n\t\tprivate show(duration:number):void {\n\t\t\tif (this.isShowing) return;\n\t\t\tthis.isShowing = true;\n\n\t\t\tconst view = this.getView();\n\t\t\tif (this.displayTween) {\n\t\t\t\tthis.displayTween = Cmd.stop(this.displayTween);\n\t\t\t}\n\n\t\t\tif (duration > 0) {\n\t\t\t\t// animate\n\t\t\t\tthis.displayTween = new cmd.Tween(this, { opacity: 1 }, null, duration, Easing.easeOutQuad, ():void => {\n\t\t\t\t\tview.style.display = 'block';\n\t\t\t\t\tthis.implStart(this.view);\n\t\t\t\t}, ():void => {\n\t\t\t\t\tview.style.opacity = this.opacity.toString();\n\t\t\t\t\tthis.applyVolume();\n\t\t\t\t}, ():void => {\n\t\t\t\t\tthis.displayTween = null;\n\t\t\t\t});\n\t\t\t\tthis.displayTween.execute();\n\n\t\t\t} else {\n\t\t\t\t// no animation\n\t\t\t\tview.style.display = 'block';\n\t\t\t\tthis.implStart(this.view);\n\t\t\t\tthis.opacity = 1;\n\t\t\t\tview.style.opacity = this.opacity.toString();\n\t\t\t\tthis.applyVolume();\n\t\t\t}\n\t\t}\n\n\t\tprivate hide(duration:number, delay:number):void {\n\t\t\tif (!this.isShowing) return;\n\t\t\tthis.isShowing = false;\n\n\t\t\tconst view = this.getView();\n\t\t\tif (this.displayTween) {\n\t\t\t\tthis.displayTween = Cmd.stop(this.displayTween);\n\t\t\t}\n\n\t\t\tif (duration > 0) {\n\t\t\t\t// animate\n\t\t\t\tconst tween = new cmd.Tween(this, { opacity: 0 }, null, duration, Easing.easeOutQuad, null, ():void => {\n\t\t\t\t\tview.style.opacity = this.opacity.toString();\n\t\t\t\t\tthis.applyVolume();\n\t\t\t\t}, ():void => {\n\t\t\t\t\tview.style.display = 'none';\n\t\t\t\t\tthis.displayTween = null;\n\t\t\t\t\tif (!this.isInitializing) {\n\t\t\t\t\t\tthis.implStop(this.view);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (delay > 0) {\n\t\t\t\t\tthis.displayTween = new cmd.Serial(\n\t\t\t\t\t\tnew cmd.Wait(delay),\n\t\t\t\t\t\ttween,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.displayTween = tween;\n\t\t\t\t}\n\t\t\t\tthis.displayTween.execute();\n\n\t\t\t} else {\n\t\t\t\t// no animation\n\t\t\t\tthis.opacity = 0;\n\t\t\t\tview.style.opacity = this.opacity.toString();\n\t\t\t\tthis.applyVolume();\n\t\t\t\tview.style.display = 'none';\n\t\t\t\tif (!this.isInitializing) {\n\t\t\t\t\tthis.implStop(this.view);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate applyVolume():void {\n\t\t\tif (this.defaultVolume > 0) {\n\t\t\t\tthis.volume = this.defaultVolume * this.opacity;\n\t\t\t\tthis.implUpdateVolume(this.volume);\n\t\t\t}\n\t\t}\n\n\t\tprotected dispatchVideoEvent(eventType:string):void {\n\t\t\tthis.dispatchEvent(new VideoClipEvent(eventType, this));\n\t\t}\n\n\t\tpublic getView():HTMLElement {\n\t\t\treturn this.view;\n\t\t}\n\n\t\tpublic getIsPlaying():boolean {\n\t\t\treturn this.isPlaying;\n\t\t}\n\n\t\tpublic getDefaultVolume():number {\n\t\t\treturn this.defaultVolume;\n\t\t}\n\n\t\tpublic getVolume():number {\n\t\t\treturn this.volume;\n\t\t}\n\n\t\tpublic getOpacity():number {\n\t\t\treturn this.opacity;\n\t\t}\n\n\n\n\n\n\t\tprotected implSetup(view:HTMLElement, volume:number):void {\n\t\t}\n\n\t\tprotected implStart(view:HTMLElement):void {\n\t\t}\n\n\t\tprotected implStop(view:HTMLElement):void {\n\t\t}\n\n\t\tprotected implRewind(view:HTMLElement):void {\n\t\t}\n\n\t\tprotected implDispose(view:HTMLElement):void {\n\t\t}\n\n\t\tprotected implUpdateVolume(volume:number):void {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate view:HTMLElement;\n\t\tprivate isInitializing:boolean;\n\t\tprivate isPlaying:boolean;\n\t\tprivate isShowing:boolean;\n\t\tprivate defaultVolume:number;\n\t\tprivate opacity:number;\n\t\tprivate volume:number;\n\t\tprivate displayTween:cmd.Command;\n\t}\n}\n","/// <reference path=\"../../../index.ts\" />\n\nnamespace alm.video {\n\n\texport class VideoClipEvent extends alm.event.Event {\n\n\t\tpublic static readonly complete:string = 'VideoClipEvent.complete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, target:object) {\n\t\t\tsuper(eventType, target);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}\n","/// <reference path=\"../../../index.ts\" />\n\nnamespace alm.video {\n\n\texport class SimpleVideoClip extends VideoClip {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(url:string, volume:number) {\n\t\t\tsuper(volume);\n\t\t\tthis.url = url;\n\t\t\tthis.intervalId = -1;\n\t\t\tthis.setup();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implSetup(view:HTMLElement, volume:number):void {\n\t\t\tthis.isReady = false;\n\n\t\t\tthis.video = document.createElement('video');\n\t\t\tthis.video.setAttribute('muted', 'muted');\n\t\t\tthis.video.classList.add('video-media');\n\t\t\tthis.video.playsInline = true;\n\t\t\tthis.video.controls = false;\n\t\t\tthis.video.autoplay = false;\n\t\t\tthis.video.preload = 'auto';\n\t\t\tthis.video.loop = false;\n\t\t\tthis.video.volume = volume;\n\t\t\tthis.video.muted = volume === 0;\n\t\t\tthis.video.src = this.url;\n\t\t\tthis.video.addEventListener('canplaythrough', this.videoCanplaythroughHandler);\n\t\t\t//this.video.addEventListener('timeupdate', this.videoTimeupdateHandler);\n\t\t\tthis.video.addEventListener('ended', this.videoEndedHandler);\n\t\t\tthis.video.load();\n\t\t\tthis.getView().appendChild(this.video);\n\t\t}\n\n\t\tprotected implStart(view:HTMLElement):void {\n\t\t\tif (this.video.paused) {\n\t\t\t\tthis.video.play();\n\t\t\t}\n\t\t\tthis.startTimer();\n\t\t}\n\n\t\tprotected implStop(view:HTMLElement):void {\n\t\t\tif (!this.video.paused) {\n\t\t\t\tthis.video.pause();\n\t\t\t}\n\t\t\tthis.video.currentTime = 0;\n\t\t\tthis.stopTimer();\n\t\t}\n\n\t\tprotected implRewind(view:HTMLElement):void {\n\t\t\tthis.video.currentTime = 0;\n\t\t}\n\n\t\tprotected implDispose(view:HTMLElement):void {\n\t\t\tview.removeChild(this.video);\n\t\t\tthis.video.pause();\n\t\t\tthis.video.removeAttribute('src');\n\t\t\tthis.video.load();\n\t\t\tthis.video = null;\n\t\t\tthis.stopTimer();\n\t\t}\n\n\t\tprotected implUpdateVolume(volume:number):void {\n\t\t\tthis.video.volume = volume;\n\t\t}\n\n\t\tprivate videoCanplaythroughHandler = (event:Event):void => {\n\t\t\tif (this.isReady) return;\n\t\t\tthis.isReady = true;\n\t\t};\n\n\t\tprivate videoTimeupdateHandler = (event:Event):void => {\n\t\t\tthis.update();\n\t\t};\n\n\t\tprivate videoEndedHandler = (event:Event):void => {\n\t\t\t//if (!this.video.paused) {\n\t\t\t//\tthis.video.pause();\n\t\t\t//}\n\t\t\t//this.dispatchVideoEvent(VideoClipEvent.complete);\n\t\t};\n\n\t\tprivate update():void {\n\t\t\tif (this.video.currentTime >= this.video.duration) {\n\t\t\t\tif (!this.video.paused) {\n\t\t\t\t\tthis.video.pause();\n\t\t\t\t}\n\t\t\t\tthis.stopTimer();\n\t\t\t\tthis.dispatchVideoEvent(VideoClipEvent.complete);\n\t\t\t}\n\t\t}\n\n\t\tprivate startTimer():void {\n\t\t\tif (this.intervalId !== -1) return;\n\t\t\tthis.intervalId = window.setInterval(this.timerHandler, 1000 / 60);\n\t\t}\n\n\t\tprivate stopTimer():void {\n\t\t\tif (this.intervalId === -1) return;\n\t\t\twindow.clearInterval(this.intervalId);\n\t\t\tthis.intervalId = -1;\n\t\t}\n\n\t\tprivate timerHandler = ():void => {\n\t\t\tthis.update();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate url:string;\n\t\tprivate video:HTMLVideoElement;\n\t\tprivate isReady:boolean;\n\t\tprivate intervalId:number;\n\t}\n}\n","/// <reference path=\"../../../index.ts\" />\n\nnamespace alm.video {\n\n\texport class LoopPointVideoClip extends VideoClip {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(url:string, volume:number, loopStartPosition:number, loopEndPosition:number) {\n\t\t\tsuper(volume);\n\t\t\tthis.url = url;\n\t\t\tthis.loopStartPosition = loopStartPosition;\n\t\t\tthis.loopEndPosition = loopEndPosition;\n\t\t\tthis.intervalId = -1;\n\t\t\tthis.setup();\n\t\t}\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implSetup(view:HTMLElement, volume:number):void {\n\t\t\tthis.isReady = false;\n\t\t\tthis.phase = 0;\n\n\t\t\tthis.video = document.createElement('video');\n\t\t\tthis.video.classList.add('video-media');\n\t\t\tthis.video.playsInline = true;\n\t\t\tthis.video.controls = false;\n\t\t\tthis.video.autoplay = false;\n\t\t\tthis.video.preload = 'auto';\n\t\t\tthis.video.loop = false;\n\t\t\tthis.video.volume = volume;\n\t\t\tthis.video.muted = volume === 0;\n\t\t\tthis.video.src = this.url;\n\t\t\tthis.video.addEventListener('canplaythrough', this.videoCanplaythroughHandler);\n\t\t\t//this.video.addEventListener('timeupdate', this.videoTimeupdateHandler);\n\t\t\tthis.video.addEventListener('ended', this.videoEndedHandler);\n\t\t\tthis.video.load();\n\t\t\tthis.getView().appendChild(this.video);\n\t\t}\n\n\t\tprotected implStart(view:HTMLElement):void {\n\t\t\tthis.phase = 0;\n\t\t\tthis.video.currentTime = 0;\n\t\t\tif (this.video.paused) {\n\t\t\t\tthis.video.play();\n\t\t\t}\n\t\t\tthis.startTimer();\n\t\t}\n\n\t\tprotected implStop(view:HTMLElement):void {\n\t\t\tthis.phase = 2;\n\t\t\tthis.video.currentTime = this.loopEndPosition;\n\t\t}\n\n\t\tprotected implRewind(view:HTMLElement):void {\n\t\t\tthis.phase = 0;\n\t\t\tthis.video.currentTime = 0;\n\t\t}\n\n\t\tprotected implUpdateVolume(volume:number):void {\n\t\t\tthis.video.volume = volume;\n\t\t}\n\n\t\tprotected implDispose(view:HTMLElement):void {\n\t\t\tview.removeChild(this.video);\n\t\t\tthis.video.pause();\n\t\t\tthis.video.removeAttribute('src');\n\t\t\tthis.video.load();\n\t\t\tthis.video = null;\n\t\t\tthis.stopTimer();\n\t\t}\n\n\t\tprivate videoCanplaythroughHandler = (event:Event):void => {\n\t\t\tif (this.isReady) return;\n\t\t\tthis.isReady = true;\n\t\t};\n\n\t\tprivate videoTimeupdateHandler = (event:Event):void => {\n\t\t\tthis.update();\n\t\t};\n\n\t\tprivate videoEndedHandler = (event:Event):void => {\n\t\t};\n\n\t\tprivate update():void {\n\t\t\tconst currentTime = this.video.currentTime;\n\n\t\t\tif (this.phase === 0 && currentTime >= this.loopStartPosition) {\n\t\t\t\tthis.phase = 1;\n\t\t\t}\n\n\t\t\tif (this.phase === 1 && currentTime >= this.loopEndPosition) {\n\t\t\t\tthis.video.currentTime = this.loopStartPosition;\n\t\t\t\tif (this.video.paused) {\n\t\t\t\t\tthis.video.play();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.phase === 2 && currentTime >= this.video.duration) {\n\t\t\t\tthis.phase = 3;\n\t\t\t\tthis.video.currentTime = this.video.duration;\n\t\t\t\tif (!this.video.paused) {\n\t\t\t\t\tthis.video.pause();\n\t\t\t\t}\n\t\t\t\tthis.stopTimer();\n\t\t\t\tthis.dispatchVideoEvent(VideoClipEvent.complete);\n\t\t\t}\n\t\t}\n\n\t\tprivate startTimer():void {\n\t\t\tif (this.intervalId !== -1) return;\n\t\t\tthis.intervalId = window.setInterval(this.timerHandler, 1000 / 60);\n\t\t}\n\n\t\tprivate stopTimer():void {\n\t\t\tif (this.intervalId === -1) return;\n\t\t\twindow.clearInterval(this.intervalId);\n\t\t\tthis.intervalId = -1;\n\t\t}\n\n\t\tprivate timerHandler = ():void => {\n\t\t\tthis.update();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate url:string;\n\t\tprivate video:HTMLVideoElement;\n\t\tprivate loopStartPosition:number;\n\t\tprivate loopEndPosition:number;\n\t\tprivate isReady:boolean;\n\t\tprivate phase:number;\n\t\tprivate intervalId:number;\n\t}\n}\n","/// <reference path=\"../../../index.ts\" />\n\nnamespace alm.video {\n\n\texport class StaticImageClip extends VideoClip {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(url:string, duration:number) {\n\t\t\tsuper(0);\n\t\t\tthis.url = url;\n\t\t\tthis.duration = duration;\n\t\t\tthis.timerId = -1;\n\t\t\tthis.setup();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implSetup(view:HTMLElement, volume:number):void {\n\t\t\tthis.isReady = false;\n\n\t\t\tthis.image = new Image();\n\t\t\tthis.image.addEventListener('load', this.imageLoadHandler);\n\t\t\tthis.image.classList.add('video-media');\n\t\t\tthis.image.src = this.url;\n\n\t\t\tthis.getView().appendChild(this.image);\n\t\t}\n\n\t\tprotected implStart(view:HTMLElement):void {\n\t\t\tthis.startTimer();\n\t\t}\n\n\t\tprotected implStop(view:HTMLElement):void {\n\t\t\tthis.stopTimer();\n\t\t}\n\n\t\tprotected implRewind(view:HTMLElement):void {\n\t\t\tthis.stopTimer();\n\t\t\tthis.startTimer();\n\t\t}\n\n\t\tprotected implDispose(view:HTMLElement):void {\n\t\t\tthis.stopTimer();\n\t\t\tview.removeChild(this.image);\n\n\t\t\tthis.image.removeEventListener('load', this.imageLoadHandler);\n\t\t\tthis.image.remove();\n\t\t\tthis.image.src = '';\n\t\t\tthis.image = null;\n\t\t}\n\n\t\tprotected implUpdateVolume(volume:number):void {\n\t\t}\n\n\t\tprivate imageLoadHandler = (event:Event):void => {\n\t\t\tif (this.isReady) return;\n\t\t\tthis.isReady = true;\n\t\t};\n\n\t\tprivate startTimer():void {\n\t\t\tif (this.timerId !== -1) return;\n\t\t\tif (this.duration > 0) {\n\t\t\t\tthis.timerId = window.setTimeout(():void => {\n\t\t\t\t\tthis.timerId = -1;\n\t\t\t\t\tthis.dispatchVideoEvent(VideoClipEvent.complete);\n\t\t\t\t}, this.duration);\n\t\t\t}\n\t\t}\n\n\t\tprivate stopTimer():void {\n\t\t\tif (this.timerId === -1) return;\n\t\t\twindow.clearTimeout(this.timerId);\n\t\t\tthis.timerId = -1;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate url:string;\n\t\tprivate image:HTMLImageElement;\n\t\tprivate duration:number;\n\t\tprivate isReady:boolean;\n\t\tprivate timerId:number;\n\t}\n}\n","/// <reference path=\"../../index.ts\" />\n\nnamespace alm.video {\n\n\timport Hash = alm.util.Hash;\n\timport EventDispatcher = alm.event.EventDispatcher;\n\n\texport class VideoPlayer extends EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(container:HTMLElement = null, className:string = 'video-player') {\n\t\t\tsuper();\n\n\t\t\tthis.container = container || document.createElement('div');\n\t\t\tif (className !== '') {\n\t\t\t\tthis.container.classList.add(className);\n\t\t\t}\n\n\t\t\tthis.clips = [];\n\t\t\tthis.clipsById = {};\n\t\t\tthis.clipIndicesById = {};\n\t\t\tthis.clipIdsByIndex = {};\n\t\t\tthis.clipCount = 0;\n\n\t\t\tthis.isPlaying = false;\n\t\t\tthis.isLoop = false;\n\t\t\tthis.isCrossOverEnabled = true;\n\t\t\tthis.crossFadeDuration = 500;\n\n\t\t\tthis.currentClipId = '';\n\t\t\tthis.oldClipId = '';\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic load(url:string, volume:number = 1, id:string = ''):number {\n\t\t\treturn this.loadInternal(url, id, ():VideoClip => {\n\t\t\t\treturn new SimpleVideoClip(url, volume);\n\t\t\t});\n\t\t}\n\n\t\tpublic loadWithLoopPoint(url:string, loopStartPosition:number, loopEndPosition:number, volume:number = 1, id:string = ''):number {\n\t\t\treturn this.loadInternal(url, id, ():VideoClip => {\n\t\t\t\treturn new LoopPointVideoClip(url, volume, loopStartPosition, loopEndPosition);\n\t\t\t});\n\t\t}\n\n\t\tpublic loadImage(url:string, duration:number = 0, id:string = ''):number {\n\t\t\treturn this.loadInternal(url, id, ():VideoClip => {\n\t\t\t\treturn new StaticImageClip(url, duration);\n\t\t\t});\n\t\t}\n\n\t\tprivate loadInternal(url:string, id:string, clipFactory:() => VideoClip):number {\n\t\t\tif (id === '') id = url;\n\t\t\tif (this.clipsById[id]) return -1;\n\t\t\tconsole.debug('[VideoPlayer] load :', url);\n\n\t\t\tconst clip = clipFactory();\n\t\t\tclip.addEventListener(VideoClipEvent.complete, this.clipCompleteHandler);\n\t\t\tthis.container.appendChild(clip.getView());\n\n\t\t\tconst index = this.clipCount;\n\t\t\tthis.clips.push(clip);\n\t\t\tthis.clipsById[id] = clip;\n\t\t\tthis.clipIndicesById[id] = index;\n\t\t\tthis.clipIdsByIndex[index] = id;\n\t\t\t++this.clipCount;\n\n\t\t\treturn index;\n\t\t}\n\n\t\tpublic unload(id:string):boolean {\n\t\t\tif (!this.clipsById[id]) return false;\n\t\t\tif (this.currentClipId === id) {\n\t\t\t\tthis.stop();\n\t\t\t}\n\t\t\tconst clip = this.clipsById[id];\n\t\t\tclip.removeEventListener(VideoClipEvent.complete, this.clipCompleteHandler);\n\t\t\tclip.dispose();\n\t\t\tthis.container.removeChild(clip.getView());\n\n\t\t\tdelete this.clipsById[id];\n\t\t\tthis.clips[this.clipIndicesById[id]] = null;\n\t\t}\n\n\t\tpublic playById(id:string, rewind:boolean = false, loop:boolean = false, useTransition:boolean = true):void {\n\t\t\tthis.switchClip(id, rewind, loop, useTransition);\n\t\t}\n\n\t\tpublic playByIndex(index:number, rewind:boolean = false, loop:boolean = false, useTransition:boolean = true):void {\n\t\t\tthis.switchClip(this.clipIdsByIndex[index], rewind, loop, useTransition);\n\t\t}\n\n\t\tpublic stop(useTransition:boolean = true):void {\n\t\t\tthis.switchClip('', false, false, useTransition);\n\t\t}\n\n\t\tpublic dispose():void {\n\t\t\tthis.switchClip('', false, false, false);\n\n\t\t\tfor (let i = 0; i < this.clipCount; ++i) {\n\t\t\t\tconst clip = this.clips[i];\n\t\t\t\tif (clip) {\n\t\t\t\t\tclip.dispose();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.clips = null;\n\t\t\tthis.clipsById = null;\n\t\t\tthis.clipIndicesById = null;\n\t\t\tthis.clipIdsByIndex = null;\n\t\t\tthis.container = null;\n\t\t}\n\n\n\n\n\n\t\tprivate switchClip(clipId:string, useRewind:boolean, isLoop:boolean, useTransition:boolean):void {\n\t\t\tif (!this.clipsById[clipId]) clipId = '';\n\n\t\t\tif (clipId === this.currentClipId) {\n\t\t\t\tif (useRewind && this.currentClipId !== '') {\n\t\t\t\t\tconsole.debug('[VideoPlayer] rewind :', this.currentClipId);\n\t\t\t\t\tconst clip = this.clipsById[this.currentClipId];\n\t\t\t\t\tthis.isLoop = isLoop;\n\t\t\t\t\tclip.restart();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.oldClipId = this.currentClipId;\n\t\t\tthis.currentClipId = clipId;\n\t\t\tconsole.debug('[VideoPlayer] switch :', this.oldClipId, '->', this.currentClipId);\n\n\t\t\tif (this.oldClipId !== '') {\n\t\t\t\tconst clip = this.clipsById[this.oldClipId];\n\t\t\t\tclip.stop(useTransition ? this.crossFadeDuration : 0, (useTransition && (!this.isCrossOverEnabled) && (this.currentClipId !== '')) ? this.crossFadeDuration : 0);\n\t\t\t}\n\n\t\t\tif (this.currentClipId !== '') {\n\t\t\t\tconst clip = this.clipsById[this.currentClipId];\n\t\t\t\tthis.isPlaying = true;\n\t\t\t\tthis.isLoop = isLoop;\n\t\t\t\tclip.start(useTransition ? this.crossFadeDuration : 0);\n\t\t\t} else {\n\t\t\t\tthis.isPlaying = false;\n\t\t\t}\n\t\t}\n\n\t\tprivate clipCompleteHandler = (event:VideoClipEvent):void => {\n\t\t\tif (this.isLoop) {\n\t\t\t\tthis.switchClip(this.currentClipId, true, true, false);\n\t\t\t} else {\n\t\t\t\tthis.dispatchEvent(new VideoPlayerEvent(VideoPlayerEvent.complete, this, this.currentClipId, this.clipIndicesById[this.currentClipId]));\n\t\t\t}\n\t\t};\n\n\t\tpublic getContainer():HTMLElement {\n\t\t\treturn this.container;\n\t\t}\n\n\t\tpublic setIsCrossOverEnabled(isEnabled:boolean):void {\n\t\t\tthis.isCrossOverEnabled = isEnabled;\n\t\t}\n\n\t\tpublic getIsCrossOverEnabled():boolean {\n\t\t\treturn this.isCrossOverEnabled;\n\t\t}\n\n\t\tpublic setCrossFadeDuration(duration:number):void {\n\t\t\tthis.crossFadeDuration = duration;\n\t\t}\n\n\t\tpublic getCrossFadeDuration():number {\n\t\t\treturn this.crossFadeDuration;\n\t\t}\n\n\t\tpublic getIsPlaying():boolean {\n\t\t\treturn this.isPlaying;\n\t\t}\n\n\t\tpublic getIsLoop():boolean {\n\t\t\treturn this.isLoop;\n\t\t}\n\n\t\tpublic getClipCount():number {\n\t\t\treturn this.clipCount;\n\t\t}\n\n\t\tpublic getCurrentClipId():string {\n\t\t\treturn this.currentClipId;\n\t\t}\n\n\t\tpublic getOldClipId():string {\n\t\t\treturn this.oldClipId;\n\t\t}\n\n\t\tpublic getCurrentClipIndex():number {\n\t\t\treturn this.clipIndicesById[this.currentClipId];\n\t\t}\n\n\t\tpublic getOldClipIndex():number {\n\t\t\treturn this.clipIndicesById[this.oldClipId];\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate container:HTMLElement;\n\n\t\tprivate clips:VideoClip[];\n\t\tprivate clipsById:Hash<VideoClip>;\n\t\tprivate clipIndicesById:Hash<number>;\n\t\tprivate clipIdsByIndex:Hash<string>;\n\t\tprivate clipCount:number;\n\n\t\tprivate isPlaying:boolean;\n\t\tprivate isLoop:boolean;\n\t\tprivate isCrossOverEnabled:boolean;\n\t\tprivate crossFadeDuration:number;\n\n\t\tprivate currentClipId:string;\n\t\tprivate oldClipId:string;\n\t}\n}\n","/// <reference path=\"../../index.ts\" />\n\nnamespace alm.video {\n\n\texport class VideoPlayerEvent extends alm.event.Event {\n\n\t\tpublic static readonly complete:string = 'VideoPlayerEvent.complete';\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, target:object, clipId:string, clipIndex:number) {\n\t\t\tsuper(eventType, target);\n\t\t\tthis.clipId = clipId;\n\t\t\tthis.clipIndex = clipIndex;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic readonly clipId:string;\n\t\tpublic readonly clipIndex:number;\n\t}\n}\n","/* ---------- project dependencies ---------- */\n\n/// <reference types='alumican' />\n\n\n/* ---------- project scripts ---------- */\n\n/// <reference path='alm/video/core/VideoClip.ts' />\n/// <reference path='alm/video/core/VideoClipEvent.ts' />\n/// <reference path='alm/video/core/SimpleVideoClip.ts' />\n/// <reference path='alm/video/core/LoopPointVideoClip.ts' />\n/// <reference path='alm/video/core/StaticImageClip.ts' />\n/// <reference path='alm/video/VideoPlayer.ts' />\n/// <reference path='alm/video/VideoPlayerEvent.ts' />\n"]}
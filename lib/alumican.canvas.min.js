var alm;!function(t){var h,e;h=t.canvas||(t.canvas={}),e=function(){function a(t,e){void 0===e&&(e=!0);for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var u=this;this.mouseOverHandler=function(t){u.getMousePointer(t)},this.mouseOutHandler=function(t){var e=u.getMousePointer(t);delete u.pointersById[u.mousePointerId];var n=u.pointerIds.indexOf(u.mousePointerId);-1!=n&&u.pointerIds.splice(n,1),--u.pointingCount,e.notifyLeave(),u.onPointerLeave(e)},this.mouseDownHandler=function(t){var e=u.getMousePointer(t);e.notifyTouch(),u.onPointerTouch(e)},this.mouseUpHandler=function(t){var e=u.getMousePointer(t);e.notifyRelease(),u.onPointerRelease(e)},this.mouseMoveHandler=function(t){var e=u.getMousePointer(t);e.notifyMove(t.clientX,t.clientY),u.onPointerMove(e),e.isDragging&&u.onPointerDrag(e)},this.touchStartHandler=function(t){for(var e,n,i,o=t.changedTouches,s=t.changedTouches.length,r=0;r<s;++r)e=o.item(r),n=a.getPointerId(e.identifier),i=new h.Pointer(n),u.pointersById[n]=i,u.pointerIds.push(n),++u.pointingCount,i.notifyEnter(e.clientX,e.clientY),i.notifyTouch(),u.onPointerEnter(i),u.onPointerTouch(i)},this.touchEndHandler=function(t){for(var e,n,i,o=t.changedTouches,s=t.changedTouches.length,r=0;r<s;++r){e=o.item(r),n=a.getPointerId(e.identifier),i=u.pointersById[n],delete u.pointersById[n];var h=u.pointerIds.indexOf(n);-1!=h&&u.pointerIds.splice(h,1),--u.pointingCount,i.notifyRelease(),i.notifyLeave(),u.onPointerRelease(i),u.onPointerLeave(i)}},this.touchCancelHandler=function(t){u.touchEndHandler(t)},this.touchMoveHandler=function(t){for(var e,n,i,o=t.changedTouches,s=t.changedTouches.length,r=0;r<s;++r)e=o.item(r),n=a.getPointerId(e.identifier),(i=u.pointersById[n]).notifyMove(e.clientX,e.clientY),i.isDragging&&u.onPointerDrag(i)},this.canvasTouchMoveHandler=function(t){t.originalEvent.preventDefault()},this.keyDownHandler=function(t){u.onKeyDown(t.key)},this.keyUpHandler=function(t){u.onKeyUp(t.key)},this.resizeHandler=function(t){u.resize($(window).width(),$(window).height())},this.requestAnimationFrame=function(){++u.elapsedFrameCount,u.elapsedTime=((new Date).getTime()-u.startTime)/1e3,u.onUpdate(),u.onPlatformRender(),requestAnimationFrame(u.requestAnimationFrame)},this.canvas=jQuery(t),this.isAutoResizeEnabled=e,trace("[BaseApp] canvasId : "+t),trace("[BaseApp] isAutoResizeEnabled : "+this.isAutoResizeEnabled),this.pointerIds=[],this.pointersById={},this.pointingCount=0,this.elapsedFrameCount=0,this.startTime=(new Date).getTime(),this.mousePointerId="mouse",jQuery(window).on("mouseover",this.mouseOverHandler),jQuery(window).on("mouseout",this.mouseOutHandler),jQuery(window).on("mousedown",this.mouseDownHandler),jQuery(window).on("mouseup",this.mouseUpHandler),jQuery(window).on("mousemove",this.mouseMoveHandler),jQuery(window).on("touchstart",this.touchStartHandler),jQuery(window).on("touchend",this.touchEndHandler),jQuery(window).on("touchcancel",this.touchCancelHandler),jQuery(window).on("touchmove",this.touchMoveHandler),jQuery(window).on("keydown",this.keyDownHandler),jQuery(window).on("keyup",this.keyUpHandler),this.canvas.on("touchmove",this.canvasTouchMoveHandler),requestAnimationFrame(this.requestAnimationFrame),this.onPlatformSetup.apply(this,n),this.onSetup(),this.isAutoResizeEnabled&&(jQuery(window).on("resize",this.resizeHandler),this.resizeHandler(null))}return a.prototype.onSetup=function(){},a.prototype.onUpdate=function(){},a.prototype.onPointerEnter=function(t){},a.prototype.onPointerLeave=function(t){},a.prototype.onPointerTouch=function(t){},a.prototype.onPointerRelease=function(t){},a.prototype.onPointerMove=function(t){},a.prototype.onPointerDrag=function(t){},a.prototype.onKeyDown=function(t){},a.prototype.onKeyUp=function(t){},a.prototype.onResize=function(t,e){},a.prototype.onPlatformSetup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},a.prototype.onPlatformRender=function(){},a.prototype.onPlatformResize=function(t,e){},a.prototype.resize=function(t,e){this.stageWidth=t,this.stageHeight=e,trace("[BaseApp] resize : width = "+this.stageWidth+", height = "+this.stageHeight),this.onPlatformResize(this.stageWidth,this.stageHeight),this.onResize(this.stageWidth,this.stageHeight)},a.prototype.getMousePointer=function(t){var e=this.pointersById[this.mousePointerId];return null==e&&(e=new h.Pointer(this.mousePointerId),this.pointersById[this.mousePointerId]=e,this.pointerIds.push(this.mousePointerId),++this.pointingCount,e.notifyEnter(t.clientX,t.clientY),this.onPointerEnter(e)),e},a.getPointerId=function(t){return"touch_"+t},a.prototype.getPointerIds=function(){return this.pointerIds},a.prototype.getFirstPointer=function(){return 0<this.pointingCount?this.getPointerById(this.pointerIds[0]):null},a.prototype.getLastPointer=function(){return 0<this.pointingCount?this.getPointerById(this.pointerIds[this.pointingCount-1]):null},a.prototype.getPointerById=function(t){return this.pointersById[t]},a.prototype.getPointingCount=function(){return this.pointingCount},a.prototype.getStageWidth=function(){return this.stageWidth},a.prototype.getStageHeight=function(){return this.stageHeight},a.prototype.getElapsedFrameCount=function(){return this.elapsedFrameCount},a.prototype.getElapsedTime=function(){return this.elapsedTime},a.prototype.getCanvas=function(){return this.canvas},a.prototype.getIsAutoResizeEnabled=function(){return this.isAutoResizeEnabled},a.prototype.setIsAutoResizeEnabled=function(t){this.isAutoResizeEnabled=t},a}(),h.BaseApp=e}(alm||(alm={})),function(t){var e,n;e=t.canvas||(t.canvas={}),n=function(){function t(t){this.id=t,this.isHovering=!1,this.isTouching=!1,this.isDragging=!1,this.x=0,this.y=0,this.prevX=0,this.prevY=0,this.dragX=0,this.dragY=0,this.velocityX=0,this.velocityY=0,this.touchBeginX=0,this.touchBeginY=0}return t.prototype.notifyEnter=function(t,e){this.prevX=this.x=t,this.prevY=this.y=e,this.isHovering=!0},t.prototype.notifyLeave=function(){this.isHovering=!1},t.prototype.notifyTouch=function(){this.isTouching=!0,this.touchBeginX=this.x,this.touchBeginY=this.y},t.prototype.notifyRelease=function(){this.isTouching=!1,this.isDragging=!1,this.dragX=0,this.dragY=0},t.prototype.notifyMove=function(t,e){this.prevX=this.x,this.prevY=this.y,this.x=t,this.y=e,this.velocityX=this.x-this.prevX,this.velocityY=this.y-this.prevY,this.isTouching&&(this.isDragging=!0),this.isDragging&&(this.dragX=this.x-this.touchBeginX,this.dragY=this.y-this.touchBeginY)},t}(),e.Pointer=n}(alm||(alm={}));
//# sourceMappingURL=alumican.canvas.min.js.map

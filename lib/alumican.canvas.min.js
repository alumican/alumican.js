var alm,__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var u,e;u=t.canvas||(t.canvas={}),e=function(i){function h(t,e){void 0===e&&(e=!0);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var a=i.call(this)||this;return a.mouseOverHandler=function(t){a.getMousePointer(t)},a.mouseOutHandler=function(t){var e=a.getMousePointer(t);delete a.pointersById[a.mousePointerId];var n=a.pointerIds.indexOf(a.mousePointerId);-1!=n&&a.pointerIds.splice(n,1),--a.pointingCount,e.notifyLeave(),a.onPointerLeave(e)},a.mouseDownHandler=function(t){var e=a.getMousePointer(t);e.notifyTouch(),a.onPointerTouch(e)},a.mouseUpHandler=function(t){var e=a.getMousePointer(t);e.notifyRelease(),a.onPointerRelease(e)},a.mouseMoveHandler=function(t){var e=a.getMousePointer(t);e.notifyMove(t.clientX,t.clientY),a.onPointerMove(e),e.isDragging&&a.onPointerDrag(e)},a.touchStartHandler=function(t){for(var e,n,o,i=t.changedTouches,r=t.changedTouches.length,s=0;s<r;++s)e=i.item(s),n=h.getPointerId(e.identifier),o=new u.Pointer(n),a.pointersById[n]=o,a.pointerIds.push(n),++a.pointingCount,o.notifyEnter(e.clientX,e.clientY),o.notifyTouch(),a.onPointerEnter(o),a.onPointerTouch(o)},a.touchEndHandler=function(t){for(var e,n,o,i=t.changedTouches,r=t.changedTouches.length,s=0;s<r;++s){e=i.item(s),n=h.getPointerId(e.identifier),o=a.pointersById[n],delete a.pointersById[n];var u=a.pointerIds.indexOf(n);-1!=u&&a.pointerIds.splice(u,1),--a.pointingCount,o.notifyRelease(),o.notifyLeave(),a.onPointerRelease(o),a.onPointerLeave(o)}},a.touchCancelHandler=function(t){a.touchEndHandler(t)},a.touchMoveHandler=function(t){for(var e,n,o,i=t.changedTouches,r=t.changedTouches.length,s=0;s<r;++s)e=i.item(s),n=h.getPointerId(e.identifier),(o=a.pointersById[n]).notifyMove(e.clientX,e.clientY),o.isDragging&&a.onPointerDrag(o)},a.canvasTouchMoveHandler=function(t){t.originalEvent.preventDefault()},a.keyDownHandler=function(t){a.onKeyDown(t.key)},a.keyUpHandler=function(t){a.onKeyUp(t.key)},a.resizeHandler=function(t){a.resize($(window).width(),$(window).height())},a.requestAnimationFrame=function(){++a.elapsedFrameCount,a.elapsedTime=((new Date).getTime()-a.startTime)/1e3,a.onUpdate(),a.onPlatformRender(),requestAnimationFrame(a.requestAnimationFrame)},a.canvas=jQuery(t),a.isAutoResizeEnabled=e,trace("[BaseApp] canvasId : "+t),trace("[BaseApp] isAutoResizeEnabled : "+a.isAutoResizeEnabled),a.pointerIds=[],a.pointersById={},a.pointingCount=0,a.elapsedFrameCount=0,a.startTime=(new Date).getTime(),a.mousePointerId="mouse",jQuery(window).on("mouseover",a.mouseOverHandler),jQuery(window).on("mouseout",a.mouseOutHandler),jQuery(window).on("mousedown",a.mouseDownHandler),jQuery(window).on("mouseup",a.mouseUpHandler),jQuery(window).on("mousemove",a.mouseMoveHandler),jQuery(window).on("touchstart",a.touchStartHandler),jQuery(window).on("touchend",a.touchEndHandler),jQuery(window).on("touchcancel",a.touchCancelHandler),jQuery(window).on("touchmove",a.touchMoveHandler),jQuery(window).on("keydown",a.keyDownHandler),jQuery(window).on("keyup",a.keyUpHandler),a.canvas.on("touchmove",a.canvasTouchMoveHandler),requestAnimationFrame(a.requestAnimationFrame),a.onPlatformSetup.apply(a,n),a.onSetup(),a.isAutoResizeEnabled&&(jQuery(window).on("resize",a.resizeHandler),a.resizeHandler(null)),a}return __extends(h,i),h.prototype.onSetup=function(){},h.prototype.onUpdate=function(){},h.prototype.onPointerEnter=function(t){},h.prototype.onPointerLeave=function(t){},h.prototype.onPointerTouch=function(t){},h.prototype.onPointerRelease=function(t){},h.prototype.onPointerMove=function(t){},h.prototype.onPointerDrag=function(t){},h.prototype.onKeyDown=function(t){},h.prototype.onKeyUp=function(t){},h.prototype.onResize=function(t,e){},h.prototype.onPlatformSetup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},h.prototype.onPlatformRender=function(){},h.prototype.onPlatformResize=function(t,e){},h.prototype.resize=function(t,e){this.stageWidth=t,this.stageHeight=e,trace("[BaseApp] resize : width = "+this.stageWidth+", height = "+this.stageHeight),this.onPlatformResize(this.stageWidth,this.stageHeight),this.onResize(this.stageWidth,this.stageHeight)},h.prototype.getMousePointer=function(t){var e=this.pointersById[this.mousePointerId];return null==e&&(e=new u.Pointer(this.mousePointerId),this.pointersById[this.mousePointerId]=e,this.pointerIds.push(this.mousePointerId),++this.pointingCount,e.notifyEnter(t.clientX,t.clientY),this.onPointerEnter(e)),e},h.getPointerId=function(t){return"touch_"+t},h.prototype.getPointerIds=function(){return this.pointerIds},h.prototype.getFirstPointer=function(){return 0<this.pointingCount?this.getPointerById(this.pointerIds[0]):null},h.prototype.getLastPointer=function(){return 0<this.pointingCount?this.getPointerById(this.pointerIds[this.pointingCount-1]):null},h.prototype.getPointerById=function(t){return this.pointersById[t]},h.prototype.getPointingCount=function(){return this.pointingCount},h.prototype.getStageWidth=function(){return this.stageWidth},h.prototype.getStageHeight=function(){return this.stageHeight},h.prototype.getElapsedFrameCount=function(){return this.elapsedFrameCount},h.prototype.getElapsedTime=function(){return this.elapsedTime},h.prototype.getCanvas=function(){return this.canvas},h.prototype.getIsAutoResizeEnabled=function(){return this.isAutoResizeEnabled},h.prototype.setIsAutoResizeEnabled=function(t){this.isAutoResizeEnabled=t},h}(t.event.EventDispatcher),u.BaseApp=e}(alm||(alm={})),function(t){var e,n;e=t.canvas||(t.canvas={}),n=function(){function t(t){this.id=t,this.isHovering=!1,this.isTouching=!1,this.isDragging=!1,this.x=0,this.y=0,this.prevX=0,this.prevY=0,this.dragX=0,this.dragY=0,this.velocityX=0,this.velocityY=0,this.touchBeginX=0,this.touchBeginY=0}return t.prototype.notifyEnter=function(t,e){this.prevX=this.x=t,this.prevY=this.y=e,this.isHovering=!0},t.prototype.notifyLeave=function(){this.isHovering=!1},t.prototype.notifyTouch=function(){this.isTouching=!0,this.touchBeginX=this.x,this.touchBeginY=this.y},t.prototype.notifyRelease=function(){this.isTouching=!1,this.isDragging=!1,this.dragX=0,this.dragY=0},t.prototype.notifyMove=function(t,e){this.prevX=this.x,this.prevY=this.y,this.x=t,this.y=e,this.velocityX=this.x-this.prevX,this.velocityY=this.y-this.prevY,this.isTouching&&(this.isDragging=!0),this.isDragging&&(this.dragX=this.x-this.touchBeginX,this.dragY=this.y-this.touchBeginY)},t}(),e.Pointer=n}(alm||(alm={}));
//# sourceMappingURL=alumican.canvas.min.js.map

!function(t){!function(t){var e=function(){function e(n,i){void 0===i&&(i=!0);for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var r=this;this.mouseOverHandler=function(t){r.getMousePointer(t)},this.mouseOutHandler=function(t){var e=r.getMousePointer(t);delete r.pointersById[r.mousePointerId];var n=r.pointerIds.indexOf(r.mousePointerId);-1!=n&&r.pointerIds.splice(n,1),--r.pointingCount,e.notifyLeave(),r.onPointerLeave(e)},this.mouseDownHandler=function(t){var e=r.getMousePointer(t);e.notifyTouch(),r.onPointerTouch(e)},this.mouseUpHandler=function(t){var e=r.getMousePointer(t);e.notifyRelease(),r.onPointerRelease(e)},this.mouseMoveHandler=function(t){var e=r.getMousePointer(t);e.notifyMove(t.clientX,t.clientY),r.onPointerMove(e),e.isDragging&&r.onPointerDrag(e)},this.touchStartHandler=function(n){for(var i,o,s,h=n.changedTouches,u=n.changedTouches.length,a=0;a<u;++a)i=h.item(a),o=e.getPointerId(i.identifier),s=new t.Pointer(o),r.pointersById[o]=s,r.pointerIds.push(o),++r.pointingCount,s.notifyEnter(i.clientX,i.clientY),r.onPointerEnter(s),s.notifyTouch(),r.onPointerTouch(s)},this.touchEndHandler=function(t){for(var n,i,o,s=t.changedTouches,h=t.changedTouches.length,u=0;u<h;++u){n=s.item(u),i=e.getPointerId(n.identifier),o=r.pointersById[i],delete r.pointersById[i];var a=r.pointerIds.indexOf(i);-1!=a&&r.pointerIds.splice(a,1),--r.pointingCount,o.notifyRelease(),r.onPointerRelease(o),o.notifyLeave(),r.onPointerLeave(o)}},this.touchCancelHandler=function(t){r.touchEndHandler(t)},this.touchMoveHandler=function(t){for(var n,i,o,s=t.changedTouches,h=t.changedTouches.length,u=0;u<h;++u)n=s.item(u),i=e.getPointerId(n.identifier),(o=r.pointersById[i]).notifyMove(n.clientX,n.clientY),o.isDragging&&r.onPointerDrag(o)},this.canvasTouchMoveHandler=function(t){t.originalEvent.preventDefault()},this.keyDownHandler=function(t){r.onKeyDown(t.key)},this.keyUpHandler=function(t){r.onKeyUp(t.key)},this.resizeHandler=function(t){r.resize($(window).width(),$(window).height())},this.requestAnimationFrame=function(){++r.elapsedFrameCount,r.elapsedTime=((new Date).getTime()-r.startTime)/1e3,r.onUpdate(),r.onPlatformRender(),requestAnimationFrame(r.requestAnimationFrame)},this.canvas=jQuery(n),this.isAutoResizeEnabled=i,trace("[BaseApp] canvasId : "+n),trace("[BaseApp] isAutoResizeEnabled : "+this.isAutoResizeEnabled),this.pointerIds=[],this.pointersById={},this.pointingCount=0,this.elapsedFrameCount=0,this.startTime=(new Date).getTime(),this.mousePointerId="mouse",jQuery(window).on("mouseover",this.mouseOverHandler),jQuery(window).on("mouseout",this.mouseOutHandler),jQuery(window).on("mousedown",this.mouseDownHandler),jQuery(window).on("mouseup",this.mouseUpHandler),jQuery(window).on("mousemove",this.mouseMoveHandler),jQuery(window).on("touchstart",this.touchStartHandler),jQuery(window).on("touchend",this.touchEndHandler),jQuery(window).on("touchcancel",this.touchCancelHandler),jQuery(window).on("touchmove",this.touchMoveHandler),jQuery(window).on("keydown",this.keyDownHandler),jQuery(window).on("keyup",this.keyUpHandler),this.canvas.on("touchmove",this.canvasTouchMoveHandler),requestAnimationFrame(this.requestAnimationFrame),this.onPlatformSetup.apply(this,o),this.onSetup(),this.isAutoResizeEnabled&&(jQuery(window).on("resize",this.resizeHandler),this.resizeHandler(null))}return e.prototype.onSetup=function(){},e.prototype.onUpdate=function(){},e.prototype.onPointerEnter=function(t){},e.prototype.onPointerLeave=function(t){},e.prototype.onPointerTouch=function(t){},e.prototype.onPointerRelease=function(t){},e.prototype.onPointerMove=function(t){},e.prototype.onPointerDrag=function(t){},e.prototype.onKeyDown=function(t){},e.prototype.onKeyUp=function(t){},e.prototype.onResize=function(t,e){},e.prototype.onPlatformSetup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.onPlatformRender=function(){},e.prototype.onPlatformResize=function(t,e){},e.prototype.resize=function(t,e){this.stageWidth=t,this.stageHeight=e,trace("[BaseApp] resize : width = "+this.stageWidth+", height = "+this.stageHeight),this.onPlatformResize(this.stageWidth,this.stageHeight),this.onResize(this.stageWidth,this.stageHeight)},e.prototype.getMousePointer=function(e){var n=this.pointersById[this.mousePointerId];return null==n&&(n=new t.Pointer(this.mousePointerId),this.pointersById[this.mousePointerId]=n,this.pointerIds.push(this.mousePointerId),++this.pointingCount,n.notifyEnter(e.clientX,e.clientY),this.onPointerEnter(n)),n},e.getPointerId=function(t){return"touch_"+t},e.prototype.getPointerIds=function(){return this.pointerIds},e.prototype.getFirstPointer=function(){return this.pointingCount>0?this.getPointerById(this.pointerIds[0]):null},e.prototype.getLastPointer=function(){return this.pointingCount>0?this.getPointerById(this.pointerIds[this.pointingCount-1]):null},e.prototype.getPointerById=function(t){return this.pointersById[t]},e.prototype.getPointingCount=function(){return this.pointingCount},e.prototype.getStageWidth=function(){return this.stageWidth},e.prototype.getStageHeight=function(){return this.stageHeight},e.prototype.getElapsedFrameCount=function(){return this.elapsedFrameCount},e.prototype.getElapsedTime=function(){return this.elapsedTime},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getIsAutoResizeEnabled=function(){return this.isAutoResizeEnabled},e.prototype.setIsAutoResizeEnabled=function(t){this.isAutoResizeEnabled=t},e}();t.BaseApp=e}(t.canvas||(t.canvas={}))}(alm||(alm={}));var alm;!function(t){!function(t){var e=function(){function t(t){this.id=t,this.isHovering=!1,this.isTouching=!1,this.isDragging=!1,this.x=0,this.y=0,this.prevX=0,this.prevY=0,this.dragX=0,this.dragY=0,this.velocityX=0,this.velocityY=0,this.touchBeginX=0,this.touchBeginY=0}return t.prototype.notifyEnter=function(t,e){this.prevX=this.x=t,this.prevY=this.y=e,this.isHovering=!0},t.prototype.notifyLeave=function(){this.isHovering=!1},t.prototype.notifyTouch=function(){this.isTouching=!0,this.touchBeginX=this.x,this.touchBeginY=this.y},t.prototype.notifyRelease=function(){this.isTouching=!1,this.isDragging=!1,this.dragX=0,this.dragY=0},t.prototype.notifyMove=function(t,e){this.prevX=this.x,this.prevY=this.y,this.x=t,this.y=e,this.velocityX=this.x-this.prevX,this.velocityY=this.y-this.prevY,this.isTouching&&(this.isDragging=!0),this.isDragging&&(this.dragX=this.x-this.touchBeginX,this.dragY=this.y-this.touchBeginY)},t}();t.Pointer=e}(t.canvas||(t.canvas={}))}(alm||(alm={}));
//# sourceMappingURL=alumican.canvas.min.js.map
